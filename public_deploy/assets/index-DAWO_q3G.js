(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kx={exports:{}},nh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function yV(){if(_N)return nh;_N=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return nh.Fragment=e,nh.jsx=n,nh.jsxs=n,nh}var AN;function xV(){return AN||(AN=1,Kx.exports=yV()),Kx.exports}var x=xV(),Wx={exports:{}},tn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN;function vV(){if(TN)return tn;TN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),A=Symbol.iterator;function N(ce){return ce===null||typeof ce!="object"?null:(ce=A&&ce[A]||ce["@@iterator"],typeof ce=="function"?ce:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function L(ce,fe,Ae){this.props=ce,this.context=fe,this.refs=R,this.updater=Ae||P}L.prototype.isReactComponent={},L.prototype.setState=function(ce,fe){if(typeof ce!="object"&&typeof ce!="function"&&ce!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ce,fe,"setState")},L.prototype.forceUpdate=function(ce){this.updater.enqueueForceUpdate(this,ce,"forceUpdate")};function U(){}U.prototype=L.prototype;function F(ce,fe,Ae){this.props=ce,this.context=fe,this.refs=R,this.updater=Ae||P}var q=F.prototype=new U;q.constructor=F,O(q,L.prototype),q.isPureReactComponent=!0;var H=Array.isArray;function G(){}var B={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function V(ce,fe,Ae){var He=Ae.ref;return{$$typeof:t,type:ce,key:fe,ref:He!==void 0?He:null,props:Ae}}function ee(ce,fe){return V(ce.type,fe,ce.props)}function Q(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===t}function X(ce){var fe={"=":"=0",":":"=2"};return"$"+ce.replace(/[=:]/g,function(Ae){return fe[Ae]})}var K=/\/+/g;function ge(ce,fe){return typeof ce=="object"&&ce!==null&&ce.key!=null?X(""+ce.key):fe.toString(36)}function re(ce){switch(ce.status){case"fulfilled":return ce.value;case"rejected":throw ce.reason;default:switch(typeof ce.status=="string"?ce.then(G,G):(ce.status="pending",ce.then(function(fe){ce.status==="pending"&&(ce.status="fulfilled",ce.value=fe)},function(fe){ce.status==="pending"&&(ce.status="rejected",ce.reason=fe)})),ce.status){case"fulfilled":return ce.value;case"rejected":throw ce.reason}}throw ce}function te(ce,fe,Ae,He,ot){var Ye=typeof ce;(Ye==="undefined"||Ye==="boolean")&&(ce=null);var Ce=!1;if(ce===null)Ce=!0;else switch(Ye){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(ce.$$typeof){case t:case e:Ce=!0;break;case g:return Ce=ce._init,te(Ce(ce._payload),fe,Ae,He,ot)}}if(Ce)return ot=ot(ce),Ce=He===""?"."+ge(ce,0):He,H(ot)?(Ae="",Ce!=null&&(Ae=Ce.replace(K,"$&/")+"/"),te(ot,fe,Ae,"",function(ct){return ct})):ot!=null&&(Q(ot)&&(ot=ee(ot,Ae+(ot.key==null||ce&&ce.key===ot.key?"":(""+ot.key).replace(K,"$&/")+"/")+Ce)),fe.push(ot)),1;Ce=0;var et=He===""?".":He+":";if(H(ce))for(var Be=0;Be<ce.length;Be++)He=ce[Be],Ye=et+ge(He,Be),Ce+=te(He,fe,Ae,Ye,ot);else if(Be=N(ce),typeof Be=="function")for(ce=Be.call(ce),Be=0;!(He=ce.next()).done;)He=He.value,Ye=et+ge(He,Be++),Ce+=te(He,fe,Ae,Ye,ot);else if(Ye==="object"){if(typeof ce.then=="function")return te(re(ce),fe,Ae,He,ot);throw fe=String(ce),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(ce).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function se(ce,fe,Ae){if(ce==null)return ce;var He=[],ot=0;return te(ce,He,"","",function(Ye){return fe.call(Ae,Ye,ot++)}),He}function _e(ce){if(ce._status===-1){var fe=ce._result;fe=fe(),fe.then(function(Ae){(ce._status===0||ce._status===-1)&&(ce._status=1,ce._result=Ae)},function(Ae){(ce._status===0||ce._status===-1)&&(ce._status=2,ce._result=Ae)}),ce._status===-1&&(ce._status=0,ce._result=fe)}if(ce._status===1)return ce._result.default;throw ce._result}var ke=typeof reportError=="function"?reportError:function(ce){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ce=="object"&&ce!==null&&typeof ce.message=="string"?String(ce.message):String(ce),error:ce});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ce);return}console.error(ce)},Ke={map:se,forEach:function(ce,fe,Ae){se(ce,function(){fe.apply(this,arguments)},Ae)},count:function(ce){var fe=0;return se(ce,function(){fe++}),fe},toArray:function(ce){return se(ce,function(fe){return fe})||[]},only:function(ce){if(!Q(ce))throw Error("React.Children.only expected to receive a single React element child.");return ce}};return tn.Activity=v,tn.Children=Ke,tn.Component=L,tn.Fragment=n,tn.Profiler=i,tn.PureComponent=F,tn.StrictMode=r,tn.Suspense=h,tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,tn.__COMPILER_RUNTIME={__proto__:null,c:function(ce){return B.H.useMemoCache(ce)}},tn.cache=function(ce){return function(){return ce.apply(null,arguments)}},tn.cacheSignal=function(){return null},tn.cloneElement=function(ce,fe,Ae){if(ce==null)throw Error("The argument must be a React element, but you passed "+ce+".");var He=O({},ce.props),ot=ce.key;if(fe!=null)for(Ye in fe.key!==void 0&&(ot=""+fe.key),fe)!z.call(fe,Ye)||Ye==="key"||Ye==="__self"||Ye==="__source"||Ye==="ref"&&fe.ref===void 0||(He[Ye]=fe[Ye]);var Ye=arguments.length-2;if(Ye===1)He.children=Ae;else if(1<Ye){for(var Ce=Array(Ye),et=0;et<Ye;et++)Ce[et]=arguments[et+2];He.children=Ce}return V(ce.type,ot,He)},tn.createContext=function(ce){return ce={$$typeof:o,_currentValue:ce,_currentValue2:ce,_threadCount:0,Provider:null,Consumer:null},ce.Provider=ce,ce.Consumer={$$typeof:a,_context:ce},ce},tn.createElement=function(ce,fe,Ae){var He,ot={},Ye=null;if(fe!=null)for(He in fe.key!==void 0&&(Ye=""+fe.key),fe)z.call(fe,He)&&He!=="key"&&He!=="__self"&&He!=="__source"&&(ot[He]=fe[He]);var Ce=arguments.length-2;if(Ce===1)ot.children=Ae;else if(1<Ce){for(var et=Array(Ce),Be=0;Be<Ce;Be++)et[Be]=arguments[Be+2];ot.children=et}if(ce&&ce.defaultProps)for(He in Ce=ce.defaultProps,Ce)ot[He]===void 0&&(ot[He]=Ce[He]);return V(ce,Ye,ot)},tn.createRef=function(){return{current:null}},tn.forwardRef=function(ce){return{$$typeof:u,render:ce}},tn.isValidElement=Q,tn.lazy=function(ce){return{$$typeof:g,_payload:{_status:-1,_result:ce},_init:_e}},tn.memo=function(ce,fe){return{$$typeof:f,type:ce,compare:fe===void 0?null:fe}},tn.startTransition=function(ce){var fe=B.T,Ae={};B.T=Ae;try{var He=ce(),ot=B.S;ot!==null&&ot(Ae,He),typeof He=="object"&&He!==null&&typeof He.then=="function"&&He.then(G,ke)}catch(Ye){ke(Ye)}finally{fe!==null&&Ae.types!==null&&(fe.types=Ae.types),B.T=fe}},tn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},tn.use=function(ce){return B.H.use(ce)},tn.useActionState=function(ce,fe,Ae){return B.H.useActionState(ce,fe,Ae)},tn.useCallback=function(ce,fe){return B.H.useCallback(ce,fe)},tn.useContext=function(ce){return B.H.useContext(ce)},tn.useDebugValue=function(){},tn.useDeferredValue=function(ce,fe){return B.H.useDeferredValue(ce,fe)},tn.useEffect=function(ce,fe){return B.H.useEffect(ce,fe)},tn.useEffectEvent=function(ce){return B.H.useEffectEvent(ce)},tn.useId=function(){return B.H.useId()},tn.useImperativeHandle=function(ce,fe,Ae){return B.H.useImperativeHandle(ce,fe,Ae)},tn.useInsertionEffect=function(ce,fe){return B.H.useInsertionEffect(ce,fe)},tn.useLayoutEffect=function(ce,fe){return B.H.useLayoutEffect(ce,fe)},tn.useMemo=function(ce,fe){return B.H.useMemo(ce,fe)},tn.useOptimistic=function(ce,fe){return B.H.useOptimistic(ce,fe)},tn.useReducer=function(ce,fe,Ae){return B.H.useReducer(ce,fe,Ae)},tn.useRef=function(ce){return B.H.useRef(ce)},tn.useState=function(ce){return B.H.useState(ce)},tn.useSyncExternalStore=function(ce,fe,Ae){return B.H.useSyncExternalStore(ce,fe,Ae)},tn.useTransition=function(){return B.H.useTransition()},tn.version="19.2.4",tn}var SN;function gT(){return SN||(SN=1,Wx.exports=vV()),Wx.exports}var le=gT();const we=pr(le);var Xx={exports:{}},rh={},Qx={exports:{}},Jx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function bV(){return CN||(CN=1,(function(t){function e(te,se){var _e=te.length;te.push(se);e:for(;0<_e;){var ke=_e-1>>>1,Ke=te[ke];if(0<i(Ke,se))te[ke]=se,te[_e]=Ke,_e=ke;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var se=te[0],_e=te.pop();if(_e!==se){te[0]=_e;e:for(var ke=0,Ke=te.length,ce=Ke>>>1;ke<ce;){var fe=2*(ke+1)-1,Ae=te[fe],He=fe+1,ot=te[He];if(0>i(Ae,_e))He<Ke&&0>i(ot,Ae)?(te[ke]=ot,te[He]=_e,ke=He):(te[ke]=Ae,te[fe]=_e,ke=fe);else if(He<Ke&&0>i(ot,_e))te[ke]=ot,te[He]=_e,ke=He;else break e}}return se}function i(te,se){var _e=te.sortIndex-se.sortIndex;return _e!==0?_e:te.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var h=[],f=[],g=1,v=null,A=3,N=!1,P=!1,O=!1,R=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function q(te){for(var se=n(f);se!==null;){if(se.callback===null)r(f);else if(se.startTime<=te)r(f),se.sortIndex=se.expirationTime,e(h,se);else break;se=n(f)}}function H(te){if(O=!1,q(te),!P)if(n(h)!==null)P=!0,G||(G=!0,X());else{var se=n(f);se!==null&&re(H,se.startTime-te)}}var G=!1,B=-1,z=5,V=-1;function ee(){return R?!0:!(t.unstable_now()-V<z)}function Q(){if(R=!1,G){var te=t.unstable_now();V=te;var se=!0;try{e:{P=!1,O&&(O=!1,U(B),B=-1),N=!0;var _e=A;try{t:{for(q(te),v=n(h);v!==null&&!(v.expirationTime>te&&ee());){var ke=v.callback;if(typeof ke=="function"){v.callback=null,A=v.priorityLevel;var Ke=ke(v.expirationTime<=te);if(te=t.unstable_now(),typeof Ke=="function"){v.callback=Ke,q(te),se=!0;break t}v===n(h)&&r(h),q(te)}else r(h);v=n(h)}if(v!==null)se=!0;else{var ce=n(f);ce!==null&&re(H,ce.startTime-te),se=!1}}break e}finally{v=null,A=_e,N=!1}se=void 0}}finally{se?X():G=!1}}}var X;if(typeof F=="function")X=function(){F(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ge=K.port2;K.port1.onmessage=Q,X=function(){ge.postMessage(null)}}else X=function(){L(Q,0)};function re(te,se){B=L(function(){te(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function(te){switch(A){case 1:case 2:case 3:var se=3;break;default:se=A}var _e=A;A=se;try{return te()}finally{A=_e}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(te,se){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var _e=A;A=te;try{return se()}finally{A=_e}},t.unstable_scheduleCallback=function(te,se,_e){var ke=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ke+_e:ke):_e=ke,te){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=_e+Ke,te={id:g++,callback:se,priorityLevel:te,startTime:_e,expirationTime:Ke,sortIndex:-1},_e>ke?(te.sortIndex=_e,e(f,te),n(h)===null&&te===n(f)&&(O?(U(B),B=-1):O=!0,re(H,_e-ke))):(te.sortIndex=Ke,e(h,te),P||N||(P=!0,G||(G=!0,X()))),te},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(te){var se=A;return function(){var _e=A;A=se;try{return te.apply(this,arguments)}finally{A=_e}}}})(Jx)),Jx}var IN;function wV(){return IN||(IN=1,Qx.exports=bV()),Qx.exports}var Zx={exports:{}},Qi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function EV(){if(NN)return Qi;NN=1;var t=gT();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:h,containerInfo:f,implementation:g}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Qi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qi.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,g)},Qi.flushSync=function(h){var f=o.T,g=r.p;try{if(o.T=null,r.p=2,h)return h()}finally{o.T=f,r.p=g,r.d.f()}},Qi.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Qi.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Qi.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,v=u(g,f.crossOrigin),A=typeof f.integrity=="string"?f.integrity:void 0,N=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:A,fetchPriority:N}):g==="script"&&r.d.X(h,{crossOrigin:v,integrity:A,fetchPriority:N,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Qi.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Qi.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=u(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Qi.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Qi.requestFormReset=function(h){r.d.r(h)},Qi.unstable_batchedUpdates=function(h,f){return h(f)},Qi.useFormState=function(h,f,g){return o.H.useFormState(h,f,g)},Qi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Qi.version="19.2.4",Qi}var RN;function _V(){if(RN)return Zx.exports;RN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zx.exports=EV(),Zx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function AV(){if(MN)return rh;MN=1;var t=wV(),e=gT(),n=_V();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,m=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(m=c.return),s=c.return;while(s)}return c.tag===3?m:null}function o(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function f(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(r(188));return c!==s?null:s}for(var m=s,w=c;;){var I=m.return;if(I===null)break;var D=I.alternate;if(D===null){if(w=I.return,w!==null){m=w;continue}break}if(I.child===D.child){for(D=I.child;D;){if(D===m)return h(I),s;if(D===w)return h(I),c;D=D.sibling}throw Error(r(188))}if(m.return!==w.return)m=I,w=D;else{for(var Y=!1,ie=I.child;ie;){if(ie===m){Y=!0,m=I,w=D;break}if(ie===w){Y=!0,w=I,m=D;break}ie=ie.sibling}if(!Y){for(ie=D.child;ie;){if(ie===m){Y=!0,m=D,w=I;break}if(ie===w){Y=!0,w=D,m=I;break}ie=ie.sibling}if(!Y)throw Error(r(189))}}if(m.alternate!==w)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?s:c}function g(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=g(s),c!==null)return c;s=s.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case L:return"Profiler";case R:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case F:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case q:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return c=s.displayName||null,c!==null?c:ge(s.type)||"Memo";case z:c=s._payload,s=s._init;try{return ge(s(c))}catch{}}return null}var re=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ke=[],Ke=-1;function ce(s){return{current:s}}function fe(s){0>Ke||(s.current=ke[Ke],ke[Ke]=null,Ke--)}function Ae(s,c){Ke++,ke[Ke]=s.current,s.current=c}var He=ce(null),ot=ce(null),Ye=ce(null),Ce=ce(null);function et(s,c){switch(Ae(Ye,c),Ae(ot,s),Ae(He,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?$I(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=$I(c),s=YI(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}fe(He),Ae(He,s)}function Be(){fe(He),fe(ot),fe(Ye)}function ct(s){s.memoizedState!==null&&Ae(Ce,s);var c=He.current,m=YI(c,s.type);c!==m&&(Ae(ot,s),Ae(He,m))}function rt(s){ot.current===s&&(fe(He),fe(ot)),Ce.current===s&&(fe(Ce),Jf._currentValue=_e)}var je,yt;function wt(s){if(je===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);je=c&&c[1]||"",yt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+s+yt}var Le=!1;function he(s,c){if(!s||Le)return"";Le=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(c){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ge){var Ue=Ge}Reflect.construct(s,[],tt)}else{try{tt.call()}catch(Ge){Ue=Ge}s.call(tt.prototype)}}else{try{throw Error()}catch(Ge){Ue=Ge}(tt=s())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ge){if(Ge&&Ue&&typeof Ge.stack=="string")return[Ge.stack,Ue.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=w.DetermineComponentFrameRoot(),Y=D[0],ie=D[1];if(Y&&ie){var pe=Y.split(`
`),Oe=ie.split(`
`);for(I=w=0;w<pe.length&&!pe[w].includes("DetermineComponentFrameRoot");)w++;for(;I<Oe.length&&!Oe[I].includes("DetermineComponentFrameRoot");)I++;if(w===pe.length||I===Oe.length)for(w=pe.length-1,I=Oe.length-1;1<=w&&0<=I&&pe[w]!==Oe[I];)I--;for(;1<=w&&0<=I;w--,I--)if(pe[w]!==Oe[I]){if(w!==1||I!==1)do if(w--,I--,0>I||pe[w]!==Oe[I]){var Xe=`
`+pe[w].replace(" at new "," at ");return s.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",s.displayName)),Xe}while(1<=w&&0<=I);break}}}finally{Le=!1,Error.prepareStackTrace=m}return(m=s?s.displayName||s.name:"")?wt(m):""}function ve(s,c){switch(s.tag){case 26:case 27:case 5:return wt(s.type);case 16:return wt("Lazy");case 13:return s.child!==c&&c!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return he(s.type,!1);case 11:return he(s.type.render,!1);case 1:return he(s.type,!0);case 31:return wt("Activity");default:return""}}function $e(s){try{var c="",m=null;do c+=ve(s,m),m=s,s=s.return;while(s);return c}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var We=Object.prototype.hasOwnProperty,ye=t.unstable_scheduleCallback,Ie=t.unstable_cancelCallback,mt=t.unstable_shouldYield,dt=t.unstable_requestPaint,Ee=t.unstable_now,nt=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,Tt=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,Ht=t.unstable_LowPriority,Pr=t.unstable_IdlePriority,di=t.log,fi=t.unstable_setDisableYieldValue,un=null,it=null;function pn(s){if(typeof di=="function"&&fi(s),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(un,s)}catch{}}var Yt=Math.clz32?Math.clz32:$i,Mn=Math.log,Ei=Math.LN2;function $i(s){return s>>>=0,s===0?32:31-(Mn(s)/Ei|0)|0}var Te=256,lt=262144,zt=4194304;function Ot(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function wn(s,c,m){var w=s.pendingLanes;if(w===0)return 0;var I=0,D=s.suspendedLanes,Y=s.pingedLanes;s=s.warmLanes;var ie=w&134217727;return ie!==0?(w=ie&~D,w!==0?I=Ot(w):(Y&=ie,Y!==0?I=Ot(Y):m||(m=ie&~s,m!==0&&(I=Ot(m))))):(ie=w&~D,ie!==0?I=Ot(ie):Y!==0?I=Ot(Y):m||(m=w&~s,m!==0&&(I=Ot(m)))),I===0?0:c!==0&&c!==I&&(c&D)===0&&(D=I&-I,m=c&-c,D>=m||D===32&&(m&4194048)!==0)?c:I}function an(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function ir(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function En(){var s=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),s}function Gn(s){for(var c=[],m=0;31>m;m++)c.push(s);return c}function Cr(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bn(s,c,m,w,I,D){var Y=s.pendingLanes;s.pendingLanes=m,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=m,s.entangledLanes&=m,s.errorRecoveryDisabledLanes&=m,s.shellSuspendCounter=0;var ie=s.entanglements,pe=s.expirationTimes,Oe=s.hiddenUpdates;for(m=Y&~m;0<m;){var Xe=31-Yt(m),tt=1<<Xe;ie[Xe]=0,pe[Xe]=-1;var Ue=Oe[Xe];if(Ue!==null)for(Oe[Xe]=null,Xe=0;Xe<Ue.length;Xe++){var Ge=Ue[Xe];Ge!==null&&(Ge.lane&=-536870913)}m&=~tt}w!==0&&no(s,w,0),D!==0&&I===0&&s.tag!==0&&(s.suspendedLanes|=D&~(Y&~c))}function no(s,c,m){s.pendingLanes|=c,s.suspendedLanes&=~c;var w=31-Yt(c);s.entangledLanes|=c,s.entanglements[w]=s.entanglements[w]|1073741824|m&261930}function _i(s,c){var m=s.entangledLanes|=c;for(s=s.entanglements;m;){var w=31-Yt(m),I=1<<w;I&c|s[w]&c&&(s[w]|=c),m&=~I}}function ia(s,c){var m=c&-c;return m=(m&42)!==0?1:Er(m),(m&(s.suspendedLanes|c))!==0?0:m}function Er(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Yi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ir(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:gN(s.type))}function Et(s,c){var m=se.p;try{return se.p=s,c()}finally{se.p=m}}var ni=Math.random().toString(36).slice(2),ar="__reactFiber$"+ni,Dn="__reactProps$"+ni,hi="__reactContainer$"+ni,aa="__reactEvents$"+ni,Ai="__reactListeners$"+ni,Di="__reactHandles$"+ni,de="__reactResources$"+ni,ht="__reactMarker$"+ni;function Nt(s){delete s[ar],delete s[Dn],delete s[aa],delete s[Ai],delete s[Di]}function Lt(s){var c=s[ar];if(c)return c;for(var m=s.parentNode;m;){if(c=m[hi]||m[ar]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(s=eN(s);s!==null;){if(m=s[ar])return m;s=eN(s)}return c}s=m,m=s.parentNode}return null}function gt(s){if(s=s[ar]||s[hi]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function Qn(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function gn(s){var c=s[de];return c||(c=s[de]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function mn(s){s[ht]=!0}var Ve=new Set,kr={};function Qt(s,c){pi(s,c),pi(s+"Capture",c)}function pi(s,c){for(kr[s]=c,s=0;s<c.length;s++)Ve.add(c[s])}var bf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_n={},yn={};function dn(s){return We.call(yn,s)?!0:We.call(_n,s)?!1:bf.test(s)?yn[s]=!0:(_n[s]=!0,!1)}function ro(s,c,m){if(dn(c))if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var w=c.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+m)}}function io(s,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+m)}}function Ki(s,c,m,w){if(w===null)s.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(m);return}s.setAttributeNS(c,m,""+w)}}function In(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ba(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function wf(s,c,m){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var I=w.get,D=w.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return I.call(this)},set:function(Y){m=""+Y,D.call(this,Y)}}),Object.defineProperty(s,c,{enumerable:w.enumerable}),{getValue:function(){return m},setValue:function(Y){m=""+Y},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function or(s){if(!s._valueTracker){var c=Ba(s)?"checked":"value";s._valueTracker=wf(s,c,""+s[c])}}function ya(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return s&&(w=Ba(s)?s.checked?"true":"false":s.value),s=w,s!==m?(c.setValue(s),!0):!1}function al(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Wi=/[\n"\\]/g;function Wt(s){return s.replace(Wi,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function _r(s,c,m,w,I,D,Y,ie){s.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.type=Y:s.removeAttribute("type"),c!=null?Y==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+In(c)):s.value!==""+In(c)&&(s.value=""+In(c)):Y!=="submit"&&Y!=="reset"||s.removeAttribute("value"),c!=null?oe(s,Y,In(c)):m!=null?oe(s,Y,In(m)):w!=null&&s.removeAttribute("value"),I==null&&D!=null&&(s.defaultChecked=!!D),I!=null&&(s.checked=I&&typeof I!="function"&&typeof I!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?s.name=""+In(ie):s.removeAttribute("name")}function Me(s,c,m,w,I,D,Y,ie){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.type=D),c!=null||m!=null){if(!(D!=="submit"&&D!=="reset"||c!=null)){or(s);return}m=m!=null?""+In(m):"",c=c!=null?""+In(c):m,ie||c===s.value||(s.value=c),s.defaultValue=c}w=w??I,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=ie?s.checked:!!w,s.defaultChecked=!!w,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(s.name=Y),or(s)}function oe(s,c,m){c==="number"&&al(s.ownerDocument)===s||s.defaultValue===""+m||(s.defaultValue=""+m)}function xt(s,c,m,w){if(s=s.options,c){c={};for(var I=0;I<m.length;I++)c["$"+m[I]]=!0;for(m=0;m<s.length;m++)I=c.hasOwnProperty("$"+s[m].value),s[m].selected!==I&&(s[m].selected=I),I&&w&&(s[m].defaultSelected=!0)}else{for(m=""+In(m),c=null,I=0;I<s.length;I++){if(s[I].value===m){s[I].selected=!0,w&&(s[I].defaultSelected=!0);return}c!==null||s[I].disabled||(c=s[I])}c!==null&&(c.selected=!0)}}function vr(s,c,m){if(c!=null&&(c=""+In(c),c!==s.value&&(s.value=c),m==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=m!=null?""+In(m):""}function Qr(s,c,m,w){if(c==null){if(w!=null){if(m!=null)throw Error(r(92));if(re(w)){if(1<w.length)throw Error(r(93));w=w[0]}m=w}m==null&&(m=""),c=m}m=In(c),s.defaultValue=m,w=s.textContent,w===m&&w!==""&&w!==null&&(s.value=w),or(s)}function xa(s,c){if(c){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=c;return}}s.textContent=c}var cc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ti(s,c,m){var w=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":w?s.setProperty(c,m):typeof m!="number"||m===0||cc.has(c)?c==="float"?s.cssFloat=m:s[c]=(""+m).trim():s[c]=m+"px"}function Bt(s,c,m){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||c!=null&&c.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var I in c)w=c[I],c.hasOwnProperty(I)&&m[I]!==w&&Ti(s,I,w)}else for(var D in c)c.hasOwnProperty(D)&&Ti(s,D,c[D])}function Jn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ef=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function va(s){return Ef.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Lr(){}var Ko=null;function ol(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var sr=null,mi=null;function ja(s){var c=gt(s);if(c&&(s=c.stateNode)){var m=s[Dn]||null;e:switch(s=c.stateNode,c.type){case"input":if(_r(s,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Wt(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==s&&w.form===s.form){var I=w[Dn]||null;if(!I)throw Error(r(90));_r(w,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(c=0;c<m.length;c++)w=m[c],w.form===s.form&&ya(w)}break e;case"textarea":vr(s,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&xt(s,!!m.multiple,c,!1)}}}var Vt=!1;function bu(s,c,m){if(Vt)return s(c,m);Vt=!0;try{var w=s(c);return w}finally{if(Vt=!1,(sr!==null||mi!==null)&&(k0(),sr&&(c=sr,s=mi,mi=sr=null,ja(c),s)))for(c=0;c<s.length;c++)ja(s[c])}}function Ft(s,c){var m=s.stateNode;if(m===null)return null;var w=m[Dn]||null;if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(r(231,c,typeof m));return m}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=!1;if(Zn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){uc=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{uc=!1}var Xi=null,wa=null,ao=null;function Ea(){if(ao)return ao;var s,c=wa,m=c.length,w,I="value"in Xi?Xi.value:Xi.textContent,D=I.length;for(s=0;s<m&&c[s]===I[s];s++);var Y=m-s;for(w=1;w<=Y&&c[m-w]===I[D-w];w++);return ao=I.slice(s,1<w?1-w:void 0)}function Ua(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function _a(){return!0}function lr(){return!1}function qr(s){function c(m,w,I,D,Y){this._reactName=m,this._targetInst=I,this.type=w,this.nativeEvent=D,this.target=Y,this.currentTarget=null;for(var ie in s)s.hasOwnProperty(ie)&&(m=s[ie],this[ie]=m?m(D):D[ie]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?_a:lr,this.isPropagationStopped=lr,this}return v(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),c}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zr=qr(oa),No=v({},oa,{view:0,detail:0}),dc=qr(No),Ro,sl,Oi,hs=v({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Oi&&(Oi&&s.type==="mousemove"?(Ro=s.screenX-Oi.screenX,sl=s.screenY-Oi.screenY):sl=Ro=0,Oi=s),Ro)},movementY:function(s){return"movementY"in s?s.movementY:sl}}),kn=qr(hs),Wo=v({},hs,{dataTransfer:0}),ps=qr(Wo),Aa=v({},No,{relatedTarget:0}),Xo=qr(Aa),Fe=v({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Xt=qr(Fe),Jr=v({},oa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ms=qr(Jr),Qo=v({},oa,{data:0}),fc=qr(Qo),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=gs[s])?!!c[s]:!1}function oo(){return Nr}var mr=v({},No,{key:function(s){if(s.key){var c=wu[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=Ua(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(s){return s.type==="keypress"?Ua(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ua(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ys=qr(mr),Pi=v({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ln=qr(Pi),Ut=v({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),Eu=qr(Ut),$n=v({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ta=qr($n),Gr=v({},hs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),_u=qr(Gr),sa=v({},oa,{newState:0,oldState:0}),so=qr(sa),S=[9,13,27,32],j=Zn&&"CompositionEvent"in window,W=null;Zn&&"documentMode"in document&&(W=document.documentMode);var ae=Zn&&"TextEvent"in window&&!W,Re=Zn&&(!j||W&&8<W&&11>=W),ze=" ",vt=!1;function jn(s,c){switch(s){case"keyup":return S.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function br(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var sn=!1;function gr(s,c){switch(s){case"compositionend":return br(c);case"keypress":return c.which!==32?null:(vt=!0,ze);case"textInput":return s=c.data,s===ze&&vt?null:s;default:return null}}function Br(s,c){if(sn)return s==="compositionend"||!j&&jn(s,c)?(s=Ea(),ao=wa=Xi=null,sn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Re&&c.locale!=="ko"?null:c.data;default:return null}}var Zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ki(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Zr[s.type]:c==="textarea"}function Si(s,c,m,w){sr?mi?mi.push(w):mi=[w]:sr=w,c=q0(c,"onChange"),0<c.length&&(m=new zr("onChange","change",null,m,w),s.push({event:m,listeners:c}))}var Mo=null,xs=null;function s1(s){VI(s,0)}function pc(s){var c=Qn(s);if(ya(c))return s}function Va(s,c){if(s==="change")return c}var Zp=!1;if(Zn){var mc;if(Zn){var vs="oninput"in document;if(!vs){var An=document.createElement("div");An.setAttribute("oninput","return;"),vs=typeof An.oninput=="function"}mc=vs}else mc=!1;Zp=mc&&(!document.documentMode||9<document.documentMode)}function gc(){Mo&&(Mo.detachEvent("onpropertychange",J),xs=Mo=null)}function J(s){if(s.propertyName==="value"&&pc(xs)){var c=[];Si(c,xs,s,ol(s)),bu(s1,c)}}function l(s,c,m){s==="focusin"?(gc(),Mo=c,xs=m,Mo.attachEvent("onpropertychange",J)):s==="focusout"&&gc()}function d(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return pc(xs)}function p(s,c){if(s==="click")return pc(c)}function y(s,c){if(s==="input"||s==="change")return pc(c)}function b(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var E=typeof Object.is=="function"?Object.is:b;function T(s,c){if(E(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var m=Object.keys(s),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var I=m[w];if(!We.call(c,I)||!E(s[I],c[I]))return!1}return!0}function M(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function k(s,c){var m=M(s);s=0;for(var w;m;){if(m.nodeType===3){if(w=s+m.textContent.length,s<=c&&w>=c)return{node:m,offset:c-s};s=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=M(m)}}function $(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?$(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function Z(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=al(s.document);c instanceof s.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)s=c.contentWindow;else break;c=al(s.document)}return c}function ne(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var ue=Zn&&"documentMode"in document&&11>=document.documentMode,me=null,xe=null,Ne=null,qe=!1;function ft(s,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;qe||me==null||me!==al(w)||(w=me,"selectionStart"in w&&ne(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ne&&T(Ne,w)||(Ne=w,w=q0(xe,"onSelect"),0<w.length&&(c=new zr("onSelect","select",null,c,m),s.push({event:c,listeners:w}),c.target=me)))}function ut(s,c){var m={};return m[s.toLowerCase()]=c.toLowerCase(),m["Webkit"+s]="webkit"+c,m["Moz"+s]="moz"+c,m}var at={animationend:ut("Animation","AnimationEnd"),animationiteration:ut("Animation","AnimationIteration"),animationstart:ut("Animation","AnimationStart"),transitionrun:ut("Transition","TransitionRun"),transitionstart:ut("Transition","TransitionStart"),transitioncancel:ut("Transition","TransitionCancel"),transitionend:ut("Transition","TransitionEnd")},fn={},Jt={};Zn&&(Jt=document.createElement("div").style,"AnimationEvent"in window||(delete at.animationend.animation,delete at.animationiteration.animation,delete at.animationstart.animation),"TransitionEvent"in window||delete at.transitionend.transition);function Hr(s){if(fn[s])return fn[s];if(!at[s])return s;var c=at[s],m;for(m in c)if(c.hasOwnProperty(m)&&m in Jt)return fn[s]=c[m];return s}var Sa=Hr("animationend"),Li=Hr("animationiteration"),Yn=Hr("animationstart"),gi=Hr("transitionrun"),la=Hr("transitionstart"),ll=Hr("transitioncancel"),bs=Hr("transitionend"),e0=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Do(s,c){e0.set(s,c),Qt(c,[s])}var t0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},lo=[],Au=0,l1=0;function n0(){for(var s=Au,c=l1=Au=0;c<s;){var m=lo[c];lo[c++]=null;var w=lo[c];lo[c++]=null;var I=lo[c];lo[c++]=null;var D=lo[c];if(lo[c++]=null,w!==null&&I!==null){var Y=w.pending;Y===null?I.next=I:(I.next=Y.next,Y.next=I),w.pending=I}D!==0&&w2(m,I,D)}}function r0(s,c,m,w){lo[Au++]=s,lo[Au++]=c,lo[Au++]=m,lo[Au++]=w,l1|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function c1(s,c,m,w){return r0(s,c,m,w),i0(s)}function yc(s,c){return r0(s,null,null,c),i0(s)}function w2(s,c,m){s.lanes|=m;var w=s.alternate;w!==null&&(w.lanes|=m);for(var I=!1,D=s.return;D!==null;)D.childLanes|=m,w=D.alternate,w!==null&&(w.childLanes|=m),D.tag===22&&(s=D.stateNode,s===null||s._visibility&1||(I=!0)),s=D,D=D.return;return s.tag===3?(D=s.stateNode,I&&c!==null&&(I=31-Yt(m),s=D.hiddenUpdates,w=s[I],w===null?s[I]=[c]:w.push(c),c.lane=m|536870912),D):null}function i0(s){if(50<Hf)throw Hf=0,xx=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var Tu={};function e7(s,c,m,w){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(s,c,m,w){return new e7(s,c,m,w)}function u1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ws(s,c){var m=s.alternate;return m===null?(m=Fa(s.tag,c,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=c,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&65011712,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,c=s.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m.refCleanup=s.refCleanup,m}function E2(s,c){s.flags&=65011714;var m=s.alternate;return m===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=m.childLanes,s.lanes=m.lanes,s.child=m.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=m.memoizedProps,s.memoizedState=m.memoizedState,s.updateQueue=m.updateQueue,s.type=m.type,c=m.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function a0(s,c,m,w,I,D){var Y=0;if(w=s,typeof s=="function")u1(s)&&(Y=1);else if(typeof s=="string")Y=aV(s,m,He.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=Fa(31,m,c,I),s.elementType=V,s.lanes=D,s;case O:return xc(m.children,I,D,c);case R:Y=8,I|=24;break;case L:return s=Fa(12,m,c,I|2),s.elementType=L,s.lanes=D,s;case H:return s=Fa(13,m,c,I),s.elementType=H,s.lanes=D,s;case G:return s=Fa(19,m,c,I),s.elementType=G,s.lanes=D,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:Y=10;break e;case U:Y=9;break e;case q:Y=11;break e;case B:Y=14;break e;case z:Y=16,w=null;break e}Y=29,m=Error(r(130,s===null?"null":typeof s,"")),w=null}return c=Fa(Y,m,c,I),c.elementType=s,c.type=w,c.lanes=D,c}function xc(s,c,m,w){return s=Fa(7,s,w,c),s.lanes=m,s}function d1(s,c,m){return s=Fa(6,s,null,c),s.lanes=m,s}function _2(s){var c=Fa(18,null,null,0);return c.stateNode=s,c}function f1(s,c,m){return c=Fa(4,s.children!==null?s.children:[],s.key,c),c.lanes=m,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var A2=new WeakMap;function co(s,c){if(typeof s=="object"&&s!==null){var m=A2.get(s);return m!==void 0?m:(c={value:s,source:c,stack:$e(c)},A2.set(s,c),c)}return{value:s,source:c,stack:$e(c)}}var Su=[],Cu=0,o0=null,Af=0,uo=[],fo=0,cl=null,Jo=1,Zo="";function Es(s,c){Su[Cu++]=Af,Su[Cu++]=o0,o0=s,Af=c}function T2(s,c,m){uo[fo++]=Jo,uo[fo++]=Zo,uo[fo++]=cl,cl=s;var w=Jo;s=Zo;var I=32-Yt(w)-1;w&=~(1<<I),m+=1;var D=32-Yt(c)+I;if(30<D){var Y=I-I%5;D=(w&(1<<Y)-1).toString(32),w>>=Y,I-=Y,Jo=1<<32-Yt(c)+I|m<<I|w,Zo=D+s}else Jo=1<<D|m<<I|w,Zo=s}function h1(s){s.return!==null&&(Es(s,1),T2(s,1,0))}function p1(s){for(;s===o0;)o0=Su[--Cu],Su[Cu]=null,Af=Su[--Cu],Su[Cu]=null;for(;s===cl;)cl=uo[--fo],uo[fo]=null,Zo=uo[--fo],uo[fo]=null,Jo=uo[--fo],uo[fo]=null}function S2(s,c){uo[fo++]=Jo,uo[fo++]=Zo,uo[fo++]=cl,Jo=c.id,Zo=c.overflow,cl=s}var Bi=null,Ar=null,Nn=!1,ul=null,ho=!1,m1=Error(r(519));function dl(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tf(co(c,s)),m1}function C2(s){var c=s.stateNode,m=s.type,w=s.memoizedProps;switch(c[ar]=s,c[Dn]=w,m){case"dialog":vn("cancel",c),vn("close",c);break;case"iframe":case"object":case"embed":vn("load",c);break;case"video":case"audio":for(m=0;m<Yf.length;m++)vn(Yf[m],c);break;case"source":vn("error",c);break;case"img":case"image":case"link":vn("error",c),vn("load",c);break;case"details":vn("toggle",c);break;case"input":vn("invalid",c),Me(c,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":vn("invalid",c);break;case"textarea":vn("invalid",c),Qr(c,w.value,w.defaultValue,w.children)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||w.suppressHydrationWarning===!0||GI(c.textContent,m)?(w.popover!=null&&(vn("beforetoggle",c),vn("toggle",c)),w.onScroll!=null&&vn("scroll",c),w.onScrollEnd!=null&&vn("scrollend",c),w.onClick!=null&&(c.onclick=Lr),c=!0):c=!1,c||dl(s,!0)}function I2(s){for(Bi=s.return;Bi;)switch(Bi.tag){case 5:case 31:case 13:ho=!1;return;case 27:case 3:ho=!0;return;default:Bi=Bi.return}}function Iu(s){if(s!==Bi)return!1;if(!Nn)return I2(s),Nn=!0,!1;var c=s.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=s.type,m=!(m!=="form"&&m!=="button")||Ox(s.type,s.memoizedProps)),m=!m),m&&Ar&&dl(s),I2(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ar=ZI(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ar=ZI(s)}else c===27?(c=Ar,Tl(s.type)?(s=jx,jx=null,Ar=s):Ar=c):Ar=Bi?mo(s.stateNode.nextSibling):null;return!0}function vc(){Ar=Bi=null,Nn=!1}function g1(){var s=ul;return s!==null&&(Ra===null?Ra=s:Ra.push.apply(Ra,s),ul=null),s}function Tf(s){ul===null?ul=[s]:ul.push(s)}var y1=ce(null),bc=null,_s=null;function fl(s,c,m){Ae(y1,c._currentValue),c._currentValue=m}function As(s){s._currentValue=y1.current,fe(y1)}function x1(s,c,m){for(;s!==null;){var w=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),s===m)break;s=s.return}}function v1(s,c,m,w){var I=s.child;for(I!==null&&(I.return=s);I!==null;){var D=I.dependencies;if(D!==null){var Y=I.child;D=D.firstContext;e:for(;D!==null;){var ie=D;D=I;for(var pe=0;pe<c.length;pe++)if(ie.context===c[pe]){D.lanes|=m,ie=D.alternate,ie!==null&&(ie.lanes|=m),x1(D.return,m,s),w||(Y=null);break e}D=ie.next}}else if(I.tag===18){if(Y=I.return,Y===null)throw Error(r(341));Y.lanes|=m,D=Y.alternate,D!==null&&(D.lanes|=m),x1(Y,m,s),Y=null}else Y=I.child;if(Y!==null)Y.return=I;else for(Y=I;Y!==null;){if(Y===s){Y=null;break}if(I=Y.sibling,I!==null){I.return=Y.return,Y=I;break}Y=Y.return}I=Y}}function Nu(s,c,m,w){s=null;for(var I=c,D=!1;I!==null;){if(!D){if((I.flags&524288)!==0)D=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var Y=I.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var ie=I.type;E(I.pendingProps.value,Y.value)||(s!==null?s.push(ie):s=[ie])}}else if(I===Ce.current){if(Y=I.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(s!==null?s.push(Jf):s=[Jf])}I=I.return}s!==null&&v1(c,s,m,w),c.flags|=262144}function s0(s){for(s=s.firstContext;s!==null;){if(!E(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wc(s){bc=s,_s=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ji(s){return N2(bc,s)}function l0(s,c){return bc===null&&wc(s),N2(s,c)}function N2(s,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},_s===null){if(s===null)throw Error(r(308));_s=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else _s=_s.next=c;return m}var t7=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(m,w){s.push(w)}};this.abort=function(){c.aborted=!0,s.forEach(function(m){return m()})}},n7=t.unstable_scheduleCallback,r7=t.unstable_NormalPriority,ri={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b1(){return{controller:new t7,data:new Map,refCount:0}}function Sf(s){s.refCount--,s.refCount===0&&n7(r7,function(){s.controller.abort()})}var Cf=null,w1=0,Ru=0,Mu=null;function i7(s,c){if(Cf===null){var m=Cf=[];w1=0,Ru=Ax(),Mu={status:"pending",value:void 0,then:function(w){m.push(w)}}}return w1++,c.then(R2,R2),c}function R2(){if(--w1===0&&Cf!==null){Mu!==null&&(Mu.status="fulfilled");var s=Cf;Cf=null,Ru=0,Mu=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function a7(s,c){var m=[],w={status:"pending",value:null,reason:null,then:function(I){m.push(I)}};return s.then(function(){w.status="fulfilled",w.value=c;for(var I=0;I<m.length;I++)(0,m[I])(c)},function(I){for(w.status="rejected",w.reason=I,I=0;I<m.length;I++)(0,m[I])(void 0)}),w}var M2=te.S;te.S=function(s,c){pI=Ee(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&i7(s,c),M2!==null&&M2(s,c)};var Ec=ce(null);function E1(){var s=Ec.current;return s!==null?s:yr.pooledCache}function c0(s,c){c===null?Ae(Ec,Ec.current):Ae(Ec,c.pool)}function D2(){var s=E1();return s===null?null:{parent:ri._currentValue,pool:s}}var Du=Error(r(460)),_1=Error(r(474)),u0=Error(r(542)),d0={then:function(){}};function O2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function P2(s,c,m){switch(m=s[m],m===void 0?s.push(c):m!==c&&(c.then(Lr,Lr),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,L2(s),s;default:if(typeof c.status=="string")c.then(Lr,Lr);else{if(s=yr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(w){if(c.status==="pending"){var I=c;I.status="fulfilled",I.value=w}},function(w){if(c.status==="pending"){var I=c;I.status="rejected",I.reason=w}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,L2(s),s}throw Ac=c,Du}}function _c(s){try{var c=s._init;return c(s._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Ac=m,Du):m}}var Ac=null;function k2(){if(Ac===null)throw Error(r(459));var s=Ac;return Ac=null,s}function L2(s){if(s===Du||s===u0)throw Error(r(483))}var Ou=null,If=0;function f0(s){var c=If;return If+=1,Ou===null&&(Ou=[]),P2(Ou,s,c)}function Nf(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function h0(s,c){throw c.$$typeof===A?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function B2(s){function c(Se,be){if(s){var De=Se.deletions;De===null?(Se.deletions=[be],Se.flags|=16):De.push(be)}}function m(Se,be){if(!s)return null;for(;be!==null;)c(Se,be),be=be.sibling;return null}function w(Se){for(var be=new Map;Se!==null;)Se.key!==null?be.set(Se.key,Se):be.set(Se.index,Se),Se=Se.sibling;return be}function I(Se,be){return Se=ws(Se,be),Se.index=0,Se.sibling=null,Se}function D(Se,be,De){return Se.index=De,s?(De=Se.alternate,De!==null?(De=De.index,De<be?(Se.flags|=67108866,be):De):(Se.flags|=67108866,be)):(Se.flags|=1048576,be)}function Y(Se){return s&&Se.alternate===null&&(Se.flags|=67108866),Se}function ie(Se,be,De,Je){return be===null||be.tag!==6?(be=d1(De,Se.mode,Je),be.return=Se,be):(be=I(be,De),be.return=Se,be)}function pe(Se,be,De,Je){var qt=De.type;return qt===O?Xe(Se,be,De.props.children,Je,De.key):be!==null&&(be.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===z&&_c(qt)===be.type)?(be=I(be,De.props),Nf(be,De),be.return=Se,be):(be=a0(De.type,De.key,De.props,null,Se.mode,Je),Nf(be,De),be.return=Se,be)}function Oe(Se,be,De,Je){return be===null||be.tag!==4||be.stateNode.containerInfo!==De.containerInfo||be.stateNode.implementation!==De.implementation?(be=f1(De,Se.mode,Je),be.return=Se,be):(be=I(be,De.children||[]),be.return=Se,be)}function Xe(Se,be,De,Je,qt){return be===null||be.tag!==7?(be=xc(De,Se.mode,Je,qt),be.return=Se,be):(be=I(be,De),be.return=Se,be)}function tt(Se,be,De){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=d1(""+be,Se.mode,De),be.return=Se,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case N:return De=a0(be.type,be.key,be.props,null,Se.mode,De),Nf(De,be),De.return=Se,De;case P:return be=f1(be,Se.mode,De),be.return=Se,be;case z:return be=_c(be),tt(Se,be,De)}if(re(be)||X(be))return be=xc(be,Se.mode,De,null),be.return=Se,be;if(typeof be.then=="function")return tt(Se,f0(be),De);if(be.$$typeof===F)return tt(Se,l0(Se,be),De);h0(Se,be)}return null}function Ue(Se,be,De,Je){var qt=be!==null?be.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return qt!==null?null:ie(Se,be,""+De,Je);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case N:return De.key===qt?pe(Se,be,De,Je):null;case P:return De.key===qt?Oe(Se,be,De,Je):null;case z:return De=_c(De),Ue(Se,be,De,Je)}if(re(De)||X(De))return qt!==null?null:Xe(Se,be,De,Je,null);if(typeof De.then=="function")return Ue(Se,be,f0(De),Je);if(De.$$typeof===F)return Ue(Se,be,l0(Se,De),Je);h0(Se,De)}return null}function Ge(Se,be,De,Je,qt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Se=Se.get(De)||null,ie(be,Se,""+Je,qt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case N:return Se=Se.get(Je.key===null?De:Je.key)||null,pe(be,Se,Je,qt);case P:return Se=Se.get(Je.key===null?De:Je.key)||null,Oe(be,Se,Je,qt);case z:return Je=_c(Je),Ge(Se,be,De,Je,qt)}if(re(Je)||X(Je))return Se=Se.get(De)||null,Xe(be,Se,Je,qt,null);if(typeof Je.then=="function")return Ge(Se,be,De,f0(Je),qt);if(Je.$$typeof===F)return Ge(Se,be,De,l0(be,Je),qt);h0(be,Je)}return null}function Dt(Se,be,De,Je){for(var qt=null,Un=null,Pt=be,ln=be=0,Sn=null;Pt!==null&&ln<De.length;ln++){Pt.index>ln?(Sn=Pt,Pt=null):Sn=Pt.sibling;var Vn=Ue(Se,Pt,De[ln],Je);if(Vn===null){Pt===null&&(Pt=Sn);break}s&&Pt&&Vn.alternate===null&&c(Se,Pt),be=D(Vn,be,ln),Un===null?qt=Vn:Un.sibling=Vn,Un=Vn,Pt=Sn}if(ln===De.length)return m(Se,Pt),Nn&&Es(Se,ln),qt;if(Pt===null){for(;ln<De.length;ln++)Pt=tt(Se,De[ln],Je),Pt!==null&&(be=D(Pt,be,ln),Un===null?qt=Pt:Un.sibling=Pt,Un=Pt);return Nn&&Es(Se,ln),qt}for(Pt=w(Pt);ln<De.length;ln++)Sn=Ge(Pt,Se,ln,De[ln],Je),Sn!==null&&(s&&Sn.alternate!==null&&Pt.delete(Sn.key===null?ln:Sn.key),be=D(Sn,be,ln),Un===null?qt=Sn:Un.sibling=Sn,Un=Sn);return s&&Pt.forEach(function(Rl){return c(Se,Rl)}),Nn&&Es(Se,ln),qt}function $t(Se,be,De,Je){if(De==null)throw Error(r(151));for(var qt=null,Un=null,Pt=be,ln=be=0,Sn=null,Vn=De.next();Pt!==null&&!Vn.done;ln++,Vn=De.next()){Pt.index>ln?(Sn=Pt,Pt=null):Sn=Pt.sibling;var Rl=Ue(Se,Pt,Vn.value,Je);if(Rl===null){Pt===null&&(Pt=Sn);break}s&&Pt&&Rl.alternate===null&&c(Se,Pt),be=D(Rl,be,ln),Un===null?qt=Rl:Un.sibling=Rl,Un=Rl,Pt=Sn}if(Vn.done)return m(Se,Pt),Nn&&Es(Se,ln),qt;if(Pt===null){for(;!Vn.done;ln++,Vn=De.next())Vn=tt(Se,Vn.value,Je),Vn!==null&&(be=D(Vn,be,ln),Un===null?qt=Vn:Un.sibling=Vn,Un=Vn);return Nn&&Es(Se,ln),qt}for(Pt=w(Pt);!Vn.done;ln++,Vn=De.next())Vn=Ge(Pt,Se,ln,Vn.value,Je),Vn!==null&&(s&&Vn.alternate!==null&&Pt.delete(Vn.key===null?ln:Vn.key),be=D(Vn,be,ln),Un===null?qt=Vn:Un.sibling=Vn,Un=Vn);return s&&Pt.forEach(function(gV){return c(Se,gV)}),Nn&&Es(Se,ln),qt}function dr(Se,be,De,Je){if(typeof De=="object"&&De!==null&&De.type===O&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case N:e:{for(var qt=De.key;be!==null;){if(be.key===qt){if(qt=De.type,qt===O){if(be.tag===7){m(Se,be.sibling),Je=I(be,De.props.children),Je.return=Se,Se=Je;break e}}else if(be.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===z&&_c(qt)===be.type){m(Se,be.sibling),Je=I(be,De.props),Nf(Je,De),Je.return=Se,Se=Je;break e}m(Se,be);break}else c(Se,be);be=be.sibling}De.type===O?(Je=xc(De.props.children,Se.mode,Je,De.key),Je.return=Se,Se=Je):(Je=a0(De.type,De.key,De.props,null,Se.mode,Je),Nf(Je,De),Je.return=Se,Se=Je)}return Y(Se);case P:e:{for(qt=De.key;be!==null;){if(be.key===qt)if(be.tag===4&&be.stateNode.containerInfo===De.containerInfo&&be.stateNode.implementation===De.implementation){m(Se,be.sibling),Je=I(be,De.children||[]),Je.return=Se,Se=Je;break e}else{m(Se,be);break}else c(Se,be);be=be.sibling}Je=f1(De,Se.mode,Je),Je.return=Se,Se=Je}return Y(Se);case z:return De=_c(De),dr(Se,be,De,Je)}if(re(De))return Dt(Se,be,De,Je);if(X(De)){if(qt=X(De),typeof qt!="function")throw Error(r(150));return De=qt.call(De),$t(Se,be,De,Je)}if(typeof De.then=="function")return dr(Se,be,f0(De),Je);if(De.$$typeof===F)return dr(Se,be,l0(Se,De),Je);h0(Se,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,be!==null&&be.tag===6?(m(Se,be.sibling),Je=I(be,De),Je.return=Se,Se=Je):(m(Se,be),Je=d1(De,Se.mode,Je),Je.return=Se,Se=Je),Y(Se)):m(Se,be)}return function(Se,be,De,Je){try{If=0;var qt=dr(Se,be,De,Je);return Ou=null,qt}catch(Pt){if(Pt===Du||Pt===u0)throw Pt;var Un=Fa(29,Pt,null,Se.mode);return Un.lanes=Je,Un.return=Se,Un}finally{}}}var Tc=B2(!0),j2=B2(!1),hl=!1;function A1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T1(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function pl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ml(s,c,m){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Hn&2)!==0){var I=w.pending;return I===null?c.next=c:(c.next=I.next,I.next=c),w.pending=c,c=i0(s),w2(s,null,m),c}return r0(s,w,c,m),i0(s)}function Rf(s,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var w=c.lanes;w&=s.pendingLanes,m|=w,c.lanes=m,_i(s,m)}}function S1(s,c){var m=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var I=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var Y={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?I=D=Y:D=D.next=Y,m=m.next}while(m!==null);D===null?I=D=c:D=D.next=c}else I=D=c;m={baseState:w.baseState,firstBaseUpdate:I,lastBaseUpdate:D,shared:w.shared,callbacks:w.callbacks},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=c:s.next=c,m.lastBaseUpdate=c}var C1=!1;function Mf(){if(C1){var s=Mu;if(s!==null)throw s}}function Df(s,c,m,w){C1=!1;var I=s.updateQueue;hl=!1;var D=I.firstBaseUpdate,Y=I.lastBaseUpdate,ie=I.shared.pending;if(ie!==null){I.shared.pending=null;var pe=ie,Oe=pe.next;pe.next=null,Y===null?D=Oe:Y.next=Oe,Y=pe;var Xe=s.alternate;Xe!==null&&(Xe=Xe.updateQueue,ie=Xe.lastBaseUpdate,ie!==Y&&(ie===null?Xe.firstBaseUpdate=Oe:ie.next=Oe,Xe.lastBaseUpdate=pe))}if(D!==null){var tt=I.baseState;Y=0,Xe=Oe=pe=null,ie=D;do{var Ue=ie.lane&-536870913,Ge=Ue!==ie.lane;if(Ge?(Tn&Ue)===Ue:(w&Ue)===Ue){Ue!==0&&Ue===Ru&&(C1=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Dt=s,$t=ie;Ue=c;var dr=m;switch($t.tag){case 1:if(Dt=$t.payload,typeof Dt=="function"){tt=Dt.call(dr,tt,Ue);break e}tt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=$t.payload,Ue=typeof Dt=="function"?Dt.call(dr,tt,Ue):Dt,Ue==null)break e;tt=v({},tt,Ue);break e;case 2:hl=!0}}Ue=ie.callback,Ue!==null&&(s.flags|=64,Ge&&(s.flags|=8192),Ge=I.callbacks,Ge===null?I.callbacks=[Ue]:Ge.push(Ue))}else Ge={lane:Ue,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Xe===null?(Oe=Xe=Ge,pe=tt):Xe=Xe.next=Ge,Y|=Ue;if(ie=ie.next,ie===null){if(ie=I.shared.pending,ie===null)break;Ge=ie,ie=Ge.next,Ge.next=null,I.lastBaseUpdate=Ge,I.shared.pending=null}}while(!0);Xe===null&&(pe=tt),I.baseState=pe,I.firstBaseUpdate=Oe,I.lastBaseUpdate=Xe,D===null&&(I.shared.lanes=0),bl|=Y,s.lanes=Y,s.memoizedState=tt}}function U2(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function V2(s,c){var m=s.callbacks;if(m!==null)for(s.callbacks=null,s=0;s<m.length;s++)U2(m[s],c)}var Pu=ce(null),p0=ce(0);function F2(s,c){s=Os,Ae(p0,s),Ae(Pu,c),Os=s|c.baseLanes}function I1(){Ae(p0,Os),Ae(Pu,Pu.current)}function N1(){Os=p0.current,fe(Pu),fe(p0)}var qa=ce(null),po=null;function gl(s){var c=s.alternate;Ae(ei,ei.current&1),Ae(qa,s),po===null&&(c===null||Pu.current!==null||c.memoizedState!==null)&&(po=s)}function R1(s){Ae(ei,ei.current),Ae(qa,s),po===null&&(po=s)}function q2(s){s.tag===22?(Ae(ei,ei.current),Ae(qa,s),po===null&&(po=s)):yl()}function yl(){Ae(ei,ei.current),Ae(qa,qa.current)}function za(s){fe(qa),po===s&&(po=null),fe(ei)}var ei=ce(0);function m0(s){for(var c=s;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Lx(m)||Bx(m)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ts=0,on=null,cr=null,ii=null,g0=!1,ku=!1,Sc=!1,y0=0,Of=0,Lu=null,o7=0;function $r(){throw Error(r(321))}function M1(s,c){if(c===null)return!1;for(var m=0;m<c.length&&m<s.length;m++)if(!E(s[m],c[m]))return!1;return!0}function D1(s,c,m,w,I,D){return Ts=D,on=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,te.H=s===null||s.memoizedState===null?TC:Y1,Sc=!1,D=m(w,I),Sc=!1,ku&&(D=G2(c,m,w,I)),z2(s),D}function z2(s){te.H=Lf;var c=cr!==null&&cr.next!==null;if(Ts=0,ii=cr=on=null,g0=!1,Of=0,Lu=null,c)throw Error(r(300));s===null||ai||(s=s.dependencies,s!==null&&s0(s)&&(ai=!0))}function G2(s,c,m,w){on=s;var I=0;do{if(ku&&(Lu=null),Of=0,ku=!1,25<=I)throw Error(r(301));if(I+=1,ii=cr=null,s.updateQueue!=null){var D=s.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}te.H=SC,D=c(m,w)}while(ku);return D}function s7(){var s=te.H,c=s.useState()[0];return c=typeof c.then=="function"?Pf(c):c,s=s.useState()[0],(cr!==null?cr.memoizedState:null)!==s&&(on.flags|=1024),c}function O1(){var s=y0!==0;return y0=0,s}function P1(s,c,m){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~m}function k1(s){if(g0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}g0=!1}Ts=0,ii=cr=on=null,ku=!1,Of=y0=0,Lu=null}function ca(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?on.memoizedState=ii=s:ii=ii.next=s,ii}function ti(){if(cr===null){var s=on.alternate;s=s!==null?s.memoizedState:null}else s=cr.next;var c=ii===null?on.memoizedState:ii.next;if(c!==null)ii=c,cr=s;else{if(s===null)throw on.alternate===null?Error(r(467)):Error(r(310));cr=s,s={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},ii===null?on.memoizedState=ii=s:ii=ii.next=s}return ii}function x0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pf(s){var c=Of;return Of+=1,Lu===null&&(Lu=[]),s=P2(Lu,s,c),c=on,(ii===null?c.memoizedState:ii.next)===null&&(c=c.alternate,te.H=c===null||c.memoizedState===null?TC:Y1),s}function v0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Pf(s);if(s.$$typeof===F)return ji(s)}throw Error(r(438,String(s)))}function L1(s){var c=null,m=on.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var w=on.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(c={data:w.data.map(function(I){return I.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=x0(),on.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(s),w=0;w<s;w++)m[w]=ee;return c.index++,m}function Ss(s,c){return typeof c=="function"?c(s):c}function b0(s){var c=ti();return B1(c,cr,s)}function B1(s,c,m){var w=s.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var I=s.baseQueue,D=w.pending;if(D!==null){if(I!==null){var Y=I.next;I.next=D.next,D.next=Y}c.baseQueue=I=D,w.pending=null}if(D=s.baseState,I===null)s.memoizedState=D;else{c=I.next;var ie=Y=null,pe=null,Oe=c,Xe=!1;do{var tt=Oe.lane&-536870913;if(tt!==Oe.lane?(Tn&tt)===tt:(Ts&tt)===tt){var Ue=Oe.revertLane;if(Ue===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),tt===Ru&&(Xe=!0);else if((Ts&Ue)===Ue){Oe=Oe.next,Ue===Ru&&(Xe=!0);continue}else tt={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},pe===null?(ie=pe=tt,Y=D):pe=pe.next=tt,on.lanes|=Ue,bl|=Ue;tt=Oe.action,Sc&&m(D,tt),D=Oe.hasEagerState?Oe.eagerState:m(D,tt)}else Ue={lane:tt,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},pe===null?(ie=pe=Ue,Y=D):pe=pe.next=Ue,on.lanes|=tt,bl|=tt;Oe=Oe.next}while(Oe!==null&&Oe!==c);if(pe===null?Y=D:pe.next=ie,!E(D,s.memoizedState)&&(ai=!0,Xe&&(m=Mu,m!==null)))throw m;s.memoizedState=D,s.baseState=Y,s.baseQueue=pe,w.lastRenderedState=D}return I===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function j1(s){var c=ti(),m=c.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=s;var w=m.dispatch,I=m.pending,D=c.memoizedState;if(I!==null){m.pending=null;var Y=I=I.next;do D=s(D,Y.action),Y=Y.next;while(Y!==I);E(D,c.memoizedState)||(ai=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),m.lastRenderedState=D}return[D,w]}function H2(s,c,m){var w=on,I=ti(),D=Nn;if(D){if(m===void 0)throw Error(r(407));m=m()}else m=c();var Y=!E((cr||I).memoizedState,m);if(Y&&(I.memoizedState=m,ai=!0),I=I.queue,F1(K2.bind(null,w,I,s),[s]),I.getSnapshot!==c||Y||ii!==null&&ii.memoizedState.tag&1){if(w.flags|=2048,Bu(9,{destroy:void 0},Y2.bind(null,w,I,m,c),null),yr===null)throw Error(r(349));D||(Ts&127)!==0||$2(w,c,m)}return m}function $2(s,c,m){s.flags|=16384,s={getSnapshot:c,value:m},c=on.updateQueue,c===null?(c=x0(),on.updateQueue=c,c.stores=[s]):(m=c.stores,m===null?c.stores=[s]:m.push(s))}function Y2(s,c,m,w){c.value=m,c.getSnapshot=w,W2(c)&&X2(s)}function K2(s,c,m){return m(function(){W2(c)&&X2(s)})}function W2(s){var c=s.getSnapshot;s=s.value;try{var m=c();return!E(s,m)}catch{return!0}}function X2(s){var c=yc(s,2);c!==null&&Ma(c,s,2)}function U1(s){var c=ca();if(typeof s=="function"){var m=s;if(s=m(),Sc){pn(!0);try{m()}finally{pn(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:s},c}function Q2(s,c,m,w){return s.baseState=m,B1(s,cr,typeof w=="function"?w:Ss)}function l7(s,c,m,w,I){if(_0(s))throw Error(r(485));if(s=c.action,s!==null){var D={payload:I,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){D.listeners.push(Y)}};te.T!==null?m(!0):D.isTransition=!1,w(D),m=c.pending,m===null?(D.next=c.pending=D,J2(c,D)):(D.next=m.next,c.pending=m.next=D)}}function J2(s,c){var m=c.action,w=c.payload,I=s.state;if(c.isTransition){var D=te.T,Y={};te.T=Y;try{var ie=m(I,w),pe=te.S;pe!==null&&pe(Y,ie),Z2(s,c,ie)}catch(Oe){V1(s,c,Oe)}finally{D!==null&&Y.types!==null&&(D.types=Y.types),te.T=D}}else try{D=m(I,w),Z2(s,c,D)}catch(Oe){V1(s,c,Oe)}}function Z2(s,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){eC(s,c,w)},function(w){return V1(s,c,w)}):eC(s,c,m)}function eC(s,c,m){c.status="fulfilled",c.value=m,tC(c),s.state=m,c=s.pending,c!==null&&(m=c.next,m===c?s.pending=null:(m=m.next,c.next=m,J2(s,m)))}function V1(s,c,m){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do c.status="rejected",c.reason=m,tC(c),c=c.next;while(c!==w)}s.action=null}function tC(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function nC(s,c){return c}function rC(s,c){if(Nn){var m=yr.formState;if(m!==null){e:{var w=on;if(Nn){if(Ar){t:{for(var I=Ar,D=ho;I.nodeType!==8;){if(!D){I=null;break t}if(I=mo(I.nextSibling),I===null){I=null;break t}}D=I.data,I=D==="F!"||D==="F"?I:null}if(I){Ar=mo(I.nextSibling),w=I.data==="F!";break e}}dl(w)}w=!1}w&&(c=m[0])}}return m=ca(),m.memoizedState=m.baseState=c,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nC,lastRenderedState:c},m.queue=w,m=EC.bind(null,on,w),w.dispatch=m,w=U1(!1),D=$1.bind(null,on,!1,w.queue),w=ca(),I={state:c,dispatch:null,action:s,pending:null},w.queue=I,m=l7.bind(null,on,I,D,m),I.dispatch=m,w.memoizedState=s,[c,m,!1]}function iC(s){var c=ti();return aC(c,cr,s)}function aC(s,c,m){if(c=B1(s,c,nC)[0],s=b0(Ss)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var w=Pf(c)}catch(Y){throw Y===Du?u0:Y}else w=c;c=ti();var I=c.queue,D=I.dispatch;return m!==c.memoizedState&&(on.flags|=2048,Bu(9,{destroy:void 0},c7.bind(null,I,m),null)),[w,D,s]}function c7(s,c){s.action=c}function oC(s){var c=ti(),m=cr;if(m!==null)return aC(c,m,s);ti(),c=c.memoizedState,m=ti();var w=m.queue.dispatch;return m.memoizedState=s,[c,w,!1]}function Bu(s,c,m,w){return s={tag:s,create:m,deps:w,inst:c,next:null},c=on.updateQueue,c===null&&(c=x0(),on.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=s.next=s:(w=m.next,m.next=s,s.next=w,c.lastEffect=s),s}function sC(){return ti().memoizedState}function w0(s,c,m,w){var I=ca();on.flags|=s,I.memoizedState=Bu(1|c,{destroy:void 0},m,w===void 0?null:w)}function E0(s,c,m,w){var I=ti();w=w===void 0?null:w;var D=I.memoizedState.inst;cr!==null&&w!==null&&M1(w,cr.memoizedState.deps)?I.memoizedState=Bu(c,D,m,w):(on.flags|=s,I.memoizedState=Bu(1|c,D,m,w))}function lC(s,c){w0(8390656,8,s,c)}function F1(s,c){E0(2048,8,s,c)}function u7(s){on.flags|=4;var c=on.updateQueue;if(c===null)c=x0(),on.updateQueue=c,c.events=[s];else{var m=c.events;m===null?c.events=[s]:m.push(s)}}function cC(s){var c=ti().memoizedState;return u7({ref:c,nextImpl:s}),function(){if((Hn&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function uC(s,c){return E0(4,2,s,c)}function dC(s,c){return E0(4,4,s,c)}function fC(s,c){if(typeof c=="function"){s=s();var m=c(s);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function hC(s,c,m){m=m!=null?m.concat([s]):null,E0(4,4,fC.bind(null,c,s),m)}function q1(){}function pC(s,c){var m=ti();c=c===void 0?null:c;var w=m.memoizedState;return c!==null&&M1(c,w[1])?w[0]:(m.memoizedState=[s,c],s)}function mC(s,c){var m=ti();c=c===void 0?null:c;var w=m.memoizedState;if(c!==null&&M1(c,w[1]))return w[0];if(w=s(),Sc){pn(!0);try{s()}finally{pn(!1)}}return m.memoizedState=[w,c],w}function z1(s,c,m){return m===void 0||(Ts&1073741824)!==0&&(Tn&261930)===0?s.memoizedState=c:(s.memoizedState=m,s=gI(),on.lanes|=s,bl|=s,m)}function gC(s,c,m,w){return E(m,c)?m:Pu.current!==null?(s=z1(s,m,w),E(s,c)||(ai=!0),s):(Ts&42)===0||(Ts&1073741824)!==0&&(Tn&261930)===0?(ai=!0,s.memoizedState=m):(s=gI(),on.lanes|=s,bl|=s,c)}function yC(s,c,m,w,I){var D=se.p;se.p=D!==0&&8>D?D:8;var Y=te.T,ie={};te.T=ie,$1(s,!1,c,m);try{var pe=I(),Oe=te.S;if(Oe!==null&&Oe(ie,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Xe=a7(pe,w);kf(s,c,Xe,$a(s))}else kf(s,c,w,$a(s))}catch(tt){kf(s,c,{then:function(){},status:"rejected",reason:tt},$a())}finally{se.p=D,Y!==null&&ie.types!==null&&(Y.types=ie.types),te.T=Y}}function d7(){}function G1(s,c,m,w){if(s.tag!==5)throw Error(r(476));var I=xC(s).queue;yC(s,I,c,_e,m===null?d7:function(){return vC(s),m(w)})}function xC(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:_e},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:m},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function vC(s){var c=xC(s);c.next===null&&(c=s.alternate.memoizedState),kf(s,c.next.queue,{},$a())}function H1(){return ji(Jf)}function bC(){return ti().memoizedState}function wC(){return ti().memoizedState}function f7(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var m=$a();s=pl(m);var w=ml(c,s,m);w!==null&&(Ma(w,c,m),Rf(w,c,m)),c={cache:b1()},s.payload=c;return}c=c.return}}function h7(s,c,m){var w=$a();m={lane:w,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},_0(s)?_C(c,m):(m=c1(s,c,m,w),m!==null&&(Ma(m,s,w),AC(m,c,w)))}function EC(s,c,m){var w=$a();kf(s,c,m,w)}function kf(s,c,m,w){var I={lane:w,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(_0(s))_C(c,I);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var Y=c.lastRenderedState,ie=D(Y,m);if(I.hasEagerState=!0,I.eagerState=ie,E(ie,Y))return r0(s,c,I,0),yr===null&&n0(),!1}catch{}finally{}if(m=c1(s,c,I,w),m!==null)return Ma(m,s,w),AC(m,c,w),!0}return!1}function $1(s,c,m,w){if(w={lane:2,revertLane:Ax(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},_0(s)){if(c)throw Error(r(479))}else c=c1(s,m,w,2),c!==null&&Ma(c,s,2)}function _0(s){var c=s.alternate;return s===on||c!==null&&c===on}function _C(s,c){ku=g0=!0;var m=s.pending;m===null?c.next=c:(c.next=m.next,m.next=c),s.pending=c}function AC(s,c,m){if((m&4194048)!==0){var w=c.lanes;w&=s.pendingLanes,m|=w,c.lanes=m,_i(s,m)}}var Lf={readContext:ji,use:v0,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useLayoutEffect:$r,useInsertionEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useSyncExternalStore:$r,useId:$r,useHostTransitionStatus:$r,useFormState:$r,useActionState:$r,useOptimistic:$r,useMemoCache:$r,useCacheRefresh:$r};Lf.useEffectEvent=$r;var TC={readContext:ji,use:v0,useCallback:function(s,c){return ca().memoizedState=[s,c===void 0?null:c],s},useContext:ji,useEffect:lC,useImperativeHandle:function(s,c,m){m=m!=null?m.concat([s]):null,w0(4194308,4,fC.bind(null,c,s),m)},useLayoutEffect:function(s,c){return w0(4194308,4,s,c)},useInsertionEffect:function(s,c){w0(4,2,s,c)},useMemo:function(s,c){var m=ca();c=c===void 0?null:c;var w=s();if(Sc){pn(!0);try{s()}finally{pn(!1)}}return m.memoizedState=[w,c],w},useReducer:function(s,c,m){var w=ca();if(m!==void 0){var I=m(c);if(Sc){pn(!0);try{m(c)}finally{pn(!1)}}}else I=c;return w.memoizedState=w.baseState=I,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:I},w.queue=s,s=s.dispatch=h7.bind(null,on,s),[w.memoizedState,s]},useRef:function(s){var c=ca();return s={current:s},c.memoizedState=s},useState:function(s){s=U1(s);var c=s.queue,m=EC.bind(null,on,c);return c.dispatch=m,[s.memoizedState,m]},useDebugValue:q1,useDeferredValue:function(s,c){var m=ca();return z1(m,s,c)},useTransition:function(){var s=U1(!1);return s=yC.bind(null,on,s.queue,!0,!1),ca().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,m){var w=on,I=ca();if(Nn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=c(),yr===null)throw Error(r(349));(Tn&127)!==0||$2(w,c,m)}I.memoizedState=m;var D={value:m,getSnapshot:c};return I.queue=D,lC(K2.bind(null,w,D,s),[s]),w.flags|=2048,Bu(9,{destroy:void 0},Y2.bind(null,w,D,m,c),null),m},useId:function(){var s=ca(),c=yr.identifierPrefix;if(Nn){var m=Zo,w=Jo;m=(w&~(1<<32-Yt(w)-1)).toString(32)+m,c="_"+c+"R_"+m,m=y0++,0<m&&(c+="H"+m.toString(32)),c+="_"}else m=o7++,c="_"+c+"r_"+m.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:H1,useFormState:rC,useActionState:rC,useOptimistic:function(s){var c=ca();c.memoizedState=c.baseState=s;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=$1.bind(null,on,!0,m),m.dispatch=c,[s,c]},useMemoCache:L1,useCacheRefresh:function(){return ca().memoizedState=f7.bind(null,on)},useEffectEvent:function(s){var c=ca(),m={impl:s};return c.memoizedState=m,function(){if((Hn&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},Y1={readContext:ji,use:v0,useCallback:pC,useContext:ji,useEffect:F1,useImperativeHandle:hC,useInsertionEffect:uC,useLayoutEffect:dC,useMemo:mC,useReducer:b0,useRef:sC,useState:function(){return b0(Ss)},useDebugValue:q1,useDeferredValue:function(s,c){var m=ti();return gC(m,cr.memoizedState,s,c)},useTransition:function(){var s=b0(Ss)[0],c=ti().memoizedState;return[typeof s=="boolean"?s:Pf(s),c]},useSyncExternalStore:H2,useId:bC,useHostTransitionStatus:H1,useFormState:iC,useActionState:iC,useOptimistic:function(s,c){var m=ti();return Q2(m,cr,s,c)},useMemoCache:L1,useCacheRefresh:wC};Y1.useEffectEvent=cC;var SC={readContext:ji,use:v0,useCallback:pC,useContext:ji,useEffect:F1,useImperativeHandle:hC,useInsertionEffect:uC,useLayoutEffect:dC,useMemo:mC,useReducer:j1,useRef:sC,useState:function(){return j1(Ss)},useDebugValue:q1,useDeferredValue:function(s,c){var m=ti();return cr===null?z1(m,s,c):gC(m,cr.memoizedState,s,c)},useTransition:function(){var s=j1(Ss)[0],c=ti().memoizedState;return[typeof s=="boolean"?s:Pf(s),c]},useSyncExternalStore:H2,useId:bC,useHostTransitionStatus:H1,useFormState:oC,useActionState:oC,useOptimistic:function(s,c){var m=ti();return cr!==null?Q2(m,cr,s,c):(m.baseState=s,[s,m.queue.dispatch])},useMemoCache:L1,useCacheRefresh:wC};SC.useEffectEvent=cC;function K1(s,c,m,w){c=s.memoizedState,m=m(w,c),m=m==null?c:v({},c,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var W1={enqueueSetState:function(s,c,m){s=s._reactInternals;var w=$a(),I=pl(w);I.payload=c,m!=null&&(I.callback=m),c=ml(s,I,w),c!==null&&(Ma(c,s,w),Rf(c,s,w))},enqueueReplaceState:function(s,c,m){s=s._reactInternals;var w=$a(),I=pl(w);I.tag=1,I.payload=c,m!=null&&(I.callback=m),c=ml(s,I,w),c!==null&&(Ma(c,s,w),Rf(c,s,w))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var m=$a(),w=pl(m);w.tag=2,c!=null&&(w.callback=c),c=ml(s,w,m),c!==null&&(Ma(c,s,m),Rf(c,s,m))}};function CC(s,c,m,w,I,D,Y){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,D,Y):c.prototype&&c.prototype.isPureReactComponent?!T(m,w)||!T(I,D):!0}function IC(s,c,m,w){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==s&&W1.enqueueReplaceState(c,c.state,null)}function Cc(s,c){var m=c;if("ref"in c){m={};for(var w in c)w!=="ref"&&(m[w]=c[w])}if(s=s.defaultProps){m===c&&(m=v({},m));for(var I in s)m[I]===void 0&&(m[I]=s[I])}return m}function NC(s){t0(s)}function RC(s){console.error(s)}function MC(s){t0(s)}function A0(s,c){try{var m=s.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(w){setTimeout(function(){throw w})}}function DC(s,c,m){try{var w=s.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function X1(s,c,m){return m=pl(m),m.tag=3,m.payload={element:null},m.callback=function(){A0(s,c)},m}function OC(s){return s=pl(s),s.tag=3,s}function PC(s,c,m,w){var I=m.type.getDerivedStateFromError;if(typeof I=="function"){var D=w.value;s.payload=function(){return I(D)},s.callback=function(){DC(c,m,w)}}var Y=m.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(s.callback=function(){DC(c,m,w),typeof I!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var ie=w.stack;this.componentDidCatch(w.value,{componentStack:ie!==null?ie:""})})}function p7(s,c,m,w,I){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(c=m.alternate,c!==null&&Nu(c,m,I,!0),m=qa.current,m!==null){switch(m.tag){case 31:case 13:return po===null?L0():m.alternate===null&&Yr===0&&(Yr=3),m.flags&=-257,m.flags|=65536,m.lanes=I,w===d0?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([w]):c.add(w),wx(s,w,I)),!1;case 22:return m.flags|=65536,w===d0?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([w]):m.add(w)),wx(s,w,I)),!1}throw Error(r(435,m.tag))}return wx(s,w,I),L0(),!1}if(Nn)return c=qa.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=I,w!==m1&&(s=Error(r(422),{cause:w}),Tf(co(s,m)))):(w!==m1&&(c=Error(r(423),{cause:w}),Tf(co(c,m))),s=s.current.alternate,s.flags|=65536,I&=-I,s.lanes|=I,w=co(w,m),I=X1(s.stateNode,w,I),S1(s,I),Yr!==4&&(Yr=2)),!1;var D=Error(r(520),{cause:w});if(D=co(D,m),Gf===null?Gf=[D]:Gf.push(D),Yr!==4&&(Yr=2),c===null)return!0;w=co(w,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,s=I&-I,m.lanes|=s,s=X1(m.stateNode,w,s),S1(m,s),!1;case 1:if(c=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(wl===null||!wl.has(D))))return m.flags|=65536,I&=-I,m.lanes|=I,I=OC(I),PC(I,s,m,w),S1(m,I),!1}m=m.return}while(m!==null);return!1}var Q1=Error(r(461)),ai=!1;function Ui(s,c,m,w){c.child=s===null?j2(c,null,m,w):Tc(c,s.child,m,w)}function kC(s,c,m,w,I){m=m.render;var D=c.ref;if("ref"in w){var Y={};for(var ie in w)ie!=="ref"&&(Y[ie]=w[ie])}else Y=w;return wc(c),w=D1(s,c,m,Y,D,I),ie=O1(),s!==null&&!ai?(P1(s,c,I),Cs(s,c,I)):(Nn&&ie&&h1(c),c.flags|=1,Ui(s,c,w,I),c.child)}function LC(s,c,m,w,I){if(s===null){var D=m.type;return typeof D=="function"&&!u1(D)&&D.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=D,BC(s,c,D,w,I)):(s=a0(m.type,null,w,c,c.mode,I),s.ref=c.ref,s.return=c,c.child=s)}if(D=s.child,!ax(s,I)){var Y=D.memoizedProps;if(m=m.compare,m=m!==null?m:T,m(Y,w)&&s.ref===c.ref)return Cs(s,c,I)}return c.flags|=1,s=ws(D,w),s.ref=c.ref,s.return=c,c.child=s}function BC(s,c,m,w,I){if(s!==null){var D=s.memoizedProps;if(T(D,w)&&s.ref===c.ref)if(ai=!1,c.pendingProps=w=D,ax(s,I))(s.flags&131072)!==0&&(ai=!0);else return c.lanes=s.lanes,Cs(s,c,I)}return J1(s,c,m,w,I)}function jC(s,c,m,w){var I=w.children,D=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((c.flags&128)!==0){if(D=D!==null?D.baseLanes|m:m,s!==null){for(w=c.child=s.child,I=0;w!==null;)I=I|w.lanes|w.childLanes,w=w.sibling;w=I&~D}else w=0,c.child=null;return UC(s,c,D,m,w)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&c0(c,D!==null?D.cachePool:null),D!==null?F2(c,D):I1(),q2(c);else return w=c.lanes=536870912,UC(s,c,D!==null?D.baseLanes|m:m,m,w)}else D!==null?(c0(c,D.cachePool),F2(c,D),yl(),c.memoizedState=null):(s!==null&&c0(c,null),I1(),yl());return Ui(s,c,I,m),c.child}function Bf(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function UC(s,c,m,w,I){var D=E1();return D=D===null?null:{parent:ri._currentValue,pool:D},c.memoizedState={baseLanes:m,cachePool:D},s!==null&&c0(c,null),I1(),q2(c),s!==null&&Nu(s,c,w,!0),c.childLanes=I,null}function T0(s,c){return c=C0({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function VC(s,c,m){return Tc(c,s.child,null,m),s=T0(c,c.pendingProps),s.flags|=2,za(c),c.memoizedState=null,s}function m7(s,c,m){var w=c.pendingProps,I=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(Nn){if(w.mode==="hidden")return s=T0(c,w),c.lanes=536870912,Bf(null,s);if(R1(c),(s=Ar)?(s=JI(s,ho),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:cl!==null?{id:Jo,overflow:Zo}:null,retryLane:536870912,hydrationErrors:null},m=_2(s),m.return=c,c.child=m,Bi=c,Ar=null)):s=null,s===null)throw dl(c);return c.lanes=536870912,null}return T0(c,w)}var D=s.memoizedState;if(D!==null){var Y=D.dehydrated;if(R1(c),I)if(c.flags&256)c.flags&=-257,c=VC(s,c,m);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if(ai||Nu(s,c,m,!1),I=(m&s.childLanes)!==0,ai||I){if(w=yr,w!==null&&(Y=ia(w,m),Y!==0&&Y!==D.retryLane))throw D.retryLane=Y,yc(s,Y),Ma(w,s,Y),Q1;L0(),c=VC(s,c,m)}else s=D.treeContext,Ar=mo(Y.nextSibling),Bi=c,Nn=!0,ul=null,ho=!1,s!==null&&S2(c,s),c=T0(c,w),c.flags|=4096;return c}return s=ws(s.child,{mode:w.mode,children:w.children}),s.ref=c.ref,c.child=s,s.return=c,s}function S0(s,c){var m=c.ref;if(m===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(s===null||s.ref!==m)&&(c.flags|=4194816)}}function J1(s,c,m,w,I){return wc(c),m=D1(s,c,m,w,void 0,I),w=O1(),s!==null&&!ai?(P1(s,c,I),Cs(s,c,I)):(Nn&&w&&h1(c),c.flags|=1,Ui(s,c,m,I),c.child)}function FC(s,c,m,w,I,D){return wc(c),c.updateQueue=null,m=G2(c,w,m,I),z2(s),w=O1(),s!==null&&!ai?(P1(s,c,D),Cs(s,c,D)):(Nn&&w&&h1(c),c.flags|=1,Ui(s,c,m,D),c.child)}function qC(s,c,m,w,I){if(wc(c),c.stateNode===null){var D=Tu,Y=m.contextType;typeof Y=="object"&&Y!==null&&(D=ji(Y)),D=new m(w,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=W1,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=w,D.state=c.memoizedState,D.refs={},A1(c),Y=m.contextType,D.context=typeof Y=="object"&&Y!==null?ji(Y):Tu,D.state=c.memoizedState,Y=m.getDerivedStateFromProps,typeof Y=="function"&&(K1(c,m,Y,w),D.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(Y=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),Y!==D.state&&W1.enqueueReplaceState(D,D.state,null),Df(c,w,D,I),Mf(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),w=!0}else if(s===null){D=c.stateNode;var ie=c.memoizedProps,pe=Cc(m,ie);D.props=pe;var Oe=D.context,Xe=m.contextType;Y=Tu,typeof Xe=="object"&&Xe!==null&&(Y=ji(Xe));var tt=m.getDerivedStateFromProps;Xe=typeof tt=="function"||typeof D.getSnapshotBeforeUpdate=="function",ie=c.pendingProps!==ie,Xe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ie||Oe!==Y)&&IC(c,D,w,Y),hl=!1;var Ue=c.memoizedState;D.state=Ue,Df(c,w,D,I),Mf(),Oe=c.memoizedState,ie||Ue!==Oe||hl?(typeof tt=="function"&&(K1(c,m,tt,w),Oe=c.memoizedState),(pe=hl||CC(c,m,pe,w,Ue,Oe,Y))?(Xe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Oe),D.props=w,D.state=Oe,D.context=Y,w=pe):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{D=c.stateNode,T1(s,c),Y=c.memoizedProps,Xe=Cc(m,Y),D.props=Xe,tt=c.pendingProps,Ue=D.context,Oe=m.contextType,pe=Tu,typeof Oe=="object"&&Oe!==null&&(pe=ji(Oe)),ie=m.getDerivedStateFromProps,(Oe=typeof ie=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==tt||Ue!==pe)&&IC(c,D,w,pe),hl=!1,Ue=c.memoizedState,D.state=Ue,Df(c,w,D,I),Mf();var Ge=c.memoizedState;Y!==tt||Ue!==Ge||hl||s!==null&&s.dependencies!==null&&s0(s.dependencies)?(typeof ie=="function"&&(K1(c,m,ie,w),Ge=c.memoizedState),(Xe=hl||CC(c,m,Xe,w,Ue,Ge,pe)||s!==null&&s.dependencies!==null&&s0(s.dependencies))?(Oe||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,Ge,pe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,Ge,pe)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||Y===s.memoizedProps&&Ue===s.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&Ue===s.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Ge),D.props=w,D.state=Ge,D.context=pe,w=Xe):(typeof D.componentDidUpdate!="function"||Y===s.memoizedProps&&Ue===s.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&Ue===s.memoizedState||(c.flags|=1024),w=!1)}return D=w,S0(s,c),w=(c.flags&128)!==0,D||w?(D=c.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,s!==null&&w?(c.child=Tc(c,s.child,null,I),c.child=Tc(c,null,m,I)):Ui(s,c,m,I),c.memoizedState=D.state,s=c.child):s=Cs(s,c,I),s}function zC(s,c,m,w){return vc(),c.flags|=256,Ui(s,c,m,w),c.child}var Z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ex(s){return{baseLanes:s,cachePool:D2()}}function tx(s,c,m){return s=s!==null?s.childLanes&~m:0,c&&(s|=Ha),s}function GC(s,c,m){var w=c.pendingProps,I=!1,D=(c.flags&128)!==0,Y;if((Y=D)||(Y=s!==null&&s.memoizedState===null?!1:(ei.current&2)!==0),Y&&(I=!0,c.flags&=-129),Y=(c.flags&32)!==0,c.flags&=-33,s===null){if(Nn){if(I?gl(c):yl(),(s=Ar)?(s=JI(s,ho),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:cl!==null?{id:Jo,overflow:Zo}:null,retryLane:536870912,hydrationErrors:null},m=_2(s),m.return=c,c.child=m,Bi=c,Ar=null)):s=null,s===null)throw dl(c);return Bx(s)?c.lanes=32:c.lanes=536870912,null}var ie=w.children;return w=w.fallback,I?(yl(),I=c.mode,ie=C0({mode:"hidden",children:ie},I),w=xc(w,I,m,null),ie.return=c,w.return=c,ie.sibling=w,c.child=ie,w=c.child,w.memoizedState=ex(m),w.childLanes=tx(s,Y,m),c.memoizedState=Z1,Bf(null,w)):(gl(c),nx(c,ie))}var pe=s.memoizedState;if(pe!==null&&(ie=pe.dehydrated,ie!==null)){if(D)c.flags&256?(gl(c),c.flags&=-257,c=rx(s,c,m)):c.memoizedState!==null?(yl(),c.child=s.child,c.flags|=128,c=null):(yl(),ie=w.fallback,I=c.mode,w=C0({mode:"visible",children:w.children},I),ie=xc(ie,I,m,null),ie.flags|=2,w.return=c,ie.return=c,w.sibling=ie,c.child=w,Tc(c,s.child,null,m),w=c.child,w.memoizedState=ex(m),w.childLanes=tx(s,Y,m),c.memoizedState=Z1,c=Bf(null,w));else if(gl(c),Bx(ie)){if(Y=ie.nextSibling&&ie.nextSibling.dataset,Y)var Oe=Y.dgst;Y=Oe,w=Error(r(419)),w.stack="",w.digest=Y,Tf({value:w,source:null,stack:null}),c=rx(s,c,m)}else if(ai||Nu(s,c,m,!1),Y=(m&s.childLanes)!==0,ai||Y){if(Y=yr,Y!==null&&(w=ia(Y,m),w!==0&&w!==pe.retryLane))throw pe.retryLane=w,yc(s,w),Ma(Y,s,w),Q1;Lx(ie)||L0(),c=rx(s,c,m)}else Lx(ie)?(c.flags|=192,c.child=s.child,c=null):(s=pe.treeContext,Ar=mo(ie.nextSibling),Bi=c,Nn=!0,ul=null,ho=!1,s!==null&&S2(c,s),c=nx(c,w.children),c.flags|=4096);return c}return I?(yl(),ie=w.fallback,I=c.mode,pe=s.child,Oe=pe.sibling,w=ws(pe,{mode:"hidden",children:w.children}),w.subtreeFlags=pe.subtreeFlags&65011712,Oe!==null?ie=ws(Oe,ie):(ie=xc(ie,I,m,null),ie.flags|=2),ie.return=c,w.return=c,w.sibling=ie,c.child=w,Bf(null,w),w=c.child,ie=s.child.memoizedState,ie===null?ie=ex(m):(I=ie.cachePool,I!==null?(pe=ri._currentValue,I=I.parent!==pe?{parent:pe,pool:pe}:I):I=D2(),ie={baseLanes:ie.baseLanes|m,cachePool:I}),w.memoizedState=ie,w.childLanes=tx(s,Y,m),c.memoizedState=Z1,Bf(s.child,w)):(gl(c),m=s.child,s=m.sibling,m=ws(m,{mode:"visible",children:w.children}),m.return=c,m.sibling=null,s!==null&&(Y=c.deletions,Y===null?(c.deletions=[s],c.flags|=16):Y.push(s)),c.child=m,c.memoizedState=null,m)}function nx(s,c){return c=C0({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function C0(s,c){return s=Fa(22,s,null,c),s.lanes=0,s}function rx(s,c,m){return Tc(c,s.child,null,m),s=nx(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function HC(s,c,m){s.lanes|=c;var w=s.alternate;w!==null&&(w.lanes|=c),x1(s.return,c,m)}function ix(s,c,m,w,I,D){var Y=s.memoizedState;Y===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:I,treeForkCount:D}:(Y.isBackwards=c,Y.rendering=null,Y.renderingStartTime=0,Y.last=w,Y.tail=m,Y.tailMode=I,Y.treeForkCount=D)}function $C(s,c,m){var w=c.pendingProps,I=w.revealOrder,D=w.tail;w=w.children;var Y=ei.current,ie=(Y&2)!==0;if(ie?(Y=Y&1|2,c.flags|=128):Y&=1,Ae(ei,Y),Ui(s,c,w,m),w=Nn?Af:0,!ie&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&HC(s,m,c);else if(s.tag===19)HC(s,m,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(I){case"forwards":for(m=c.child,I=null;m!==null;)s=m.alternate,s!==null&&m0(s)===null&&(I=m),m=m.sibling;m=I,m===null?(I=c.child,c.child=null):(I=m.sibling,m.sibling=null),ix(c,!1,I,m,D,w);break;case"backwards":case"unstable_legacy-backwards":for(m=null,I=c.child,c.child=null;I!==null;){if(s=I.alternate,s!==null&&m0(s)===null){c.child=I;break}s=I.sibling,I.sibling=m,m=I,I=s}ix(c,!0,m,null,D,w);break;case"together":ix(c,!1,null,null,void 0,w);break;default:c.memoizedState=null}return c.child}function Cs(s,c,m){if(s!==null&&(c.dependencies=s.dependencies),bl|=c.lanes,(m&c.childLanes)===0)if(s!==null){if(Nu(s,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,m=ws(s,s.pendingProps),c.child=m,m.return=c;s.sibling!==null;)s=s.sibling,m=m.sibling=ws(s,s.pendingProps),m.return=c;m.sibling=null}return c.child}function ax(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&s0(s)))}function g7(s,c,m){switch(c.tag){case 3:et(c,c.stateNode.containerInfo),fl(c,ri,s.memoizedState.cache),vc();break;case 27:case 5:ct(c);break;case 4:et(c,c.stateNode.containerInfo);break;case 10:fl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,R1(c),null;break;case 13:var w=c.memoizedState;if(w!==null)return w.dehydrated!==null?(gl(c),c.flags|=128,null):(m&c.child.childLanes)!==0?GC(s,c,m):(gl(c),s=Cs(s,c,m),s!==null?s.sibling:null);gl(c);break;case 19:var I=(s.flags&128)!==0;if(w=(m&c.childLanes)!==0,w||(Nu(s,c,m,!1),w=(m&c.childLanes)!==0),I){if(w)return $C(s,c,m);c.flags|=128}if(I=c.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Ae(ei,ei.current),w)break;return null;case 22:return c.lanes=0,jC(s,c,m,c.pendingProps);case 24:fl(c,ri,s.memoizedState.cache)}return Cs(s,c,m)}function YC(s,c,m){if(s!==null)if(s.memoizedProps!==c.pendingProps)ai=!0;else{if(!ax(s,m)&&(c.flags&128)===0)return ai=!1,g7(s,c,m);ai=(s.flags&131072)!==0}else ai=!1,Nn&&(c.flags&1048576)!==0&&T2(c,Af,c.index);switch(c.lanes=0,c.tag){case 16:e:{var w=c.pendingProps;if(s=_c(c.elementType),c.type=s,typeof s=="function")u1(s)?(w=Cc(s,w),c.tag=1,c=qC(null,c,s,w,m)):(c.tag=0,c=J1(null,c,s,w,m));else{if(s!=null){var I=s.$$typeof;if(I===q){c.tag=11,c=kC(null,c,s,w,m);break e}else if(I===B){c.tag=14,c=LC(null,c,s,w,m);break e}}throw c=ge(s)||s,Error(r(306,c,""))}}return c;case 0:return J1(s,c,c.type,c.pendingProps,m);case 1:return w=c.type,I=Cc(w,c.pendingProps),qC(s,c,w,I,m);case 3:e:{if(et(c,c.stateNode.containerInfo),s===null)throw Error(r(387));w=c.pendingProps;var D=c.memoizedState;I=D.element,T1(s,c),Df(c,w,null,m);var Y=c.memoizedState;if(w=Y.cache,fl(c,ri,w),w!==D.cache&&v1(c,[ri],m,!0),Mf(),w=Y.element,D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:Y.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=zC(s,c,w,m);break e}else if(w!==I){I=co(Error(r(424)),c),Tf(I),c=zC(s,c,w,m);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ar=mo(s.firstChild),Bi=c,Nn=!0,ul=null,ho=!0,m=j2(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(vc(),w===I){c=Cs(s,c,m);break e}Ui(s,c,w,m)}c=c.child}return c;case 26:return S0(s,c),s===null?(m=iN(c.type,null,c.pendingProps,null))?c.memoizedState=m:Nn||(m=c.type,s=c.pendingProps,w=z0(Ye.current).createElement(m),w[ar]=c,w[Dn]=s,Vi(w,m,s),mn(w),c.stateNode=w):c.memoizedState=iN(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return ct(c),s===null&&Nn&&(w=c.stateNode=tN(c.type,c.pendingProps,Ye.current),Bi=c,ho=!0,I=Ar,Tl(c.type)?(jx=I,Ar=mo(w.firstChild)):Ar=I),Ui(s,c,c.pendingProps.children,m),S0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Nn&&((I=w=Ar)&&(w=$7(w,c.type,c.pendingProps,ho),w!==null?(c.stateNode=w,Bi=c,Ar=mo(w.firstChild),ho=!1,I=!0):I=!1),I||dl(c)),ct(c),I=c.type,D=c.pendingProps,Y=s!==null?s.memoizedProps:null,w=D.children,Ox(I,D)?w=null:Y!==null&&Ox(I,Y)&&(c.flags|=32),c.memoizedState!==null&&(I=D1(s,c,s7,null,null,m),Jf._currentValue=I),S0(s,c),Ui(s,c,w,m),c.child;case 6:return s===null&&Nn&&((s=m=Ar)&&(m=Y7(m,c.pendingProps,ho),m!==null?(c.stateNode=m,Bi=c,Ar=null,s=!0):s=!1),s||dl(c)),null;case 13:return GC(s,c,m);case 4:return et(c,c.stateNode.containerInfo),w=c.pendingProps,s===null?c.child=Tc(c,null,w,m):Ui(s,c,w,m),c.child;case 11:return kC(s,c,c.type,c.pendingProps,m);case 7:return Ui(s,c,c.pendingProps,m),c.child;case 8:return Ui(s,c,c.pendingProps.children,m),c.child;case 12:return Ui(s,c,c.pendingProps.children,m),c.child;case 10:return w=c.pendingProps,fl(c,c.type,w.value),Ui(s,c,w.children,m),c.child;case 9:return I=c.type._context,w=c.pendingProps.children,wc(c),I=ji(I),w=w(I),c.flags|=1,Ui(s,c,w,m),c.child;case 14:return LC(s,c,c.type,c.pendingProps,m);case 15:return BC(s,c,c.type,c.pendingProps,m);case 19:return $C(s,c,m);case 31:return m7(s,c,m);case 22:return jC(s,c,m,c.pendingProps);case 24:return wc(c),w=ji(ri),s===null?(I=E1(),I===null&&(I=yr,D=b1(),I.pooledCache=D,D.refCount++,D!==null&&(I.pooledCacheLanes|=m),I=D),c.memoizedState={parent:w,cache:I},A1(c),fl(c,ri,I)):((s.lanes&m)!==0&&(T1(s,c),Df(c,null,null,m),Mf()),I=s.memoizedState,D=c.memoizedState,I.parent!==w?(I={parent:w,cache:w},c.memoizedState=I,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=I),fl(c,ri,w)):(w=D.cache,fl(c,ri,w),w!==I.cache&&v1(c,[ri],m,!0))),Ui(s,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Is(s){s.flags|=4}function ox(s,c,m,w,I){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(I&335544128)===I)if(s.stateNode.complete)s.flags|=8192;else if(bI())s.flags|=8192;else throw Ac=d0,_1}else s.flags&=-16777217}function KC(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!cN(c))if(bI())s.flags|=8192;else throw Ac=d0,_1}function I0(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?En():536870912,s.lanes|=c,Fu|=c)}function jf(s,c){if(!Nn)switch(s.tailMode){case"hidden":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Tr(s){var c=s.alternate!==null&&s.alternate.child===s.child,m=0,w=0;if(c)for(var I=s.child;I!==null;)m|=I.lanes|I.childLanes,w|=I.subtreeFlags&65011712,w|=I.flags&65011712,I.return=s,I=I.sibling;else for(I=s.child;I!==null;)m|=I.lanes|I.childLanes,w|=I.subtreeFlags,w|=I.flags,I.return=s,I=I.sibling;return s.subtreeFlags|=w,s.childLanes=m,c}function y7(s,c,m){var w=c.pendingProps;switch(p1(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(c),null;case 1:return Tr(c),null;case 3:return m=c.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),c.memoizedState.cache!==w&&(c.flags|=2048),As(ri),Be(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Iu(c)?Is(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,g1())),Tr(c),null;case 26:var I=c.type,D=c.memoizedState;return s===null?(Is(c),D!==null?(Tr(c),KC(c,D)):(Tr(c),ox(c,I,null,w,m))):D?D!==s.memoizedState?(Is(c),Tr(c),KC(c,D)):(Tr(c),c.flags&=-16777217):(s=s.memoizedProps,s!==w&&Is(c),Tr(c),ox(c,I,s,w,m)),null;case 27:if(rt(c),m=Ye.current,I=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==w&&Is(c);else{if(!w){if(c.stateNode===null)throw Error(r(166));return Tr(c),null}s=He.current,Iu(c)?C2(c):(s=tN(I,w,m),c.stateNode=s,Is(c))}return Tr(c),null;case 5:if(rt(c),I=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==w&&Is(c);else{if(!w){if(c.stateNode===null)throw Error(r(166));return Tr(c),null}if(D=He.current,Iu(c))C2(c);else{var Y=z0(Ye.current);switch(D){case 1:D=Y.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:D=Y.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":D=Y.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":D=Y.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":D=Y.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof w.is=="string"?Y.createElement("select",{is:w.is}):Y.createElement("select"),w.multiple?D.multiple=!0:w.size&&(D.size=w.size);break;default:D=typeof w.is=="string"?Y.createElement(I,{is:w.is}):Y.createElement(I)}}D[ar]=c,D[Dn]=w;e:for(Y=c.child;Y!==null;){if(Y.tag===5||Y.tag===6)D.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===c)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===c)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}c.stateNode=D;e:switch(Vi(D,I,w),I){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Is(c)}}return Tr(c),ox(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,m),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==w&&Is(c);else{if(typeof w!="string"&&c.stateNode===null)throw Error(r(166));if(s=Ye.current,Iu(c)){if(s=c.stateNode,m=c.memoizedProps,w=null,I=Bi,I!==null)switch(I.tag){case 27:case 5:w=I.memoizedProps}s[ar]=c,s=!!(s.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||GI(s.nodeValue,m)),s||dl(c,!0)}else s=z0(s).createTextNode(w),s[ar]=c,c.stateNode=s}return Tr(c),null;case 31:if(m=c.memoizedState,s===null||s.memoizedState!==null){if(w=Iu(c),m!==null){if(s===null){if(!w)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[ar]=c}else vc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Tr(c),s=!1}else m=g1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),s=!0;if(!s)return c.flags&256?(za(c),c):(za(c),null);if((c.flags&128)!==0)throw Error(r(558))}return Tr(c),null;case 13:if(w=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I=Iu(c),w!==null&&w.dehydrated!==null){if(s===null){if(!I)throw Error(r(318));if(I=c.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[ar]=c}else vc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Tr(c),I=!1}else I=g1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=I),I=!0;if(!I)return c.flags&256?(za(c),c):(za(c),null)}return za(c),(c.flags&128)!==0?(c.lanes=m,c):(m=w!==null,s=s!==null&&s.memoizedState!==null,m&&(w=c.child,I=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(I=w.alternate.memoizedState.cachePool.pool),D=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),D!==I&&(w.flags|=2048)),m!==s&&m&&(c.child.flags|=8192),I0(c,c.updateQueue),Tr(c),null);case 4:return Be(),s===null&&Ix(c.stateNode.containerInfo),Tr(c),null;case 10:return As(c.type),Tr(c),null;case 19:if(fe(ei),w=c.memoizedState,w===null)return Tr(c),null;if(I=(c.flags&128)!==0,D=w.rendering,D===null)if(I)jf(w,!1);else{if(Yr!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(D=m0(s),D!==null){for(c.flags|=128,jf(w,!1),s=D.updateQueue,c.updateQueue=s,I0(c,s),c.subtreeFlags=0,s=m,m=c.child;m!==null;)E2(m,s),m=m.sibling;return Ae(ei,ei.current&1|2),Nn&&Es(c,w.treeForkCount),c.child}s=s.sibling}w.tail!==null&&Ee()>O0&&(c.flags|=128,I=!0,jf(w,!1),c.lanes=4194304)}else{if(!I)if(s=m0(D),s!==null){if(c.flags|=128,I=!0,s=s.updateQueue,c.updateQueue=s,I0(c,s),jf(w,!0),w.tail===null&&w.tailMode==="hidden"&&!D.alternate&&!Nn)return Tr(c),null}else 2*Ee()-w.renderingStartTime>O0&&m!==536870912&&(c.flags|=128,I=!0,jf(w,!1),c.lanes=4194304);w.isBackwards?(D.sibling=c.child,c.child=D):(s=w.last,s!==null?s.sibling=D:c.child=D,w.last=D)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=Ee(),s.sibling=null,m=ei.current,Ae(ei,I?m&1|2:m&1),Nn&&Es(c,w.treeForkCount),s):(Tr(c),null);case 22:case 23:return za(c),N1(),w=c.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(c.flags|=8192):w&&(c.flags|=8192),w?(m&536870912)!==0&&(c.flags&128)===0&&(Tr(c),c.subtreeFlags&6&&(c.flags|=8192)):Tr(c),m=c.updateQueue,m!==null&&I0(c,m.retryQueue),m=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),w=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(w=c.memoizedState.cachePool.pool),w!==m&&(c.flags|=2048),s!==null&&fe(Ec),null;case 24:return m=null,s!==null&&(m=s.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),As(ri),Tr(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function x7(s,c){switch(p1(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return As(ri),Be(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return rt(c),null;case 31:if(c.memoizedState!==null){if(za(c),c.alternate===null)throw Error(r(340));vc()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(za(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));vc()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return fe(ei),null;case 4:return Be(),null;case 10:return As(c.type),null;case 22:case 23:return za(c),N1(),s!==null&&fe(Ec),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return As(ri),null;case 25:return null;default:return null}}function WC(s,c){switch(p1(c),c.tag){case 3:As(ri),Be();break;case 26:case 27:case 5:rt(c);break;case 4:Be();break;case 31:c.memoizedState!==null&&za(c);break;case 13:za(c);break;case 19:fe(ei);break;case 10:As(c.type);break;case 22:case 23:za(c),N1(),s!==null&&fe(Ec);break;case 24:As(ri)}}function Uf(s,c){try{var m=c.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var I=w.next;m=I;do{if((m.tag&s)===s){w=void 0;var D=m.create,Y=m.inst;w=D(),Y.destroy=w}m=m.next}while(m!==I)}}catch(ie){tr(c,c.return,ie)}}function xl(s,c,m){try{var w=c.updateQueue,I=w!==null?w.lastEffect:null;if(I!==null){var D=I.next;w=D;do{if((w.tag&s)===s){var Y=w.inst,ie=Y.destroy;if(ie!==void 0){Y.destroy=void 0,I=c;var pe=m,Oe=ie;try{Oe()}catch(Xe){tr(I,pe,Xe)}}}w=w.next}while(w!==D)}}catch(Xe){tr(c,c.return,Xe)}}function XC(s){var c=s.updateQueue;if(c!==null){var m=s.stateNode;try{V2(c,m)}catch(w){tr(s,s.return,w)}}}function QC(s,c,m){m.props=Cc(s.type,s.memoizedProps),m.state=s.memoizedState;try{m.componentWillUnmount()}catch(w){tr(s,c,w)}}function Vf(s,c){try{var m=s.ref;if(m!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof m=="function"?s.refCleanup=m(w):m.current=w}}catch(I){tr(s,c,I)}}function es(s,c){var m=s.ref,w=s.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(I){tr(s,c,I)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(I){tr(s,c,I)}else m.current=null}function JC(s){var c=s.type,m=s.memoizedProps,w=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(I){tr(s,s.return,I)}}function sx(s,c,m){try{var w=s.stateNode;V7(w,s.type,m,c),w[Dn]=c}catch(I){tr(s,s.return,I)}}function ZC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Tl(s.type)||s.tag===4}function lx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ZC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Tl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function cx(s,c,m){var w=s.tag;if(w===5||w===6)s=s.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(s,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(s),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Lr));else if(w!==4&&(w===27&&Tl(s.type)&&(m=s.stateNode,c=null),s=s.child,s!==null))for(cx(s,c,m),s=s.sibling;s!==null;)cx(s,c,m),s=s.sibling}function N0(s,c,m){var w=s.tag;if(w===5||w===6)s=s.stateNode,c?m.insertBefore(s,c):m.appendChild(s);else if(w!==4&&(w===27&&Tl(s.type)&&(m=s.stateNode),s=s.child,s!==null))for(N0(s,c,m),s=s.sibling;s!==null;)N0(s,c,m),s=s.sibling}function eI(s){var c=s.stateNode,m=s.memoizedProps;try{for(var w=s.type,I=c.attributes;I.length;)c.removeAttributeNode(I[0]);Vi(c,w,m),c[ar]=s,c[Dn]=m}catch(D){tr(s,s.return,D)}}var Ns=!1,oi=!1,ux=!1,tI=typeof WeakSet=="function"?WeakSet:Set,Ci=null;function v7(s,c){if(s=s.containerInfo,Mx=X0,s=Z(s),ne(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var I=w.anchorOffset,D=w.focusNode;w=w.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var Y=0,ie=-1,pe=-1,Oe=0,Xe=0,tt=s,Ue=null;t:for(;;){for(var Ge;tt!==m||I!==0&&tt.nodeType!==3||(ie=Y+I),tt!==D||w!==0&&tt.nodeType!==3||(pe=Y+w),tt.nodeType===3&&(Y+=tt.nodeValue.length),(Ge=tt.firstChild)!==null;)Ue=tt,tt=Ge;for(;;){if(tt===s)break t;if(Ue===m&&++Oe===I&&(ie=Y),Ue===D&&++Xe===w&&(pe=Y),(Ge=tt.nextSibling)!==null)break;tt=Ue,Ue=tt.parentNode}tt=Ge}m=ie===-1||pe===-1?null:{start:ie,end:pe}}else m=null}m=m||{start:0,end:0}}else m=null;for(Dx={focusedElem:s,selectionRange:m},X0=!1,Ci=c;Ci!==null;)if(c=Ci,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,Ci=s;else for(;Ci!==null;){switch(c=Ci,D=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(m=0;m<s.length;m++)I=s[m],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&D!==null){s=void 0,m=c,I=D.memoizedProps,D=D.memoizedState,w=m.stateNode;try{var Dt=Cc(m.type,I);s=w.getSnapshotBeforeUpdate(Dt,D),w.__reactInternalSnapshotBeforeUpdate=s}catch($t){tr(m,m.return,$t)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,m=s.nodeType,m===9)kx(s);else if(m===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":kx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,Ci=s;break}Ci=c.return}}function nI(s,c,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:Ms(s,m),w&4&&Uf(5,m);break;case 1:if(Ms(s,m),w&4)if(s=m.stateNode,c===null)try{s.componentDidMount()}catch(Y){tr(m,m.return,Y)}else{var I=Cc(m.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(I,c,s.__reactInternalSnapshotBeforeUpdate)}catch(Y){tr(m,m.return,Y)}}w&64&&XC(m),w&512&&Vf(m,m.return);break;case 3:if(Ms(s,m),w&64&&(s=m.updateQueue,s!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{V2(s,c)}catch(Y){tr(m,m.return,Y)}}break;case 27:c===null&&w&4&&eI(m);case 26:case 5:Ms(s,m),c===null&&w&4&&JC(m),w&512&&Vf(m,m.return);break;case 12:Ms(s,m);break;case 31:Ms(s,m),w&4&&aI(s,m);break;case 13:Ms(s,m),w&4&&oI(s,m),w&64&&(s=m.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(m=I7.bind(null,m),K7(s,m))));break;case 22:if(w=m.memoizedState!==null||Ns,!w){c=c!==null&&c.memoizedState!==null||oi,I=Ns;var D=oi;Ns=w,(oi=c)&&!D?Ds(s,m,(m.subtreeFlags&8772)!==0):Ms(s,m),Ns=I,oi=D}break;case 30:break;default:Ms(s,m)}}function rI(s){var c=s.alternate;c!==null&&(s.alternate=null,rI(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Nt(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rr=null,Ca=!1;function Rs(s,c,m){for(m=m.child;m!==null;)iI(s,c,m),m=m.sibling}function iI(s,c,m){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(un,m)}catch{}switch(m.tag){case 26:oi||es(m,c),Rs(s,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:oi||es(m,c);var w=Rr,I=Ca;Tl(m.type)&&(Rr=m.stateNode,Ca=!1),Rs(s,c,m),Wf(m.stateNode),Rr=w,Ca=I;break;case 5:oi||es(m,c);case 6:if(w=Rr,I=Ca,Rr=null,Rs(s,c,m),Rr=w,Ca=I,Rr!==null)if(Ca)try{(Rr.nodeType===9?Rr.body:Rr.nodeName==="HTML"?Rr.ownerDocument.body:Rr).removeChild(m.stateNode)}catch(D){tr(m,c,D)}else try{Rr.removeChild(m.stateNode)}catch(D){tr(m,c,D)}break;case 18:Rr!==null&&(Ca?(s=Rr,XI(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,m.stateNode),Wu(s)):XI(Rr,m.stateNode));break;case 4:w=Rr,I=Ca,Rr=m.stateNode.containerInfo,Ca=!0,Rs(s,c,m),Rr=w,Ca=I;break;case 0:case 11:case 14:case 15:xl(2,m,c),oi||xl(4,m,c),Rs(s,c,m);break;case 1:oi||(es(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"&&QC(m,c,w)),Rs(s,c,m);break;case 21:Rs(s,c,m);break;case 22:oi=(w=oi)||m.memoizedState!==null,Rs(s,c,m),oi=w;break;default:Rs(s,c,m)}}function aI(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Wu(s)}catch(m){tr(c,c.return,m)}}}function oI(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Wu(s)}catch(m){tr(c,c.return,m)}}function b7(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new tI),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new tI),c;default:throw Error(r(435,s.tag))}}function R0(s,c){var m=b7(s);c.forEach(function(w){if(!m.has(w)){m.add(w);var I=N7.bind(null,s,w);w.then(I,I)}})}function Ia(s,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var I=m[w],D=s,Y=c,ie=Y;e:for(;ie!==null;){switch(ie.tag){case 27:if(Tl(ie.type)){Rr=ie.stateNode,Ca=!1;break e}break;case 5:Rr=ie.stateNode,Ca=!1;break e;case 3:case 4:Rr=ie.stateNode.containerInfo,Ca=!0;break e}ie=ie.return}if(Rr===null)throw Error(r(160));iI(D,Y,I),Rr=null,Ca=!1,D=I.alternate,D!==null&&(D.return=null),I.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)sI(c,s),c=c.sibling}var Oo=null;function sI(s,c){var m=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ia(c,s),Na(s),w&4&&(xl(3,s,s.return),Uf(3,s),xl(5,s,s.return));break;case 1:Ia(c,s),Na(s),w&512&&(oi||m===null||es(m,m.return)),w&64&&Ns&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(m=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var I=Oo;if(Ia(c,s),Na(s),w&512&&(oi||m===null||es(m,m.return)),w&4){var D=m!==null?m.memoizedState:null;if(w=s.memoizedState,m===null)if(w===null)if(s.stateNode===null){e:{w=s.type,m=s.memoizedProps,I=I.ownerDocument||I;t:switch(w){case"title":D=I.getElementsByTagName("title")[0],(!D||D[ht]||D[ar]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=I.createElement(w),I.head.insertBefore(D,I.querySelector("head > title"))),Vi(D,w,m),D[ar]=s,mn(D),w=D;break e;case"link":var Y=sN("link","href",I).get(w+(m.href||""));if(Y){for(var ie=0;ie<Y.length;ie++)if(D=Y[ie],D.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&D.getAttribute("rel")===(m.rel==null?null:m.rel)&&D.getAttribute("title")===(m.title==null?null:m.title)&&D.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){Y.splice(ie,1);break t}}D=I.createElement(w),Vi(D,w,m),I.head.appendChild(D);break;case"meta":if(Y=sN("meta","content",I).get(w+(m.content||""))){for(ie=0;ie<Y.length;ie++)if(D=Y[ie],D.getAttribute("content")===(m.content==null?null:""+m.content)&&D.getAttribute("name")===(m.name==null?null:m.name)&&D.getAttribute("property")===(m.property==null?null:m.property)&&D.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&D.getAttribute("charset")===(m.charSet==null?null:m.charSet)){Y.splice(ie,1);break t}}D=I.createElement(w),Vi(D,w,m),I.head.appendChild(D);break;default:throw Error(r(468,w))}D[ar]=s,mn(D),w=D}s.stateNode=w}else lN(I,s.type,s.stateNode);else s.stateNode=oN(I,w,s.memoizedProps);else D!==w?(D===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):D.count--,w===null?lN(I,s.type,s.stateNode):oN(I,w,s.memoizedProps)):w===null&&s.stateNode!==null&&sx(s,s.memoizedProps,m.memoizedProps)}break;case 27:Ia(c,s),Na(s),w&512&&(oi||m===null||es(m,m.return)),m!==null&&w&4&&sx(s,s.memoizedProps,m.memoizedProps);break;case 5:if(Ia(c,s),Na(s),w&512&&(oi||m===null||es(m,m.return)),s.flags&32){I=s.stateNode;try{xa(I,"")}catch(Dt){tr(s,s.return,Dt)}}w&4&&s.stateNode!=null&&(I=s.memoizedProps,sx(s,I,m!==null?m.memoizedProps:I)),w&1024&&(ux=!0);break;case 6:if(Ia(c,s),Na(s),w&4){if(s.stateNode===null)throw Error(r(162));w=s.memoizedProps,m=s.stateNode;try{m.nodeValue=w}catch(Dt){tr(s,s.return,Dt)}}break;case 3:if($0=null,I=Oo,Oo=G0(c.containerInfo),Ia(c,s),Oo=I,Na(s),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Wu(c.containerInfo)}catch(Dt){tr(s,s.return,Dt)}ux&&(ux=!1,lI(s));break;case 4:w=Oo,Oo=G0(s.stateNode.containerInfo),Ia(c,s),Na(s),Oo=w;break;case 12:Ia(c,s),Na(s);break;case 31:Ia(c,s),Na(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,R0(s,w)));break;case 13:Ia(c,s),Na(s),s.child.flags&8192&&s.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(D0=Ee()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,R0(s,w)));break;case 22:I=s.memoizedState!==null;var pe=m!==null&&m.memoizedState!==null,Oe=Ns,Xe=oi;if(Ns=Oe||I,oi=Xe||pe,Ia(c,s),oi=Xe,Ns=Oe,Na(s),w&8192)e:for(c=s.stateNode,c._visibility=I?c._visibility&-2:c._visibility|1,I&&(m===null||pe||Ns||oi||Ic(s)),m=null,c=s;;){if(c.tag===5||c.tag===26){if(m===null){pe=m=c;try{if(D=pe.stateNode,I)Y=D.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ie=pe.stateNode;var tt=pe.memoizedProps.style,Ue=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;ie.style.display=Ue==null||typeof Ue=="boolean"?"":(""+Ue).trim()}}catch(Dt){tr(pe,pe.return,Dt)}}}else if(c.tag===6){if(m===null){pe=c;try{pe.stateNode.nodeValue=I?"":pe.memoizedProps}catch(Dt){tr(pe,pe.return,Dt)}}}else if(c.tag===18){if(m===null){pe=c;try{var Ge=pe.stateNode;I?QI(Ge,!0):QI(pe.stateNode,!1)}catch(Dt){tr(pe,pe.return,Dt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}w&4&&(w=s.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,R0(s,m))));break;case 19:Ia(c,s),Na(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,R0(s,w)));break;case 30:break;case 21:break;default:Ia(c,s),Na(s)}}function Na(s){var c=s.flags;if(c&2){try{for(var m,w=s.return;w!==null;){if(ZC(w)){m=w;break}w=w.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var I=m.stateNode,D=lx(s);N0(s,D,I);break;case 5:var Y=m.stateNode;m.flags&32&&(xa(Y,""),m.flags&=-33);var ie=lx(s);N0(s,ie,Y);break;case 3:case 4:var pe=m.stateNode.containerInfo,Oe=lx(s);cx(s,Oe,pe);break;default:throw Error(r(161))}}catch(Xe){tr(s,s.return,Xe)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function lI(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;lI(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function Ms(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)nI(s,c.alternate,c),c=c.sibling}function Ic(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:xl(4,c,c.return),Ic(c);break;case 1:es(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&QC(c,c.return,m),Ic(c);break;case 27:Wf(c.stateNode);case 26:case 5:es(c,c.return),Ic(c);break;case 22:c.memoizedState===null&&Ic(c);break;case 30:Ic(c);break;default:Ic(c)}s=s.sibling}}function Ds(s,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var w=c.alternate,I=s,D=c,Y=D.flags;switch(D.tag){case 0:case 11:case 15:Ds(I,D,m),Uf(4,D);break;case 1:if(Ds(I,D,m),w=D,I=w.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Oe){tr(w,w.return,Oe)}if(w=D,I=w.updateQueue,I!==null){var ie=w.stateNode;try{var pe=I.shared.hiddenCallbacks;if(pe!==null)for(I.shared.hiddenCallbacks=null,I=0;I<pe.length;I++)U2(pe[I],ie)}catch(Oe){tr(w,w.return,Oe)}}m&&Y&64&&XC(D),Vf(D,D.return);break;case 27:eI(D);case 26:case 5:Ds(I,D,m),m&&w===null&&Y&4&&JC(D),Vf(D,D.return);break;case 12:Ds(I,D,m);break;case 31:Ds(I,D,m),m&&Y&4&&aI(I,D);break;case 13:Ds(I,D,m),m&&Y&4&&oI(I,D);break;case 22:D.memoizedState===null&&Ds(I,D,m),Vf(D,D.return);break;case 30:break;default:Ds(I,D,m)}c=c.sibling}}function dx(s,c){var m=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==m&&(s!=null&&s.refCount++,m!=null&&Sf(m))}function fx(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Sf(s))}function Po(s,c,m,w){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)cI(s,c,m,w),c=c.sibling}function cI(s,c,m,w){var I=c.flags;switch(c.tag){case 0:case 11:case 15:Po(s,c,m,w),I&2048&&Uf(9,c);break;case 1:Po(s,c,m,w);break;case 3:Po(s,c,m,w),I&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Sf(s)));break;case 12:if(I&2048){Po(s,c,m,w),s=c.stateNode;try{var D=c.memoizedProps,Y=D.id,ie=D.onPostCommit;typeof ie=="function"&&ie(Y,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(pe){tr(c,c.return,pe)}}else Po(s,c,m,w);break;case 31:Po(s,c,m,w);break;case 13:Po(s,c,m,w);break;case 23:break;case 22:D=c.stateNode,Y=c.alternate,c.memoizedState!==null?D._visibility&2?Po(s,c,m,w):Ff(s,c):D._visibility&2?Po(s,c,m,w):(D._visibility|=2,ju(s,c,m,w,(c.subtreeFlags&10256)!==0||!1)),I&2048&&dx(Y,c);break;case 24:Po(s,c,m,w),I&2048&&fx(c.alternate,c);break;default:Po(s,c,m,w)}}function ju(s,c,m,w,I){for(I=I&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var D=s,Y=c,ie=m,pe=w,Oe=Y.flags;switch(Y.tag){case 0:case 11:case 15:ju(D,Y,ie,pe,I),Uf(8,Y);break;case 23:break;case 22:var Xe=Y.stateNode;Y.memoizedState!==null?Xe._visibility&2?ju(D,Y,ie,pe,I):Ff(D,Y):(Xe._visibility|=2,ju(D,Y,ie,pe,I)),I&&Oe&2048&&dx(Y.alternate,Y);break;case 24:ju(D,Y,ie,pe,I),I&&Oe&2048&&fx(Y.alternate,Y);break;default:ju(D,Y,ie,pe,I)}c=c.sibling}}function Ff(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=s,w=c,I=w.flags;switch(w.tag){case 22:Ff(m,w),I&2048&&dx(w.alternate,w);break;case 24:Ff(m,w),I&2048&&fx(w.alternate,w);break;default:Ff(m,w)}c=c.sibling}}var qf=8192;function Uu(s,c,m){if(s.subtreeFlags&qf)for(s=s.child;s!==null;)uI(s,c,m),s=s.sibling}function uI(s,c,m){switch(s.tag){case 26:Uu(s,c,m),s.flags&qf&&s.memoizedState!==null&&oV(m,Oo,s.memoizedState,s.memoizedProps);break;case 5:Uu(s,c,m);break;case 3:case 4:var w=Oo;Oo=G0(s.stateNode.containerInfo),Uu(s,c,m),Oo=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=qf,qf=16777216,Uu(s,c,m),qf=w):Uu(s,c,m));break;default:Uu(s,c,m)}}function dI(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function zf(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var w=c[m];Ci=w,hI(w,s)}dI(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fI(s),s=s.sibling}function fI(s){switch(s.tag){case 0:case 11:case 15:zf(s),s.flags&2048&&xl(9,s,s.return);break;case 3:zf(s);break;case 12:zf(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,M0(s)):zf(s);break;default:zf(s)}}function M0(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var w=c[m];Ci=w,hI(w,s)}dI(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:xl(8,c,c.return),M0(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,M0(c));break;default:M0(c)}s=s.sibling}}function hI(s,c){for(;Ci!==null;){var m=Ci;switch(m.tag){case 0:case 11:case 15:xl(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Sf(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,Ci=w;else e:for(m=s;Ci!==null;){w=Ci;var I=w.sibling,D=w.return;if(rI(w),w===m){Ci=null;break e}if(I!==null){I.return=D,Ci=I;break e}Ci=D}}}var w7={getCacheForType:function(s){var c=ji(ri),m=c.data.get(s);return m===void 0&&(m=s(),c.data.set(s,m)),m},cacheSignal:function(){return ji(ri).controller.signal}},E7=typeof WeakMap=="function"?WeakMap:Map,Hn=0,yr=null,xn=null,Tn=0,er=0,Ga=null,vl=!1,Vu=!1,hx=!1,Os=0,Yr=0,bl=0,Nc=0,px=0,Ha=0,Fu=0,Gf=null,Ra=null,mx=!1,D0=0,pI=0,O0=1/0,P0=null,wl=null,yi=0,El=null,qu=null,Ps=0,gx=0,yx=null,mI=null,Hf=0,xx=null;function $a(){return(Hn&2)!==0&&Tn!==0?Tn&-Tn:te.T!==null?Ax():Ir()}function gI(){if(Ha===0)if((Tn&536870912)===0||Nn){var s=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),Ha=s}else Ha=536870912;return s=qa.current,s!==null&&(s.flags|=32),Ha}function Ma(s,c,m){(s===yr&&(er===2||er===9)||s.cancelPendingCommit!==null)&&(zu(s,0),_l(s,Tn,Ha,!1)),Cr(s,m),((Hn&2)===0||s!==yr)&&(s===yr&&((Hn&2)===0&&(Nc|=m),Yr===4&&_l(s,Tn,Ha,!1)),ts(s))}function yI(s,c,m){if((Hn&6)!==0)throw Error(r(327));var w=!m&&(c&127)===0&&(c&s.expiredLanes)===0||an(s,c),I=w?T7(s,c):bx(s,c,!0),D=w;do{if(I===0){Vu&&!w&&_l(s,c,0,!1);break}else{if(m=s.current.alternate,D&&!_7(m)){I=bx(s,c,!1),D=!1;continue}if(I===2){if(D=c,s.errorRecoveryDisabledLanes&D)var Y=0;else Y=s.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){c=Y;e:{var ie=s;I=Gf;var pe=ie.current.memoizedState.isDehydrated;if(pe&&(zu(ie,Y).flags|=256),Y=bx(ie,Y,!1),Y!==2){if(hx&&!pe){ie.errorRecoveryDisabledLanes|=D,Nc|=D,I=4;break e}D=Ra,Ra=I,D!==null&&(Ra===null?Ra=D:Ra.push.apply(Ra,D))}I=Y}if(D=!1,I!==2)continue}}if(I===1){zu(s,0),_l(s,c,0,!0);break}e:{switch(w=s,D=I,D){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:_l(w,c,Ha,!vl);break e;case 2:Ra=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(I=D0+300-Ee(),10<I)){if(_l(w,c,Ha,!vl),wn(w,0,!0)!==0)break e;Ps=c,w.timeoutHandle=KI(xI.bind(null,w,m,Ra,P0,mx,c,Ha,Nc,Fu,vl,D,"Throttled",-0,0),I);break e}xI(w,m,Ra,P0,mx,c,Ha,Nc,Fu,vl,D,null,-0,0)}}break}while(!0);ts(s)}function xI(s,c,m,w,I,D,Y,ie,pe,Oe,Xe,tt,Ue,Ge){if(s.timeoutHandle=-1,tt=c.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lr},uI(c,D,tt);var Dt=(D&62914560)===D?D0-Ee():(D&4194048)===D?pI-Ee():0;if(Dt=sV(tt,Dt),Dt!==null){Ps=D,s.cancelPendingCommit=Dt(SI.bind(null,s,c,D,m,w,I,Y,ie,pe,Xe,tt,null,Ue,Ge)),_l(s,D,Y,!Oe);return}}SI(s,c,D,m,w,I,Y,ie,pe)}function _7(s){for(var c=s;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var I=m[w],D=I.getSnapshot;I=I.value;try{if(!E(D(),I))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _l(s,c,m,w){c&=~px,c&=~Nc,s.suspendedLanes|=c,s.pingedLanes&=~c,w&&(s.warmLanes|=c),w=s.expirationTimes;for(var I=c;0<I;){var D=31-Yt(I),Y=1<<D;w[D]=-1,I&=~Y}m!==0&&no(s,m,c)}function k0(){return(Hn&6)===0?($f(0),!1):!0}function vx(){if(xn!==null){if(er===0)var s=xn.return;else s=xn,_s=bc=null,k1(s),Ou=null,If=0,s=xn;for(;s!==null;)WC(s.alternate,s),s=s.return;xn=null}}function zu(s,c){var m=s.timeoutHandle;m!==-1&&(s.timeoutHandle=-1,z7(m)),m=s.cancelPendingCommit,m!==null&&(s.cancelPendingCommit=null,m()),Ps=0,vx(),yr=s,xn=m=ws(s.current,null),Tn=c,er=0,Ga=null,vl=!1,Vu=an(s,c),hx=!1,Fu=Ha=px=Nc=bl=Yr=0,Ra=Gf=null,mx=!1,(c&8)!==0&&(c|=c&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=c;0<w;){var I=31-Yt(w),D=1<<I;c|=s[I],w&=~D}return Os=c,n0(),m}function vI(s,c){on=null,te.H=Lf,c===Du||c===u0?(c=k2(),er=3):c===_1?(c=k2(),er=4):er=c===Q1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ga=c,xn===null&&(Yr=1,A0(s,co(c,s.current)))}function bI(){var s=qa.current;return s===null?!0:(Tn&4194048)===Tn?po===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?s===po:!1}function wI(){var s=te.H;return te.H=Lf,s===null?Lf:s}function EI(){var s=te.A;return te.A=w7,s}function L0(){Yr=4,vl||(Tn&4194048)!==Tn&&qa.current!==null||(Vu=!0),(bl&134217727)===0&&(Nc&134217727)===0||yr===null||_l(yr,Tn,Ha,!1)}function bx(s,c,m){var w=Hn;Hn|=2;var I=wI(),D=EI();(yr!==s||Tn!==c)&&(P0=null,zu(s,c)),c=!1;var Y=Yr;e:do try{if(er!==0&&xn!==null){var ie=xn,pe=Ga;switch(er){case 8:vx(),Y=6;break e;case 3:case 2:case 9:case 6:qa.current===null&&(c=!0);var Oe=er;if(er=0,Ga=null,Gu(s,ie,pe,Oe),m&&Vu){Y=0;break e}break;default:Oe=er,er=0,Ga=null,Gu(s,ie,pe,Oe)}}A7(),Y=Yr;break}catch(Xe){vI(s,Xe)}while(!0);return c&&s.shellSuspendCounter++,_s=bc=null,Hn=w,te.H=I,te.A=D,xn===null&&(yr=null,Tn=0,n0()),Y}function A7(){for(;xn!==null;)_I(xn)}function T7(s,c){var m=Hn;Hn|=2;var w=wI(),I=EI();yr!==s||Tn!==c?(P0=null,O0=Ee()+500,zu(s,c)):Vu=an(s,c);e:do try{if(er!==0&&xn!==null){c=xn;var D=Ga;t:switch(er){case 1:er=0,Ga=null,Gu(s,c,D,1);break;case 2:case 9:if(O2(D)){er=0,Ga=null,AI(c);break}c=function(){er!==2&&er!==9||yr!==s||(er=7),ts(s)},D.then(c,c);break e;case 3:er=7;break e;case 4:er=5;break e;case 7:O2(D)?(er=0,Ga=null,AI(c)):(er=0,Ga=null,Gu(s,c,D,7));break;case 5:var Y=null;switch(xn.tag){case 26:Y=xn.memoizedState;case 5:case 27:var ie=xn;if(Y?cN(Y):ie.stateNode.complete){er=0,Ga=null;var pe=ie.sibling;if(pe!==null)xn=pe;else{var Oe=ie.return;Oe!==null?(xn=Oe,B0(Oe)):xn=null}break t}}er=0,Ga=null,Gu(s,c,D,5);break;case 6:er=0,Ga=null,Gu(s,c,D,6);break;case 8:vx(),Yr=6;break e;default:throw Error(r(462))}}S7();break}catch(Xe){vI(s,Xe)}while(!0);return _s=bc=null,te.H=w,te.A=I,Hn=m,xn!==null?0:(yr=null,Tn=0,n0(),Yr)}function S7(){for(;xn!==null&&!mt();)_I(xn)}function _I(s){var c=YC(s.alternate,s,Os);s.memoizedProps=s.pendingProps,c===null?B0(s):xn=c}function AI(s){var c=s,m=c.alternate;switch(c.tag){case 15:case 0:c=FC(m,c,c.pendingProps,c.type,void 0,Tn);break;case 11:c=FC(m,c,c.pendingProps,c.type.render,c.ref,Tn);break;case 5:k1(c);default:WC(m,c),c=xn=E2(c,Os),c=YC(m,c,Os)}s.memoizedProps=s.pendingProps,c===null?B0(s):xn=c}function Gu(s,c,m,w){_s=bc=null,k1(c),Ou=null,If=0;var I=c.return;try{if(p7(s,I,c,m,Tn)){Yr=1,A0(s,co(m,s.current)),xn=null;return}}catch(D){if(I!==null)throw xn=I,D;Yr=1,A0(s,co(m,s.current)),xn=null;return}c.flags&32768?(Nn||w===1?s=!0:Vu||(Tn&536870912)!==0?s=!1:(vl=s=!0,(w===2||w===9||w===3||w===6)&&(w=qa.current,w!==null&&w.tag===13&&(w.flags|=16384))),TI(c,s)):B0(c)}function B0(s){var c=s;do{if((c.flags&32768)!==0){TI(c,vl);return}s=c.return;var m=y7(c.alternate,c,Os);if(m!==null){xn=m;return}if(c=c.sibling,c!==null){xn=c;return}xn=c=s}while(c!==null);Yr===0&&(Yr=5)}function TI(s,c){do{var m=x7(s.alternate,s);if(m!==null){m.flags&=32767,xn=m;return}if(m=s.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(s=s.sibling,s!==null)){xn=s;return}xn=s=m}while(s!==null);Yr=6,xn=null}function SI(s,c,m,w,I,D,Y,ie,pe){s.cancelPendingCommit=null;do j0();while(yi!==0);if((Hn&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(D=c.lanes|c.childLanes,D|=l1,Bn(s,m,D,Y,ie,pe),s===yr&&(xn=yr=null,Tn=0),qu=c,El=s,Ps=m,gx=D,yx=I,mI=w,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,R7(Ct,function(){return MI(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||w){w=te.T,te.T=null,I=se.p,se.p=2,Y=Hn,Hn|=4;try{v7(s,c,m)}finally{Hn=Y,se.p=I,te.T=w}}yi=1,CI(),II(),NI()}}function CI(){if(yi===1){yi=0;var s=El,c=qu,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=te.T,te.T=null;var w=se.p;se.p=2;var I=Hn;Hn|=4;try{sI(c,s);var D=Dx,Y=Z(s.containerInfo),ie=D.focusedElem,pe=D.selectionRange;if(Y!==ie&&ie&&ie.ownerDocument&&$(ie.ownerDocument.documentElement,ie)){if(pe!==null&&ne(ie)){var Oe=pe.start,Xe=pe.end;if(Xe===void 0&&(Xe=Oe),"selectionStart"in ie)ie.selectionStart=Oe,ie.selectionEnd=Math.min(Xe,ie.value.length);else{var tt=ie.ownerDocument||document,Ue=tt&&tt.defaultView||window;if(Ue.getSelection){var Ge=Ue.getSelection(),Dt=ie.textContent.length,$t=Math.min(pe.start,Dt),dr=pe.end===void 0?$t:Math.min(pe.end,Dt);!Ge.extend&&$t>dr&&(Y=dr,dr=$t,$t=Y);var Se=k(ie,$t),be=k(ie,dr);if(Se&&be&&(Ge.rangeCount!==1||Ge.anchorNode!==Se.node||Ge.anchorOffset!==Se.offset||Ge.focusNode!==be.node||Ge.focusOffset!==be.offset)){var De=tt.createRange();De.setStart(Se.node,Se.offset),Ge.removeAllRanges(),$t>dr?(Ge.addRange(De),Ge.extend(be.node,be.offset)):(De.setEnd(be.node,be.offset),Ge.addRange(De))}}}}for(tt=[],Ge=ie;Ge=Ge.parentNode;)Ge.nodeType===1&&tt.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<tt.length;ie++){var Je=tt[ie];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}X0=!!Mx,Dx=Mx=null}finally{Hn=I,se.p=w,te.T=m}}s.current=c,yi=2}}function II(){if(yi===2){yi=0;var s=El,c=qu,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=te.T,te.T=null;var w=se.p;se.p=2;var I=Hn;Hn|=4;try{nI(s,c.alternate,c)}finally{Hn=I,se.p=w,te.T=m}}yi=3}}function NI(){if(yi===4||yi===3){yi=0,dt();var s=El,c=qu,m=Ps,w=mI;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?yi=5:(yi=0,qu=El=null,RI(s,s.pendingLanes));var I=s.pendingLanes;if(I===0&&(wl=null),Yi(m),c=c.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(un,c,void 0,(c.current.flags&128)===128)}catch{}if(w!==null){c=te.T,I=se.p,se.p=2,te.T=null;try{for(var D=s.onRecoverableError,Y=0;Y<w.length;Y++){var ie=w[Y];D(ie.value,{componentStack:ie.stack})}}finally{te.T=c,se.p=I}}(Ps&3)!==0&&j0(),ts(s),I=s.pendingLanes,(m&261930)!==0&&(I&42)!==0?s===xx?Hf++:(Hf=0,xx=s):Hf=0,$f(0)}}function RI(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Sf(c)))}function j0(){return CI(),II(),NI(),MI()}function MI(){if(yi!==5)return!1;var s=El,c=gx;gx=0;var m=Yi(Ps),w=te.T,I=se.p;try{se.p=32>m?32:m,te.T=null,m=yx,yx=null;var D=El,Y=Ps;if(yi=0,qu=El=null,Ps=0,(Hn&6)!==0)throw Error(r(331));var ie=Hn;if(Hn|=4,fI(D.current),cI(D,D.current,Y,m),Hn=ie,$f(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(un,D)}catch{}return!0}finally{se.p=I,te.T=w,RI(s,c)}}function DI(s,c,m){c=co(m,c),c=X1(s.stateNode,c,2),s=ml(s,c,2),s!==null&&(Cr(s,2),ts(s))}function tr(s,c,m){if(s.tag===3)DI(s,s,m);else for(;c!==null;){if(c.tag===3){DI(c,s,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(wl===null||!wl.has(w))){s=co(m,s),m=OC(2),w=ml(c,m,2),w!==null&&(PC(m,w,c,s),Cr(w,2),ts(w));break}}c=c.return}}function wx(s,c,m){var w=s.pingCache;if(w===null){w=s.pingCache=new E7;var I=new Set;w.set(c,I)}else I=w.get(c),I===void 0&&(I=new Set,w.set(c,I));I.has(m)||(hx=!0,I.add(m),s=C7.bind(null,s,c,m),c.then(s,s))}function C7(s,c,m){var w=s.pingCache;w!==null&&w.delete(c),s.pingedLanes|=s.suspendedLanes&m,s.warmLanes&=~m,yr===s&&(Tn&m)===m&&(Yr===4||Yr===3&&(Tn&62914560)===Tn&&300>Ee()-D0?(Hn&2)===0&&zu(s,0):px|=m,Fu===Tn&&(Fu=0)),ts(s)}function OI(s,c){c===0&&(c=En()),s=yc(s,c),s!==null&&(Cr(s,c),ts(s))}function I7(s){var c=s.memoizedState,m=0;c!==null&&(m=c.retryLane),OI(s,m)}function N7(s,c){var m=0;switch(s.tag){case 31:case 13:var w=s.stateNode,I=s.memoizedState;I!==null&&(m=I.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(c),OI(s,m)}function R7(s,c){return ye(s,c)}var U0=null,Hu=null,Ex=!1,V0=!1,_x=!1,Al=0;function ts(s){s!==Hu&&s.next===null&&(Hu===null?U0=Hu=s:Hu=Hu.next=s),V0=!0,Ex||(Ex=!0,D7())}function $f(s,c){if(!_x&&V0){_x=!0;do for(var m=!1,w=U0;w!==null;){if(s!==0){var I=w.pendingLanes;if(I===0)var D=0;else{var Y=w.suspendedLanes,ie=w.pingedLanes;D=(1<<31-Yt(42|s)+1)-1,D&=I&~(Y&~ie),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(m=!0,BI(w,D))}else D=Tn,D=wn(w,w===yr?D:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(D&3)===0||an(w,D)||(m=!0,BI(w,D));w=w.next}while(m);_x=!1}}function M7(){PI()}function PI(){V0=Ex=!1;var s=0;Al!==0&&q7()&&(s=Al);for(var c=Ee(),m=null,w=U0;w!==null;){var I=w.next,D=kI(w,c);D===0?(w.next=null,m===null?U0=I:m.next=I,I===null&&(Hu=m)):(m=w,(s!==0||(D&3)!==0)&&(V0=!0)),w=I}yi!==0&&yi!==5||$f(s),Al!==0&&(Al=0)}function kI(s,c){for(var m=s.suspendedLanes,w=s.pingedLanes,I=s.expirationTimes,D=s.pendingLanes&-62914561;0<D;){var Y=31-Yt(D),ie=1<<Y,pe=I[Y];pe===-1?((ie&m)===0||(ie&w)!==0)&&(I[Y]=ir(ie,c)):pe<=c&&(s.expiredLanes|=ie),D&=~ie}if(c=yr,m=Tn,m=wn(s,s===c?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,m===0||s===c&&(er===2||er===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&Ie(w),s.callbackNode=null,s.callbackPriority=0;if((m&3)===0||an(s,m)){if(c=m&-m,c===s.callbackPriority)return c;switch(w!==null&&Ie(w),Yi(m)){case 2:case 8:m=Tt;break;case 32:m=Ct;break;case 268435456:m=Pr;break;default:m=Ct}return w=LI.bind(null,s),m=ye(m,w),s.callbackPriority=c,s.callbackNode=m,c}return w!==null&&w!==null&&Ie(w),s.callbackPriority=2,s.callbackNode=null,2}function LI(s,c){if(yi!==0&&yi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var m=s.callbackNode;if(j0()&&s.callbackNode!==m)return null;var w=Tn;return w=wn(s,s===yr?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(yI(s,w,c),kI(s,Ee()),s.callbackNode!=null&&s.callbackNode===m?LI.bind(null,s):null)}function BI(s,c){if(j0())return null;yI(s,c,!0)}function D7(){G7(function(){(Hn&6)!==0?ye(st,M7):PI()})}function Ax(){if(Al===0){var s=Ru;s===0&&(s=Te,Te<<=1,(Te&261888)===0&&(Te=256)),Al=s}return Al}function jI(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:va(""+s)}function UI(s,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,s.id&&m.setAttribute("form",s.id),c.parentNode.insertBefore(m,c),s=new FormData(s),m.parentNode.removeChild(m),s}function O7(s,c,m,w,I){if(c==="submit"&&m&&m.stateNode===I){var D=jI((I[Dn]||null).action),Y=w.submitter;Y&&(c=(c=Y[Dn]||null)?jI(c.formAction):Y.getAttribute("formAction"),c!==null&&(D=c,Y=null));var ie=new zr("action","action",null,w,I);s.push({event:ie,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Al!==0){var pe=Y?UI(I,Y):new FormData(I);G1(m,{pending:!0,data:pe,method:I.method,action:D},null,pe)}}else typeof D=="function"&&(ie.preventDefault(),pe=Y?UI(I,Y):new FormData(I),G1(m,{pending:!0,data:pe,method:I.method,action:D},D,pe))},currentTarget:I}]})}}for(var Tx=0;Tx<_f.length;Tx++){var Sx=_f[Tx],P7=Sx.toLowerCase(),k7=Sx[0].toUpperCase()+Sx.slice(1);Do(P7,"on"+k7)}Do(Sa,"onAnimationEnd"),Do(Li,"onAnimationIteration"),Do(Yn,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(gi,"onTransitionRun"),Do(la,"onTransitionStart"),Do(ll,"onTransitionCancel"),Do(bs,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),Qt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yf));function VI(s,c){c=(c&4)!==0;for(var m=0;m<s.length;m++){var w=s[m],I=w.event;w=w.listeners;e:{var D=void 0;if(c)for(var Y=w.length-1;0<=Y;Y--){var ie=w[Y],pe=ie.instance,Oe=ie.currentTarget;if(ie=ie.listener,pe!==D&&I.isPropagationStopped())break e;D=ie,I.currentTarget=Oe;try{D(I)}catch(Xe){t0(Xe)}I.currentTarget=null,D=pe}else for(Y=0;Y<w.length;Y++){if(ie=w[Y],pe=ie.instance,Oe=ie.currentTarget,ie=ie.listener,pe!==D&&I.isPropagationStopped())break e;D=ie,I.currentTarget=Oe;try{D(I)}catch(Xe){t0(Xe)}I.currentTarget=null,D=pe}}}}function vn(s,c){var m=c[aa];m===void 0&&(m=c[aa]=new Set);var w=s+"__bubble";m.has(w)||(FI(c,s,2,!1),m.add(w))}function Cx(s,c,m){var w=0;c&&(w|=4),FI(m,s,w,c)}var F0="_reactListening"+Math.random().toString(36).slice(2);function Ix(s){if(!s[F0]){s[F0]=!0,Ve.forEach(function(m){m!=="selectionchange"&&(L7.has(m)||Cx(m,!1,s),Cx(m,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[F0]||(c[F0]=!0,Cx("selectionchange",!1,c))}}function FI(s,c,m,w){switch(gN(c)){case 2:var I=uV;break;case 8:I=dV;break;default:I=zx}m=I.bind(null,c,m,s),I=void 0,!uc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(I=!0),w?I!==void 0?s.addEventListener(c,m,{capture:!0,passive:I}):s.addEventListener(c,m,!0):I!==void 0?s.addEventListener(c,m,{passive:I}):s.addEventListener(c,m,!1)}function Nx(s,c,m,w,I){var D=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var Y=w.tag;if(Y===3||Y===4){var ie=w.stateNode.containerInfo;if(ie===I)break;if(Y===4)for(Y=w.return;Y!==null;){var pe=Y.tag;if((pe===3||pe===4)&&Y.stateNode.containerInfo===I)return;Y=Y.return}for(;ie!==null;){if(Y=Lt(ie),Y===null)return;if(pe=Y.tag,pe===5||pe===6||pe===26||pe===27){w=D=Y;continue e}ie=ie.parentNode}}w=w.return}bu(function(){var Oe=D,Xe=ol(m),tt=[];e:{var Ue=e0.get(s);if(Ue!==void 0){var Ge=zr,Dt=s;switch(s){case"keypress":if(Ua(m)===0)break e;case"keydown":case"keyup":Ge=ys;break;case"focusin":Dt="focus",Ge=Xo;break;case"focusout":Dt="blur",Ge=Xo;break;case"beforeblur":case"afterblur":Ge=Xo;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=Eu;break;case Sa:case Li:case Yn:Ge=Xt;break;case bs:Ge=Ta;break;case"scroll":case"scrollend":Ge=dc;break;case"wheel":Ge=_u;break;case"copy":case"cut":case"paste":Ge=ms;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=Ln;break;case"toggle":case"beforetoggle":Ge=so}var $t=(c&4)!==0,dr=!$t&&(s==="scroll"||s==="scrollend"),Se=$t?Ue!==null?Ue+"Capture":null:Ue;$t=[];for(var be=Oe,De;be!==null;){var Je=be;if(De=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||De===null||Se===null||(Je=Ft(be,Se),Je!=null&&$t.push(Kf(be,Je,De))),dr)break;be=be.return}0<$t.length&&(Ue=new Ge(Ue,Dt,null,m,Xe),tt.push({event:Ue,listeners:$t}))}}if((c&7)===0){e:{if(Ue=s==="mouseover"||s==="pointerover",Ge=s==="mouseout"||s==="pointerout",Ue&&m!==Ko&&(Dt=m.relatedTarget||m.fromElement)&&(Lt(Dt)||Dt[hi]))break e;if((Ge||Ue)&&(Ue=Xe.window===Xe?Xe:(Ue=Xe.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,Ge?(Dt=m.relatedTarget||m.toElement,Ge=Oe,Dt=Dt?Lt(Dt):null,Dt!==null&&(dr=a(Dt),$t=Dt.tag,Dt!==dr||$t!==5&&$t!==27&&$t!==6)&&(Dt=null)):(Ge=null,Dt=Oe),Ge!==Dt)){if($t=kn,Je="onMouseLeave",Se="onMouseEnter",be="mouse",(s==="pointerout"||s==="pointerover")&&($t=Ln,Je="onPointerLeave",Se="onPointerEnter",be="pointer"),dr=Ge==null?Ue:Qn(Ge),De=Dt==null?Ue:Qn(Dt),Ue=new $t(Je,be+"leave",Ge,m,Xe),Ue.target=dr,Ue.relatedTarget=De,Je=null,Lt(Xe)===Oe&&($t=new $t(Se,be+"enter",Dt,m,Xe),$t.target=De,$t.relatedTarget=dr,Je=$t),dr=Je,Ge&&Dt)t:{for($t=B7,Se=Ge,be=Dt,De=0,Je=Se;Je;Je=$t(Je))De++;Je=0;for(var qt=be;qt;qt=$t(qt))Je++;for(;0<De-Je;)Se=$t(Se),De--;for(;0<Je-De;)be=$t(be),Je--;for(;De--;){if(Se===be||be!==null&&Se===be.alternate){$t=Se;break t}Se=$t(Se),be=$t(be)}$t=null}else $t=null;Ge!==null&&qI(tt,Ue,Ge,$t,!1),Dt!==null&&dr!==null&&qI(tt,dr,Dt,$t,!0)}}e:{if(Ue=Oe?Qn(Oe):window,Ge=Ue.nodeName&&Ue.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ue.type==="file")var Un=Va;else if(ki(Ue))if(Zp)Un=y;else{Un=d;var Pt=l}else Ge=Ue.nodeName,!Ge||Ge.toLowerCase()!=="input"||Ue.type!=="checkbox"&&Ue.type!=="radio"?Oe&&Jn(Oe.elementType)&&(Un=Va):Un=p;if(Un&&(Un=Un(s,Oe))){Si(tt,Un,m,Xe);break e}Pt&&Pt(s,Ue,Oe),s==="focusout"&&Oe&&Ue.type==="number"&&Oe.memoizedProps.value!=null&&oe(Ue,"number",Ue.value)}switch(Pt=Oe?Qn(Oe):window,s){case"focusin":(ki(Pt)||Pt.contentEditable==="true")&&(me=Pt,xe=Oe,Ne=null);break;case"focusout":Ne=xe=me=null;break;case"mousedown":qe=!0;break;case"contextmenu":case"mouseup":case"dragend":qe=!1,ft(tt,m,Xe);break;case"selectionchange":if(ue)break;case"keydown":case"keyup":ft(tt,m,Xe)}var ln;if(j)e:{switch(s){case"compositionstart":var Sn="onCompositionStart";break e;case"compositionend":Sn="onCompositionEnd";break e;case"compositionupdate":Sn="onCompositionUpdate";break e}Sn=void 0}else sn?jn(s,m)&&(Sn="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(Sn="onCompositionStart");Sn&&(Re&&m.locale!=="ko"&&(sn||Sn!=="onCompositionStart"?Sn==="onCompositionEnd"&&sn&&(ln=Ea()):(Xi=Xe,wa="value"in Xi?Xi.value:Xi.textContent,sn=!0)),Pt=q0(Oe,Sn),0<Pt.length&&(Sn=new fc(Sn,s,null,m,Xe),tt.push({event:Sn,listeners:Pt}),ln?Sn.data=ln:(ln=br(m),ln!==null&&(Sn.data=ln)))),(ln=ae?gr(s,m):Br(s,m))&&(Sn=q0(Oe,"onBeforeInput"),0<Sn.length&&(Pt=new fc("onBeforeInput","beforeinput",null,m,Xe),tt.push({event:Pt,listeners:Sn}),Pt.data=ln)),O7(tt,s,Oe,m,Xe)}VI(tt,c)})}function Kf(s,c,m){return{instance:s,listener:c,currentTarget:m}}function q0(s,c){for(var m=c+"Capture",w=[];s!==null;){var I=s,D=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||D===null||(I=Ft(s,m),I!=null&&w.unshift(Kf(s,I,D)),I=Ft(s,c),I!=null&&w.push(Kf(s,I,D))),s.tag===3)return w;s=s.return}return[]}function B7(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function qI(s,c,m,w,I){for(var D=c._reactName,Y=[];m!==null&&m!==w;){var ie=m,pe=ie.alternate,Oe=ie.stateNode;if(ie=ie.tag,pe!==null&&pe===w)break;ie!==5&&ie!==26&&ie!==27||Oe===null||(pe=Oe,I?(Oe=Ft(m,D),Oe!=null&&Y.unshift(Kf(m,Oe,pe))):I||(Oe=Ft(m,D),Oe!=null&&Y.push(Kf(m,Oe,pe)))),m=m.return}Y.length!==0&&s.push({event:c,listeners:Y})}var j7=/\r\n?/g,U7=/\u0000|\uFFFD/g;function zI(s){return(typeof s=="string"?s:""+s).replace(j7,`
`).replace(U7,"")}function GI(s,c){return c=zI(c),zI(s)===c}function ur(s,c,m,w,I,D){switch(m){case"children":typeof w=="string"?c==="body"||c==="textarea"&&w===""||xa(s,w):(typeof w=="number"||typeof w=="bigint")&&c!=="body"&&xa(s,""+w);break;case"className":io(s,"class",w);break;case"tabIndex":io(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":io(s,m,w);break;case"style":Bt(s,w,D);break;case"data":if(c!=="object"){io(s,"data",w);break}case"src":case"href":if(w===""&&(c!=="a"||m!=="href")){s.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(m);break}w=va(""+w),s.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(m==="formAction"?(c!=="input"&&ur(s,c,"name",I.name,I,null),ur(s,c,"formEncType",I.formEncType,I,null),ur(s,c,"formMethod",I.formMethod,I,null),ur(s,c,"formTarget",I.formTarget,I,null)):(ur(s,c,"encType",I.encType,I,null),ur(s,c,"method",I.method,I,null),ur(s,c,"target",I.target,I,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(m);break}w=va(""+w),s.setAttribute(m,w);break;case"onClick":w!=null&&(s.onclick=Lr);break;case"onScroll":w!=null&&vn("scroll",s);break;case"onScrollEnd":w!=null&&vn("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(I.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}m=va(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(m,""+w):s.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(m,""):s.removeAttribute(m);break;case"capture":case"download":w===!0?s.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(m,w):s.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(m,w):s.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(m):s.setAttribute(m,w);break;case"popover":vn("beforetoggle",s),vn("toggle",s),ro(s,"popover",w);break;case"xlinkActuate":Ki(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Ki(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Ki(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Ki(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Ki(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Ki(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Ki(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Ki(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Ki(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":ro(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=vu.get(m)||m,ro(s,m,w))}}function Rx(s,c,m,w,I,D){switch(m){case"style":Bt(s,w,D);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(I.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"children":typeof w=="string"?xa(s,w):(typeof w=="number"||typeof w=="bigint")&&xa(s,""+w);break;case"onScroll":w!=null&&vn("scroll",s);break;case"onScrollEnd":w!=null&&vn("scrollend",s);break;case"onClick":w!=null&&(s.onclick=Lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kr.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(I=m.endsWith("Capture"),c=m.slice(2,I?m.length-7:void 0),D=s[Dn]||null,D=D!=null?D[m]:null,typeof D=="function"&&s.removeEventListener(c,D,I),typeof w=="function")){typeof D!="function"&&D!==null&&(m in s?s[m]=null:s.hasAttribute(m)&&s.removeAttribute(m)),s.addEventListener(c,w,I);break e}m in s?s[m]=w:w===!0?s.setAttribute(m,""):ro(s,m,w)}}}function Vi(s,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vn("error",s),vn("load",s);var w=!1,I=!1,D;for(D in m)if(m.hasOwnProperty(D)){var Y=m[D];if(Y!=null)switch(D){case"src":w=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ur(s,c,D,Y,m,null)}}I&&ur(s,c,"srcSet",m.srcSet,m,null),w&&ur(s,c,"src",m.src,m,null);return;case"input":vn("invalid",s);var ie=D=Y=I=null,pe=null,Oe=null;for(w in m)if(m.hasOwnProperty(w)){var Xe=m[w];if(Xe!=null)switch(w){case"name":I=Xe;break;case"type":Y=Xe;break;case"checked":pe=Xe;break;case"defaultChecked":Oe=Xe;break;case"value":D=Xe;break;case"defaultValue":ie=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,c));break;default:ur(s,c,w,Xe,m,null)}}Me(s,D,ie,pe,Oe,Y,I,!1);return;case"select":vn("invalid",s),w=Y=D=null;for(I in m)if(m.hasOwnProperty(I)&&(ie=m[I],ie!=null))switch(I){case"value":D=ie;break;case"defaultValue":Y=ie;break;case"multiple":w=ie;default:ur(s,c,I,ie,m,null)}c=D,m=Y,s.multiple=!!w,c!=null?xt(s,!!w,c,!1):m!=null&&xt(s,!!w,m,!0);return;case"textarea":vn("invalid",s),D=I=w=null;for(Y in m)if(m.hasOwnProperty(Y)&&(ie=m[Y],ie!=null))switch(Y){case"value":w=ie;break;case"defaultValue":I=ie;break;case"children":D=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(91));break;default:ur(s,c,Y,ie,m,null)}Qr(s,w,I,D);return;case"option":for(pe in m)if(m.hasOwnProperty(pe)&&(w=m[pe],w!=null))switch(pe){case"selected":s.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:ur(s,c,pe,w,m,null)}return;case"dialog":vn("beforetoggle",s),vn("toggle",s),vn("cancel",s),vn("close",s);break;case"iframe":case"object":vn("load",s);break;case"video":case"audio":for(w=0;w<Yf.length;w++)vn(Yf[w],s);break;case"image":vn("error",s),vn("load",s);break;case"details":vn("toggle",s);break;case"embed":case"source":case"link":vn("error",s),vn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in m)if(m.hasOwnProperty(Oe)&&(w=m[Oe],w!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ur(s,c,Oe,w,m,null)}return;default:if(Jn(c)){for(Xe in m)m.hasOwnProperty(Xe)&&(w=m[Xe],w!==void 0&&Rx(s,c,Xe,w,m,void 0));return}}for(ie in m)m.hasOwnProperty(ie)&&(w=m[ie],w!=null&&ur(s,c,ie,w,m,null))}function V7(s,c,m,w){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,D=null,Y=null,ie=null,pe=null,Oe=null,Xe=null;for(Ge in m){var tt=m[Ge];if(m.hasOwnProperty(Ge)&&tt!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":pe=tt;default:w.hasOwnProperty(Ge)||ur(s,c,Ge,null,w,tt)}}for(var Ue in w){var Ge=w[Ue];if(tt=m[Ue],w.hasOwnProperty(Ue)&&(Ge!=null||tt!=null))switch(Ue){case"type":D=Ge;break;case"name":I=Ge;break;case"checked":Oe=Ge;break;case"defaultChecked":Xe=Ge;break;case"value":Y=Ge;break;case"defaultValue":ie=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,c));break;default:Ge!==tt&&ur(s,c,Ue,Ge,w,tt)}}_r(s,Y,ie,pe,Oe,Xe,D,I);return;case"select":Ge=Y=ie=Ue=null;for(D in m)if(pe=m[D],m.hasOwnProperty(D)&&pe!=null)switch(D){case"value":break;case"multiple":Ge=pe;default:w.hasOwnProperty(D)||ur(s,c,D,null,w,pe)}for(I in w)if(D=w[I],pe=m[I],w.hasOwnProperty(I)&&(D!=null||pe!=null))switch(I){case"value":Ue=D;break;case"defaultValue":ie=D;break;case"multiple":Y=D;default:D!==pe&&ur(s,c,I,D,w,pe)}c=ie,m=Y,w=Ge,Ue!=null?xt(s,!!m,Ue,!1):!!w!=!!m&&(c!=null?xt(s,!!m,c,!0):xt(s,!!m,m?[]:"",!1));return;case"textarea":Ge=Ue=null;for(ie in m)if(I=m[ie],m.hasOwnProperty(ie)&&I!=null&&!w.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:ur(s,c,ie,null,w,I)}for(Y in w)if(I=w[Y],D=m[Y],w.hasOwnProperty(Y)&&(I!=null||D!=null))switch(Y){case"value":Ue=I;break;case"defaultValue":Ge=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==D&&ur(s,c,Y,I,w,D)}vr(s,Ue,Ge);return;case"option":for(var Dt in m)if(Ue=m[Dt],m.hasOwnProperty(Dt)&&Ue!=null&&!w.hasOwnProperty(Dt))switch(Dt){case"selected":s.selected=!1;break;default:ur(s,c,Dt,null,w,Ue)}for(pe in w)if(Ue=w[pe],Ge=m[pe],w.hasOwnProperty(pe)&&Ue!==Ge&&(Ue!=null||Ge!=null))switch(pe){case"selected":s.selected=Ue&&typeof Ue!="function"&&typeof Ue!="symbol";break;default:ur(s,c,pe,Ue,w,Ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in m)Ue=m[$t],m.hasOwnProperty($t)&&Ue!=null&&!w.hasOwnProperty($t)&&ur(s,c,$t,null,w,Ue);for(Oe in w)if(Ue=w[Oe],Ge=m[Oe],w.hasOwnProperty(Oe)&&Ue!==Ge&&(Ue!=null||Ge!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,c));break;default:ur(s,c,Oe,Ue,w,Ge)}return;default:if(Jn(c)){for(var dr in m)Ue=m[dr],m.hasOwnProperty(dr)&&Ue!==void 0&&!w.hasOwnProperty(dr)&&Rx(s,c,dr,void 0,w,Ue);for(Xe in w)Ue=w[Xe],Ge=m[Xe],!w.hasOwnProperty(Xe)||Ue===Ge||Ue===void 0&&Ge===void 0||Rx(s,c,Xe,Ue,w,Ge);return}}for(var Se in m)Ue=m[Se],m.hasOwnProperty(Se)&&Ue!=null&&!w.hasOwnProperty(Se)&&ur(s,c,Se,null,w,Ue);for(tt in w)Ue=w[tt],Ge=m[tt],!w.hasOwnProperty(tt)||Ue===Ge||Ue==null&&Ge==null||ur(s,c,tt,Ue,w,Ge)}function HI(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function F7(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,m=performance.getEntriesByType("resource"),w=0;w<m.length;w++){var I=m[w],D=I.transferSize,Y=I.initiatorType,ie=I.duration;if(D&&ie&&HI(Y)){for(Y=0,ie=I.responseEnd,w+=1;w<m.length;w++){var pe=m[w],Oe=pe.startTime;if(Oe>ie)break;var Xe=pe.transferSize,tt=pe.initiatorType;Xe&&HI(tt)&&(pe=pe.responseEnd,Y+=Xe*(pe<ie?1:(ie-Oe)/(pe-Oe)))}if(--w,c+=8*(D+Y)/(I.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Mx=null,Dx=null;function z0(s){return s.nodeType===9?s:s.ownerDocument}function $I(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YI(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function Ox(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Px=null;function q7(){var s=window.event;return s&&s.type==="popstate"?s===Px?!1:(Px=s,!0):(Px=null,!1)}var KI=typeof setTimeout=="function"?setTimeout:void 0,z7=typeof clearTimeout=="function"?clearTimeout:void 0,WI=typeof Promise=="function"?Promise:void 0,G7=typeof queueMicrotask=="function"?queueMicrotask:typeof WI<"u"?function(s){return WI.resolve(null).then(s).catch(H7)}:KI;function H7(s){setTimeout(function(){throw s})}function Tl(s){return s==="head"}function XI(s,c){var m=c,w=0;do{var I=m.nextSibling;if(s.removeChild(m),I&&I.nodeType===8)if(m=I.data,m==="/$"||m==="/&"){if(w===0){s.removeChild(I),Wu(c);return}w--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")w++;else if(m==="html")Wf(s.ownerDocument.documentElement);else if(m==="head"){m=s.ownerDocument.head,Wf(m);for(var D=m.firstChild;D;){var Y=D.nextSibling,ie=D.nodeName;D[ht]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=Y}}else m==="body"&&Wf(s.ownerDocument.body);m=I}while(m);Wu(c)}function QI(s,c){var m=s;s=0;do{var w=m.nextSibling;if(m.nodeType===1?c?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(c?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),w&&w.nodeType===8)if(m=w.data,m==="/$"){if(s===0)break;s--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||s++;m=w}while(m)}function kx(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":kx(m),Nt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}s.removeChild(m)}}function $7(s,c,m,w){for(;s.nodeType===1;){var I=m;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[ht])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(D=s.getAttribute("rel"),D==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(D!==I.rel||s.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||s.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||s.getAttribute("title")!==(I.title==null?null:I.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(D=s.getAttribute("src"),(D!==(I.src==null?null:I.src)||s.getAttribute("type")!==(I.type==null?null:I.type)||s.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&D&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var D=I.name==null?null:""+I.name;if(I.type==="hidden"&&s.getAttribute("name")===D)return s}else return s;if(s=mo(s.nextSibling),s===null)break}return null}function Y7(s,c,m){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!m||(s=mo(s.nextSibling),s===null))return null;return s}function JI(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=mo(s.nextSibling),s===null))return null;return s}function Lx(s){return s.data==="$?"||s.data==="$~"}function Bx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function K7(s,c){var m=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||m.readyState!=="loading")c();else{var w=function(){c(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function mo(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var jx=null;function ZI(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"||m==="/&"){if(c===0)return mo(s.nextSibling);c--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||c++}s=s.nextSibling}return null}function eN(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(c===0)return s;c--}else m!=="/$"&&m!=="/&"||c++}s=s.previousSibling}return null}function tN(s,c,m){switch(c=z0(m),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Wf(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Nt(s)}var go=new Map,nN=new Set;function G0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ks=se.d;se.d={f:W7,r:X7,D:Q7,C:J7,L:Z7,m:eV,X:nV,S:tV,M:rV};function W7(){var s=ks.f(),c=k0();return s||c}function X7(s){var c=gt(s);c!==null&&c.tag===5&&c.type==="form"?vC(c):ks.r(s)}var $u=typeof document>"u"?null:document;function rN(s,c,m){var w=$u;if(w&&typeof c=="string"&&c){var I=Wt(c);I='link[rel="'+s+'"][href="'+I+'"]',typeof m=="string"&&(I+='[crossorigin="'+m+'"]'),nN.has(I)||(nN.add(I),s={rel:s,crossOrigin:m,href:c},w.querySelector(I)===null&&(c=w.createElement("link"),Vi(c,"link",s),mn(c),w.head.appendChild(c)))}}function Q7(s){ks.D(s),rN("dns-prefetch",s,null)}function J7(s,c){ks.C(s,c),rN("preconnect",s,c)}function Z7(s,c,m){ks.L(s,c,m);var w=$u;if(w&&s&&c){var I='link[rel="preload"][as="'+Wt(c)+'"]';c==="image"&&m&&m.imageSrcSet?(I+='[imagesrcset="'+Wt(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(I+='[imagesizes="'+Wt(m.imageSizes)+'"]')):I+='[href="'+Wt(s)+'"]';var D=I;switch(c){case"style":D=Yu(s);break;case"script":D=Ku(s)}go.has(D)||(s=v({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:s,as:c},m),go.set(D,s),w.querySelector(I)!==null||c==="style"&&w.querySelector(Xf(D))||c==="script"&&w.querySelector(Qf(D))||(c=w.createElement("link"),Vi(c,"link",s),mn(c),w.head.appendChild(c)))}}function eV(s,c){ks.m(s,c);var m=$u;if(m&&s){var w=c&&typeof c.as=="string"?c.as:"script",I='link[rel="modulepreload"][as="'+Wt(w)+'"][href="'+Wt(s)+'"]',D=I;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Ku(s)}if(!go.has(D)&&(s=v({rel:"modulepreload",href:s},c),go.set(D,s),m.querySelector(I)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Qf(D)))return}w=m.createElement("link"),Vi(w,"link",s),mn(w),m.head.appendChild(w)}}}function tV(s,c,m){ks.S(s,c,m);var w=$u;if(w&&s){var I=gn(w).hoistableStyles,D=Yu(s);c=c||"default";var Y=I.get(D);if(!Y){var ie={loading:0,preload:null};if(Y=w.querySelector(Xf(D)))ie.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":c},m),(m=go.get(D))&&Ux(s,m);var pe=Y=w.createElement("link");mn(pe),Vi(pe,"link",s),pe._p=new Promise(function(Oe,Xe){pe.onload=Oe,pe.onerror=Xe}),pe.addEventListener("load",function(){ie.loading|=1}),pe.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,H0(Y,c,w)}Y={type:"stylesheet",instance:Y,count:1,state:ie},I.set(D,Y)}}}function nV(s,c){ks.X(s,c);var m=$u;if(m&&s){var w=gn(m).hoistableScripts,I=Ku(s),D=w.get(I);D||(D=m.querySelector(Qf(I)),D||(s=v({src:s,async:!0},c),(c=go.get(I))&&Vx(s,c),D=m.createElement("script"),mn(D),Vi(D,"link",s),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},w.set(I,D))}}function rV(s,c){ks.M(s,c);var m=$u;if(m&&s){var w=gn(m).hoistableScripts,I=Ku(s),D=w.get(I);D||(D=m.querySelector(Qf(I)),D||(s=v({src:s,async:!0,type:"module"},c),(c=go.get(I))&&Vx(s,c),D=m.createElement("script"),mn(D),Vi(D,"link",s),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},w.set(I,D))}}function iN(s,c,m,w){var I=(I=Ye.current)?G0(I):null;if(!I)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=Yu(m.href),m=gn(I).hoistableStyles,w=m.get(c),w||(w={type:"style",instance:null,count:0,state:null},m.set(c,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){s=Yu(m.href);var D=gn(I).hoistableStyles,Y=D.get(s);if(Y||(I=I.ownerDocument||I,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(s,Y),(D=I.querySelector(Xf(s)))&&!D._p&&(Y.instance=D,Y.state.loading=5),go.has(s)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},go.set(s,m),D||iV(I,s,m,Y.state))),c&&w===null)throw Error(r(528,""));return Y}if(c&&w!==null)throw Error(r(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Ku(m),m=gn(I).hoistableScripts,w=m.get(c),w||(w={type:"script",instance:null,count:0,state:null},m.set(c,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Yu(s){return'href="'+Wt(s)+'"'}function Xf(s){return'link[rel="stylesheet"]['+s+"]"}function aN(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function iV(s,c,m,w){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?w.loading=1:(c=s.createElement("link"),w.preload=c,c.addEventListener("load",function(){return w.loading|=1}),c.addEventListener("error",function(){return w.loading|=2}),Vi(c,"link",m),mn(c),s.head.appendChild(c))}function Ku(s){return'[src="'+Wt(s)+'"]'}function Qf(s){return"script[async]"+s}function oN(s,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var w=s.querySelector('style[data-href~="'+Wt(m.href)+'"]');if(w)return c.instance=w,mn(w),w;var I=v({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),mn(w),Vi(w,"style",I),H0(w,m.precedence,s),c.instance=w;case"stylesheet":I=Yu(m.href);var D=s.querySelector(Xf(I));if(D)return c.state.loading|=4,c.instance=D,mn(D),D;w=aN(m),(I=go.get(I))&&Ux(w,I),D=(s.ownerDocument||s).createElement("link"),mn(D);var Y=D;return Y._p=new Promise(function(ie,pe){Y.onload=ie,Y.onerror=pe}),Vi(D,"link",w),c.state.loading|=4,H0(D,m.precedence,s),c.instance=D;case"script":return D=Ku(m.src),(I=s.querySelector(Qf(D)))?(c.instance=I,mn(I),I):(w=m,(I=go.get(D))&&(w=v({},m),Vx(w,I)),s=s.ownerDocument||s,I=s.createElement("script"),mn(I),Vi(I,"link",w),s.head.appendChild(I),c.instance=I);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(w=c.instance,c.state.loading|=4,H0(w,m.precedence,s));return c.instance}function H0(s,c,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=w.length?w[w.length-1]:null,D=I,Y=0;Y<w.length;Y++){var ie=w[Y];if(ie.dataset.precedence===c)D=ie;else if(D!==I)break}D?D.parentNode.insertBefore(s,D.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(s,c.firstChild))}function Ux(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function Vx(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var $0=null;function sN(s,c,m){if($0===null){var w=new Map,I=$0=new Map;I.set(m,w)}else I=$0,w=I.get(m),w||(w=new Map,I.set(m,w));if(w.has(s))return w;for(w.set(s,null),m=m.getElementsByTagName(s),I=0;I<m.length;I++){var D=m[I];if(!(D[ht]||D[ar]||s==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=D.getAttribute(c)||"";Y=s+Y;var ie=w.get(Y);ie?ie.push(D):w.set(Y,[D])}}return w}function lN(s,c,m){s=s.ownerDocument||s,s.head.insertBefore(m,c==="title"?s.querySelector("head > title"):null)}function aV(s,c,m){if(m===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function cN(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function oV(s,c,m,w){if(m.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var I=Yu(w.href),D=c.querySelector(Xf(I));if(D){c=D._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=Y0.bind(s),c.then(s,s)),m.state.loading|=4,m.instance=D,mn(D);return}D=c.ownerDocument||c,w=aN(w),(I=go.get(I))&&Ux(w,I),D=D.createElement("link"),mn(D);var Y=D;Y._p=new Promise(function(ie,pe){Y.onload=ie,Y.onerror=pe}),Vi(D,"link",w),m.instance=D}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(m,c),(c=m.state.preload)&&(m.state.loading&3)===0&&(s.count++,m=Y0.bind(s),c.addEventListener("load",m),c.addEventListener("error",m))}}var Fx=0;function sV(s,c){return s.stylesheets&&s.count===0&&W0(s,s.stylesheets),0<s.count||0<s.imgCount?function(m){var w=setTimeout(function(){if(s.stylesheets&&W0(s,s.stylesheets),s.unsuspend){var D=s.unsuspend;s.unsuspend=null,D()}},6e4+c);0<s.imgBytes&&Fx===0&&(Fx=62500*F7());var I=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&W0(s,s.stylesheets),s.unsuspend)){var D=s.unsuspend;s.unsuspend=null,D()}},(s.imgBytes>Fx?50:800)+c);return s.unsuspend=m,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(I)}}:null}function Y0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)W0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var K0=null;function W0(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,K0=new Map,c.forEach(lV,s),K0=null,Y0.call(s))}function lV(s,c){if(!(c.state.loading&4)){var m=K0.get(s);if(m)var w=m.get(null);else{m=new Map,K0.set(s,m);for(var I=s.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<I.length;D++){var Y=I[D];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(m.set(Y.dataset.precedence,Y),w=Y)}w&&m.set(null,w)}I=c.instance,Y=I.getAttribute("data-precedence"),D=m.get(Y)||w,D===w&&m.set(null,I),m.set(Y,I),this.count++,w=Y0.bind(this),I.addEventListener("load",w),I.addEventListener("error",w),D?D.parentNode.insertBefore(I,D.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(I,s.firstChild)),c.state.loading|=4}}var Jf={$$typeof:F,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function cV(s,c,m,w,I,D,Y,ie,pe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=w,this.onUncaughtError=I,this.onCaughtError=D,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function uN(s,c,m,w,I,D,Y,ie,pe,Oe,Xe,tt){return s=new cV(s,c,m,Y,pe,Oe,Xe,tt,ie),c=1,D===!0&&(c|=24),D=Fa(3,null,null,c),s.current=D,D.stateNode=s,c=b1(),c.refCount++,s.pooledCache=c,c.refCount++,D.memoizedState={element:w,isDehydrated:m,cache:c},A1(D),s}function dN(s){return s?(s=Tu,s):Tu}function fN(s,c,m,w,I,D){I=dN(I),w.context===null?w.context=I:w.pendingContext=I,w=pl(c),w.payload={element:m},D=D===void 0?null:D,D!==null&&(w.callback=D),m=ml(s,w,c),m!==null&&(Ma(m,s,c),Rf(m,s,c))}function hN(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<c?m:c}}function qx(s,c){hN(s,c),(s=s.alternate)&&hN(s,c)}function pN(s){if(s.tag===13||s.tag===31){var c=yc(s,67108864);c!==null&&Ma(c,s,67108864),qx(s,67108864)}}function mN(s){if(s.tag===13||s.tag===31){var c=$a();c=Er(c);var m=yc(s,c);m!==null&&Ma(m,s,c),qx(s,c)}}var X0=!0;function uV(s,c,m,w){var I=te.T;te.T=null;var D=se.p;try{se.p=2,zx(s,c,m,w)}finally{se.p=D,te.T=I}}function dV(s,c,m,w){var I=te.T;te.T=null;var D=se.p;try{se.p=8,zx(s,c,m,w)}finally{se.p=D,te.T=I}}function zx(s,c,m,w){if(X0){var I=Gx(w);if(I===null)Nx(s,c,w,Q0,m),yN(s,w);else if(hV(I,s,c,m,w))w.stopPropagation();else if(yN(s,w),c&4&&-1<fV.indexOf(s)){for(;I!==null;){var D=gt(I);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var Y=Ot(D.pendingLanes);if(Y!==0){var ie=D;for(ie.pendingLanes|=2,ie.entangledLanes|=2;Y;){var pe=1<<31-Yt(Y);ie.entanglements[1]|=pe,Y&=~pe}ts(D),(Hn&6)===0&&(O0=Ee()+500,$f(0))}}break;case 31:case 13:ie=yc(D,2),ie!==null&&Ma(ie,D,2),k0(),qx(D,2)}if(D=Gx(w),D===null&&Nx(s,c,w,Q0,m),D===I)break;I=D}I!==null&&w.stopPropagation()}else Nx(s,c,w,null,m)}}function Gx(s){return s=ol(s),Hx(s)}var Q0=null;function Hx(s){if(Q0=null,s=Lt(s),s!==null){var c=a(s);if(c===null)s=null;else{var m=c.tag;if(m===13){if(s=o(c),s!==null)return s;s=null}else if(m===31){if(s=u(c),s!==null)return s;s=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return Q0=s,null}function gN(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case st:return 2;case Tt:return 8;case Ct:case Ht:return 32;case Pr:return 268435456;default:return 32}default:return 32}}var $x=!1,Sl=null,Cl=null,Il=null,Zf=new Map,eh=new Map,Nl=[],fV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yN(s,c){switch(s){case"focusin":case"focusout":Sl=null;break;case"dragenter":case"dragleave":Cl=null;break;case"mouseover":case"mouseout":Il=null;break;case"pointerover":case"pointerout":Zf.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":eh.delete(c.pointerId)}}function th(s,c,m,w,I,D){return s===null||s.nativeEvent!==D?(s={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:D,targetContainers:[I]},c!==null&&(c=gt(c),c!==null&&pN(c)),s):(s.eventSystemFlags|=w,c=s.targetContainers,I!==null&&c.indexOf(I)===-1&&c.push(I),s)}function hV(s,c,m,w,I){switch(c){case"focusin":return Sl=th(Sl,s,c,m,w,I),!0;case"dragenter":return Cl=th(Cl,s,c,m,w,I),!0;case"mouseover":return Il=th(Il,s,c,m,w,I),!0;case"pointerover":var D=I.pointerId;return Zf.set(D,th(Zf.get(D)||null,s,c,m,w,I)),!0;case"gotpointercapture":return D=I.pointerId,eh.set(D,th(eh.get(D)||null,s,c,m,w,I)),!0}return!1}function xN(s){var c=Lt(s.target);if(c!==null){var m=a(c);if(m!==null){if(c=m.tag,c===13){if(c=o(m),c!==null){s.blockedOn=c,Et(s.priority,function(){mN(m)});return}}else if(c===31){if(c=u(m),c!==null){s.blockedOn=c,Et(s.priority,function(){mN(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function J0(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var m=Gx(s.nativeEvent);if(m===null){m=s.nativeEvent;var w=new m.constructor(m.type,m);Ko=w,m.target.dispatchEvent(w),Ko=null}else return c=gt(m),c!==null&&pN(c),s.blockedOn=m,!1;c.shift()}return!0}function vN(s,c,m){J0(s)&&m.delete(c)}function pV(){$x=!1,Sl!==null&&J0(Sl)&&(Sl=null),Cl!==null&&J0(Cl)&&(Cl=null),Il!==null&&J0(Il)&&(Il=null),Zf.forEach(vN),eh.forEach(vN)}function Z0(s,c){s.blockedOn===c&&(s.blockedOn=null,$x||($x=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pV)))}var em=null;function bN(s){em!==s&&(em=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){em===s&&(em=null);for(var c=0;c<s.length;c+=3){var m=s[c],w=s[c+1],I=s[c+2];if(typeof w!="function"){if(Hx(w||m)===null)continue;break}var D=gt(m);D!==null&&(s.splice(c,3),c-=3,G1(D,{pending:!0,data:I,method:m.method,action:w},w,I))}}))}function Wu(s){function c(pe){return Z0(pe,s)}Sl!==null&&Z0(Sl,s),Cl!==null&&Z0(Cl,s),Il!==null&&Z0(Il,s),Zf.forEach(c),eh.forEach(c);for(var m=0;m<Nl.length;m++){var w=Nl[m];w.blockedOn===s&&(w.blockedOn=null)}for(;0<Nl.length&&(m=Nl[0],m.blockedOn===null);)xN(m),m.blockedOn===null&&Nl.shift();if(m=(s.ownerDocument||s).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var I=m[w],D=m[w+1],Y=I[Dn]||null;if(typeof D=="function")Y||bN(m);else if(Y){var ie=null;if(D&&D.hasAttribute("formAction")){if(I=D,Y=D[Dn]||null)ie=Y.formAction;else if(Hx(I)!==null)continue}else ie=Y.action;typeof ie=="function"?m[w+1]=ie:(m.splice(w,3),w-=3),bN(m)}}}function wN(){function s(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(Y){return I=Y})},focusReset:"manual",scroll:"manual"})}function c(){I!==null&&(I(),I=null),w||setTimeout(m,20)}function m(){if(!w&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,I=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(m,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),I!==null&&(I(),I=null)}}}function Yx(s){this._internalRoot=s}tm.prototype.render=Yx.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var m=c.current,w=$a();fN(m,w,s,c,null,null)},tm.prototype.unmount=Yx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;fN(s.current,2,null,s,null,null),k0(),c[hi]=null}};function tm(s){this._internalRoot=s}tm.prototype.unstable_scheduleHydration=function(s){if(s){var c=Ir();s={blockedOn:null,target:s,priority:c};for(var m=0;m<Nl.length&&c!==0&&c<Nl[m].priority;m++);Nl.splice(m,0,s),m===0&&xN(s)}};var EN=e.version;if(EN!=="19.2.4")throw Error(r(527,EN,"19.2.4"));se.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(c),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var mV={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nm.isDisabled&&nm.supportsFiber)try{un=nm.inject(mV),it=nm}catch{}}return rh.createRoot=function(s,c){if(!i(s))throw Error(r(299));var m=!1,w="",I=NC,D=RC,Y=MC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onUncaughtError!==void 0&&(I=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(Y=c.onRecoverableError)),c=uN(s,1,!1,null,null,m,w,null,I,D,Y,wN),s[hi]=c.current,Ix(s),new Yx(c)},rh.hydrateRoot=function(s,c,m){if(!i(s))throw Error(r(299));var w=!1,I="",D=NC,Y=RC,ie=MC,pe=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(Y=m.onCaughtError),m.onRecoverableError!==void 0&&(ie=m.onRecoverableError),m.formState!==void 0&&(pe=m.formState)),c=uN(s,1,!0,c,m??null,w,I,pe,D,Y,ie,wN),c.context=dN(null),m=c.current,w=$a(),w=Er(w),I=pl(w),I.callback=null,ml(m,I,w),m=w,c.current.lanes=m,Cr(c,m),ts(c),s[hi]=c.current,Ix(s),new tm(c)},rh.version="19.2.4",rh}var DN;function TV(){if(DN)return Xx.exports;DN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xx.exports=AV(),Xx.exports}var SV=TV();const CV=pr(SV);var ON={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],u=t[n++],h=((i&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},M8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,u=o?t[i+1]:0,h=i+2<t.length,f=h?t[i+2]:0,g=a>>2,v=(a&3)<<4|u>>4;let A=(u&15)<<2|f>>6,N=f&63;h||(N=64,o||(A=64)),r.push(n[g],n[v],n[A],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||u==null||f==null||v==null)throw new NV;const A=a<<2|u>>4;if(r.push(A),f!==64){const N=u<<4&240|f>>2;if(r.push(N),v!==64){const P=f<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RV=function(t){const e=R8(t);return M8.encodeByteArray(e,!0)},Um=function(t){return RV(t).replace(/\./g,"")},MV=function(t){try{return M8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=()=>DV().__FIREBASE_DEFAULTS__,PV=()=>{if(typeof process>"u"||typeof ON>"u")return;const t=ON.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MV(t[1]);return e&&JSON.parse(e)},yT=()=>{try{return OV()||PV()||kV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LV=t=>{var e,n;return(n=(e=yT())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BV=t=>{const e=LV(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D8=()=>{var t;return(t=yT())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Um(JSON.stringify(n)),Um(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VV(){var t;const e=(t=yT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O8(){return!VV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P8(){try{return typeof indexedDB=="object"}catch{return!1}}function FV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="FirebaseError";class ef extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qV,Object.setPrototypeOf(this,ef.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k8.prototype.create)}}class k8{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?zV(a,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new ef(i,u,r)}}function zV(t,e){return t.replace(GV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GV=/\{\$([^}]+)}/g;function d_(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(PN(a)&&PN(o)){if(!d_(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function PN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){return t&&t._delegate?t._delegate:t}class Fh{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YV(e))try{this.getOrInitializeService({instanceIdentifier:Dc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Dc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dc){return this.instances.has(e)}getOptions(e=Dc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$V(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dc){return this.component?this.component.multipleInstances?e:Dc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $V(t){return t===Dc?void 0:t}function YV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pn||(Pn={}));const WV={debug:Pn.DEBUG,verbose:Pn.VERBOSE,info:Pn.INFO,warn:Pn.WARN,error:Pn.ERROR,silent:Pn.SILENT},XV=Pn.INFO,QV={[Pn.DEBUG]:"log",[Pn.VERBOSE]:"log",[Pn.INFO]:"info",[Pn.WARN]:"warn",[Pn.ERROR]:"error"},JV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L8{constructor(e){this.name=e,this._logLevel=XV,this._logHandler=JV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pn.DEBUG,...e),this._logHandler(this,Pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pn.VERBOSE,...e),this._logHandler(this,Pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pn.INFO,...e),this._logHandler(this,Pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pn.WARN,...e),this._logHandler(this,Pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pn.ERROR,...e),this._logHandler(this,Pn.ERROR,...e)}}const ZV=(t,e)=>e.some(n=>t instanceof n);let kN,LN;function eF(){return kN||(kN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tF(){return LN||(LN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B8=new WeakMap,f_=new WeakMap,j8=new WeakMap,ev=new WeakMap,xT=new WeakMap;function nF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(zl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B8.set(n,t)}).catch(()=>{}),xT.set(e,t),e}function rF(t){if(f_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});f_.set(t,e)}let h_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return f_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iF(t){h_=t(h_)}function aF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tv(this),e,...n);return j8.set(r,e.sort?e.sort():[e]),zl(r)}:tF().includes(t)?function(...e){return t.apply(tv(this),e),zl(B8.get(this))}:function(...e){return zl(t.apply(tv(this),e))}}function oF(t){return typeof t=="function"?aF(t):(t instanceof IDBTransaction&&rF(t),ZV(t,eF())?new Proxy(t,h_):t)}function zl(t){if(t instanceof IDBRequest)return nF(t);if(ev.has(t))return ev.get(t);const e=oF(t);return e!==t&&(ev.set(t,e),xT.set(e,t)),e}const tv=t=>xT.get(t);function sF(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),u=zl(o);return r&&o.addEventListener("upgradeneeded",h=>{r(zl(o.result),h.oldVersion,h.newVersion,zl(o.transaction),h)}),n&&o.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const lF=["get","getKey","getAll","getAllKeys","count"],cF=["put","add","delete","clear"],nv=new Map;function BN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nv.get(e))return nv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=cF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lF.includes(n)))return;const a=async function(o,...u){const h=this.transaction(o,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&h.done]))[0]};return nv.set(e,a),a}iF(t=>({...t,get:(e,n,r)=>BN(e,n)||t.get(e,n,r),has:(e,n)=>!!BN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const p_="@firebase/app",jN="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new L8("@firebase/app"),fF="@firebase/app-compat",hF="@firebase/analytics-compat",pF="@firebase/analytics",mF="@firebase/app-check-compat",gF="@firebase/app-check",yF="@firebase/auth",xF="@firebase/auth-compat",vF="@firebase/database",bF="@firebase/data-connect",wF="@firebase/database-compat",EF="@firebase/functions",_F="@firebase/functions-compat",AF="@firebase/installations",TF="@firebase/installations-compat",SF="@firebase/messaging",CF="@firebase/messaging-compat",IF="@firebase/performance",NF="@firebase/performance-compat",RF="@firebase/remote-config",MF="@firebase/remote-config-compat",DF="@firebase/storage",OF="@firebase/storage-compat",PF="@firebase/firestore",kF="@firebase/vertexai-preview",LF="@firebase/firestore-compat",BF="firebase",jF="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="[DEFAULT]",UF={[p_]:"fire-core",[fF]:"fire-core-compat",[pF]:"fire-analytics",[hF]:"fire-analytics-compat",[gF]:"fire-app-check",[mF]:"fire-app-check-compat",[yF]:"fire-auth",[xF]:"fire-auth-compat",[vF]:"fire-rtdb",[bF]:"fire-data-connect",[wF]:"fire-rtdb-compat",[EF]:"fire-fn",[_F]:"fire-fn-compat",[AF]:"fire-iid",[TF]:"fire-iid-compat",[SF]:"fire-fcm",[CF]:"fire-fcm-compat",[IF]:"fire-perf",[NF]:"fire-perf-compat",[RF]:"fire-rc",[MF]:"fire-rc-compat",[DF]:"fire-gcs",[OF]:"fire-gcs-compat",[PF]:"fire-fst",[LF]:"fire-fst-compat",[kF]:"fire-vertex","fire-js":"fire-js",[BF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,VF=new Map,g_=new Map;function UN(t,e){try{t.container.addComponent(e)}catch(n){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fm(t){const e=t.name;if(g_.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;g_.set(e,t);for(const n of qh.values())UN(n,t);for(const n of VF.values())UN(n,t);return!0}function FF(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gl=new k8("app","Firebase",qF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=jF;function U8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:m_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gl.create("bad-app-name",{appName:String(i)});if(n||(n=D8()),!n)throw Gl.create("no-options");const a=qh.get(i);if(a){if(d_(n,a.options)&&d_(r,a.config))return a;throw Gl.create("duplicate-app",{appName:i})}const o=new KV(i);for(const h of g_.values())o.addComponent(h);const u=new zF(n,r,o);return qh.set(i,u),u}function V8(t=m_){const e=qh.get(t);if(!e&&t===m_&&D8())return U8();if(!e)throw Gl.create("no-app",{appName:t});return e}function HF(){return Array.from(qh.values())}function md(t,e,n){var r;let i=(r=UF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(u.join(" "));return}Fm(new Fh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="firebase-heartbeat-database",YF=1,zh="firebase-heartbeat-store";let rv=null;function F8(){return rv||(rv=sF($F,YF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gl.create("idb-open",{originalErrorMessage:t.message})})),rv}async function KF(t){try{const n=(await F8()).transaction(zh),r=await n.objectStore(zh).get(q8(t));return await n.done,r}catch(e){if(e instanceof ef)$s.warn(e.message);else{const n=Gl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(n.message)}}}async function VN(t,e){try{const r=(await F8()).transaction(zh,"readwrite");await r.objectStore(zh).put(e,q8(t)),await r.done}catch(n){if(n instanceof ef)$s.warn(n.message);else{const r=Gl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$s.warn(r.message)}}}function q8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=1024,XF=720*60*60*1e3;class QF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=FN();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=XF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=FN(),{heartbeatsToSend:r,unsentEntries:i}=JF(this._heartbeatsCache.heartbeats),a=Um(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return $s.warn(n),""}}}function FN(){return new Date().toISOString().substring(0,10)}function JF(t,e=WF){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),qN(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P8()?FV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return VN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return VN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qN(t){return Um(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(t){Fm(new Fh("platform-logger",e=>new uF(e),"PRIVATE")),Fm(new Fh("heartbeat",e=>new QF(e),"PRIVATE")),md(p_,jN,t),md(p_,jN,"esm2017"),md("fire-js","")}eq("");var tq="firebase",nq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */md(tq,nq,"app");var zN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $c,z8;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(B,z){function V(){}V.prototype=z.prototype,B.D=z.prototype,B.prototype=new V,B.prototype.constructor=B,B.C=function(ee,Q,X){for(var K=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)K[ge-2]=arguments[ge];return z.prototype[Q].apply(ee,K)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(B,z,V){V||(V=0);var ee=Array(16);if(typeof z=="string")for(var Q=0;16>Q;++Q)ee[Q]=z.charCodeAt(V++)|z.charCodeAt(V++)<<8|z.charCodeAt(V++)<<16|z.charCodeAt(V++)<<24;else for(Q=0;16>Q;++Q)ee[Q]=z[V++]|z[V++]<<8|z[V++]<<16|z[V++]<<24;z=B.g[0],V=B.g[1],Q=B.g[2];var X=B.g[3],K=z+(X^V&(Q^X))+ee[0]+3614090360&4294967295;z=V+(K<<7&4294967295|K>>>25),K=X+(Q^z&(V^Q))+ee[1]+3905402710&4294967295,X=z+(K<<12&4294967295|K>>>20),K=Q+(V^X&(z^V))+ee[2]+606105819&4294967295,Q=X+(K<<17&4294967295|K>>>15),K=V+(z^Q&(X^z))+ee[3]+3250441966&4294967295,V=Q+(K<<22&4294967295|K>>>10),K=z+(X^V&(Q^X))+ee[4]+4118548399&4294967295,z=V+(K<<7&4294967295|K>>>25),K=X+(Q^z&(V^Q))+ee[5]+1200080426&4294967295,X=z+(K<<12&4294967295|K>>>20),K=Q+(V^X&(z^V))+ee[6]+2821735955&4294967295,Q=X+(K<<17&4294967295|K>>>15),K=V+(z^Q&(X^z))+ee[7]+4249261313&4294967295,V=Q+(K<<22&4294967295|K>>>10),K=z+(X^V&(Q^X))+ee[8]+1770035416&4294967295,z=V+(K<<7&4294967295|K>>>25),K=X+(Q^z&(V^Q))+ee[9]+2336552879&4294967295,X=z+(K<<12&4294967295|K>>>20),K=Q+(V^X&(z^V))+ee[10]+4294925233&4294967295,Q=X+(K<<17&4294967295|K>>>15),K=V+(z^Q&(X^z))+ee[11]+2304563134&4294967295,V=Q+(K<<22&4294967295|K>>>10),K=z+(X^V&(Q^X))+ee[12]+1804603682&4294967295,z=V+(K<<7&4294967295|K>>>25),K=X+(Q^z&(V^Q))+ee[13]+4254626195&4294967295,X=z+(K<<12&4294967295|K>>>20),K=Q+(V^X&(z^V))+ee[14]+2792965006&4294967295,Q=X+(K<<17&4294967295|K>>>15),K=V+(z^Q&(X^z))+ee[15]+1236535329&4294967295,V=Q+(K<<22&4294967295|K>>>10),K=z+(Q^X&(V^Q))+ee[1]+4129170786&4294967295,z=V+(K<<5&4294967295|K>>>27),K=X+(V^Q&(z^V))+ee[6]+3225465664&4294967295,X=z+(K<<9&4294967295|K>>>23),K=Q+(z^V&(X^z))+ee[11]+643717713&4294967295,Q=X+(K<<14&4294967295|K>>>18),K=V+(X^z&(Q^X))+ee[0]+3921069994&4294967295,V=Q+(K<<20&4294967295|K>>>12),K=z+(Q^X&(V^Q))+ee[5]+3593408605&4294967295,z=V+(K<<5&4294967295|K>>>27),K=X+(V^Q&(z^V))+ee[10]+38016083&4294967295,X=z+(K<<9&4294967295|K>>>23),K=Q+(z^V&(X^z))+ee[15]+3634488961&4294967295,Q=X+(K<<14&4294967295|K>>>18),K=V+(X^z&(Q^X))+ee[4]+3889429448&4294967295,V=Q+(K<<20&4294967295|K>>>12),K=z+(Q^X&(V^Q))+ee[9]+568446438&4294967295,z=V+(K<<5&4294967295|K>>>27),K=X+(V^Q&(z^V))+ee[14]+3275163606&4294967295,X=z+(K<<9&4294967295|K>>>23),K=Q+(z^V&(X^z))+ee[3]+4107603335&4294967295,Q=X+(K<<14&4294967295|K>>>18),K=V+(X^z&(Q^X))+ee[8]+1163531501&4294967295,V=Q+(K<<20&4294967295|K>>>12),K=z+(Q^X&(V^Q))+ee[13]+2850285829&4294967295,z=V+(K<<5&4294967295|K>>>27),K=X+(V^Q&(z^V))+ee[2]+4243563512&4294967295,X=z+(K<<9&4294967295|K>>>23),K=Q+(z^V&(X^z))+ee[7]+1735328473&4294967295,Q=X+(K<<14&4294967295|K>>>18),K=V+(X^z&(Q^X))+ee[12]+2368359562&4294967295,V=Q+(K<<20&4294967295|K>>>12),K=z+(V^Q^X)+ee[5]+4294588738&4294967295,z=V+(K<<4&4294967295|K>>>28),K=X+(z^V^Q)+ee[8]+2272392833&4294967295,X=z+(K<<11&4294967295|K>>>21),K=Q+(X^z^V)+ee[11]+1839030562&4294967295,Q=X+(K<<16&4294967295|K>>>16),K=V+(Q^X^z)+ee[14]+4259657740&4294967295,V=Q+(K<<23&4294967295|K>>>9),K=z+(V^Q^X)+ee[1]+2763975236&4294967295,z=V+(K<<4&4294967295|K>>>28),K=X+(z^V^Q)+ee[4]+1272893353&4294967295,X=z+(K<<11&4294967295|K>>>21),K=Q+(X^z^V)+ee[7]+4139469664&4294967295,Q=X+(K<<16&4294967295|K>>>16),K=V+(Q^X^z)+ee[10]+3200236656&4294967295,V=Q+(K<<23&4294967295|K>>>9),K=z+(V^Q^X)+ee[13]+681279174&4294967295,z=V+(K<<4&4294967295|K>>>28),K=X+(z^V^Q)+ee[0]+3936430074&4294967295,X=z+(K<<11&4294967295|K>>>21),K=Q+(X^z^V)+ee[3]+3572445317&4294967295,Q=X+(K<<16&4294967295|K>>>16),K=V+(Q^X^z)+ee[6]+76029189&4294967295,V=Q+(K<<23&4294967295|K>>>9),K=z+(V^Q^X)+ee[9]+3654602809&4294967295,z=V+(K<<4&4294967295|K>>>28),K=X+(z^V^Q)+ee[12]+3873151461&4294967295,X=z+(K<<11&4294967295|K>>>21),K=Q+(X^z^V)+ee[15]+530742520&4294967295,Q=X+(K<<16&4294967295|K>>>16),K=V+(Q^X^z)+ee[2]+3299628645&4294967295,V=Q+(K<<23&4294967295|K>>>9),K=z+(Q^(V|~X))+ee[0]+4096336452&4294967295,z=V+(K<<6&4294967295|K>>>26),K=X+(V^(z|~Q))+ee[7]+1126891415&4294967295,X=z+(K<<10&4294967295|K>>>22),K=Q+(z^(X|~V))+ee[14]+2878612391&4294967295,Q=X+(K<<15&4294967295|K>>>17),K=V+(X^(Q|~z))+ee[5]+4237533241&4294967295,V=Q+(K<<21&4294967295|K>>>11),K=z+(Q^(V|~X))+ee[12]+1700485571&4294967295,z=V+(K<<6&4294967295|K>>>26),K=X+(V^(z|~Q))+ee[3]+2399980690&4294967295,X=z+(K<<10&4294967295|K>>>22),K=Q+(z^(X|~V))+ee[10]+4293915773&4294967295,Q=X+(K<<15&4294967295|K>>>17),K=V+(X^(Q|~z))+ee[1]+2240044497&4294967295,V=Q+(K<<21&4294967295|K>>>11),K=z+(Q^(V|~X))+ee[8]+1873313359&4294967295,z=V+(K<<6&4294967295|K>>>26),K=X+(V^(z|~Q))+ee[15]+4264355552&4294967295,X=z+(K<<10&4294967295|K>>>22),K=Q+(z^(X|~V))+ee[6]+2734768916&4294967295,Q=X+(K<<15&4294967295|K>>>17),K=V+(X^(Q|~z))+ee[13]+1309151649&4294967295,V=Q+(K<<21&4294967295|K>>>11),K=z+(Q^(V|~X))+ee[4]+4149444226&4294967295,z=V+(K<<6&4294967295|K>>>26),K=X+(V^(z|~Q))+ee[11]+3174756917&4294967295,X=z+(K<<10&4294967295|K>>>22),K=Q+(z^(X|~V))+ee[2]+718787259&4294967295,Q=X+(K<<15&4294967295|K>>>17),K=V+(X^(Q|~z))+ee[9]+3951481745&4294967295,B.g[0]=B.g[0]+z&4294967295,B.g[1]=B.g[1]+(Q+(K<<21&4294967295|K>>>11))&4294967295,B.g[2]=B.g[2]+Q&4294967295,B.g[3]=B.g[3]+X&4294967295}r.prototype.u=function(B,z){z===void 0&&(z=B.length);for(var V=z-this.blockSize,ee=this.B,Q=this.h,X=0;X<z;){if(Q==0)for(;X<=V;)i(this,B,X),X+=this.blockSize;if(typeof B=="string"){for(;X<z;)if(ee[Q++]=B.charCodeAt(X++),Q==this.blockSize){i(this,ee),Q=0;break}}else for(;X<z;)if(ee[Q++]=B[X++],Q==this.blockSize){i(this,ee),Q=0;break}}this.h=Q,this.o+=z},r.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var z=1;z<B.length-8;++z)B[z]=0;var V=8*this.o;for(z=B.length-8;z<B.length;++z)B[z]=V&255,V/=256;for(this.u(B),B=Array(16),z=V=0;4>z;++z)for(var ee=0;32>ee;ee+=8)B[V++]=this.g[z]>>>ee&255;return B};function a(B,z){var V=u;return Object.prototype.hasOwnProperty.call(V,B)?V[B]:V[B]=z(B)}function o(B,z){this.h=z;for(var V=[],ee=!0,Q=B.length-1;0<=Q;Q--){var X=B[Q]|0;ee&&X==z||(V[Q]=X,ee=!1)}this.g=V}var u={};function h(B){return-128<=B&&128>B?a(B,function(z){return new o([z|0],0>z?-1:0)}):new o([B|0],0>B?-1:0)}function f(B){if(isNaN(B)||!isFinite(B))return v;if(0>B)return R(f(-B));for(var z=[],V=1,ee=0;B>=V;ee++)z[ee]=B/V|0,V*=4294967296;return new o(z,0)}function g(B,z){if(B.length==0)throw Error("number format error: empty string");if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(B.charAt(0)=="-")return R(g(B.substring(1),z));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=f(Math.pow(z,8)),ee=v,Q=0;Q<B.length;Q+=8){var X=Math.min(8,B.length-Q),K=parseInt(B.substring(Q,Q+X),z);8>X?(X=f(Math.pow(z,X)),ee=ee.j(X).add(f(K))):(ee=ee.j(V),ee=ee.add(f(K)))}return ee}var v=h(0),A=h(1),N=h(16777216);t=o.prototype,t.m=function(){if(O(this))return-R(this).m();for(var B=0,z=1,V=0;V<this.g.length;V++){var ee=this.i(V);B+=(0<=ee?ee:4294967296+ee)*z,z*=4294967296}return B},t.toString=function(B){if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(P(this))return"0";if(O(this))return"-"+R(this).toString(B);for(var z=f(Math.pow(B,6)),V=this,ee="";;){var Q=q(V,z).g;V=L(V,Q.j(z));var X=((0<V.g.length?V.g[0]:V.h)>>>0).toString(B);if(V=Q,P(V))return X+ee;for(;6>X.length;)X="0"+X;ee=X+ee}},t.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h};function P(B){if(B.h!=0)return!1;for(var z=0;z<B.g.length;z++)if(B.g[z]!=0)return!1;return!0}function O(B){return B.h==-1}t.l=function(B){return B=L(this,B),O(B)?-1:P(B)?0:1};function R(B){for(var z=B.g.length,V=[],ee=0;ee<z;ee++)V[ee]=~B.g[ee];return new o(V,~B.h).add(A)}t.abs=function(){return O(this)?R(this):this},t.add=function(B){for(var z=Math.max(this.g.length,B.g.length),V=[],ee=0,Q=0;Q<=z;Q++){var X=ee+(this.i(Q)&65535)+(B.i(Q)&65535),K=(X>>>16)+(this.i(Q)>>>16)+(B.i(Q)>>>16);ee=K>>>16,X&=65535,K&=65535,V[Q]=K<<16|X}return new o(V,V[V.length-1]&-2147483648?-1:0)};function L(B,z){return B.add(R(z))}t.j=function(B){if(P(this)||P(B))return v;if(O(this))return O(B)?R(this).j(R(B)):R(R(this).j(B));if(O(B))return R(this.j(R(B)));if(0>this.l(N)&&0>B.l(N))return f(this.m()*B.m());for(var z=this.g.length+B.g.length,V=[],ee=0;ee<2*z;ee++)V[ee]=0;for(ee=0;ee<this.g.length;ee++)for(var Q=0;Q<B.g.length;Q++){var X=this.i(ee)>>>16,K=this.i(ee)&65535,ge=B.i(Q)>>>16,re=B.i(Q)&65535;V[2*ee+2*Q]+=K*re,U(V,2*ee+2*Q),V[2*ee+2*Q+1]+=X*re,U(V,2*ee+2*Q+1),V[2*ee+2*Q+1]+=K*ge,U(V,2*ee+2*Q+1),V[2*ee+2*Q+2]+=X*ge,U(V,2*ee+2*Q+2)}for(ee=0;ee<z;ee++)V[ee]=V[2*ee+1]<<16|V[2*ee];for(ee=z;ee<2*z;ee++)V[ee]=0;return new o(V,0)};function U(B,z){for(;(B[z]&65535)!=B[z];)B[z+1]+=B[z]>>>16,B[z]&=65535,z++}function F(B,z){this.g=B,this.h=z}function q(B,z){if(P(z))throw Error("division by zero");if(P(B))return new F(v,v);if(O(B))return z=q(R(B),z),new F(R(z.g),R(z.h));if(O(z))return z=q(B,R(z)),new F(R(z.g),z.h);if(30<B.g.length){if(O(B)||O(z))throw Error("slowDivide_ only works with positive integers.");for(var V=A,ee=z;0>=ee.l(B);)V=H(V),ee=H(ee);var Q=G(V,1),X=G(ee,1);for(ee=G(ee,2),V=G(V,2);!P(ee);){var K=X.add(ee);0>=K.l(B)&&(Q=Q.add(V),X=K),ee=G(ee,1),V=G(V,1)}return z=L(B,Q.j(z)),new F(Q,z)}for(Q=v;0<=B.l(z);){for(V=Math.max(1,Math.floor(B.m()/z.m())),ee=Math.ceil(Math.log(V)/Math.LN2),ee=48>=ee?1:Math.pow(2,ee-48),X=f(V),K=X.j(z);O(K)||0<K.l(B);)V-=ee,X=f(V),K=X.j(z);P(X)&&(X=A),Q=Q.add(X),B=L(B,K)}return new F(Q,B)}t.A=function(B){return q(this,B).h},t.and=function(B){for(var z=Math.max(this.g.length,B.g.length),V=[],ee=0;ee<z;ee++)V[ee]=this.i(ee)&B.i(ee);return new o(V,this.h&B.h)},t.or=function(B){for(var z=Math.max(this.g.length,B.g.length),V=[],ee=0;ee<z;ee++)V[ee]=this.i(ee)|B.i(ee);return new o(V,this.h|B.h)},t.xor=function(B){for(var z=Math.max(this.g.length,B.g.length),V=[],ee=0;ee<z;ee++)V[ee]=this.i(ee)^B.i(ee);return new o(V,this.h^B.h)};function H(B){for(var z=B.g.length+1,V=[],ee=0;ee<z;ee++)V[ee]=B.i(ee)<<1|B.i(ee-1)>>>31;return new o(V,B.h)}function G(B,z){var V=z>>5;z%=32;for(var ee=B.g.length-V,Q=[],X=0;X<ee;X++)Q[X]=0<z?B.i(X+V)>>>z|B.i(X+V+1)<<32-z:B.i(X+V);return new o(Q,B.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,z8=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=g,$c=o}).apply(typeof zN<"u"?zN:typeof self<"u"?self:typeof window<"u"?window:{});var rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G8,wh,H8,Im,y_,$8,Y8,K8;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,j,W){return S==Array.prototype||S==Object.prototype||(S[j]=W.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof rm=="object"&&rm];for(var j=0;j<S.length;++j){var W=S[j];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var r=n(this);function i(S,j){if(j)e:{var W=r;S=S.split(".");for(var ae=0;ae<S.length-1;ae++){var Re=S[ae];if(!(Re in W))break e;W=W[Re]}S=S[S.length-1],ae=W[S],j=j(ae),j!=ae&&j!=null&&e(W,S,{configurable:!0,writable:!0,value:j})}}function a(S,j){S instanceof String&&(S+="");var W=0,ae=!1,Re={next:function(){if(!ae&&W<S.length){var ze=W++;return{value:j(ze,S[ze]),done:!1}}return ae=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}i("Array.prototype.values",function(S){return S||function(){return a(this,function(j,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function h(S){var j=typeof S;return j=j!="object"?j:S?Array.isArray(S)?"array":j:"null",j=="array"||j=="object"&&typeof S.length=="number"}function f(S){var j=typeof S;return j=="object"&&S!=null||j=="function"}function g(S,j,W){return S.call.apply(S.bind,arguments)}function v(S,j,W){if(!S)throw Error();if(2<arguments.length){var ae=Array.prototype.slice.call(arguments,2);return function(){var Re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Re,ae),S.apply(j,Re)}}return function(){return S.apply(j,arguments)}}function A(S,j,W){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,A.apply(null,arguments)}function N(S,j){var W=Array.prototype.slice.call(arguments,1);return function(){var ae=W.slice();return ae.push.apply(ae,arguments),S.apply(this,ae)}}function P(S,j){function W(){}W.prototype=j.prototype,S.aa=j.prototype,S.prototype=new W,S.prototype.constructor=S,S.Qb=function(ae,Re,ze){for(var vt=Array(arguments.length-2),jn=2;jn<arguments.length;jn++)vt[jn-2]=arguments[jn];return j.prototype[Re].apply(ae,vt)}}function O(S){const j=S.length;if(0<j){const W=Array(j);for(let ae=0;ae<j;ae++)W[ae]=S[ae];return W}return[]}function R(S,j){for(let W=1;W<arguments.length;W++){const ae=arguments[W];if(h(ae)){const Re=S.length||0,ze=ae.length||0;S.length=Re+ze;for(let vt=0;vt<ze;vt++)S[Re+vt]=ae[vt]}else S.push(ae)}}class L{constructor(j,W){this.i=j,this.j=W,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function U(S){return/^[\s\xa0]*$/.test(S)}function F(){var S=u.navigator;return S&&(S=S.userAgent)?S:""}function q(S){return q[" "](S),S}q[" "]=function(){};var H=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function G(S,j,W){for(const ae in S)j.call(W,S[ae],ae,S)}function B(S,j){for(const W in S)j.call(void 0,S[W],W,S)}function z(S){const j={};for(const W in S)j[W]=S[W];return j}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(S,j){let W,ae;for(let Re=1;Re<arguments.length;Re++){ae=arguments[Re];for(W in ae)S[W]=ae[W];for(let ze=0;ze<V.length;ze++)W=V[ze],Object.prototype.hasOwnProperty.call(ae,W)&&(S[W]=ae[W])}}function Q(S){var j=1;S=S.split(":");const W=[];for(;0<j&&S.length;)W.push(S.shift()),j--;return S.length&&W.push(S.join(":")),W}function X(S){u.setTimeout(()=>{throw S},0)}function K(){var S=ke;let j=null;return S.g&&(j=S.g,S.g=S.g.next,S.g||(S.h=null),j.next=null),j}class ge{constructor(){this.h=this.g=null}add(j,W){const ae=re.get();ae.set(j,W),this.h?this.h.next=ae:this.g=ae,this.h=ae}}var re=new L(()=>new te,S=>S.reset());class te{constructor(){this.next=this.g=this.h=null}set(j,W){this.h=j,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let se,_e=!1,ke=new ge,Ke=()=>{const S=u.Promise.resolve(void 0);se=()=>{S.then(ce)}};var ce=()=>{for(var S;S=K();){try{S.h.call(S.g)}catch(W){X(W)}var j=re;j.j(S),100>j.h&&(j.h++,S.next=j.g,j.g=S)}_e=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(S,j){this.type=S,this.g=this.target=j,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var He=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var S=!1,j=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const W=()=>{};u.addEventListener("test",W,j),u.removeEventListener("test",W,j)}catch{}return S})();function ot(S,j){if(Ae.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var W=this.type=S.type,ae=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=j,j=S.relatedTarget){if(H){e:{try{q(j.nodeName);var Re=!0;break e}catch{}Re=!1}Re||(j=null)}}else W=="mouseover"?j=S.fromElement:W=="mouseout"&&(j=S.toElement);this.relatedTarget=j,ae?(this.clientX=ae.clientX!==void 0?ae.clientX:ae.pageX,this.clientY=ae.clientY!==void 0?ae.clientY:ae.pageY,this.screenX=ae.screenX||0,this.screenY=ae.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:Ye[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&ot.aa.h.call(this)}}P(ot,Ae);var Ye={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),et=0;function Be(S,j,W,ae,Re){this.listener=S,this.proxy=null,this.src=j,this.type=W,this.capture=!!ae,this.ha=Re,this.key=++et,this.da=this.fa=!1}function ct(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function rt(S){this.src=S,this.g={},this.h=0}rt.prototype.add=function(S,j,W,ae,Re){var ze=S.toString();S=this.g[ze],S||(S=this.g[ze]=[],this.h++);var vt=yt(S,j,ae,Re);return-1<vt?(j=S[vt],W||(j.fa=!1)):(j=new Be(j,this.src,ze,!!ae,Re),j.fa=W,S.push(j)),j};function je(S,j){var W=j.type;if(W in S.g){var ae=S.g[W],Re=Array.prototype.indexOf.call(ae,j,void 0),ze;(ze=0<=Re)&&Array.prototype.splice.call(ae,Re,1),ze&&(ct(j),S.g[W].length==0&&(delete S.g[W],S.h--))}}function yt(S,j,W,ae){for(var Re=0;Re<S.length;++Re){var ze=S[Re];if(!ze.da&&ze.listener==j&&ze.capture==!!W&&ze.ha==ae)return Re}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Le={};function he(S,j,W,ae,Re){if(Array.isArray(j)){for(var ze=0;ze<j.length;ze++)he(S,j[ze],W,ae,Re);return null}return W=nt(W),S&&S[Ce]?S.K(j,W,f(ae)?!!ae.capture:!1,Re):ve(S,j,W,!1,ae,Re)}function ve(S,j,W,ae,Re,ze){if(!j)throw Error("Invalid event type");var vt=f(Re)?!!Re.capture:!!Re,jn=dt(S);if(jn||(S[wt]=jn=new rt(S)),W=jn.add(j,W,ae,vt,ze),W.proxy)return W;if(ae=$e(),W.proxy=ae,ae.src=S,ae.listener=W,S.addEventListener)He||(Re=vt),Re===void 0&&(Re=!1),S.addEventListener(j.toString(),ae,Re);else if(S.attachEvent)S.attachEvent(Ie(j.toString()),ae);else if(S.addListener&&S.removeListener)S.addListener(ae);else throw Error("addEventListener and attachEvent are unavailable.");return W}function $e(){function S(W){return j.call(S.src,S.listener,W)}const j=mt;return S}function We(S,j,W,ae,Re){if(Array.isArray(j))for(var ze=0;ze<j.length;ze++)We(S,j[ze],W,ae,Re);else ae=f(ae)?!!ae.capture:!!ae,W=nt(W),S&&S[Ce]?(S=S.i,j=String(j).toString(),j in S.g&&(ze=S.g[j],W=yt(ze,W,ae,Re),-1<W&&(ct(ze[W]),Array.prototype.splice.call(ze,W,1),ze.length==0&&(delete S.g[j],S.h--)))):S&&(S=dt(S))&&(j=S.g[j.toString()],S=-1,j&&(S=yt(j,W,ae,Re)),(W=-1<S?j[S]:null)&&ye(W))}function ye(S){if(typeof S!="number"&&S&&!S.da){var j=S.src;if(j&&j[Ce])je(j.i,S);else{var W=S.type,ae=S.proxy;j.removeEventListener?j.removeEventListener(W,ae,S.capture):j.detachEvent?j.detachEvent(Ie(W),ae):j.addListener&&j.removeListener&&j.removeListener(ae),(W=dt(j))?(je(W,S),W.h==0&&(W.src=null,j[wt]=null)):ct(S)}}}function Ie(S){return S in Le?Le[S]:Le[S]="on"+S}function mt(S,j){if(S.da)S=!0;else{j=new ot(j,this);var W=S.listener,ae=S.ha||S.src;S.fa&&ye(S),S=W.call(ae,j)}return S}function dt(S){return S=S[wt],S instanceof rt?S:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(S){return typeof S=="function"?S:(S[Ee]||(S[Ee]=function(j){return S.handleEvent(j)}),S[Ee])}function st(){fe.call(this),this.i=new rt(this),this.M=this,this.F=null}P(st,fe),st.prototype[Ce]=!0,st.prototype.removeEventListener=function(S,j,W,ae){We(this,S,j,W,ae)};function Tt(S,j){var W,ae=S.F;if(ae)for(W=[];ae;ae=ae.F)W.push(ae);if(S=S.M,ae=j.type||j,typeof j=="string")j=new Ae(j,S);else if(j instanceof Ae)j.target=j.target||S;else{var Re=j;j=new Ae(ae,S),ee(j,Re)}if(Re=!0,W)for(var ze=W.length-1;0<=ze;ze--){var vt=j.g=W[ze];Re=Ct(vt,ae,!0,j)&&Re}if(vt=j.g=S,Re=Ct(vt,ae,!0,j)&&Re,Re=Ct(vt,ae,!1,j)&&Re,W)for(ze=0;ze<W.length;ze++)vt=j.g=W[ze],Re=Ct(vt,ae,!1,j)&&Re}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var S=this.i,j;for(j in S.g){for(var W=S.g[j],ae=0;ae<W.length;ae++)ct(W[ae]);delete S.g[j],S.h--}}this.F=null},st.prototype.K=function(S,j,W,ae){return this.i.add(String(S),j,!1,W,ae)},st.prototype.L=function(S,j,W,ae){return this.i.add(String(S),j,!0,W,ae)};function Ct(S,j,W,ae){if(j=S.i.g[String(j)],!j)return!0;j=j.concat();for(var Re=!0,ze=0;ze<j.length;++ze){var vt=j[ze];if(vt&&!vt.da&&vt.capture==W){var jn=vt.listener,br=vt.ha||vt.src;vt.fa&&je(S.i,vt),Re=jn.call(br,ae)!==!1&&Re}}return Re&&!ae.defaultPrevented}function Ht(S,j,W){if(typeof S=="function")W&&(S=A(S,W));else if(S&&typeof S.handleEvent=="function")S=A(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:u.setTimeout(S,j||0)}function Pr(S){S.g=Ht(()=>{S.g=null,S.i&&(S.i=!1,Pr(S))},S.l);const j=S.h;S.h=null,S.m.apply(null,j)}class di extends fe{constructor(j,W){super(),this.m=j,this.l=W,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(S){fe.call(this),this.h=S,this.g={}}P(fi,fe);var un=[];function it(S){G(S.g,function(j,W){this.g.hasOwnProperty(W)&&ye(j)},S),S.g={}}fi.prototype.N=function(){fi.aa.N.call(this),it(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=u.JSON.stringify,Yt=u.JSON.parse,Mn=class{stringify(S){return u.JSON.stringify(S,void 0)}parse(S){return u.JSON.parse(S,void 0)}};function Ei(){}Ei.prototype.h=null;function $i(S){return S.h||(S.h=S.i())}function Te(){}var lt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zt(){Ae.call(this,"d")}P(zt,Ae);function Ot(){Ae.call(this,"c")}P(Ot,Ae);var wn={},an=null;function ir(){return an=an||new st}wn.La="serverreachability";function En(S){Ae.call(this,wn.La,S)}P(En,Ae);function Gn(S){const j=ir();Tt(j,new En(j))}wn.STAT_EVENT="statevent";function Cr(S,j){Ae.call(this,wn.STAT_EVENT,S),this.stat=j}P(Cr,Ae);function Bn(S){const j=ir();Tt(j,new Cr(j,S))}wn.Ma="timingevent";function no(S,j){Ae.call(this,wn.Ma,S),this.size=j}P(no,Ae);function _i(S,j){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){S()},j)}function ia(){this.g=!0}ia.prototype.xa=function(){this.g=!1};function Er(S,j,W,ae,Re,ze){S.info(function(){if(S.g)if(ze)for(var vt="",jn=ze.split("&"),br=0;br<jn.length;br++){var sn=jn[br].split("=");if(1<sn.length){var gr=sn[0];sn=sn[1];var Br=gr.split("_");vt=2<=Br.length&&Br[1]=="type"?vt+(gr+"="+sn+"&"):vt+(gr+"=redacted&")}}else vt=null;else vt=ze;return"XMLHTTP REQ ("+ae+") [attempt "+Re+"]: "+j+`
`+W+`
`+vt})}function Yi(S,j,W,ae,Re,ze,vt){S.info(function(){return"XMLHTTP RESP ("+ae+") [ attempt "+Re+"]: "+j+`
`+W+`
`+ze+" "+vt})}function Ir(S,j,W,ae){S.info(function(){return"XMLHTTP TEXT ("+j+"): "+ni(S,W)+(ae?" "+ae:"")})}function Et(S,j){S.info(function(){return"TIMEOUT: "+j})}ia.prototype.info=function(){};function ni(S,j){if(!S.g)return j;if(!j)return null;try{var W=JSON.parse(j);if(W){for(S=0;S<W.length;S++)if(Array.isArray(W[S])){var ae=W[S];if(!(2>ae.length)){var Re=ae[1];if(Array.isArray(Re)&&!(1>Re.length)){var ze=Re[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var vt=1;vt<Re.length;vt++)Re[vt]=""}}}}return pn(W)}catch{return j}}var ar={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hi;function aa(){}P(aa,Ei),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},hi=new aa;function Ai(S,j,W,ae){this.j=S,this.i=j,this.l=W,this.R=ae||1,this.U=new fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Di}function Di(){this.i=null,this.g="",this.h=!1}var de={},ht={};function Nt(S,j,W){S.L=1,S.v=vr(Wt(j)),S.m=W,S.P=!0,Lt(S,null)}function Lt(S,j){S.F=Date.now(),gn(S),S.A=Wt(S.v);var W=S.A,ae=S.R;Array.isArray(ae)||(ae=[String(ae)]),sr(W.i,"t",ae),S.C=0,W=S.j.J,S.h=new Di,S.g=Eu(S.j,W?j:null,!S.m),0<S.O&&(S.M=new di(A(S.Y,S,S.g),S.O)),j=S.U,W=S.g,ae=S.ca;var Re="readystatechange";Array.isArray(Re)||(Re&&(un[0]=Re.toString()),Re=un);for(var ze=0;ze<Re.length;ze++){var vt=he(W,Re[ze],ae||j.handleEvent,!1,j.h||j);if(!vt)break;j.g[vt.key]=vt}j=S.H?z(S.H):{},S.m?(S.u||(S.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,j)):(S.u="GET",S.g.ea(S.A,S.u,null,j)),Gn(),Er(S.i,S.u,S.A,S.l,S.R,S.m)}Ai.prototype.ca=function(S){S=S.target;const j=this.M;j&&Oi(S)==3?j.j():this.Y(S)},Ai.prototype.Y=function(S){try{if(S==this.g)e:{const Br=Oi(this.g);var j=this.g.Ba();const Zr=this.g.Z();if(!(3>Br)&&(Br!=3||this.g&&(this.h.h||this.g.oa()||hs(this.g)))){this.J||Br!=4||j==7||(j==8||0>=Zr?Gn(3):Gn(2)),Ve(this);var W=this.g.Z();this.X=W;t:if(gt(this)){var ae=hs(this.g);S="";var Re=ae.length,ze=Oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),kr(this);var vt="";break t}this.h.i=new u.TextDecoder}for(j=0;j<Re;j++)this.h.h=!0,S+=this.h.i.decode(ae[j],{stream:!(ze&&j==Re-1)});ae.length=0,this.h.g+=S,this.C=0,vt=this.h.g}else vt=this.g.oa();if(this.o=W==200,Yi(this.i,this.u,this.A,this.l,this.R,Br,W),this.o){if(this.T&&!this.K){t:{if(this.g){var jn,br=this.g;if((jn=br.g?br.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(jn)){var sn=jn;break t}}sn=null}if(W=sn)Ir(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pi(this,W);else{this.o=!1,this.s=3,Bn(12),Qt(this),kr(this);break e}}if(this.P){W=!0;let ki;for(;!this.J&&this.C<vt.length;)if(ki=Qn(this,vt),ki==ht){Br==4&&(this.s=4,Bn(14),W=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(ki==de){this.s=4,Bn(15),Ir(this.i,this.l,vt,"[Invalid Chunk]"),W=!1;break}else Ir(this.i,this.l,ki,null),pi(this,ki);if(gt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Br!=4||vt.length!=0||this.h.h||(this.s=1,Bn(16),W=!1),this.o=this.o&&W,!W)Ir(this.i,this.l,vt,"[Invalid Chunked Response]"),Qt(this),kr(this);else if(0<vt.length&&!this.W){this.W=!0;var gr=this.j;gr.g==this&&gr.ba&&!gr.M&&(gr.j.info("Great, no buffering proxy detected. Bytes received: "+vt.length),gs(gr),gr.M=!0,Bn(11))}}else Ir(this.i,this.l,vt,null),pi(this,vt);Br==4&&Qt(this),this.o&&!this.J&&(Br==4?mr(this.j,this):(this.o=!1,gn(this)))}else kn(this.g),W==400&&0<vt.indexOf("Unknown SID")?(this.s=3,Bn(12)):(this.s=0,Bn(13)),Qt(this),kr(this)}}}catch{}finally{}};function gt(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Qn(S,j){var W=S.C,ae=j.indexOf(`
`,W);return ae==-1?ht:(W=Number(j.substring(W,ae)),isNaN(W)?de:(ae+=1,ae+W>j.length?ht:(j=j.slice(ae,ae+W),S.C=ae+W,j)))}Ai.prototype.cancel=function(){this.J=!0,Qt(this)};function gn(S){S.S=Date.now()+S.I,mn(S,S.I)}function mn(S,j){if(S.B!=null)throw Error("WatchDog timer not null");S.B=_i(A(S.ba,S),j)}function Ve(S){S.B&&(u.clearTimeout(S.B),S.B=null)}Ai.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Et(this.i,this.A),this.L!=2&&(Gn(),Bn(17)),Qt(this),this.s=2,kr(this)):mn(this,this.S-S)};function kr(S){S.j.G==0||S.J||mr(S.j,S)}function Qt(S){Ve(S);var j=S.M;j&&typeof j.ma=="function"&&j.ma(),S.M=null,it(S.U),S.g&&(j=S.g,S.g=null,j.abort(),j.ma())}function pi(S,j){try{var W=S.j;if(W.G!=0&&(W.g==S||ro(W.h,S))){if(!S.K&&ro(W.h,S)&&W.G==3){try{var ae=W.Da.g.parse(j)}catch{ae=null}if(Array.isArray(ae)&&ae.length==3){var Re=ae;if(Re[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<S.F)oo(W),Xo(W);else break e;hc(W),Bn(18)}}else W.za=Re[1],0<W.za-W.T&&37500>Re[2]&&W.F&&W.v==0&&!W.C&&(W.C=_i(A(W.Za,W),6e3));if(1>=dn(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else Pi(W,11)}else if((S.K||W.g==S)&&oo(W),!U(j))for(Re=W.Da.g.parse(j),j=0;j<Re.length;j++){let sn=Re[j];if(W.T=sn[0],sn=sn[1],W.G==2)if(sn[0]=="c"){W.K=sn[1],W.ia=sn[2];const gr=sn[3];gr!=null&&(W.la=gr,W.j.info("VER="+W.la));const Br=sn[4];Br!=null&&(W.Aa=Br,W.j.info("SVER="+W.Aa));const Zr=sn[5];Zr!=null&&typeof Zr=="number"&&0<Zr&&(ae=1.5*Zr,W.L=ae,W.j.info("backChannelRequestTimeoutMs_="+ae)),ae=W;const ki=S.g;if(ki){const Si=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var ze=ae.h;ze.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(io(ze,ze.h),ze.h=null))}if(ae.D){const Mo=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(ae.ya=Mo,xt(ae.I,ae.D,Mo))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-S.F,W.j.info("Handshake RTT: "+W.R+"ms")),ae=W;var vt=S;if(ae.qa=Ut(ae,ae.J?ae.ia:null,ae.W),vt.K){Ki(ae.h,vt);var jn=vt,br=ae.L;br&&(jn.I=br),jn.B&&(Ve(jn),gn(jn)),ae.g=vt}else wu(ae);0<W.i.length&&Xt(W)}else sn[0]!="stop"&&sn[0]!="close"||Pi(W,7);else W.G==3&&(sn[0]=="stop"||sn[0]=="close"?sn[0]=="stop"?Pi(W,7):Aa(W):sn[0]!="noop"&&W.l&&W.l.ta(sn),W.v=0)}}Gn(4)}catch{}}var bf=class{constructor(S,j){this.g=S,this.map=j}};function _n(S){this.l=S||10,u.PerformanceNavigationTiming?(S=u.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yn(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function dn(S){return S.h?1:S.g?S.g.size:0}function ro(S,j){return S.h?S.h==j:S.g?S.g.has(j):!1}function io(S,j){S.g?S.g.add(j):S.h=j}function Ki(S,j){S.h&&S.h==j?S.h=null:S.g&&S.g.has(j)&&S.g.delete(j)}_n.prototype.cancel=function(){if(this.i=In(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function In(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let j=S.i;for(const W of S.g.values())j=j.concat(W.D);return j}return O(S.i)}function Ba(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(h(S)){for(var j=[],W=S.length,ae=0;ae<W;ae++)j.push(S[ae]);return j}j=[],W=0;for(ae in S)j[W++]=S[ae];return j}function wf(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(h(S)||typeof S=="string"){var j=[];S=S.length;for(var W=0;W<S;W++)j.push(W);return j}j=[],W=0;for(const ae in S)j[W++]=ae;return j}}}function or(S,j){if(S.forEach&&typeof S.forEach=="function")S.forEach(j,void 0);else if(h(S)||typeof S=="string")Array.prototype.forEach.call(S,j,void 0);else for(var W=wf(S),ae=Ba(S),Re=ae.length,ze=0;ze<Re;ze++)j.call(void 0,ae[ze],W&&W[ze],S)}var ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function al(S,j){if(S){S=S.split("&");for(var W=0;W<S.length;W++){var ae=S[W].indexOf("="),Re=null;if(0<=ae){var ze=S[W].substring(0,ae);Re=S[W].substring(ae+1)}else ze=S[W];j(ze,Re?decodeURIComponent(Re.replace(/\+/g," ")):"")}}}function Wi(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof Wi){this.h=S.h,_r(this,S.j),this.o=S.o,this.g=S.g,Me(this,S.s),this.l=S.l;var j=S.i,W=new va;W.i=j.i,j.g&&(W.g=new Map(j.g),W.h=j.h),oe(this,W),this.m=S.m}else S&&(j=String(S).match(ya))?(this.h=!1,_r(this,j[1]||"",!0),this.o=Qr(j[2]||""),this.g=Qr(j[3]||"",!0),Me(this,j[4]),this.l=Qr(j[5]||"",!0),oe(this,j[6]||"",!0),this.m=Qr(j[7]||"")):(this.h=!1,this.i=new va(null,this.h))}Wi.prototype.toString=function(){var S=[],j=this.j;j&&S.push(xa(j,Ti,!0),":");var W=this.g;return(W||j=="file")&&(S.push("//"),(j=this.o)&&S.push(xa(j,Ti,!0),"@"),S.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&S.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&S.push("/"),S.push(xa(W,W.charAt(0)=="/"?Jn:Bt,!0))),(W=this.i.toString())&&S.push("?",W),(W=this.m)&&S.push("#",xa(W,Ef)),S.join("")};function Wt(S){return new Wi(S)}function _r(S,j,W){S.j=W?Qr(j,!0):j,S.j&&(S.j=S.j.replace(/:$/,""))}function Me(S,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);S.s=j}else S.s=null}function oe(S,j,W){j instanceof va?(S.i=j,ja(S.i,S.h)):(W||(j=xa(j,vu)),S.i=new va(j,S.h))}function xt(S,j,W){S.i.set(j,W)}function vr(S){return xt(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function Qr(S,j){return S?j?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function xa(S,j,W){return typeof S=="string"?(S=encodeURI(S).replace(j,cc),W&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function cc(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Ti=/[#\/\?@]/g,Bt=/[#\?:]/g,Jn=/[#\?]/g,vu=/[#\?@]/g,Ef=/#/g;function va(S,j){this.h=this.g=null,this.i=S||null,this.j=!!j}function Lr(S){S.g||(S.g=new Map,S.h=0,S.i&&al(S.i,function(j,W){S.add(decodeURIComponent(j.replace(/\+/g," ")),W)}))}t=va.prototype,t.add=function(S,j){Lr(this),this.i=null,S=mi(this,S);var W=this.g.get(S);return W||this.g.set(S,W=[]),W.push(j),this.h+=1,this};function Ko(S,j){Lr(S),j=mi(S,j),S.g.has(j)&&(S.i=null,S.h-=S.g.get(j).length,S.g.delete(j))}function ol(S,j){return Lr(S),j=mi(S,j),S.g.has(j)}t.forEach=function(S,j){Lr(this),this.g.forEach(function(W,ae){W.forEach(function(Re){S.call(j,Re,ae,this)},this)},this)},t.na=function(){Lr(this);const S=Array.from(this.g.values()),j=Array.from(this.g.keys()),W=[];for(let ae=0;ae<j.length;ae++){const Re=S[ae];for(let ze=0;ze<Re.length;ze++)W.push(j[ae])}return W},t.V=function(S){Lr(this);let j=[];if(typeof S=="string")ol(this,S)&&(j=j.concat(this.g.get(mi(this,S))));else{S=Array.from(this.g.values());for(let W=0;W<S.length;W++)j=j.concat(S[W])}return j},t.set=function(S,j){return Lr(this),this.i=null,S=mi(this,S),ol(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[j]),this.h+=1,this},t.get=function(S,j){return S?(S=this.V(S),0<S.length?String(S[0]):j):j};function sr(S,j,W){Ko(S,j),0<W.length&&(S.i=null,S.g.set(mi(S,j),O(W)),S.h+=W.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],j=Array.from(this.g.keys());for(var W=0;W<j.length;W++){var ae=j[W];const ze=encodeURIComponent(String(ae)),vt=this.V(ae);for(ae=0;ae<vt.length;ae++){var Re=ze;vt[ae]!==""&&(Re+="="+encodeURIComponent(String(vt[ae]))),S.push(Re)}}return this.i=S.join("&")};function mi(S,j){return j=String(j),S.j&&(j=j.toLowerCase()),j}function ja(S,j){j&&!S.j&&(Lr(S),S.i=null,S.g.forEach(function(W,ae){var Re=ae.toLowerCase();ae!=Re&&(Ko(this,ae),sr(this,Re,W))},S)),S.j=j}function Vt(S,j){const W=new ia;if(u.Image){const ae=new Image;ae.onload=N(Ft,W,"TestLoadImage: loaded",!0,j,ae),ae.onerror=N(Ft,W,"TestLoadImage: error",!1,j,ae),ae.onabort=N(Ft,W,"TestLoadImage: abort",!1,j,ae),ae.ontimeout=N(Ft,W,"TestLoadImage: timeout",!1,j,ae),u.setTimeout(function(){ae.ontimeout&&ae.ontimeout()},1e4),ae.src=S}else j(!1)}function bu(S,j){const W=new ia,ae=new AbortController,Re=setTimeout(()=>{ae.abort(),Ft(W,"TestPingServer: timeout",!1,j)},1e4);fetch(S,{signal:ae.signal}).then(ze=>{clearTimeout(Re),ze.ok?Ft(W,"TestPingServer: ok",!0,j):Ft(W,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Re),Ft(W,"TestPingServer: error",!1,j)})}function Ft(S,j,W,ae,Re){try{Re&&(Re.onload=null,Re.onerror=null,Re.onabort=null,Re.ontimeout=null),ae(W)}catch{}}function Zn(){this.g=new Mn}function uc(S,j,W){const ae=W||"";try{or(S,function(Re,ze){let vt=Re;f(Re)&&(vt=pn(Re)),j.push(ae+ze+"="+encodeURIComponent(vt))})}catch(Re){throw j.push(ae+"type="+encodeURIComponent("_badmap")),Re}}function ba(S){this.l=S.Ub||null,this.j=S.eb||!1}P(ba,Ei),ba.prototype.g=function(){return new Xi(this.l,this.j)},ba.prototype.i=(function(S){return function(){return S}})({});function Xi(S,j){st.call(this),this.D=S,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Xi,st),t=Xi.prototype,t.open=function(S,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=j,this.readyState=1,Ea(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(j.body=S),(this.D||u).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wa(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function wa(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var j=S.value?S.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!S.done}))&&(this.response=this.responseText+=j)}S.done?ao(this):Ea(this),this.readyState==3&&wa(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,ao(this))},t.Qa=function(S){this.g&&(this.response=S,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ea(S)}t.setRequestHeader=function(S,j){this.u.append(S,j)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],j=this.h.entries();for(var W=j.next();!W.done;)W=W.value,S.push(W[0]+": "+W[1]),W=j.next();return S.join(`\r
`)};function Ea(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Ua(S){let j="";return G(S,function(W,ae){j+=ae,j+=":",j+=W,j+=`\r
`}),j}function _a(S,j,W){e:{for(ae in W){var ae=!1;break e}ae=!0}ae||(W=Ua(W),typeof S=="string"?W!=null&&encodeURIComponent(String(W)):xt(S,j,W))}function lr(S){st.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(lr,st);var qr=/^https?$/i,oa=["POST","PUT"];t=lr.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,j,W,ae){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);j=j?j.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hi.g(),this.v=this.o?$i(this.o):$i(hi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(j,String(S),!0),this.B=!1}catch(ze){zr(this,ze);return}if(S=W||"",W=new Map(this.headers),ae)if(Object.getPrototypeOf(ae)===Object.prototype)for(var Re in ae)W.set(Re,ae[Re]);else if(typeof ae.keys=="function"&&typeof ae.get=="function")for(const ze of ae.keys())W.set(ze,ae.get(ze));else throw Error("Unknown input type for opt_headers: "+String(ae));ae=Array.from(W.keys()).find(ze=>ze.toLowerCase()=="content-type"),Re=u.FormData&&S instanceof u.FormData,!(0<=Array.prototype.indexOf.call(oa,j,void 0))||ae||Re||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,vt]of W)this.g.setRequestHeader(ze,vt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sl(this),this.u=!0,this.g.send(S),this.u=!1}catch(ze){zr(this,ze)}};function zr(S,j){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=j,S.m=5,No(S),Ro(S)}function No(S){S.A||(S.A=!0,Tt(S,"complete"),Tt(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Tt(this,"complete"),Tt(this,"abort"),Ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ro(this,!0)),lr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dc(this):this.bb())},t.bb=function(){dc(this)};function dc(S){if(S.h&&typeof o<"u"&&(!S.v[1]||Oi(S)!=4||S.Z()!=2)){if(S.u&&Oi(S)==4)Ht(S.Ea,0,S);else if(Tt(S,"readystatechange"),Oi(S)==4){S.h=!1;try{const vt=S.Z();e:switch(vt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var W;if(!(W=j)){var ae;if(ae=vt===0){var Re=String(S.D).match(ya)[1]||null;!Re&&u.self&&u.self.location&&(Re=u.self.location.protocol.slice(0,-1)),ae=!qr.test(Re?Re.toLowerCase():"")}W=ae}if(W)Tt(S,"complete"),Tt(S,"success");else{S.m=6;try{var ze=2<Oi(S)?S.g.statusText:""}catch{ze=""}S.l=ze+" ["+S.Z()+"]",No(S)}}finally{Ro(S)}}}}function Ro(S,j){if(S.g){sl(S);const W=S.g,ae=S.v[0]?()=>{}:null;S.g=null,S.v=null,j||Tt(S,"ready");try{W.onreadystatechange=ae}catch{}}}function sl(S){S.I&&(u.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function Oi(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var j=this.g.responseText;return S&&j.indexOf(S)==0&&(j=j.substring(S.length)),Yt(j)}};function hs(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function kn(S){const j={};S=(S.g&&2<=Oi(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ae=0;ae<S.length;ae++){if(U(S[ae]))continue;var W=Q(S[ae]);const Re=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const ze=j[Re]||[];j[Re]=ze,ze.push(W)}B(j,function(ae){return ae.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wo(S,j,W){return W&&W.internalChannelParams&&W.internalChannelParams[S]||j}function ps(S){this.Aa=0,this.i=[],this.j=new ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wo("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wo("baseRetryDelayMs",5e3,S),this.cb=Wo("retryDelaySeedMs",1e4,S),this.Wa=Wo("forwardChannelMaxRetries",2,S),this.wa=Wo("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new _n(S&&S.concurrentRequestLimit),this.Da=new Zn,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ps.prototype,t.la=8,t.G=1,t.connect=function(S,j,W,ae){Bn(0),this.W=S,this.H=j||{},W&&ae!==void 0&&(this.H.OSID=W,this.H.OAID=ae),this.F=this.X,this.I=Ut(this,null,this.W),Xt(this)};function Aa(S){if(Fe(S),S.G==3){var j=S.U++,W=Wt(S.I);if(xt(W,"SID",S.K),xt(W,"RID",j),xt(W,"TYPE","terminate"),Qo(S,W),j=new Ai(S,S.j,j),j.L=2,j.v=vr(Wt(W)),W=!1,u.navigator&&u.navigator.sendBeacon)try{W=u.navigator.sendBeacon(j.v.toString(),"")}catch{}!W&&u.Image&&(new Image().src=j.v,W=!0),W||(j.g=Eu(j.j,null),j.g.ea(j.v)),j.F=Date.now(),gn(j)}Ln(S)}function Xo(S){S.g&&(gs(S),S.g.cancel(),S.g=null)}function Fe(S){Xo(S),S.u&&(u.clearTimeout(S.u),S.u=null),oo(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&u.clearTimeout(S.s),S.s=null)}function Xt(S){if(!yn(S.h)&&!S.s){S.s=!0;var j=S.Ga;se||Ke(),_e||(se(),_e=!0),ke.add(j,S),S.B=0}}function Jr(S,j){return dn(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=j.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=_i(A(S.Ga,S,j),ys(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Re=new Ai(this,this.j,S);let ze=this.o;if(this.S&&(ze?(ze=z(ze),ee(ze,this.S)):ze=this.S),this.m!==null||this.O||(Re.H=ze,ze=null),this.P)e:{for(var j=0,W=0;W<this.i.length;W++){t:{var ae=this.i[W];if("__data__"in ae.map&&(ae=ae.map.__data__,typeof ae=="string")){ae=ae.length;break t}ae=void 0}if(ae===void 0)break;if(j+=ae,4096<j){j=W;break e}if(j===4096||W===this.i.length-1){j=W+1;break e}}j=1e3}else j=1e3;j=fc(this,Re,j),W=Wt(this.I),xt(W,"RID",S),xt(W,"CVER",22),this.D&&xt(W,"X-HTTP-Session-Id",this.D),Qo(this,W),ze&&(this.O?j="headers="+encodeURIComponent(String(Ua(ze)))+"&"+j:this.m&&_a(W,this.m,ze)),io(this.h,Re),this.Ua&&xt(W,"TYPE","init"),this.P?(xt(W,"$req",j),xt(W,"SID","null"),Re.T=!0,Nt(Re,W,null)):Nt(Re,W,j),this.G=2}}else this.G==3&&(S?ms(this,S):this.i.length==0||yn(this.h)||ms(this))};function ms(S,j){var W;j?W=j.l:W=S.U++;const ae=Wt(S.I);xt(ae,"SID",S.K),xt(ae,"RID",W),xt(ae,"AID",S.T),Qo(S,ae),S.m&&S.o&&_a(ae,S.m,S.o),W=new Ai(S,S.j,W,S.B+1),S.m===null&&(W.H=S.o),j&&(S.i=j.D.concat(S.i)),j=fc(S,W,1e3),W.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),io(S.h,W),Nt(W,ae,j)}function Qo(S,j){S.H&&G(S.H,function(W,ae){xt(j,ae,W)}),S.l&&or({},function(W,ae){xt(j,ae,W)})}function fc(S,j,W){W=Math.min(S.i.length,W);var ae=S.l?A(S.l.Na,S.l,S):null;e:{var Re=S.i;let ze=-1;for(;;){const vt=["count="+W];ze==-1?0<W?(ze=Re[0].g,vt.push("ofs="+ze)):ze=0:vt.push("ofs="+ze);let jn=!0;for(let br=0;br<W;br++){let sn=Re[br].g;const gr=Re[br].map;if(sn-=ze,0>sn)ze=Math.max(0,Re[br].g-100),jn=!1;else try{uc(gr,vt,"req"+sn+"_")}catch{ae&&ae(gr)}}if(jn){ae=vt.join("&");break e}}}return S=S.i.splice(0,W),j.D=S,ae}function wu(S){if(!S.g&&!S.u){S.Y=1;var j=S.Fa;se||Ke(),_e||(se(),_e=!0),ke.add(j,S),S.v=0}}function hc(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=_i(A(S.Fa,S),ys(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,Nr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=_i(A(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bn(10),Xo(this),Nr(this))};function gs(S){S.A!=null&&(u.clearTimeout(S.A),S.A=null)}function Nr(S){S.g=new Ai(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var j=Wt(S.qa);xt(j,"RID","rpc"),xt(j,"SID",S.K),xt(j,"AID",S.T),xt(j,"CI",S.F?"0":"1"),!S.F&&S.ja&&xt(j,"TO",S.ja),xt(j,"TYPE","xmlhttp"),Qo(S,j),S.m&&S.o&&_a(j,S.m,S.o),S.L&&(S.g.I=S.L);var W=S.g;S=S.ia,W.L=1,W.v=vr(Wt(j)),W.m=null,W.P=!0,Lt(W,S)}t.Za=function(){this.C!=null&&(this.C=null,Xo(this),hc(this),Bn(19))};function oo(S){S.C!=null&&(u.clearTimeout(S.C),S.C=null)}function mr(S,j){var W=null;if(S.g==j){oo(S),gs(S),S.g=null;var ae=2}else if(ro(S.h,j))W=j.D,Ki(S.h,j),ae=1;else return;if(S.G!=0){if(j.o)if(ae==1){W=j.m?j.m.length:0,j=Date.now()-j.F;var Re=S.B;ae=ir(),Tt(ae,new no(ae,W)),Xt(S)}else wu(S);else if(Re=j.s,Re==3||Re==0&&0<j.X||!(ae==1&&Jr(S,j)||ae==2&&hc(S)))switch(W&&0<W.length&&(j=S.h,j.i=j.i.concat(W)),Re){case 1:Pi(S,5);break;case 4:Pi(S,10);break;case 3:Pi(S,6);break;default:Pi(S,2)}}}function ys(S,j){let W=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(W*=2),W*j}function Pi(S,j){if(S.j.info("Error code "+j),j==2){var W=A(S.fb,S),ae=S.Xa;const Re=!ae;ae=new Wi(ae||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||_r(ae,"https"),vr(ae),Re?Vt(ae.toString(),W):bu(ae.toString(),W)}else Bn(2);S.G=0,S.l&&S.l.sa(j),Ln(S),Fe(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Bn(2)):(this.j.info("Failed to ping google.com"),Bn(1))};function Ln(S){if(S.G=0,S.ka=[],S.l){const j=In(S.h);(j.length!=0||S.i.length!=0)&&(R(S.ka,j),R(S.ka,S.i),S.h.i.length=0,O(S.i),S.i.length=0),S.l.ra()}}function Ut(S,j,W){var ae=W instanceof Wi?Wt(W):new Wi(W);if(ae.g!="")j&&(ae.g=j+"."+ae.g),Me(ae,ae.s);else{var Re=u.location;ae=Re.protocol,j=j?j+"."+Re.hostname:Re.hostname,Re=+Re.port;var ze=new Wi(null);ae&&_r(ze,ae),j&&(ze.g=j),Re&&Me(ze,Re),W&&(ze.l=W),ae=ze}return W=S.D,j=S.ya,W&&j&&xt(ae,W,j),xt(ae,"VER",S.la),Qo(S,ae),ae}function Eu(S,j,W){if(j&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=S.Ca&&!S.pa?new lr(new ba({eb:W})):new lr(S.pa),j.Ha(S.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $n(){}t=$n.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ta(){}Ta.prototype.g=function(S,j){return new Gr(S,j)};function Gr(S,j){st.call(this),this.g=new ps(j),this.l=S,this.h=j&&j.messageUrlParams||null,S=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(S?S["X-WebChannel-Content-Type"]=j.messageContentType:S={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(S?S["X-WebChannel-Client-Profile"]=j.va:S={"X-WebChannel-Client-Profile":j.va}),this.g.S=S,(S=j&&j.Sb)&&!U(S)&&(this.g.m=S),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!U(j)&&(this.g.D=j,S=this.h,S!==null&&j in S&&(S=this.h,j in S&&delete S[j])),this.j=new so(this)}P(Gr,st),Gr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gr.prototype.close=function(){Aa(this.g)},Gr.prototype.o=function(S){var j=this.g;if(typeof S=="string"){var W={};W.__data__=S,S=W}else this.u&&(W={},W.__data__=pn(S),S=W);j.i.push(new bf(j.Ya++,S)),j.G==3&&Xt(j)},Gr.prototype.N=function(){this.g.l=null,delete this.j,Aa(this.g),delete this.g,Gr.aa.N.call(this)};function _u(S){zt.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var j=S.__sm__;if(j){e:{for(const W in j){S=W;break e}S=void 0}(this.i=S)&&(S=this.i,j=j!==null&&S in j?j[S]:void 0),this.data=j}else this.data=S}P(_u,zt);function sa(){Ot.call(this),this.status=1}P(sa,Ot);function so(S){this.g=S}P(so,$n),so.prototype.ua=function(){Tt(this.g,"a")},so.prototype.ta=function(S){Tt(this.g,new _u(S))},so.prototype.sa=function(S){Tt(this.g,new sa)},so.prototype.ra=function(){Tt(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,Gr.prototype.send=Gr.prototype.o,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,K8=function(){return new Ta},Y8=function(){return ir()},$8=wn,y_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,Im=ar,Dn.COMPLETE="complete",H8=Dn,Te.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",st.prototype.listen=st.prototype.K,wh=Te,lr.prototype.listenOnce=lr.prototype.L,lr.prototype.getLastError=lr.prototype.Ka,lr.prototype.getLastErrorCode=lr.prototype.Ba,lr.prototype.getStatus=lr.prototype.Z,lr.prototype.getResponseJson=lr.prototype.Oa,lr.prototype.getResponseText=lr.prototype.oa,lr.prototype.send=lr.prototype.ea,lr.prototype.setWithCredentials=lr.prototype.Ha,G8=lr}).apply(typeof rm<"u"?rm:typeof self<"u"?self:typeof window<"u"?window:{});const GN="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qi.UNAUTHENTICATED=new qi(null),qi.GOOGLE_CREDENTIALS=new qi("google-credentials-uid"),qi.FIRST_PARTY=new qi("first-party-uid"),qi.MOCK_USER=new qi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new L8("@firebase/firestore");function rd(){return Xc.logLevel}function pt(t,...e){if(Xc.logLevel<=Pn.DEBUG){const n=e.map(vT);Xc.debug(`Firestore (${tf}): ${t}`,...n)}}function fa(t,...e){if(Xc.logLevel<=Pn.ERROR){const n=e.map(vT);Xc.error(`Firestore (${tf}): ${t}`,...n)}}function Qc(t,...e){if(Xc.logLevel<=Pn.WARN){const n=e.map(vT);Xc.warn(`Firestore (${tf}): ${t}`,...n)}}function vT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t="Unexpected state"){const e=`FIRESTORE (${tf}) INTERNAL ASSERTION FAILED: `+t;throw fa(e),new Error(e)}function jt(t,e){t||kt()}function en(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends ef{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(qi.UNAUTHENTICATED)))}shutdown(){}}class iq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class aq{constructor(e){this.t=e,this.currentUser=qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new Hl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Hl,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hl)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(jt(typeof r.accessToken=="string"),new W8(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string"),new qi(e)}}class oq{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sq{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new oq(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(qi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){jt(this.o===void 0);const r=a=>{a.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,pt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(jt(typeof n.token=="string"),this.R=n.token,new lq(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=uq(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function rn(t,e){return t<e?-1:t>e?1:0}function _d(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function Q8(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _t(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _t(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _t(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fr.fromMillis(Date.now())}static fromDate(e){return Fr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new Fr(0,0))}static max(){return new Gt(new Fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r){n===void 0?n=0:n>e.length&&kt(),r===void 0?r=e.length-n:r>e.length-n&&kt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gh?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xn extends Gh{construct(e,n,r){return new Xn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _t(Ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Xn(n)}static emptyPath(){return new Xn([])}}const dq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends Gh{construct(e,n,r){return new Ur(e,n,r)}static isValidIdentifier(e){return dq.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new _t(Ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new _t(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new _t(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new _t(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(n)}static emptyPath(){return new Ur([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.path=e}static fromPath(e){return new At(Xn.fromString(e))}static fromName(e){return new At(Xn.fromString(e).popFirst(5))}static empty(){return new At(Xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Xn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function x_(t){return t.fields.find((e=>e.kind===2))}function Oc(t){return t.fields.filter((e=>e.kind!==2))}qm.UNKNOWN_ID=-1;class Nm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Hh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hh(0,eo.min())}}function fq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Gt.fromTimestamp(r===1e9?new Fr(n+1,0):new Fr(n,r));return new eo(i,At.empty(),e)}function J8(t){return new eo(t.readTime,t.key,-1)}class eo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new eo(Gt.min(),At.empty(),-1)}static max(){return new eo(Gt.max(),At.empty(),-1)}}function bT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:rn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){if(t.code!==Ze.FAILED_PRECONDITION||t.message!==Z8)throw t;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Pe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Pe?n:Pe.resolve(n)}catch(n){return Pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Pe.reject(n)}static resolve(e){return new Pe(((n,r)=>{n(e)}))}static reject(e){return new Pe(((n,r)=>{r(e)}))}static waitFor(e){return new Pe(((n,r)=>{let i=0,a=0,o=!1;e.forEach((u=>{++i,u.next((()=>{++a,o&&a===i&&n()}),(h=>r(h)))})),o=!0,a===i&&n()}))}static or(e){let n=Pe.resolve(!1);for(const r of e)n=n.next((i=>i?Pe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Pe(((r,i)=>{const a=e.length,o=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next((g=>{o[f]=g,++u,u===a&&r(o)}),(g=>i(g)))}}))}static doWhile(e,n){return new Pe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Hl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Mh(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=wT(r.target.error);this.V.reject(new Mh(e,i))}}static open(e,n,r,i){try{return new oy(n,e.transaction(i,r))}catch(a){throw new Mh(n,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new pq(n)}}class $l{constructor(e,n,r){this.name=e,this.version=n,this.p=r,$l.S(Vm())===12.2&&fa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pt("SimpleDb","Removing database:",e),Bc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!P8())return!1;if($l.v())return!0;const e=Vm(),n=$l.S(e),r=0<n&&n<10,i=t5(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(pt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const o=a.target.result;n(o)},i.onblocked=()=>{r(new Mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const o=a.target.error;o.name==="VersionError"?r(new _t(Ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new _t(Ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Mh(e,o))},i.onupgradeneeded=a=>{pt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const o=a.target.result;this.p.O(o,i.transaction,a.oldVersion,this.version).next((()=>{pt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const u=oy.open(this.db,e,a?"readonly":"readwrite",r),h=i(u).next((f=>(u.g(),f))).catch((f=>(u.abort(f),Pe.reject(f)))).toPromise();return h.catch((()=>{})),await u.m,h}catch(u){const h=u,f=h.name!=="FirebaseError"&&o<3;if(pt("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function t5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class hq{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bc(this.B.delete())}}class Mh extends _t{constructor(e,n){super(Ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ec(t){return t.name==="IndexedDbTransactionError"}class pq{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(pt("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bc(r)}add(e){return pt("SimpleDb","ADD",this.store.name,e,e),Bc(this.store.add(e))}get(e){return Bc(this.store.get(e)).next((n=>(n===void 0&&(n=null),pt("SimpleDb","GET",this.store.name,e,n),n)))}delete(e){return pt("SimpleDb","DELETE",this.store.name,e),Bc(this.store.delete(e))}count(){return pt("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new Pe(((o,u)=>{a.onerror=h=>{u(h.target.error)},a.onsuccess=h=>{o(h.target.result)}}))}{const a=this.cursor(r),o=[];return this.W(a,((u,h)=>{o.push(h)})).next((()=>o))}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Pe(((i,a)=>{r.onerror=o=>{a(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}j(e,n){pt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,((a,o,u)=>u.delete()))}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new Pe(((r,i)=>{n.onerror=a=>{const o=wT(a.target.error);i(o)},n.onsuccess=a=>{const o=a.target.result;o?e(o.primaryKey,o.value).next((u=>{u?o.continue():r()})):r()}}))}W(e,n){const r=[];return new Pe(((i,a)=>{e.onerror=o=>{a(o.target.error)},e.onsuccess=o=>{const u=o.target.result;if(!u)return void i();const h=new hq(u),f=n(u.primaryKey,u.value,h);if(f instanceof Pe){const g=f.catch((v=>(h.done(),Pe.reject(v))));r.push(g)}h.isDone?i():h.K===null?u.continue():u.continue(h.K)}})).next((()=>Pe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Bc(t){return new Pe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=wT(r.target.error);n(i)}}))}let HN=!1;function wT(t){const e=$l.S(Vm());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new _t("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HN||(HN=!0,setTimeout((()=>{throw r}),0)),r}}return t}class mq{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){pt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{pt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ec(n)?pt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await uu(n)}await this.X(6e4)}))}}class gq{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.te(n,e)))}te(e,n){const r=new Set;let i=n,a=!0;return Pe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return pt("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next((u=>{i-=u,r.add(o)}));a=!1})))).next((()=>n-i))}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const o=a.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(i,a))).next((u=>(pt("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u)))).next((()=>o.size))}))))}re(e,n){let r=e;return n.changes.forEach(((i,a)=>{const o=J8(a);bT(o,r)>0&&(r=o)})),new eo(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wo.oe=-1;function sy(t){return t==null}function $h(t){return t===0&&1/t==-1/0}function yq(t){return typeof t=="number"&&Number.isInteger(t)&&!$h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$N(e)),e=xq(t.get(n),e);return $N(e)}function xq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function $N(t){return t+""}function is(t){const e=t.length;if(jt(e>=2),e===2)return jt(t.charAt(0)===""&&t.charAt(1)===""),Xn.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const o=t.indexOf("",a);switch((o<0||o>n)&&kt(),t.charAt(o+1)){case"":const u=t.substring(a,o);let h;i.length===0?h=u:(i+=u,h=i,i=""),r.push(h);break;case"":i+=t.substring(a,o),i+="\0";break;case"":i+=t.substring(a,o+1);break;default:kt()}a=o+2}return new Xn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){return[t,pa(e)]}function n5(t,e,n){return[t,pa(e),n]}const vq={},bq=["prefixPath","collectionGroup","readTime","documentId"],wq=["prefixPath","collectionGroup","documentId"],Eq=["collectionGroup","readTime","prefixPath","documentId"],_q=["canonicalId","targetId"],Aq=["targetId","path"],Tq=["path","targetId"],Sq=["collectionId","parent"],Cq=["indexId","uid"],Iq=["uid","sequenceNumber"],Nq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rq=["indexId","uid","orderedDocumentKey"],Mq=["userId","collectionPath","documentId"],Dq=["userId","collectionPath","largestBatchId"],Oq=["userId","collectionGroup","largestBatchId"],r5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pq=[...r5,"documentOverlays"],i5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a5=i5,ET=[...a5,"indexConfiguration","indexState","indexEntries"],kq=ET,Lq=[...ET,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends e5{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function bi(t,e){const n=en(t);return $l.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function du(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){this.comparator=e,this.root=n||zi.EMPTY}insert(e,n){return new Or(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new im(this.root,e,this.comparator,!1)}getReverseIterator(){return new im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new im(this.root,e,this.comparator,!0)}}class im{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zi{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??zi.RED,this.left=i??zi.EMPTY,this.right=a??zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new zi(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1;zi.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(e,n,r,i,a){return this}insert(e,n,r){return new zi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new WN(this.data.getIterator())}getIteratorFrom(e){return new WN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new hr(this.comparator);return n.data=e,n}}class WN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new Oa([])}unionWith(e){let n=new hr(Ur.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Oa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _d(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new s5("Invalid base64 string: "+a):a}})(e);return new ui(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new ui(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const Bq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(t){if(jt(!!t),typeof t=="string"){let e=0;const n=Bq.exec(t);if(jt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mr(t.seconds),nanos:Mr(t.nanos)}}function Mr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xl(t){return typeof t=="string"?ui.fromBase64String(t):ui.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function AT(t){const e=t.mapValue.fields.__previous_value__;return _T(e)?AT(e):e}function Yh(t){const e=Ys(t.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n,r,i,a,o,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f}}class Jc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mm={nullValue:"NULL_VALUE"};function Zc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_T(t)?4:l5(t)?9007199254740991:ly(t)?10:11:kt()}function us(t,e){if(t===e)return!0;const n=Zc(t);if(n!==Zc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yh(t).isEqual(Yh(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ys(i.timestampValue),u=Ys(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Xl(i.bytesValue).isEqual(Xl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Mr(i.geoPointValue.latitude)===Mr(a.geoPointValue.latitude)&&Mr(i.geoPointValue.longitude)===Mr(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Mr(i.integerValue)===Mr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Mr(i.doubleValue),u=Mr(a.doubleValue);return o===u?$h(o)===$h(u):isNaN(o)&&isNaN(u)}return!1})(t,e);case 9:return _d(t.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},u=a.mapValue.fields||{};if(KN(o)!==KN(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(u[h]===void 0||!us(o[h],u[h])))return!1;return!0})(t,e);default:return kt()}}function Kh(t,e){return(t.values||[]).find((n=>us(n,e)))!==void 0}function Ql(t,e){if(t===e)return 0;const n=Zc(t),r=Zc(e);if(n!==r)return rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rn(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const u=Mr(a.integerValue||a.doubleValue),h=Mr(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(t,e);case 3:return XN(t.timestampValue,e.timestampValue);case 4:return XN(Yh(t),Yh(e));case 5:return rn(t.stringValue,e.stringValue);case 6:return(function(a,o){const u=Xl(a),h=Xl(o);return u.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const u=a.split("/"),h=o.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=rn(u[f],h[f]);if(g!==0)return g}return rn(u.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const u=rn(Mr(a.latitude),Mr(o.latitude));return u!==0?u:rn(Mr(a.longitude),Mr(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return QN(t.arrayValue,e.arrayValue);case 10:return(function(a,o){var u,h,f,g;const v=a.fields||{},A=o.fields||{},N=(u=v.value)===null||u===void 0?void 0:u.arrayValue,P=(h=A.value)===null||h===void 0?void 0:h.arrayValue,O=rn(((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0,((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0);return O!==0?O:QN(N,P)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Ul.mapValue&&o===Ul.mapValue)return 0;if(a===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=o.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const A=rn(h[v],g[v]);if(A!==0)return A;const N=Ql(u[h[v]],f[g[v]]);if(N!==0)return N}return rn(h.length,g.length)})(t.mapValue,e.mapValue);default:throw kt()}}function XN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rn(t,e);const n=Ys(t),r=Ys(e),i=rn(n.seconds,r.seconds);return i!==0?i:rn(n.nanos,r.nanos)}function QN(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Ql(n[i],r[i]);if(a)return a}return rn(n.length,r.length)}function Ad(t){return b_(t)}function b_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ys(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Xl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=b_(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${b_(n.fields[o])}`;return i+"}"})(t.mapValue):kt()}function Wh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function w_(t){return!!t&&"integerValue"in t}function Xh(t){return!!t&&"arrayValue"in t}function JN(t){return!!t&&"nullValue"in t}function ZN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dm(t){return!!t&&"mapValue"in t}function ly(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Dh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return du(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Dh(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function l5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const c5={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Uq(t){return"nullValue"in t?Mm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wh(Jc.empty(),At.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ly(t)?c5:{mapValue:{}}:kt()}function Vq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wh(Jc.empty(),At.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?c5:"mapValue"in t?ly(t)?{mapValue:{}}:Ul:kt()}function eR(t,e){const n=Ql(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function tR(t,e){const n=Ql(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.value=e}static empty(){return new na({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dh(n)}setAll(e){let n=Ur.emptyPath(),r={},i=[];e.forEach(((o,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=Dh(o):i.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Dm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){du(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new na(Dh(this.value))}}function u5(t){const e=[];return du(t.fields,((n,r)=>{const i=new Ur([n]);if(Dm(r)){const a=u5(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Oa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,i,a,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Xr(e,0,Gt.min(),Gt.min(),Gt.min(),na.empty(),0)}static newFoundDocument(e,n,r,i){return new Xr(e,1,n,Gt.min(),r,i,0)}static newNoDocument(e,n){return new Xr(e,2,n,Gt.min(),Gt.min(),na.empty(),0)}static newUnknownDocument(e,n){return new Xr(e,3,n,Gt.min(),Gt.min(),na.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=na.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=na.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function nR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Ql(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function rR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!us(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{}class Cn extends d5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qq(e,n,r):n==="array-contains"?new Hq(e,r):n==="in"?new y5(e,r):n==="not-in"?new $q(e,r):n==="array-contains-any"?new Yq(e,r):new Cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zq(e,r):new Gq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ql(n,this.value)):n!==null&&Zc(this.value)===Zc(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends d5{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rr(e,n)}matches(e){return Sd(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sd(t){return t.op==="and"}function E_(t){return t.op==="or"}function TT(t){return f5(t)&&Sd(t)}function f5(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function __(t){if(t instanceof Cn)return t.field.canonicalString()+t.op.toString()+Ad(t.value);if(TT(t))return t.filters.map((e=>__(e))).join(",");{const e=t.filters.map((n=>__(n))).join(",");return`${t.op}(${e})`}}function h5(t,e){return t instanceof Cn?(function(r,i){return i instanceof Cn&&r.op===i.op&&r.field.isEqual(i.field)&&us(r.value,i.value)})(t,e):t instanceof rr?(function(r,i){return i instanceof rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,u)=>a&&h5(o,i.filters[u])),!0):!1})(t,e):void kt()}function p5(t,e){const n=t.filters.concat(e);return rr.create(n,t.op)}function m5(t){return t instanceof Cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ad(n.value)}`})(t):t instanceof rr?(function(n){return n.op.toString()+" {"+n.getFilters().map(m5).join(" ,")+"}"})(t):"Filter"}class qq extends Cn{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class zq extends Cn{constructor(e,n){super(e,"in",n),this.keys=g5("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Gq extends Cn{constructor(e,n){super(e,"not-in",n),this.keys=g5("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function g5(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>At.fromName(r.referenceValue)))}class Hq extends Cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xh(n)&&Kh(n.arrayValue,this.value)}}class y5 extends Cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kh(this.value.arrayValue,n)}}class $q extends Cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Kh(this.value.arrayValue,n)}}class Yq extends Cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Kh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,n=null,r=[],i=[],a=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ue=null}}function A_(t,e=null,n=[],r=[],i=null,a=null,o=null){return new Kq(t,e,n,r,i,a,o)}function eu(t){const e=en(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>__(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),sy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ad(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ad(r))).join(",")),e.ue=n}return e.ue}function Lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Fq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rR(t.startAt,e.startAt)&&rR(t.endAt,e.endAt)}function Gm(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hm(t,e){return t.filters.filter((n=>n instanceof Cn&&n.field.isEqual(e)))}function iR(t,e,n){let r=Mm,i=!0;for(const a of Hm(t,e)){let o=Mm,u=!0;switch(a.op){case"<":case"<=":o=Uq(a.value);break;case"==":case"in":case">=":o=a.value;break;case">":o=a.value,u=!1;break;case"!=":case"not-in":o=Mm}eR({value:r,inclusive:i},{value:o,inclusive:u})<0&&(r=o,i=u)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const o=n.position[a];eR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function aR(t,e,n){let r=Ul,i=!0;for(const a of Hm(t,e)){let o=Ul,u=!0;switch(a.op){case">=":case">":o=Vq(a.value),u=!1;break;case"==":case"in":case"<=":o=a.value;break;case"<":o=a.value,u=!1;break;case"!=":case"not-in":o=Ul}tR({value:r,inclusive:i},{value:o,inclusive:u})>0&&(r=o,i=u)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const o=n.position[a];tR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n=null,r=[],i=[],a=null,o="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Wq(t,e,n,r,i,a,o,u){return new Bp(t,e,n,r,i,a,o,u)}function cy(t){return new Bp(t)}function oR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function x5(t){return t.collectionGroup!==null}function Oh(t){const e=en(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new hr(Ur.comparator);return o.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new zm(a,r))})),n.has(Ur.keyField().canonicalString())||e.ce.push(new zm(Ur.keyField(),r))}return e.ce}function _o(t){const e=en(t);return e.le||(e.le=Xq(e,Oh(t))),e.le}function Xq(t,e){if(t.limitType==="F")return A_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new zm(i.field,a)}));const n=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return A_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function T_(t,e){const n=t.filters.concat([e]);return new Bp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function S_(t,e,n){return new Bp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uy(t,e){return Lp(_o(t),_o(e))&&t.limitType===e.limitType}function v5(t){return`${eu(_o(t))}|lt:${t.limitType}`}function id(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>m5(i))).join(", ")}]`),sy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Ad(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Ad(i))).join(",")),`Target(${r})`})(_o(t))}; limitType=${t.limitType})`}function jp(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):At.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Oh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,u,h){const f=nR(o,u,h);return o.inclusive?f<=0:f<0})(r.startAt,Oh(r),i)||r.endAt&&!(function(o,u,h){const f=nR(o,u,h);return o.inclusive?f>=0:f>0})(r.endAt,Oh(r),i))})(t,e)}function Qq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b5(t){return(e,n)=>{let r=!1;for(const i of Oh(t)){const a=Jq(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Jq(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(a,o,u){const h=o.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Ql(h,f):kt()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return kt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){du(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return o5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=new Or(At.comparator);function Za(){return Zq}const w5=new Or(At.comparator);function Eh(...t){let e=w5;for(const n of t)e=e.insert(n.key,n);return e}function E5(t){let e=w5;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function as(){return Ph()}function _5(){return Ph()}function Ph(){return new tc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ez=new Or(At.comparator),tz=new hr(At.comparator);function hn(...t){let e=tz;for(const n of t)e=e.add(n);return e}const nz=new hr(rn);function rz(){return nz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function A5(t){return{integerValue:""+t}}function iz(t,e){return yq(e)?A5(e):ST(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this._=void 0}}function az(t,e,n){return t instanceof Qh?(function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_T(a)&&(a=AT(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}})(n,e):t instanceof Cd?S5(t,e):t instanceof Id?C5(t,e):(function(i,a){const o=T5(i,a),u=sR(o)+sR(i.Pe);return w_(o)&&w_(i.Pe)?A5(u):ST(i.serializer,u)})(t,e)}function oz(t,e,n){return t instanceof Cd?S5(t,e):t instanceof Id?C5(t,e):n}function T5(t,e){return t instanceof Jh?(function(r){return w_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Qh extends dy{}class Cd extends dy{constructor(e){super(),this.elements=e}}function S5(t,e){const n=I5(e);for(const r of t.elements)n.some((i=>us(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Id extends dy{constructor(e){super(),this.elements=e}}function C5(t,e){let n=I5(e);for(const r of t.elements)n=n.filter((i=>!us(i,r)));return{arrayValue:{values:n}}}class Jh extends dy{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sR(t){return Mr(t.integerValue||t.doubleValue)}function I5(t){return Xh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n){this.field=e,this.transform=n}}function lz(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Cd&&i instanceof Cd||r instanceof Id&&i instanceof Id?_d(r.elements,i.elements,us):r instanceof Jh&&i instanceof Jh?us(r.Pe,i.Pe):r instanceof Qh&&i instanceof Qh})(t.transform,e.transform)}class cz{constructor(e,n){this.version=e,this.transformResults=n}}class Gi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gi}static exists(e){return new Gi(void 0,e)}static updateTime(e){return new Gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Om(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fy{}function N5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Up(t.key,Gi.none()):new nf(t.key,t.data,Gi.none());{const n=t.data,r=na.empty();let i=new hr(Ur.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Zs(t.key,r,new Oa(i.toArray()),Gi.none())}}function uz(t,e,n){t instanceof nf?(function(i,a,o){const u=i.value.clone(),h=cR(i.fieldTransforms,a,o.transformResults);u.setAll(h),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Zs?(function(i,a,o){if(!Om(i.precondition,a))return void a.convertToUnknownDocument(o.version);const u=cR(i.fieldTransforms,a,o.transformResults),h=a.data;h.setAll(R5(i)),h.setAll(u),a.convertToFoundDocument(o.version,h).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function kh(t,e,n,r){return t instanceof nf?(function(a,o,u,h){if(!Om(a.precondition,o))return u;const f=a.value.clone(),g=uR(a.fieldTransforms,h,o);return f.setAll(g),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Zs?(function(a,o,u,h){if(!Om(a.precondition,o))return u;const f=uR(a.fieldTransforms,h,o),g=o.data;return g.setAll(R5(a)),g.setAll(f),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(t,e,n,r):(function(a,o,u){return Om(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(t,e,n)}function dz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=T5(r.transform,i||null);a!=null&&(n===null&&(n=na.empty()),n.set(r.field,a))}return n||null}function lR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_d(r,i,((a,o)=>lz(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nf extends fy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zs extends fy{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function R5(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function cR(t,e,n){const r=new Map;jt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,u=e.data.field(a.field);r.set(a.field,oz(o,u,n[i]))}return r}function uR(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,az(a,o,e))}return r}class Up extends fy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M5 extends fy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&uz(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_5();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let u=this.applyToLocalView(o,a.mutatedFields);u=n.has(i.key)?null:u;const h=N5(o,u);h!==null&&r.set(i.key,h),o.isValidDocument()||o.convertToNoDocument(Gt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),hn())}isEqual(e){return this.batchId===e.batchId&&_d(this.mutations,e.mutations,((n,r)=>lR(n,r)))&&_d(this.baseMutations,e.baseMutations,((n,r)=>lR(n,r)))}}class IT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){jt(e.mutations.length===r.length);let i=(function(){return ez})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new IT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,On;function hz(t){switch(t){default:return kt();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0}}function D5(t){if(t===void 0)return fa("GRPC error has no .code"),Ze.UNKNOWN;switch(t){case si.OK:return Ze.OK;case si.CANCELLED:return Ze.CANCELLED;case si.UNKNOWN:return Ze.UNKNOWN;case si.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case si.INTERNAL:return Ze.INTERNAL;case si.UNAVAILABLE:return Ze.UNAVAILABLE;case si.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case si.NOT_FOUND:return Ze.NOT_FOUND;case si.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case si.ABORTED:return Ze.ABORTED;case si.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case si.DATA_LOSS:return Ze.DATA_LOSS;default:return kt()}}(On=si||(si={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=new $c([4294967295,4294967295],0);function dR(t){const e=pz().encode(t),n=new z8;return n.update(e),new Uint8Array(n.digest())}function fR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $c([n,r],0),new $c([i,a],0)]}class RT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _h(`Invalid padding: ${n}`);if(r<0)throw new _h(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _h(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _h(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$c.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($c.fromNumber(r)));return i.compare(mz)===1&&(i=new $c([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=dR(e),[r,i]=fR(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new RT(a,i,n);return r.forEach((u=>o.insert(u))),o}insert(e){if(this.Ie===0)return;const n=dR(e),[r,i]=fR(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Vp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hy(Gt.min(),i,new Or(rn),Za(),hn())}}class Vp{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vp(r,n,hn(),hn(),hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class O5{constructor(e,n){this.targetId=e,this.me=n}}class P5{constructor(e,n,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hR{constructor(){this.fe=0,this.ge=mR(),this.pe=ui.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=hn(),n=hn(),r=hn();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:kt()}})),new Vp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=mR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,jt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gz{constructor(e){this.Le=e,this.Be=new Map,this.ke=Za(),this.qe=pR(),this.Qe=new Or(rn)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:kt()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(Gm(a))if(r===0){const o=new At(a.path);this.Ue(n,o,Xr.newNoDocument(o,Gt.min()))}else jt(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),h=u?this.Xe(u,e,o):1;if(h!==0){this.je(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,u;try{o=Xl(r).toUint8Array()}catch(h){if(h instanceof s5)return Qc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new RT(o,i,a)}catch(h){return Qc(h instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,a,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((a,o)=>{const u=this.Je(o);if(u){if(a.current&&Gm(u.target)){const h=new At(u.target.path);this.ke.get(h)!==null||this.it(o,h)||this.Ue(o,h,Xr.newNoDocument(h,e))}a.be&&(n.set(o,a.ve()),a.Ce())}}));let r=hn();this.qe.forEach(((a,o)=>{let u=!0;o.forEachWhile((h=>{const f=this.Je(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.ke.forEach(((a,o)=>o.setReadTime(e)));const i=new hy(e,n,this.Qe,this.ke,r);return this.ke=Za(),this.qe=pR(),this.Qe=new Or(rn),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new hR,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new hr(rn),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||pt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hR),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function pR(){return new Or(At.comparator)}function mR(){return new Or(At.comparator)}const yz={asc:"ASCENDING",desc:"DESCENDING"},xz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vz={and:"AND",or:"OR"};class bz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C_(t,e){return t.useProto3Json||sy(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wz(t,e){return Nd(t,e.toTimestamp())}function ma(t){return jt(!!t),Gt.fromTimestamp((function(n){const r=Ys(n);return new Fr(r.seconds,r.nanos)})(t))}function MT(t,e){return I_(t,e).canonicalString()}function I_(t,e){const n=(function(i){return new Xn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function L5(t){const e=Xn.fromString(t);return jt(H5(e)),e}function $m(t,e){return MT(t.databaseId,e.path)}function Yc(t,e){const n=L5(e);if(n.get(1)!==t.databaseId.projectId)throw new _t(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _t(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(U5(n))}function B5(t,e){return MT(t.databaseId,e)}function j5(t){const e=L5(t);return e.length===4?Xn.emptyPath():U5(e)}function N_(t){return new Xn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function U5(t){return jt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gR(t,e,n){return{name:$m(t,e),fields:n.value.mapValue.fields}}function Ez(t,e,n){const r=Yc(t,e.name),i=ma(e.updateTime),a=e.createTime?ma(e.createTime):Gt.min(),o=new na({mapValue:{fields:e.fields}}),u=Xr.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function _z(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:kt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,g){return f.useProto3Json?(jt(g===void 0||typeof g=="string"),ui.fromBase64String(g||"")):(jt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),ui.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(f){const g=f.code===void 0?Ze.UNKNOWN:D5(f.code);return new _t(g,f.message||"")})(o);n=new P5(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yc(t,r.document.name),a=ma(r.document.updateTime),o=r.document.createTime?ma(r.document.createTime):Gt.min(),u=new na({mapValue:{fields:r.document.fields}}),h=Xr.newFoundDocument(i,a,o,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new Pm(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yc(t,r.document),a=r.readTime?ma(r.readTime):Gt.min(),o=Xr.newNoDocument(i,a),u=r.removedTargetIds||[];n=new Pm([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yc(t,r.document),a=r.removedTargetIds||[];n=new Pm([],a,i,null)}else{if(!("filter"in e))return kt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new fz(i,a),u=r.targetId;n=new O5(u,o)}}return n}function Ym(t,e){let n;if(e instanceof nf)n={update:gR(t,e.key,e.value)};else if(e instanceof Up)n={delete:$m(t,e.key)};else if(e instanceof Zs)n={update:gR(t,e.key,e.data),updateMask:Nz(e.fieldMask)};else{if(!(e instanceof M5))return kt();n={verify:$m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const u=o.transform;if(u instanceof Qh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Id)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Jh)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw kt()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:wz(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:kt()})(t,e.precondition)),n}function R_(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Gi.updateTime(ma(a.updateTime)):a.exists!==void 0?Gi.exists(a.exists):Gi.none()})(e.currentDocument):Gi.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,u){let h=null;if("setToServerValue"in u)jt(u.setToServerValue==="REQUEST_TIME"),h=new Qh;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Cd(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Id(g)}else"increment"in u?h=new Jh(o,u.increment):kt();const f=Ur.fromServerFormat(u.fieldPath);return new sz(f,h)})(t,i))):[];if(e.update){e.update.name;const i=Yc(t,e.update.name),a=new na({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(h){const f=h.fieldPaths||[];return new Oa(f.map((g=>Ur.fromServerFormat(g))))})(e.updateMask);return new Zs(i,a,o,n,r)}return new nf(i,a,n,r)}if(e.delete){const i=Yc(t,e.delete);return new Up(i,n)}if(e.verify){const i=Yc(t,e.verify);return new M5(i,n)}return kt()}function Az(t,e){return t&&t.length>0?(jt(e!==void 0),t.map((n=>(function(i,a){let o=i.updateTime?ma(i.updateTime):ma(a);return o.isEqual(Gt.min())&&(o=ma(a)),new cz(o,i.transformResults||[])})(n,e)))):[]}function V5(t,e){return{documents:[B5(t,e.path)]}}function F5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=B5(t,i);const a=(function(f){if(f.length!==0)return G5(rr.create(f,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((g=>(function(A){return{field:ad(A.field),direction:Sz(A.dir)}})(g)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=C_(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:n,parent:i}}function q5(t){let e=j5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){jt(r===1);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=(function(v){const A=z5(v);return A instanceof rr&&TT(A)?A.getFilters():[A]})(n.where));let o=[];n.orderBy&&(o=(function(v){return v.map((A=>(function(P){return new zm(od(P.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(A)))})(n.orderBy));let u=null;n.limit&&(u=(function(v){let A;return A=typeof v=="object"?v.value:v,sy(A)?null:A})(n.limit));let h=null;n.startAt&&(h=(function(v){const A=!!v.before,N=v.values||[];return new Td(N,A)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const A=!v.before,N=v.values||[];return new Td(N,A)})(n.endAt)),Wq(e,i,o,a,u,"F",h,f)}function Tz(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z5(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=od(n.unaryFilter.field);return Cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=od(n.unaryFilter.field);return Cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=od(n.unaryFilter.field);return Cn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=od(n.unaryFilter.field);return Cn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return kt()}})(t):t.fieldFilter!==void 0?(function(n){return Cn.create(od(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return rr.create(n.compositeFilter.filters.map((r=>z5(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return kt()}})(n.compositeFilter.op))})(t):kt()}function Sz(t){return yz[t]}function Cz(t){return xz[t]}function Iz(t){return vz[t]}function ad(t){return{fieldPath:t.canonicalString()}}function od(t){return Ur.fromServerFormat(t.fieldPath)}function G5(t){return t instanceof Cn?(function(n){if(n.op==="=="){if(ZN(n.value))return{unaryFilter:{field:ad(n.field),op:"IS_NAN"}};if(JN(n.value))return{unaryFilter:{field:ad(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZN(n.value))return{unaryFilter:{field:ad(n.field),op:"IS_NOT_NAN"}};if(JN(n.value))return{unaryFilter:{field:ad(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ad(n.field),op:Cz(n.op),value:n.value}}})(t):t instanceof rr?(function(n){const r=n.getFilters().map((i=>G5(i)));return r.length===1?r[0]:{compositeFilter:{op:Iz(n.op),filters:r}}})(t):kt()}function Nz(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function H5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,i,a=Gt.min(),o=Gt.min(),u=ui.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.ct=e}}function Rz(t,e){let n;if(e.document)n=Ez(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=At.fromSegments(e.noDocument.path),i=nu(e.noDocument.readTime);n=Xr.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return kt();{const r=At.fromSegments(e.unknownDocument.path),i=nu(e.unknownDocument.version);n=Xr.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new Fr(i[0],i[1]);return Gt.fromTimestamp(a)})(e.readTime)),n}function yR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Km(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,o){return{name:$m(a,o.key),fields:o.data.value.mapValue.fields,updateTime:Nd(a,o.version.toTimestamp()),createTime:Nd(a,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tu(e.version)};else{if(!e.isUnknownDocument())return kt();r.unknownDocument={path:n.path.toArray(),version:tu(e.version)}}return r}function Km(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nu(t){const e=new Fr(t.seconds,t.nanoseconds);return Gt.fromTimestamp(e)}function jc(t,e){const n=(e.baseMutations||[]).map((a=>R_(t.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const o=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const u=e.mutations[a+1];o.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>R_(t.ct,a))),i=Fr.fromMillis(e.localWriteTimeMs);return new CT(e.batchId,i,n,r)}function Ah(t){const e=nu(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?nu(t.lastLimboFreeSnapshotVersion):Gt.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){return jt(a.documents.length===1),_o(cy(j5(a.documents[0])))})(t.query):(function(a){return _o(q5(a))})(t.query),new Bs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ui.fromBase64String(t.resumeToken))}function Y5(t,e){const n=tu(e.snapshotVersion),r=tu(e.lastLimboFreeSnapshotVersion);let i;i=Gm(e.target)?V5(t.ct,e.target):F5(t.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eu(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function K5(t){const e=q5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?S_(e,e.limit,"L"):e}function iv(t,e){return new NT(e.largestBatchId,R_(t.ct,e.overlayMutation))}function xR(t,e){const n=e.path.lastSegment();return[t,pa(e.path.popLast()),n]}function vR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:tu(r.readTime),documentKey:pa(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{getBundleMetadata(e,n){return bR(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:nu(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return bR(e).put((function(i){return{bundleId:i.id,createTime:tu(ma(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return wR(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:K5(a.bundledQuery),readTime:nu(a.readTime)}})(r)}))}saveNamedQuery(e,n){return wR(e).put((function(i){return{name:i.name,readTime:tu(ma(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function bR(t){return bi(t,"bundles")}function wR(t){return bi(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new py(e,r)}getOverlay(e,n){return ih(e).get(xR(this.userId,n)).next((r=>r?iv(this.serializer,r):null))}getOverlays(e,n){const r=as();return Pe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,o)=>{const u=new NT(n,o);i.push(this.ht(e,u))})),Pe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(pa(o.getCollectionPath()))));const a=[];return i.forEach((o=>{const u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);a.push(ih(e).j("collectionPathOverlayIndex",u))})),Pe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=as(),a=pa(n),o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ih(e).U("collectionPathOverlayIndex",o).next((u=>{for(const h of u){const f=iv(this.serializer,h);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=as();let o;const u=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ih(e).J({index:"collectionGroupOverlayIndex",range:u},((h,f,g)=>{const v=iv(this.serializer,f);a.size()<i||v.largestBatchId===o?(a.set(v.getKey(),v),o=v.largestBatchId):g.done()})).next((()=>a))}ht(e,n){return ih(e).put((function(i,a,o){const[u,h,f]=xR(a,o.mutation.key);return{userId:a,collectionPath:h,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ym(i.ct,o.mutation)}})(this.serializer,this.userId,n))}}function ih(t){return bi(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{Pt(e){return bi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?ui.fromUint8Array(r):ui.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Mr(e.integerValue));else if("doubleValue"in e){const r=Mr(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),$h(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ys(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Xl(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?l5(e)?this.dt(n,Number.MAX_SAFE_INTEGER):ly(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):kt()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const a=e.fields||{};this.dt(n,53);const o="value",u=((i=(r=a[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Mr(u)),this.Vt(o,n),this.Tt(a[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),At.fromName(e).path.forEach((r=>{this.dt(n,60),this.Dt(r,n)}))}dt(e,n){e.At(n)}ft(e){e.At(2)}}Uc.vt=new Uc;function Oz(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function ER(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const o=Oz(255&r[a]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class Pz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=ER(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=ER(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=(function(a){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,a,!1),new Uint8Array(o.buffer)})(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class kz{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Lz{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ah{constructor(){this.jt=new Pz,this.Ht=new kz(this.jt),this.Jt=new Lz(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ml(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=_R(t.arrayValue,e.arrayValue),n!==0?n:(n=_R(t.directionalValue,e.directionalValue),n!==0?n:At.comparator(t.documentKey,e.documentKey)))}function _R(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.Xt=new hr(((n,r)=>Ur.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(jt(e.collectionGroup===this.collectionId),this.nn)return!1;const n=x_(e);if(n!==void 0&&!this.sn(n))return!1;const r=Oc(e);let i=new Set,a=0,o=0;for(;a<r.length&&this.sn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Xt.size>0){const u=this.Xt.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=r[a];if(!this.on(u,h)||!this._n(this.en[o++],h))return!1}++a}for(;a<r.length;++a){const u=r[a];if(o>=this.en.length||!this._n(this.en[o++],u))return!1}return!0}an(){if(this.nn)return null;let e=new hr(Ur.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Nm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Nm(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Nm(r.field,r.dir==="asc"?0:1)));return new qm(qm.UNKNOWN_ID,this.collectionId,n,Hh.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){var e,n;if(jt(t instanceof Cn||t instanceof rr),t instanceof Cn){if(t instanceof y5){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map((a=>Cn.create(t.field,"==",a))))||[];return rr.create(i,"or")}return t}const r=t.filters.map((i=>W5(i)));return rr.create(r,t.op)}function Bz(t){if(t.getFilters().length===0)return[];const e=O_(W5(t));return jt(X5(e)),M_(e)||D_(e)?[e]:e.getFilters()}function M_(t){return t instanceof Cn}function D_(t){return t instanceof rr&&TT(t)}function X5(t){return M_(t)||D_(t)||(function(n){if(n instanceof rr&&E_(n)){for(const r of n.getFilters())if(!M_(r)&&!D_(r))return!1;return!0}return!1})(t)}function O_(t){if(jt(t instanceof Cn||t instanceof rr),t instanceof Cn)return t;if(t.filters.length===1)return O_(t.filters[0]);const e=t.filters.map((r=>O_(r)));let n=rr.create(e,t.op);return n=Wm(n),X5(n)?n:(jt(n instanceof rr),jt(Sd(n)),jt(n.filters.length>1),n.filters.reduce(((r,i)=>DT(r,i))))}function DT(t,e){let n;return jt(t instanceof Cn||t instanceof rr),jt(e instanceof Cn||e instanceof rr),n=t instanceof Cn?e instanceof Cn?(function(i,a){return rr.create([i,a],"and")})(t,e):TR(t,e):e instanceof Cn?TR(e,t):(function(i,a){if(jt(i.filters.length>0&&a.filters.length>0),Sd(i)&&Sd(a))return p5(i,a.getFilters());const o=E_(i)?i:a,u=E_(i)?a:i,h=o.filters.map((f=>DT(f,u)));return rr.create(h,"or")})(t,e),Wm(n)}function TR(t,e){if(Sd(e))return p5(e,t.getFilters());{const n=e.filters.map((r=>DT(t,r)));return rr.create(n,"or")}}function Wm(t){if(jt(t instanceof Cn||t instanceof rr),t instanceof Cn)return t;const e=t.getFilters();if(e.length===1)return Wm(e[0]);if(f5(t))return t;const n=e.map((i=>Wm(i))),r=[];return n.forEach((i=>{i instanceof Cn?r.push(i):i instanceof rr&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:rr.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.un=new OT}addToCollectionParentIndex(e,n){return this.un.add(n),Pe.resolve()}getCollectionParents(e,n){return Pe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Pe.resolve()}deleteFieldIndex(e,n){return Pe.resolve()}deleteAllFieldIndexes(e){return Pe.resolve()}createTargetIndexes(e,n){return Pe.resolve()}getDocumentsMatchingTarget(e,n){return Pe.resolve(null)}getIndexType(e,n){return Pe.resolve(0)}getFieldIndexes(e,n){return Pe.resolve([])}getNextCollectionGroupToUpdate(e){return Pe.resolve(null)}getMinOffset(e,n){return Pe.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,n){return Pe.resolve(eo.min())}updateCollectionGroup(e,n,r){return Pe.resolve()}updateIndexEntries(e,n){return Pe.resolve()}}class OT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new hr(Xn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hr(Xn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new Uint8Array(0);class Uz{constructor(e,n){this.databaseId=n,this.cn=new OT,this.ln=new tc((r=>eu(r)),((r,i)=>Lp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.cn.add(n)}));const a={collectionId:r,parent:pa(i)};return SR(e).put(a)}return Pe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Q8(n),""],!1,!0);return SR(e).U(i).next((a=>{for(const o of a){if(o.collectionId!==n)break;r.push(is(o.parent))}return r}))}addFieldIndex(e,n){const r=oh(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const o=Ju(e);return a.next((u=>{o.put(vR(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=oh(e),i=Ju(e),a=Qu(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=oh(e),r=Qu(e),i=Ju(e);return n.j().next((()=>r.j())).next((()=>i.j()))}createTargetIndexes(e,n){return Pe.forEach(this.hn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new AR(r).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=Qu(e);let i=!0;const a=new Map;return Pe.forEach(this.hn(n),(o=>this.Pn(e,o).next((u=>{i&&(i=!!u),a.set(o,u)})))).next((()=>{if(i){let o=hn();const u=[];return Pe.forEach(a,((h,f)=>{pt("IndexedDbIndexManager",`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(h)} to execute ${eu(n)}`);const g=(function(F,q){const H=x_(q);if(H===void 0)return null;for(const G of Hm(F,H.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(f,h),v=(function(F,q){const H=new Map;for(const G of Oc(q))for(const B of Hm(F,G.fieldPath))switch(B.op){case"==":case"in":H.set(G.fieldPath.canonicalString(),B.value);break;case"not-in":case"!=":return H.set(G.fieldPath.canonicalString(),B.value),Array.from(H.values())}return null})(f,h),A=(function(F,q){const H=[];let G=!0;for(const B of Oc(q)){const z=B.kind===0?iR(F,B.fieldPath,F.startAt):aR(F,B.fieldPath,F.startAt);H.push(z.value),G&&(G=z.inclusive)}return new Td(H,G)})(f,h),N=(function(F,q){const H=[];let G=!0;for(const B of Oc(q)){const z=B.kind===0?aR(F,B.fieldPath,F.endAt):iR(F,B.fieldPath,F.endAt);H.push(z.value),G&&(G=z.inclusive)}return new Td(H,G)})(f,h),P=this.In(h,f,A),O=this.In(h,f,N),R=this.Tn(h,f,v),L=this.En(h.indexId,g,P,A.inclusive,O,N.inclusive,R);return Pe.forEach(L,(U=>r.G(U,n.limit).next((F=>{F.forEach((q=>{const H=At.fromSegments(q.documentKey);o.has(H)||(o=o.add(H),u.push(H))}))}))))})).next((()=>u))}return Pe.resolve(null)}))}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=Bz(rr.create(e.filters,"and")).map((r=>A_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,n),n)}En(e,n,r,i,a,o,u){const h=(n!=null?n.length:1)*Math.max(r.length,a.length),f=h/(n!=null?n.length:1),g=[];for(let v=0;v<h;++v){const A=n?this.dn(n[v/f]):am,N=this.An(e,A,r[v%f],i),P=this.Rn(e,A,a[v%f],o),O=u.map((R=>this.An(e,A,R,!0)));g.push(...this.createRange(N,P,O))}return g}An(e,n,r,i){const a=new Vc(e,At.empty(),n,r);return i?a:a.Zt()}Rn(e,n,r,i){const a=new Vc(e,At.empty(),n,r);return i?a.Zt():a}Pn(e,n){const r=new AR(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let o=null;for(const u of a)r.rn(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o}))}getIndexType(e,n){let r=2;const i=this.hn(n);return Pe.forEach(i,(a=>this.Pn(e,a).next((o=>{o?r!==0&&o.fields.length<(function(h){let f=new hr(Ur.comparator),g=!1;for(const v of h.filters)for(const A of v.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?g=!0:f=f.add(A.field));for(const v of h.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Vn(e,n){const r=new ah;for(const i of Oc(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const o=r.Yt(i.kind);Uc.vt.It(a,o)}return r.zt()}dn(e){const n=new ah;return Uc.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new ah;return Uc.vt.It(Wh(this.databaseId,n),r.Yt((function(a){const o=Oc(a);return o.length===0?0:o[o.length-1].kind})(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new ah);let a=0;for(const o of Oc(e)){const u=r[a++];for(const h of i)if(this.fn(n,o.fieldPath)&&Xh(u))i=this.gn(i,o,u);else{const f=h.Yt(o.kind);Uc.vt.It(u,f)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],a=[];for(const o of r.arrayValue.values||[])for(const u of i){const h=new ah;h.seed(u.zt()),Uc.vt.It(o,h.Yt(n.kind)),a.push(h)}return a}fn(e,n){return!!e.filters.find((r=>r instanceof Cn&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=oh(e),i=Ju(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next((a=>{const o=[];return Pe.forEach(a,(u=>i.get([u.indexId,this.uid]).next((h=>{o.push((function(g,v){const A=v?new Hh(v.sequenceNumber,new eo(nu(v.readTime),new At(is(v.documentKey)),v.largestBatchId)):Hh.empty(),N=g.fields.map((([P,O])=>new Nm(Ur.fromServerFormat(P),O)));return new qm(g.indexId,g.collectionGroup,N,A)})(u,h))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:rn(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=oh(e),a=Ju(e);return this.yn(e).next((o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next((u=>Pe.forEach(u,(h=>a.put(vR(h.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return Pe.forEach(n,((i,a)=>{const o=r.get(i.collectionGroup);return(o?Pe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),Pe.forEach(u,(h=>this.wn(e,i,h).next((f=>{const g=this.Sn(a,h);return f.isEqual(g)?Pe.resolve():this.bn(e,a,h,f,g)})))))))}))}Dn(e,n,r,i){return Qu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Qu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Qu(e);let a=new hr(Ml);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},((o,u)=>{a=a.add(new Vc(r.indexId,n,u.arrayValue,u.directionalValue))})).next((()=>a))}Sn(e,n){let r=new hr(Ml);const i=this.Vn(n,e);if(i==null)return r;const a=x_(n);if(a!=null){const o=e.data.field(a.fieldPath);if(Xh(o))for(const u of o.arrayValue.values||[])r=r.add(new Vc(n.indexId,e.key,this.dn(u),i))}else r=r.add(new Vc(n.indexId,e.key,am,i));return r}bn(e,n,r,i,a){pt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return(function(h,f,g,v,A){const N=h.getIterator(),P=f.getIterator();let O=Xu(N),R=Xu(P);for(;O||R;){let L=!1,U=!1;if(O&&R){const F=g(O,R);F<0?U=!0:F>0&&(L=!0)}else O!=null?U=!0:L=!0;L?(v(R),R=Xu(P)):U?(A(O),O=Xu(N)):(O=Xu(N),R=Xu(P))}})(i,a,Ml,(u=>{o.push(this.Dn(e,n,r,u))}),(u=>{o.push(this.vn(e,n,r,u))})),Pe.waitFor(o)}yn(e){let n=1;return Ju(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,u)=>Ml(o,u))).filter(((o,u,h)=>!u||Ml(o,h[u-1])!==0));const i=[];i.push(e);for(const o of r){const u=Ml(o,e),h=Ml(o,n);if(u===0)i[0]=e.Zt();else if(u>0&&h<0)i.push(o),i.push(o.Zt());else if(h>0)break}i.push(n);const a=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const u=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,am,[]],h=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,am,[]];a.push(IDBKeyRange.bound(u,h))}return a}Cn(e,n){return Ml(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(CR)}getMinOffset(e,n){return Pe.mapArray(this.hn(n),(r=>this.Pn(e,r).next((i=>i||kt())))).next(CR)}}function SR(t){return bi(t,"collectionParents")}function Qu(t){return bi(t,"indexEntries")}function oh(t){return bi(t,"indexConfiguration")}function Ju(t){return bi(t,"indexState")}function CR(t){jt(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;bT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new eo(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Da{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Da(e,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId);let u=0;const h=r.J({range:o},((g,v,A)=>(u++,A.delete())));a.push(h.next((()=>{jt(u===1)})));const f=[];for(const g of n.mutations){const v=n5(e,g.key.path,n.batchId);a.push(i.delete(v)),f.push(g.key)}return Pe.waitFor(a).next((()=>f))}function Xm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw kt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Da.DEFAULT_COLLECTION_PERCENTILE=10,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Da.DEFAULT=new Da(41943040,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Da.DISABLED=new Da(-1,0,0);class my{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){jt(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new my(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dl(e).J({index:"userMutationsIndex",range:r},((i,a,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=sd(e),o=Dl(e);return o.add({}).next((u=>{jt(typeof u=="number");const h=new CT(u,n,r,i),f=(function(N,P,O){const R=O.baseMutations.map((U=>Ym(N.ct,U))),L=O.mutations.map((U=>Ym(N.ct,U)));return{userId:P,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:R,mutations:L}})(this.serializer,this.userId,h),g=[];let v=new hr(((A,N)=>rn(A.canonicalString(),N.canonicalString())));for(const A of i){const N=n5(this.userId,A.key.path,u);v=v.add(A.key.path.popLast()),g.push(o.put(f)),g.push(a.put(N,vq))}return v.forEach((A=>{g.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Fn[u]=h.keys()})),Pe.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,n){return Dl(e).get(n).next((r=>r?(jt(r.userId===this.userId),jc(this.serializer,r)):null))}Mn(e,n){return this.Fn[n]?Pe.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Dl(e).J({index:"userMutationsIndex",range:i},((o,u,h)=>{u.userId===this.userId&&(jt(u.batchId>=r),a=jc(this.serializer,u)),h.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dl(e).J({index:"userMutationsIndex",range:n,reverse:!0},((i,a,o)=>{r=a.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dl(e).U("userMutationsIndex",n).next((r=>r.map((i=>jc(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Rm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return sd(e).J({range:i},((o,u,h)=>{const[f,g,v]=o,A=is(g);if(f===this.userId&&n.path.isEqual(A))return Dl(e).get(v).next((N=>{if(!N)throw kt();jt(N.userId===this.userId),a.push(jc(this.serializer,N))}));h.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hr(rn);const i=[];return n.forEach((a=>{const o=Rm(this.userId,a.path),u=IDBKeyRange.lowerBound(o),h=sd(e).J({range:u},((f,g,v)=>{const[A,N,P]=f,O=is(N);A===this.userId&&a.path.isEqual(O)?r=r.add(P):v.done()}));i.push(h)})),Pe.waitFor(i).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Rm(this.userId,r),o=IDBKeyRange.lowerBound(a);let u=new hr(rn);return sd(e).J({range:o},((h,f,g)=>{const[v,A,N]=h,P=is(A);v===this.userId&&r.isPrefixOf(P)?P.length===i&&(u=u.add(N)):g.done()})).next((()=>this.xn(e,u)))}xn(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Dl(e).get(a).next((o=>{if(o===null)throw kt();jt(o.userId===this.userId),r.push(jc(this.serializer,o))})))})),Pe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Q5(e._e,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.On(n.batchId)})),Pe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Pe.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return sd(e).J({range:r},((a,o,u)=>{if(a[0]===this.userId){const h=is(a[1]);i.push(h)}else u.done()})).next((()=>{jt(i.length===0)}))}))}containsKey(e,n){return J5(e,this.userId,n)}Nn(e){return Z5(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function J5(t,e,n){const r=Rm(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let o=!1;return sd(t).J({range:a,H:!0},((u,h,f)=>{const[g,v,A]=u;g===e&&v===i&&(o=!0),f.done()})).next((()=>o))}function Dl(t){return bi(t,"mutations")}function sd(t){return bi(t,"documentMutations")}function Z5(t){return bi(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ru(0)}static kn(){return new ru(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next((n=>{const r=new ru(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((n=>Gt.fromTimestamp(new Fr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.qn(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i))))}addTargetData(e,n){return this.Kn(e,n).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Zu(e).delete(n.targetId))).next((()=>this.qn(e))).next((r=>(jt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return Zu(e).J(((o,u)=>{const h=Ah(u);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(i++,a.push(this.removeTargetData(e,h)))})).next((()=>Pe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return Zu(e).J(((r,i)=>{const a=Ah(i);n(a)}))}qn(e){return NR(e).get("targetGlobalKey").next((n=>(jt(n!==null),n)))}Qn(e,n){return NR(e).put("targetGlobalKey",n)}Kn(e,n){return Zu(e).put(Y5(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((n=>n.targetCount))}getTargetData(e,n){const r=eu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Zu(e).J({range:i,index:"queryTargetsIndex"},((o,u,h)=>{const f=Ah(u);Lp(n,f.target)&&(a=f,h.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Ll(e);return n.forEach((o=>{const u=pa(o.path);i.push(a.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,o))})),Pe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ll(e);return Pe.forEach(n,(a=>{const o=pa(a.path);return Pe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Ll(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ll(e);let a=hn();return i.J({range:r,H:!0},((o,u,h)=>{const f=is(o[1]),g=new At(f);a=a.add(g)})).next((()=>a))}containsKey(e,n){const r=pa(n.path),i=IDBKeyRange.bound([r],[Q8(r)],!1,!0);let a=0;return Ll(e).J({index:"documentTargetsIndex",H:!0,range:i},(([o,u],h,f)=>{o!==0&&(a++,f.done())})).next((()=>a>0))}ot(e,n){return Zu(e).get(n).next((r=>r?Ah(r):null))}}function Zu(t){return bi(t,"targets")}function NR(t){return bi(t,"targetGlobal")}function Ll(t){return bi(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR([t,e],[n,r]){const i=rn(t,n);return i===0?rn(e,r):i}class Fz{constructor(e){this.Un=e,this.buffer=new hr(RR),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();RR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ec(n)?pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await uu(n)}await this.Hn(3e5)}))}}class zz{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Pe.resolve(wo.oe);const r=new Fz(n);return this.Jn.forEachTarget(e,(i=>r.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>r.zn(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(IR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IR):this.Xn(e,n)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,a,o,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,u=Date.now(),this.removeTargets(e,r,n)))).next((v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(f=Date.now(),rd()<=Pn.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),Pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v}))))}}function Gz(t,e){return new zz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,n){this.db=e,this.garbageCollector=Gz(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}er(e){let n=0;return this.Zn(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,((r,i)=>n(i)))}addReference(e,n,r){return om(e,r)}removeReference(e,n,r){return om(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return om(e,n)}nr(e,n){return(function(i,a){let o=!1;return Z5(i).Y((u=>J5(i,u,a).next((h=>(h&&(o=!0),Pe.resolve(!h)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.tr(e,((o,u)=>{if(u<=n){const h=this.nr(e,o).next((f=>{if(!f)return a++,r.getEntry(e,o).next((()=>(r.removeEntry(o,Gt.min()),Ll(e).delete((function(v){return[0,pa(v.path)]})(o)))))}));i.push(h)}})).next((()=>Pe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return om(e,n)}tr(e,n){const r=Ll(e);let i,a=wo.oe;return r.J({index:"documentTargetsIndex"},(([o,u],{path:h,sequenceNumber:f})=>{o===0?(a!==wo.oe&&n(new At(is(i)),a),a=f,i=h):a=wo.oe})).next((()=>{a!==wo.oe&&n(new At(is(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function om(t,e){return Ll(t).put((function(r,i){return{targetId:0,path:pa(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.changes=new tc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Rc(e).put(r)}removeEntry(e,n,r){return Rc(e).delete((function(a,o){const u=a.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Km(o),u[u.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.rr(e,r))))}getEntry(e,n){let r=Xr.newInvalidDocument(n);return Rc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sh(n))},((i,a)=>{r=this.ir(n,a)})).next((()=>r))}sr(e,n){let r={size:0,document:Xr.newInvalidDocument(n)};return Rc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sh(n))},((i,a)=>{r={document:this.ir(n,a),size:Xm(a)}})).next((()=>r))}getEntries(e,n){let r=Za();return this._r(e,n,((i,a)=>{const o=this.ir(i,a);r=r.insert(i,o)})).next((()=>r))}ar(e,n){let r=Za(),i=new Or(At.comparator);return this._r(e,n,((a,o)=>{const u=this.ir(a,o);r=r.insert(a,u),i=i.insert(a,Xm(o))})).next((()=>({documents:r,ur:i})))}_r(e,n,r){if(n.isEmpty())return Pe.resolve();let i=new hr(OR);n.forEach((h=>i=i.add(h)));const a=IDBKeyRange.bound(sh(i.first()),sh(i.last())),o=i.getIterator();let u=o.getNext();return Rc(e).J({index:"documentKeyIndex",range:a},((h,f,g)=>{const v=At.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&OR(u,v)<0;)r(u,null),u=o.getNext();u&&u.isEqual(v)&&(r(u,f),u=o.hasNext()?o.getNext():null),u?g.$(sh(u)):g.done()})).next((()=>{for(;u;)r(u,null),u=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const o=n.path,u=[o.popLast().toArray(),o.lastSegment(),Km(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rc(e).U(IDBKeyRange.bound(u,h,!0)).next((f=>{a==null||a.incrementDocumentReadCount(f.length);let g=Za();for(const v of f){const A=this.ir(At.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);A.isFoundDocument()&&(jp(n,A)||i.has(A.key))&&(g=g.insert(A.key,A))}return g}))}getAllFromCollectionGroup(e,n,r,i){let a=Za();const o=DR(n,r),u=DR(n,eo.max());return Rc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},((h,f,g)=>{const v=this.ir(At.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);a=a.insert(v.key,v),a.size===i&&g.done()})).next((()=>a))}newChangeBuffer(e){return new Yz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return MR(e).get("remoteDocumentGlobalKey").next((n=>(jt(!!n),n)))}rr(e,n){return MR(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=Rz(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Gt.min())))return r}return Xr.newInvalidDocument(e)}}function tL(t){return new $z(t)}class Yz extends eL{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new tc((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new hr(((a,o)=>rn(a.canonicalString(),o.canonicalString())));return this.changes.forEach(((a,o)=>{const u=this.lr.get(a);if(n.push(this.cr.removeEntry(e,a,u.readTime)),o.isValidDocument()){const h=yR(this.cr.serializer,o);i=i.add(a.path.popLast());const f=Xm(h);r+=f-u.size,n.push(this.cr.addEntry(e,a,h))}else if(r-=u.size,this.trackRemovals){const h=yR(this.cr.serializer,o.convertToNoDocument(Gt.min()));n.push(this.cr.addEntry(e,a,h))}})),i.forEach((a=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.cr.updateMetadata(e,r)),Pe.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next((r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.cr.ar(e,n).next((({documents:r,ur:i})=>(i.forEach(((a,o)=>{this.lr.set(a,{size:o,readTime:r.get(a).readTime})})),r)))}}function MR(t){return bi(t,"remoteDocumentGlobal")}function Rc(t){return bi(t,"remoteDocumentsV14")}function sh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DR(t,e){const n=e.documentKey.path.toArray();return[t,Km(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function OR(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=rn(n[a],r[a]),i)return i;return i=rn(n.length,r.length),i||(i=rn(n[n.length-2],r[r.length-2]),i||rn(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&kh(r.mutation,i,Oa.empty(),Fr.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,hn()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=hn()){const i=as();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=Eh();return a.forEach(((u,h)=>{o=o.insert(u,h.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,hn())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,u)=>{n.set(o,u)}))}))}computeViews(e,n,r,i){let a=Za();const o=Ph(),u=(function(){return Ph()})();return n.forEach(((h,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Zs)?a=a.insert(f.key,f):g!==void 0?(o.set(f.key,g.mutation.getFieldMask()),kh(g.mutation,f,g.mutation.getFieldMask(),Fr.now())):o.set(f.key,Oa.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,g)=>o.set(f,g))),n.forEach(((f,g)=>{var v;return u.set(f,new Kz(g,(v=o.get(f))!==null&&v!==void 0?v:null))})),u)))}recalculateAndSaveOverlays(e,n){const r=Ph();let i=new Or(((o,u)=>o-u)),a=hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const u of o)u.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let g=r.get(h)||Oa.empty();g=u.applyToLocalView(f,g),r.set(h,g);const v=(i.get(u.batchId)||hn()).add(h);i=i.insert(u.batchId,v)}))})).next((()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,v=_5();g.forEach((A=>{if(!a.has(A)){const N=N5(n.get(A),r.get(A));N!==null&&v.set(A,N),a=a.add(A)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Pe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Pe.resolve(as());let u=-1,h=a;return o.next((f=>Pe.forEach(f,((g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(g)?Pe.resolve():this.remoteDocumentCache.getEntry(e,g).next((A=>{h=h.insert(g,A)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,hn()))).next((g=>({batchId:u,changes:E5(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=Eh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=Eh();return this.indexManager.getCollectionParents(e,a).next((u=>Pe.forEach(u,(h=>{const f=(function(v,A){return new Bp(A,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((g=>{g.forEach(((v,A)=>{o=o.insert(v,A)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((h,f)=>{const g=f.getKey();o.get(g)===null&&(o=o.insert(g,Xr.newInvalidDocument(g)))}));let u=Eh();return o.forEach(((h,f)=>{const g=a.get(h);g!==void 0&&kh(g.mutation,f,Oa.empty(),Fr.now()),jp(n,f)&&(u=u.insert(h,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Pe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:ma(i.createTime)}})(n)),Pe.resolve()}getNamedQuery(e,n){return Pe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:K5(i.bundledQuery),readTime:ma(i.readTime)}})(n)),Pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.overlays=new Or(At.comparator),this.Ir=new Map}getOverlay(e,n){return Pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return Pe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.ht(e,n,a)})),Pe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),Pe.resolve()}getOverlaysForCollection(e,n,r){const i=as(),a=n.length+1,o=new At(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Pe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Or(((f,g)=>f-g));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=as(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=as(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=i)););return Pe.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NT(n,r));let a=this.Ir.get(n);a===void 0&&(a=hn(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return Pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.Tr=new hr(Ii.Er),this.dr=new hr(Ii.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ii(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new Ii(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new At(new Xn([])),r=new Ii(n,e),i=new Ii(n,e+1),a=[];return this.dr.forEachInRange([r,i],(o=>{this.Vr(o),a.push(o.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new At(new Xn([])),r=new Ii(n,e),i=new Ii(n,e+1);let a=hn();return this.dr.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Ii(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ii{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return At.comparator(e.key,n.key)||rn(e.wr,n.wr)}static Ar(e,n){return rn(e.wr,n.wr)||At.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new hr(Ii.Er)}checkEmpty(e){return Pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CT(a,n,r,i);this.mutationQueue.push(o);for(const u of i)this.br=this.br.add(new Ii(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Pe.resolve(o)}lookupMutationBatch(e,n){return Pe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return Pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Pe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ii(n,0),i=new Ii(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(o=>{const u=this.Dr(o.wr);a.push(u)})),Pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hr(rn);return n.forEach((i=>{const a=new Ii(i,0),o=new Ii(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],(u=>{r=r.add(u.wr)}))})),Pe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;At.isDocumentKey(a)||(a=a.child(""));const o=new Ii(new At(a),0);let u=new hr(rn);return this.br.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.wr)),!0)}),o),Pe.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){jt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Pe.forEach(n.mutations,(i=>{const a=new Ii(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new Ii(n,0),i=this.br.firstAfterOrEqual(r);return Pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Pe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e){this.Mr=e,this.docs=(function(){return new Or(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Pe.resolve(r?r.document.mutableCopy():Xr.newInvalidDocument(n))}getEntries(e,n){let r=Za();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Xr.newInvalidDocument(i))})),Pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Za();const o=n.path,u=new At(o.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||bT(J8(g),r)<=0||(i.has(g.key)||jp(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Pe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){kt()}Or(e,n){return Pe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new eG(this)}getSize(e){return Pe.resolve(this.size)}}class eG extends eL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Pe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e){this.persistence=e,this.Nr=new tc((n=>eu(n)),Lp),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new PT,this.targetCount=0,this.kr=ru.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),Pe.resolve()}getLastRemoteSnapshotVersion(e){return Pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Pe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ru(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Pe.resolve()}updateTargetData(e,n){return this.Kn(n),Pe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Pe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach(((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Pe.waitFor(a).next((()=>i))}getTargetCount(e){return Pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Pe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Pe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),Pe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Pe.resolve(r)}containsKey(e,n){return Pe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wo(0),this.Kr=!1,this.Kr=!0,this.$r=new Qz,this.referenceDelegate=e(this),this.Ur=new tG(this),this.indexManager=new jz,this.remoteDocumentCache=(function(i){return new Zz(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new $5(n),this.Gr=new Wz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Jz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){pt("MemoryPersistence","Starting transaction:",e);const i=new nG(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,n){return Pe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class nG extends e5{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Jr=new PT,this.Yr=null}static Zr(e){return new gy(e)}get Xr(){if(this.Yr)return this.Yr;throw kt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Pe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Pe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Pe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pe.forEach(this.Xr,(r=>{const i=At.fromPath(r);return this.ei(e,i).next((a=>{a||n.removeEntry(i,Gt.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return Pe.or([()=>Pe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e){this.serializer=e}O(e,n,r,i){const a=new oy("createOrUpgrade",n);r<1&&i>=1&&((function(h){h.createObjectStore("owner")})(e),(function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YN,{unique:!0}),h.createObjectStore("documentMutations")})(e),PR(e),(function(h){h.createObjectStore("remoteDocuments")})(e));let o=Pe.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")})(e),PR(e)),o=o.next((()=>(function(h){const f=h.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)})(a)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(h,f){return f.store("mutations").U().next((g=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YN,{unique:!0});const v=f.store("mutations"),A=g.map((N=>v.put(N)));return Pe.waitFor(A)}))})(e,a)))),o=o.next((()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.ni(a)))),r<6&&i>=6&&(o=o.next((()=>((function(h){h.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),r<7&&i>=7&&(o=o.next((()=>this.ii(a)))),r<8&&i>=8&&(o=o.next((()=>this.si(e,a)))),r<9&&i>=9&&(o=o.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.oi(a)))),r<11&&i>=11&&(o=o.next((()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(h){h.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(h){const f=h.createObjectStore("documentOverlays",{keyPath:Mq});f.createIndex("collectionPathOverlayIndex",Dq,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",Oq,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(h){const f=h.createObjectStore("remoteDocumentsV14",{keyPath:bq});f.createIndex("documentKeyIndex",wq),f.createIndex("collectionGroupIndex",Eq)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&i>=14&&(o=o.next((()=>this.ai(e,a)))),r<15&&i>=15&&(o=o.next((()=>(function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Cq}).createIndex("sequenceNumberIndex",Iq,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Nq}).createIndex("documentKeyIndex",Rq,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore("indexState").clear()})).next((()=>{n.objectStore("indexEntries").clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let n=0;return e.store("remoteDocuments").J(((r,i)=>{n+=Xm(i)})).next((()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next((i=>Pe.forEach(i,(a=>{const o=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next((u=>Pe.forEach(u,(h=>{jt(h.userId===a.userId);const f=jc(this.serializer,h);return Q5(e,a.userId,f).next((()=>{}))}))))}))))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const a=[];return r.J(((o,u)=>{const h=new Xn(o),f=(function(v){return[0,pa(v)]})(h);a.push(n.get(f).next((g=>g?Pe.resolve():(v=>n.put({targetId:0,path:pa(v),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>Pe.waitFor(a)))}))}si(e,n){e.createObjectStore("collectionParents",{keyPath:Sq});const r=n.store("collectionParents"),i=new OT,a=o=>{if(i.add(o)){const u=o.lastSegment(),h=o.popLast();return r.put({collectionId:u,parent:pa(h)})}};return n.store("remoteDocuments").J({H:!0},((o,u)=>{const h=new Xn(o);return a(h.popLast())})).next((()=>n.store("documentMutations").J({H:!0},(([o,u,h],f)=>{const g=is(u);return a(g.popLast())}))))}oi(e){const n=e.store("targets");return n.J(((r,i)=>{const a=Ah(i),o=Y5(this.serializer,a);return n.put(o)}))}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J(((a,o)=>{const u=n.store("remoteDocumentsV14"),h=(function(v){return v.document?new At(Xn.fromString(v.document.name).popFirst(5)):v.noDocument?At.fromSegments(v.noDocument.path):v.unknownDocument?At.fromSegments(v.unknownDocument.path):kt()})(o).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(u.put(f))})).next((()=>Pe.waitFor(i)))}ai(e,n){const r=n.store("mutations"),i=tL(this.serializer),a=new rL(gy.Zr,this.serializer.ct);return r.U().next((o=>{const u=new Map;return o.forEach((h=>{var f;let g=(f=u.get(h.userId))!==null&&f!==void 0?f:hn();jc(this.serializer,h).keys().forEach((v=>g=g.add(v))),u.set(h.userId,g)})),Pe.forEach(u,((h,f)=>{const g=new qi(f),v=py.lt(this.serializer,g),A=a.getIndexManager(g),N=my.lt(g,this.serializer,A,a.referenceDelegate);return new nL(i,N,v,A).recalculateAndSaveOverlaysForDocumentKeys(new v_(n,wo.oe),h).next()}))}))}}function PR(t){t.createObjectStore("targetDocuments",{keyPath:Aq}).createIndex("documentTargetsIndex",Tq,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_q,{unique:!0}),t.createObjectStore("targetGlobal")}const av="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kT{constructor(e,n,r,i,a,o,u,h,f,g,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=a,this.window=o,this.document=u,this.ci=f,this.li=g,this.hi=v,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!kT.D())throw new _t(Ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hz(this,i),this.Ai=n+"main",this.serializer=new $5(h),this.Ri=new $l(this.Ai,this.hi,new rG(this.serializer)),this.$r=new Dz,this.Ur=new Vz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tL(this.serializer),this.Gr=new Mz,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,g===!1&&fa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _t(Ze.FAILED_PRECONDITION,av);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new wo(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((n=>this.isPrimary&&!n?this.bi(e).next((()=>!1)):!!n&&this.Di(e).next((()=>!0)))))).catch((e=>{if(ec(e))return pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return lh(e).get("owner").next((n=>Pe.resolve(this.vi(n))))}Ci(e){return sm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=bi(n,"clientMetadata");return r.U().next((i=>{const a=this.xi(i,18e5),o=i.filter((u=>a.indexOf(u)===-1));return Pe.forEach(o,(u=>r.delete(u.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Pe.resolve(!0):lh(e).get("owner").next((n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new _t(Ze.FAILED_PRECONDITION,av);return!1}}return!(!this.networkEnabled||!this.inForeground)||sm(e).U().next((r=>this.xi(r,5e3).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(a||o&&u)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&pt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const n=new v_(e,wo.oe);return this.bi(n).next((()=>this.Ci(n)))})),this.Ri.close(),this.qi()}xi(e,n){return e.filter((r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>sm(e).U().next((n=>this.xi(n,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return my.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uz(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return py.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){pt("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(h){return h===17?Lq:h===16?kq:h===15?ET:h===14?a5:h===13?i5:h===12?Pq:h===11?r5:void kt()})(this.hi);let o;return this.Ri.runTransaction(e,i,a,(u=>(o=new v_(u,this.Qr?this.Qr.next():wo.oe),n==="readwrite-primary"?this.wi(o).next((h=>!!h||this.Si(o))).next((h=>{if(!h)throw fa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new _t(Ze.FAILED_PRECONDITION,Z8);return r(o)})).next((h=>this.Di(o).next((()=>h)))):this.Ki(o).next((()=>r(o)))))).then((u=>(o.raiseOnCommittedEvent(),u)))}Ki(e){return lh(e).get("owner").next((n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new _t(Ze.FAILED_PRECONDITION,av)}))}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lh(e).put("owner",n)}static D(){return $l.D()}bi(e){const n=lh(e);return n.get("owner").next((r=>this.vi(r)?(pt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Pe.resolve()))}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(fa(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;O8()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return pt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fa("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){fa("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lh(t){return bi(t,"owner")}function sm(t){return bi(t,"clientMetadata")}function iG(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=hn(),i=hn();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new LT(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return O8()?8:t5(Vm())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.Zi(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new aG;return this.Xi(e,n,o).next((u=>{if(a.result=u,this.zi)return this.es(e,n,o,u.size)}))})).next((()=>a.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(rd()<=Pn.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",id(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Pe.resolve()):(rd()<=Pn.DEBUG&&pt("QueryEngine","Query:",id(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rd()<=Pn.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",id(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_o(n))):Pe.resolve())}Yi(e,n){if(oR(n))return Pe.resolve(null);let r=_o(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=S_(n,null,"F"),r=_o(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=hn(...a);return this.Ji.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.ts(n,u);return this.ns(n,f,o,h.readTime)?this.Yi(e,S_(n,null,"F")):this.rs(e,f,n,h)}))))})))))}Zi(e,n,r,i){return oR(n)||i.isEqual(Gt.min())?Pe.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?Pe.resolve(null):(rd()<=Pn.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),id(n)),this.rs(e,o,n,fq(i,-1)).next((u=>u)))}))}ts(e,n){let r=new hr(b5(e));return n.forEach(((i,a)=>{jp(e,a)&&(r=r.add(a))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return rd()<=Pn.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",id(n)),this.Ji.getDocumentsMatchingQuery(e,n,eo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Or(rn),this._s=new tc((a=>eu(a)),Lp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function aL(t,e,n,r){return new oG(t,e,n,r)}async function oL(t,e){const n=en(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],u=[];let h=hn();for(const f of i){o.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(r,h).next((f=>({hs:f,removedBatchIds:o,addedBatchIds:u})))}))}))}function sG(t,e){const n=en(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,g){const v=f.batch,A=v.keys();let N=Pe.resolve();return A.forEach((P=>{N=N.next((()=>g.getEntry(h,P))).next((O=>{const R=f.docVersions.get(P);jt(R!==null),O.version.compareTo(R)<0&&(v.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),g.addEntry(O)))}))})),N.next((()=>u.mutationQueue.removeMutationBatch(h,v)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=hn();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function sL(t){const e=en(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function lG(t,e){const n=en(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach(((g,v)=>{const A=i.get(v);if(!A)return;u.push(n.Ur.removeMatchingKeys(a,g.removedDocuments,v).next((()=>n.Ur.addMatchingKeys(a,g.addedDocuments,v))));let N=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?N=N.withResumeToken(ui.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):g.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(g.resumeToken,r)),i=i.insert(v,N),(function(O,R,L){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(A,N,g)&&u.push(n.Ur.updateTargetData(a,N))}));let h=Za(),f=hn();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))})),u.push(cG(a,o,e.documentUpdates).next((g=>{h=g.Ps,f=g.Is}))),!r.isEqual(Gt.min())){const g=n.Ur.getLastRemoteSnapshotVersion(a).next((v=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(g)}return Pe.waitFor(u).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(n.os=i,a)))}function cG(t,e,n){let r=hn(),i=hn();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=Za();return n.forEach(((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Gt.min())?(e.removeEntry(u,h.readTime),o=o.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),o=o.insert(u,h)):pt("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{Ps:o,Is:i}}))}function uG(t,e){const n=en(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dG(t,e){const n=en(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((a=>a?(i=a,Pe.resolve(i)):n.Ur.allocateTargetId(r).next((o=>(i=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function P_(t,e,n){const r=en(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ec(o))throw o;pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function kR(t,e,n){const r=en(t);let i=Gt.min(),a=hn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(h,f,g){const v=en(h),A=v._s.get(g);return A!==void 0?Pe.resolve(v.os.get(A)):v.Ur.getTargetData(f,g)})(r,o,_o(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next((h=>{a=h}))})).next((()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Gt.min(),n?a:hn()))).next((u=>(fG(r,Qq(e),u),{documents:u,Ts:a})))))}function fG(t,e,n){let r=t.us.get(e)||Gt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class LR{constructor(){this.activeTargetIds=rz()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lL{constructor(){this.so=new LR,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm=null;function ov(){return lm===null?lm=(function(){return 268435456+Math.round(2147483648*Math.random())})():lm++,"0x"+lm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="WebChannelConnection";class gG extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const u=ov(),h=this.xo(n,r.toUriEncodedString());pt("RestConnection",`Sending RPC '${n}' ${u}:`,h,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,a,o),this.No(n,h,f,i).then((g=>(pt("RestConnection",`Received RPC '${n}' ${u}: `,g),g)),(g=>{throw Qc("RestConnection",`RPC '${n}' ${u} failed with error: `,g,"url: ",h,"request:",i),g}))}Lo(n,r,i,a,o,u){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tf})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,o)=>n[o]=a)),i&&i.headers.forEach(((a,o)=>n[o]=a))}xo(n,r){const i=pG[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=ov();return new Promise(((o,u)=>{const h=new G8;h.setWithCredentials(!0),h.listenOnce(H8.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Im.NO_ERROR:const g=h.getResponseJson();pt(Ji,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),o(g);break;case Im.TIMEOUT:pt(Ji,`RPC '${e}' ${a} timed out`),u(new _t(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case Im.HTTP_ERROR:const v=h.getStatus();if(pt(Ji,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A==null?void 0:A.error;if(N&&N.status&&N.message){const P=(function(R){const L=R.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(L)>=0?L:Ze.UNKNOWN})(N.status);u(new _t(P,N.message))}else u(new _t(Ze.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new _t(Ze.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{pt(Ji,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);pt(Ji,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",f,r,15)}))}Bo(e,n,r){const i=ov(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=K8(),u=Y8(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const g=a.join("");pt(Ji,`Creating RPC '${e}' stream ${i}: ${g}`,h);const v=o.createWebChannel(g,h);let A=!1,N=!1;const P=new mG({Io:R=>{N?pt(Ji,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(A||(pt(Ji,`Opening RPC '${e}' stream ${i} transport.`),v.open(),A=!0),pt(Ji,`RPC '${e}' stream ${i} sending:`,R),v.send(R))},To:()=>v.close()}),O=(R,L,U)=>{R.listen(L,(F=>{try{U(F)}catch(q){setTimeout((()=>{throw q}),0)}}))};return O(v,wh.EventType.OPEN,(()=>{N||(pt(Ji,`RPC '${e}' stream ${i} transport opened.`),P.yo())})),O(v,wh.EventType.CLOSE,(()=>{N||(N=!0,pt(Ji,`RPC '${e}' stream ${i} transport closed`),P.So())})),O(v,wh.EventType.ERROR,(R=>{N||(N=!0,Qc(Ji,`RPC '${e}' stream ${i} transport errored:`,R),P.So(new _t(Ze.UNAVAILABLE,"The operation could not be completed")))})),O(v,wh.EventType.MESSAGE,(R=>{var L;if(!N){const U=R.data[0];jt(!!U);const F=U,q=F.error||((L=F[0])===null||L===void 0?void 0:L.error);if(q){pt(Ji,`RPC '${e}' stream ${i} received error:`,q);const H=q.status;let G=(function(V){const ee=si[V];if(ee!==void 0)return D5(ee)})(H),B=q.message;G===void 0&&(G=Ze.INTERNAL,B="Unknown error status: "+H+" with message "+q.message),N=!0,P.So(new _t(G,B)),v.close()}else pt(Ji,`RPC '${e}' stream ${i} received:`,U),P.bo(U)}})),O(u,$8.STAT_EVENT,(R=>{R.stat===y_.PROXY?pt(Ji,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===y_.NOPROXY&&pt(Ji,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(){return typeof window<"u"?window:null}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t){return new bz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&pt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,r,i,a,o,u,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cL(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Ze.RESOURCE_EXHAUSTED?(fa(n.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ze.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new _t(Ze.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xG extends uL{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=_z(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Gt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Gt.min():o.readTime?ma(o.readTime):Gt.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=N_(this.serializer),n.addTarget=(function(a,o){let u;const h=o.target;if(u=Gm(h)?{documents:V5(a,h)}:{query:F5(a,h)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=k5(a,o.resumeToken);const f=C_(a,o.expectedCount);f!==null&&(u.expectedCount=f)}else if(o.snapshotVersion.compareTo(Gt.min())>0){u.readTime=Nd(a,o.snapshotVersion.toTimestamp());const f=C_(a,o.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=Tz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=N_(this.serializer),n.removeTarget=e,this.a_(n)}}class vG extends uL{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return jt(!!e.streamToken),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Az(e.writeResults,e.commitTime),r=ma(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=N_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ym(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new _t(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Mo(e,I_(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _t(Ze.UNKNOWN,a.toString())}))}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Lo(e,I_(n,r),i,o,u,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(Ze.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class wG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fa(n),this.D_=!1):pt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((o=>{r.enqueueAndForget((async()=>{fu(this)&&(pt("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const f=en(h);f.L_.add(4),await Fp(f),f.q_.set("Unknown"),f.L_.delete(4),await xy(f)})(this))}))})),this.q_=new wG(r,i)}}async function xy(t){if(fu(t))for(const e of t.B_)await e(!0)}async function Fp(t){for(const e of t.B_)await e(!1)}function dL(t,e){const n=en(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),VT(n)?UT(n):rf(n).r_()&&jT(n,e))}function BT(t,e){const n=en(t),r=rf(n);n.N_.delete(e),r.r_()&&fL(n,e),n.N_.size===0&&(r.r_()?r.o_():fu(n)&&n.q_.set("Unknown"))}function jT(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rf(t).A_(e)}function fL(t,e){t.Q_.xe(e),rf(t).R_(e)}function UT(t){t.Q_=new gz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rf(t).start(),t.q_.v_()}function VT(t){return fu(t)&&!rf(t).n_()&&t.N_.size>0}function fu(t){return en(t).L_.size===0}function hL(t){t.Q_=void 0}async function _G(t){t.q_.set("Online")}async function AG(t){t.N_.forEach(((e,n)=>{jT(t,e)}))}async function TG(t,e){hL(t),VT(t)?(t.q_.M_(e),UT(t)):t.q_.set("Unknown")}async function SG(t,e,n){if(t.q_.set("Online"),e instanceof P5&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const u of a.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.N_.delete(u),i.Q_.removeTarget(u))})(t,e)}catch(r){pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qm(t,r)}else if(e instanceof Pm?t.Q_.Ke(e):e instanceof O5?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Gt.min()))try{const r=await sL(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const u=a.Q_.rt(o);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.N_.get(f);g&&a.N_.set(f,g.withResumeToken(h.resumeToken,o))}})),u.targetMismatches.forEach(((h,f)=>{const g=a.N_.get(h);if(!g)return;a.N_.set(h,g.withResumeToken(ui.EMPTY_BYTE_STRING,g.snapshotVersion)),fL(a,h);const v=new Bs(g.target,h,f,g.sequenceNumber);jT(a,v)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){pt("RemoteStore","Failed to raise snapshot:",r),await Qm(t,r)}}async function Qm(t,e,n){if(!ec(e))throw e;t.L_.add(1),await Fp(t),t.q_.set("Offline"),n||(n=()=>sL(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{pt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xy(t)}))}function pL(t,e){return e().catch((n=>Qm(t,n,e)))}async function qp(t){const e=en(t),n=Jl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CG(e);)try{const i=await uG(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,IG(e,i)}catch(i){await Qm(e,i)}mL(e)&&gL(e)}function CG(t){return fu(t)&&t.O_.length<10}function IG(t,e){t.O_.push(e);const n=Jl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mL(t){return fu(t)&&!Jl(t).n_()&&t.O_.length>0}function gL(t){Jl(t).start()}async function NG(t){Jl(t).p_()}async function RG(t){const e=Jl(t);for(const n of t.O_)e.m_(n.mutations)}async function MG(t,e,n){const r=t.O_.shift(),i=IT.from(r,e,n);await pL(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await qp(t)}async function DG(t,e){e&&Jl(t).V_&&await(async function(r,i){if((function(o){return hz(o)&&o!==Ze.ABORTED})(i.code)){const a=r.O_.shift();Jl(r).s_(),await pL(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await qp(r)}})(t,e),mL(t)&&gL(t)}async function jR(t,e){const n=en(t);n.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const r=fu(n);n.L_.add(3),await Fp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xy(n)}async function OG(t,e){const n=en(t);e?(n.L_.delete(2),await xy(n)):e||(n.L_.add(2),await Fp(n),n.q_.set("Unknown"))}function rf(t){return t.K_||(t.K_=(function(n,r,i){const a=en(n);return a.w_(),new xG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:_G.bind(null,t),Ro:AG.bind(null,t),mo:TG.bind(null,t),d_:SG.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),VT(t)?UT(t):t.q_.set("Unknown")):(await t.K_.stop(),hL(t))}))),t.K_}function Jl(t){return t.U_||(t.U_=(function(n,r,i){const a=en(n);return a.w_(),new vG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NG.bind(null,t),mo:DG.bind(null,t),f_:RG.bind(null,t),g_:MG.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await qp(t)):(await t.U_.stop(),t.O_.length>0&&(pt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Hl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,u=new FT(e,n,o,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(Ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qT(t,e){if(fa("AsyncQueue",`${e}: ${t}`),ec(t))return new _t(Ze.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=Eh(),this.sortedSet=new Or(this.comparator)}static emptySet(e){return new gd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.W_=new Or(At.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):kt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Rd{constructor(e,n,r,i,a,o,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((u=>{o.push({type:0,doc:u})})),new Rd(e,n,gd.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class kG{constructor(){this.queries=VR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=en(n),a=i.queries;i.queries=VR(),a.forEach(((o,u)=>{for(const h of u.j_)h.onError(r)}))})(this,new _t(Ze.ABORTED,"Firestore shutting down"))}}function VR(){return new tc((t=>v5(t)),uy)}async function LG(t,e){const n=en(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new PG,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=qT(o,`Initialization of query '${id(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&zT(n)}async function BG(t,e){const n=en(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jG(t,e){const n=en(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const u of o.j_)u.X_(i)&&(r=!0);o.z_=i}}r&&zT(n)}function UG(t,e,n){const r=en(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function zT(t){t.Y_.forEach((e=>{e.next()}))}var k_,FR;(FR=k_||(k_={})).ea="default",FR.Cache="cache";class VG{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Rd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==k_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.key=e}}class xL{constructor(e){this.key=e}}class FG{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=hn(),this.mutatedKeys=hn(),this.Aa=b5(e),this.Ra=new gd(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new UR,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,v)=>{const A=i.get(g),N=jp(this.query,v)?v:null,P=!!A&&this.mutatedKeys.has(A.key),O=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let R=!1;A&&N?A.data.isEqual(N.data)?P!==O&&(r.track({type:3,doc:N}),R=!0):this.ga(A,N)||(r.track({type:2,doc:N}),R=!0,(h&&this.Aa(N,h)>0||f&&this.Aa(N,f)<0)&&(u=!0)):!A&&N?(r.track({type:0,doc:N}),R=!0):A&&!N&&(r.track({type:1,doc:A}),R=!0,(h||f)&&(u=!0)),R&&(N?(o=o.add(N),a=O?a.add(g):a.delete(g)):(o=o.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:u,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((g,v)=>(function(N,P){const O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return O(N)-O(P)})(g.type,v.type)||this.Aa(g.doc,v.doc))),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,f=h!==this.Ea;return this.Ea=h,o.length!==0||f?{snapshot:new Rd(this.query,e.Ra,a,o,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new UR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=hn(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new xL(r))})),this.da.forEach((r=>{e.has(r)||n.push(new yL(r))})),n}ba(e){this.Ta=e.Ts,this.da=hn();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Rd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zG{constructor(e){this.key=e,this.va=!1}}class GG{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new tc((u=>v5(u)),uy),this.Ma=new Map,this.xa=new Set,this.Oa=new Or(At.comparator),this.Na=new Map,this.La=new PT,this.Ba={},this.ka=new Map,this.qa=ru.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function HG(t,e,n=!0){const r=AL(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await vL(r,e,n,!0),i}async function $G(t,e){const n=AL(t);await vL(n,e,!0,!1)}async function vL(t,e,n,r){const i=await dG(t.localStore,_o(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await YG(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&dL(t.remoteStore,i),u}async function YG(t,e,n,r,i){t.Ka=(v,A,N)=>(async function(O,R,L,U){let F=R.view.ma(L);F.ns&&(F=await kR(O.localStore,R.query,!1).then((({documents:B})=>R.view.ma(B,F))));const q=U&&U.targetChanges.get(R.targetId),H=U&&U.targetMismatches.get(R.targetId)!=null,G=R.view.applyChanges(F,O.isPrimaryClient,q,H);return zR(O,R.targetId,G.wa),G.snapshot})(t,v,A,N);const a=await kR(t.localStore,e,!0),o=new FG(e,a.Ts),u=o.ma(a.documents),h=Vp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=o.applyChanges(u,t.isPrimaryClient,h);zR(t,n,f.wa);const g=new qG(e,n,o);return t.Fa.set(e,g),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function KG(t,e,n){const r=en(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((o=>!uy(o,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await P_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&BT(r.remoteStore,i.targetId),L_(r,i.targetId)})).catch(uu)):(L_(r,i.targetId),await P_(r.localStore,i.targetId,!0))}async function WG(t,e){const n=en(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),BT(n.remoteStore,r.targetId))}async function XG(t,e,n){const r=TL(t);try{const i=await(function(o,u){const h=en(o),f=Fr.now(),g=u.reduce(((N,P)=>N.add(P.key)),hn());let v,A;return h.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let P=Za(),O=hn();return h.cs.getEntries(N,g).next((R=>{P=R,P.forEach(((L,U)=>{U.isValidDocument()||(O=O.add(L))}))})).next((()=>h.localDocuments.getOverlayedDocuments(N,P))).next((R=>{v=R;const L=[];for(const U of u){const F=dz(U,v.get(U.key).overlayedDocument);F!=null&&L.push(new Zs(U.key,F,u5(F.value.mapValue),Gi.exists(!0)))}return h.mutationQueue.addMutationBatch(N,f,L,u)})).next((R=>{A=R;const L=R.applyToLocalDocumentSet(v,O);return h.documentOverlayCache.saveOverlays(N,R.batchId,L)}))})).then((()=>({batchId:A.batchId,changes:E5(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,u,h){let f=o.Ba[o.currentUser.toKey()];f||(f=new Or(rn)),f=f.insert(u,h),o.Ba[o.currentUser.toKey()]=f})(r,i.batchId,n),await zp(r,i.changes),await qp(r.remoteStore)}catch(i){const a=qT(i,"Failed to persist write");n.reject(a)}}async function bL(t,e){const n=en(t);try{const r=await lG(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Na.get(a);o&&(jt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?jt(o.va):i.removedDocuments.size>0&&(jt(o.va),o.va=!1))})),await zp(n,r,e)}catch(r){await uu(r)}}function qR(t,e,n){const r=en(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((a,o)=>{const u=o.view.Z_(e);u.snapshot&&i.push(u.snapshot)})),(function(o,u){const h=en(o);h.onlineState=u;let f=!1;h.queries.forEach(((g,v)=>{for(const A of v.j_)A.Z_(u)&&(f=!0)})),f&&zT(h)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QG(t,e,n){const r=en(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new Or(At.comparator);o=o.insert(a,Xr.newNoDocument(a,Gt.min()));const u=hn().add(a),h=new hy(Gt.min(),new Map,new Or(rn),o,u);await bL(r,h),r.Oa=r.Oa.remove(a),r.Na.delete(e),GT(r)}else await P_(r.localStore,e,!1).then((()=>L_(r,e,n))).catch(uu)}async function JG(t,e){const n=en(t),r=e.batch.batchId;try{const i=await sG(n.localStore,e);EL(n,r,null),wL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zp(n,i)}catch(i){await uu(i)}}async function ZG(t,e,n){const r=en(t);try{const i=await(function(o,u){const h=en(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next((v=>(jt(v!==null),g=v.keys(),h.mutationQueue.removeMutationBatch(f,v)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);EL(r,e,n),wL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zp(r,i)}catch(i){await uu(i)}}function wL(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function EL(t,e,n){const r=en(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function L_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||_L(t,r)}))}function _L(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(BT(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),GT(t))}function zR(t,e,n){for(const r of n)r instanceof yL?(t.La.addReference(r.key,e),eH(t,r)):r instanceof xL?(pt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||_L(t,r.key)):kt()}function eH(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(pt("SyncEngine","New document in limbo: "+n),t.xa.add(r),GT(t))}function GT(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new At(Xn.fromString(e)),r=t.qa.next();t.Na.set(r,new zG(n)),t.Oa=t.Oa.insert(n,r),dL(t.remoteStore,new Bs(_o(cy(n.path)),r,"TargetPurposeLimboResolution",wo.oe))}}async function zp(t,e,n){const r=en(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,h)=>{o.push(r.Ka(h,e,n).then((f=>{var g;if((f||n)&&r.isPrimaryClient){const v=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(f){i.push(f);const v=LT.Wi(h.targetId,f);a.push(v)}})))})),await Promise.all(o),r.Ca.d_(i),await(async function(h,f){const g=en(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Pe.forEach(f,(A=>Pe.forEach(A.$i,(N=>g.persistence.referenceDelegate.addReference(v,A.targetId,N))).next((()=>Pe.forEach(A.Ui,(N=>g.persistence.referenceDelegate.removeReference(v,A.targetId,N)))))))))}catch(v){if(!ec(v))throw v;pt("LocalStore","Failed to update sequence numbers: "+v)}for(const v of f){const A=v.targetId;if(!v.fromCache){const N=g.os.get(A),P=N.snapshotVersion,O=N.withLastLimboFreeSnapshotVersion(P);g.os=g.os.insert(A,O)}}})(r.localStore,a))}async function tH(t,e){const n=en(t);if(!n.currentUser.isEqual(e)){pt("SyncEngine","User change. New user:",e.toKey());const r=await oL(n.localStore,e);n.currentUser=e,(function(a,o){a.ka.forEach((u=>{u.forEach((h=>{h.reject(new _t(Ze.CANCELLED,o))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zp(n,r.hs)}}function nH(t,e){const n=en(t),r=n.Na.get(e);if(r&&r.va)return hn().add(r.key);{let i=hn();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const u=n.Fa.get(o);i=i.unionWith(u.view.Va)}return i}}function AL(t){const e=en(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QG.bind(null,e),e.Ca.d_=jG.bind(null,e.eventManager),e.Ca.$a=UG.bind(null,e.eventManager),e}function TL(t){const e=en(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZG.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yy(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return aL(this.persistence,new iL,e.initialUser,this.serializer)}Ga(e){return new rL(gy.Zr,this.serializer)}Wa(e){return new lL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class rH extends Zh{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await TL(this.Ja.syncEngine),await qp(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return aL(this.persistence,new iL,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new qz(r,e.asyncQueue,n)}Ha(e,n){const r=new gq(n,this.persistence);return new mq(e.asyncQueue,r)}Ga(e){const n=iG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Da.withCacheSize(this.cacheSizeBytes):Da.DEFAULT;return new kT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,yG(),km(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new lL}}class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tH.bind(null,this.syncEngine),await OG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kG})()}createDatastore(e){const n=yy(e.databaseInfo.databaseId),r=(function(a){return new gG(a)})(e.databaseInfo);return(function(a,o,u,h){return new bG(a,o,u,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,u){return new EG(r,i,a,o,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>qR(this.syncEngine,n,0)),(function(){return BR.D()?new BR:new hG})())}createSyncEngine(e,n){return(function(i,a,o,u,h,f,g){const v=new GG(i,a,o,u,h,f);return g&&(v.Qa=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=en(i);pt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Fp(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qi.UNAUTHENTICATED,this.clientId=X8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{pt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(pt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qT(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function sv(t,e){t.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await oL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function GR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oH(t);pt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>jR(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>jR(e.remoteStore,i))),t._onlineComponents=e}async function oH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pt("FirestoreClient","Using user provided OfflineComponentProvider");try{await sv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ze.FAILED_PRECONDITION||i.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Qc("Error using user provided cache. Falling back to memory cache: "+n),await sv(t,new Zh)}}else pt("FirestoreClient","Using default OfflineComponentProvider"),await sv(t,new Zh);return t._offlineComponents}async function SL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pt("FirestoreClient","Using user provided OnlineComponentProvider"),await GR(t,t._uninitializedComponentsProvider._online)):(pt("FirestoreClient","Using default OnlineComponentProvider"),await GR(t,new Jm))),t._onlineComponents}function sH(t){return SL(t).then((e=>e.syncEngine))}async function HR(t){const e=await SL(t),n=e.eventManager;return n.onListen=HG.bind(null,e.syncEngine),n.onUnlisten=KG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$G.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WG.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e,n){if(!n)throw new _t(Ze.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lH(t,e,n,r){if(e===!0&&r===!0)throw new _t(Ze.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YR(t){if(!At.isDocumentKey(t))throw new _t(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KR(t){if(At.isDocumentKey(t))throw new _t(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":kt()}function qs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _t(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vy(t);throw new _t(Ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _t(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _t(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _t(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _t(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _t(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class by{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _t(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _t(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WR(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rq;switch(r.type){case"firstParty":return new sq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=$R.get(n);r&&(pt("ComponentProvider","Removing Datastore"),$R.delete(n),r.terminate())})(this),Promise.resolve()}}function cH(t,e,n,r={}){var i;const a=(t=qs(t,by))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Qc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=qi.MOCK_USER;else{u=UV(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new _t(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new qi(f)}t._authCredentials=new iq(new W8(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new af(this.firestore,e,this._query)}}class ka{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ka(this.firestore,e,this._key)}}class Yl extends af{constructor(e,n,r){super(e,n,cy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ka(this.firestore,null,new At(e))}withConverter(e){return new Yl(this.firestore,e,this._path)}}function uH(t,e,...n){if(t=Ho(t),IL("collection","path",e),t instanceof by){const r=Xn.fromString(e,...n);return KR(r),new Yl(t,null,r)}{if(!(t instanceof ka||t instanceof Yl))throw new _t(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xn.fromString(e,...n));return KR(r),new Yl(t.firestore,null,r)}}function wy(t,e,...n){if(t=Ho(t),arguments.length===1&&(e=X8.newId()),IL("doc","path",e),t instanceof by){const r=Xn.fromString(e,...n);return YR(r),new ka(t,null,new At(r))}{if(!(t instanceof ka||t instanceof Yl))throw new _t(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xn.fromString(e,...n));return YR(r),new ka(t.firestore,t instanceof Yl?t.converter:null,new At(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cL(this,"async_queue_retry"),this.Vu=()=>{const r=km();r&&pt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Hl;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ec(e))throw e;pt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u})(r);throw fa("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=FT.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&kt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function QR(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class iu extends by{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new XR,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XR(e),this._firestoreClient=void 0,await e}}}function dH(t,e){const n=typeof t=="object"?t:V8(),r=typeof t=="string"?t:"(default)",i=FF(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=BV("firestore");a&&cH(i,...a)}return i}function HT(t){if(t._terminated)throw new _t(Ze.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NL(t),t._firestoreClient}function NL(t){var e,n,r;const i=t._freezeSettings(),a=(function(u,h,f,g){return new jq(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,CL(g.experimentalLongPollingOptions),g.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new aH(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(t._componentsProvider))}function fH(t,e){Qc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return hH(t,Jm.provider,{build:r=>new rH(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function hH(t,e,n){if((t=qs(t,iu))._firestoreClient||t._terminated)throw new _t(Ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new _t(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},NL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Md(ui.fromBase64String(e))}catch(n){throw new _t(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Md(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _t(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _t(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _t(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=/^__.*__$/;class mH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new nf(e,this.data,n,this.fieldTransforms)}}class RL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ML(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class WT{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new WT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ML(this.Cu)&&pH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yy(e)}Qu(e,n,r,i=!1){return new WT({Cu:e,methodName:n,qu:r,path:Ur.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XT(t){const e=t._freezeSettings(),n=yy(t._databaseId);return new gH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DL(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);QT("Data must be an object, but it was:",o,r);const u=OL(r,o);let h,f;if(a.merge)h=new Oa(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const A=B_(e,v,n);if(!o.contains(A))throw new _t(Ze.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);kL(g,A)||g.push(A)}h=new Oa(g),f=o.fieldTransforms.filter((v=>h.covers(v.field)))}else h=null,f=o.fieldTransforms;return new mH(new na(u),h,f)}class _y extends $T{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _y}}function yH(t,e,n,r){const i=t.Qu(1,e,n);QT("Data must be an object, but it was:",i,r);const a=[],o=na.empty();du(r,((h,f)=>{const g=JT(e,h,n);f=Ho(f);const v=i.Nu(g);if(f instanceof _y)a.push(g);else{const A=Gp(f,v);A!=null&&(a.push(g),o.set(g,A))}}));const u=new Oa(a);return new RL(o,u,i.fieldTransforms)}function xH(t,e,n,r,i,a){const o=t.Qu(1,e,n),u=[B_(e,r,n)],h=[i];if(a.length%2!=0)throw new _t(Ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)u.push(B_(e,a[A])),h.push(a[A+1]);const f=[],g=na.empty();for(let A=u.length-1;A>=0;--A)if(!kL(f,u[A])){const N=u[A];let P=h[A];P=Ho(P);const O=o.Nu(N);if(P instanceof _y)f.push(N);else{const R=Gp(P,O);R!=null&&(f.push(N),g.set(N,R))}}const v=new Oa(f);return new RL(g,v,o.fieldTransforms)}function vH(t,e,n,r=!1){return Gp(n,t.Qu(r?4:3,e))}function Gp(t,e){if(PL(t=Ho(t)))return QT("Unsupported field value:",e,t),OL(t,e);if(t instanceof $T)return(function(r,i){if(!ML(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const u of r){let h=Gp(u,i.Lu(o));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Ho(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Fr.fromDate(r);return{timestampValue:Nd(i.serializer,a)}}if(r instanceof Fr){const a=new Fr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(i.serializer,a)}}if(r instanceof YT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Md)return{bytesValue:k5(i.serializer,r._byteString)};if(r instanceof ka){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:MT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof KT)return(function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw u.Bu("VectorValues must only contain numeric values.");return ST(u.serializer,h)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${vy(r)}`)})(t,e)}function OL(t,e){const n={};return o5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):du(t,((r,i)=>{const a=Gp(i,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function PL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fr||t instanceof YT||t instanceof Md||t instanceof ka||t instanceof $T||t instanceof KT)}function QT(t,e,n){if(!PL(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=vy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function B_(t,e,n){if((e=Ho(e))instanceof Ey)return e._internalPath;if(typeof e=="string")return JT(t,e);throw Zm("Field path arguments must be of type string or ",t,!1,void 0,n)}const bH=new RegExp("[~\\*/\\[\\]]");function JT(t,e,n){if(e.search(bH)>=0)throw Zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ey(...e.split("."))._internalPath}catch{throw Zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zm(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||o)&&(h+=" (found",a&&(h+=` in field ${r}`),o&&(h+=` in document ${i}`),h+=")"),new _t(Ze.INVALID_ARGUMENT,u+t+h)}function kL(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ka(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(BL("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wH extends LL{data(){return super.data()}}function BL(t,e){return typeof e=="string"?JT(t,e):e instanceof Ey?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _t(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZT{}class _H extends ZT{}function AH(t,e,...n){let r=[];e instanceof ZT&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((h=>h instanceof tS)).length,u=a.filter((h=>h instanceof eS)).length;if(o>1||o>0&&u>0)throw new _t(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class eS extends _H{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new eS(e,n,r)}_apply(e){const n=this._parse(e);return jL(e._query,n),new af(e.firestore,e.converter,T_(e._query,n))}_parse(e){const n=XT(e.firestore);return(function(a,o,u,h,f,g,v){let A;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new _t(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){ZR(v,g);const N=[];for(const P of v)N.push(JR(h,a,P));A={arrayValue:{values:N}}}else A=JR(h,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||ZR(v,g),A=vH(u,o,v,g==="in"||g==="not-in");return Cn.create(f,g,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class tS extends ZT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tS(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const u=a.getFlattenedFilters();for(const h of u)jL(o,h),o=T_(o,h)})(e._query,n),new af(e.firestore,e.converter,T_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function JR(t,e,n){if(typeof(n=Ho(n))=="string"){if(n==="")throw new _t(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x5(e)&&n.indexOf("/")!==-1)throw new _t(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xn.fromString(n));if(!At.isDocumentKey(r))throw new _t(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wh(t,new At(r))}if(n instanceof ka)return Wh(t,n._key);throw new _t(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vy(n)}.`)}function ZR(t,e){if(!Array.isArray(t)||t.length===0)throw new _t(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jL(t,e){const n=(function(i,a){for(const o of i)for(const u of o.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _t(Ze.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _t(Ze.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TH{convertValue(e,n="none"){switch(Zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw kt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return du(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((o=>Mr(o.doubleValue)));return new KT(a)}convertGeoPoint(e){return new YT(Mr(e.latitude),Mr(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=AT(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yh(e));default:return null}}convertTimestamp(e){const n=Ys(e);return new Fr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xn.fromString(e);jt(H5(r));const i=new Jc(r.get(1),r.get(3)),a=new At(r.popFirst(5));return i.isEqual(n)||fa(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VL extends LL{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(BL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Lm extends VL{data(e={}){return super.data(e)}}class SH{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Th(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Lm(this._firestore,this._userDataWriter,r.key,r,new Th(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((u=>{const h=new Lm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Th(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const h=new Lm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Th(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),g=o.indexOf(u.doc.key)),{type:CH(u.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}class FL extends TH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Md(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ka(this.firestore,null,n)}}function IH(t,e,n){t=qs(t,ka);const r=qs(t.firestore,iu),i=UL(t.converter,e,n);return nS(r,[DL(XT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gi.none())])}function NH(t){return nS(qs(t.firestore,iu),[new Up(t._key,Gi.none())])}function qL(t,...e){var n,r,i;t=Ho(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||QR(e[o])||(a=e[o],o++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(QR(e[o])){const v=e[o];e[o]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[o+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[o+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let h,f,g;if(t instanceof ka)f=qs(t.firestore,iu),g=cy(t._key.path),h={next:v=>{e[o]&&e[o](RH(f,t,v))},error:e[o+1],complete:e[o+2]};else{const v=qs(t,af);f=qs(v.firestore,iu),g=v._query;const A=new FL(f);h={next:N=>{e[o]&&e[o](new SH(f,A,v,N))},error:e[o+1],complete:e[o+2]},EH(t._query)}return(function(A,N,P,O){const R=new iH(O),L=new VG(N,R,P);return A.asyncQueue.enqueueAndForget((async()=>LG(await HR(A),L))),()=>{R.Za(),A.asyncQueue.enqueueAndForget((async()=>BG(await HR(A),L)))}})(HT(f),g,u,h)}function nS(t,e){return(function(r,i){const a=new Hl;return r.asyncQueue.enqueueAndForget((async()=>XG(await sH(r),i,a))),a.promise})(HT(t),e)}function RH(t,e,n){const r=n.docs.get(e._key),i=new FL(t);return new VL(t,i,e._key,r,new Th(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=XT(e)}set(e,n,r){this._verifyNotCommitted();const i=lv(e,this._firestore),a=UL(i.converter,n,r),o=DL(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Gi.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=lv(e,this._firestore);let o;return o=typeof(n=Ho(n))=="string"||n instanceof Ey?xH(this._dataReader,"WriteBatch.update",a._key,n,r,i):yH(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Gi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=lv(e,this._firestore);return this._mutations=this._mutations.concat(new Up(n._key,Gi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(Ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lv(t,e){if((t=Ho(t)).firestore!==e)throw new _t(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t){return HT(t=qs(t,iu)),new MH(t,(e=>nS(t,e)))}(function(e,n=!0){(function(i){tf=i})(GF),Fm(new Fh("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),u=new iu(new aq(r.getProvider("auth-internal")),new cq(r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new _t(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(f.options.projectId,g)})(o,i),o);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),md(GN,"4.7.3",e),md(GN,"4.7.3","esm2017")})();const OH={apiKey:"AIzaSyDgTA61l64jv4fR0SusbRYKx4GfhxoIZ90",authDomain:"prasama-72c8d.firebaseapp.com",projectId:"prasama-72c8d",storageBucket:"prasama-72c8d.firebasestorage.app",messagingSenderId:"294615686061",appId:"1:294615686061:web:8c8906fc36f8f93edf9f24"},PH=HF().length?V8():U8(OH),au=dH(PH);fH(au).catch(t=>{t.code=="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a a time."):t.code=="unimplemented"&&console.warn("The current browser does not support all of the features required to enable persistence")});const It={products:"p_v16_products",transactions:"p_v16_transactions",customers:"p_v16_customers",vendors:"p_v16_vendors",accounts:"p_v16_accounts",categories:"p_v16_categories",daySessions:"p_v16_daySessions",recurringExpenses:"p_v16_recurringExpenses",purchaseOrders:"p_v16_purchaseOrders",quotations:"p_v16_quotations",profile:"p_v16_profile"},cm=(t,e=0)=>{const n=parseFloat(t);return isNaN(n)||!isFinite(n)?e:n},zL=t=>{const e=String(t||"").trim();return!e||e==="undefined"||e==="null"?"Main Branch":e},j_=t=>t?String(t).trim().replace(/[/.\s#$\[\]]/g,"_"):`ID-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;function ns(t,e){const n=AH(uH(au,t));return qL(n,i=>{const a=[];i.forEach(o=>{a.push({...o.data(),id:o.id})}),e(a)},i=>{console.error(`Error subscribing to ${t}:`,i),e([])})}function kH(t,e,n){const r=wy(au,t,e);return qL(r,a=>{a.exists()?n({...a.data(),id:a.id}):n(null)},a=>{console.error(`Error subscribing to doc ${t}/${e}:`,a)})}async function nn(t,e,n){const r=j_(e),i=wy(au,t,r),a={...n,id:r,updatedAt:new Date().toISOString()};a.branchId&&(a.branchId=zL(a.branchId));try{await IH(i,a,{merge:!0})}catch(o){throw console.error("Error upserting document:",o),o}}async function ko(t,e){if(!e||!e.length)return;const n=new Map;e.forEach(a=>{let o={...a};t===It.products?o={...a,name:(a.name||"UNNAMED").toString().toUpperCase(),sku:(a.sku||a.id||`SKU-${Math.random()}`).toString().toUpperCase(),price:cm(a.price),cost:cm(a.cost),stock:cm(a.stock),categoryId:a.categoryId||"UNGROUPED"}:t===It.transactions&&(o={...a,amount:cm(a.amount||a.total||0),date:a.date||new Date().toISOString(),type:(a.type||"SALE").toString().toUpperCase(),branchId:zL(a.branchId||a.branch)});const u=a.id?j_(a.id):j_(o.sku||o.date+Math.random());n.set(u,{...o,id:u,updatedAt:new Date().toISOString()})});const r=Array.from(n.values()),i=400;for(let a=0;a<r.length;a+=i){const o=DH(au);r.slice(a,a+i).forEach(h=>{const f=wy(au,t,h.id);o.set(f,h,{merge:!0})});try{await o.commit()}catch(h){console.error("Error in bulk upsert batch:",h)}}}async function ch(t,e){try{await NH(wy(au,t,e))}catch(n){console.error("Error deleting document:",n)}}const LH=({currentView:t,setView:e,userProfile:n,accounts:r,onEditProfile:i,onLogout:a,onSwitchBranch:o})=>{const[u,h]=le.useState(!1),f=[{id:"DASHBOARD",label:"Dashboard",icon:""},{id:"AI_ADVISOR",label:"AI Advisor",icon:""},{id:"POS",label:"POS",icon:""},{id:"QUOTATIONS",label:"Quotation",icon:""},{id:"SALES_HISTORY",label:"Sales History",icon:""},{id:"INVENTORY",label:"Inventory",icon:""},{id:"BARCODE_PRINT",label:"Barcode Print",icon:""},{id:"PURCHASES",label:"Purchases",icon:""},{id:"CUSTOMERS",label:"Customers",icon:""},{id:"FINANCE",label:"Finance",icon:""},{id:"ACCOUNTING",label:"Accounting",icon:""},{id:"CHEQUE_PRINT",label:"Cheque Print",icon:""},{id:"SETTINGS",label:"Settings",icon:""}],g=n.name.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2);return x.jsxs("div",{className:`${u?"w-[80px]":"w-[260px]"} h-full bg-white text-slate-600 flex flex-col border-r border-slate-200 shadow-xl z-20 transition-all duration-300 ease-in-out relative`,children:[x.jsx("button",{onClick:()=>h(!u),className:"absolute -right-3 top-10 w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center text-white shadow-lg z-50 hover:bg-indigo-700 transition-colors border border-white",children:u?"":""}),x.jsx("div",{className:`px-4 pt-6 pb-4 ${u?"items-center":""} flex flex-col`,children:x.jsxs("div",{className:"flex items-center gap-3 mb-4 w-full",children:[x.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-lg",children:x.jsx("span",{className:"font-black text-xl italic",children:"P"})}),!u&&x.jsxs("div",{className:"overflow-hidden",children:[x.jsx("h1",{className:"text-xs font-black tracking-tight text-slate-900 leading-tight truncate uppercase",children:n.name}),x.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase tracking-widest opacity-80",children:"Strategic Suite"})]})]})}),x.jsx("nav",{className:"flex-1 px-3 space-y-1 overflow-y-auto custom-scrollbar pt-2",children:f.map(v=>{const A=t===v.id;return x.jsxs("button",{onClick:()=>e(v.id),title:v.label,className:`w-full group flex items-center ${u?"justify-center px-0":"px-4"} py-3 text-[11px] font-black uppercase tracking-widest rounded-xl transition-all duration-200 ${A?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-400 hover:bg-slate-50 hover:text-indigo-600"}`,children:[x.jsx("span",{className:`text-xl transition-transform group-hover:scale-110 ${u?"mr-0":"mr-3"} ${A?"opacity-100":"opacity-30"}`,children:v.icon}),!u&&x.jsx("span",{children:v.label})]},v.id)})}),x.jsxs("div",{className:"p-3 mt-auto border-t border-slate-100 space-y-1.5 bg-slate-50/50",children:[x.jsxs("button",{onClick:i,className:`w-full flex items-center ${u?"justify-center":"gap-2.5"} bg-white p-2.5 rounded-xl border border-slate-200 hover:border-indigo-400 transition-all text-left group shadow-sm`,children:[x.jsx("div",{className:"w-9 h-9 min-w-[36px] rounded-lg bg-slate-100 border border-slate-200 flex items-center justify-center text-[11px] font-black text-indigo-600",children:g}),!u&&x.jsxs("div",{className:"min-w-0 flex-1",children:[x.jsx("p",{className:"text-[10px] font-bold text-slate-900 truncate uppercase tracking-tighter",children:n.name}),x.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-tight truncate",children:"Enterprise Node"})]})]}),x.jsxs("button",{onClick:a,className:`w-full flex items-center ${u?"justify-center":"gap-2 px-4"} py-2.5 text-[9px] font-black uppercase tracking-[0.2em] text-slate-400 hover:text-rose-600 transition-all duration-200`,children:[x.jsx("span",{children:""})," ",!u&&"Exit Terminal"]})]})]})};function GL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=GL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=GL(t))&&(r&&(r+=" "),r+=e);return r}var cv,eM;function La(){if(eM)return cv;eM=1;var t=Array.isArray;return cv=t,cv}var uv,tM;function HL(){if(tM)return uv;tM=1;var t=typeof jl=="object"&&jl&&jl.Object===Object&&jl;return uv=t,uv}var dv,nM;function fs(){if(nM)return dv;nM=1;var t=HL(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return dv=n,dv}var fv,rM;function Hp(){if(rM)return fv;rM=1;var t=fs(),e=t.Symbol;return fv=e,fv}var hv,iM;function BH(){if(iM)return hv;iM=1;var t=Hp(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(o){var u=n.call(o,i),h=o[i];try{o[i]=void 0;var f=!0}catch{}var g=r.call(o);return f&&(u?o[i]=h:delete o[i]),g}return hv=a,hv}var pv,aM;function jH(){if(aM)return pv;aM=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return pv=n,pv}var mv,oM;function el(){if(oM)return mv;oM=1;var t=Hp(),e=BH(),n=jH(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(u){return u==null?u===void 0?i:r:a&&a in Object(u)?e(u):n(u)}return mv=o,mv}var gv,sM;function tl(){if(sM)return gv;sM=1;function t(e){return e!=null&&typeof e=="object"}return gv=t,gv}var yv,lM;function of(){if(lM)return yv;lM=1;var t=el(),e=tl(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return yv=r,yv}var xv,cM;function rS(){if(cM)return xv;cM=1;var t=La(),e=of(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(t(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||o!=null&&a in Object(o)}return xv=i,xv}var vv,uM;function nc(){if(uM)return vv;uM=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return vv=t,vv}var bv,dM;function iS(){if(dM)return bv;dM=1;var t=el(),e=nc(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(u){if(!e(u))return!1;var h=t(u);return h==r||h==i||h==n||h==a}return bv=o,bv}var wv,fM;function UH(){if(fM)return wv;fM=1;var t=fs(),e=t["__core-js_shared__"];return wv=e,wv}var Ev,hM;function VH(){if(hM)return Ev;hM=1;var t=UH(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return Ev=n,Ev}var _v,pM;function $L(){if(pM)return _v;pM=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return _v=n,_v}var Av,mM;function FH(){if(mM)return Av;mM=1;var t=iS(),e=VH(),n=nc(),r=$L(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,h=o.toString,f=u.hasOwnProperty,g=RegExp("^"+h.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(A){if(!n(A)||e(A))return!1;var N=t(A)?g:a;return N.test(r(A))}return Av=v,Av}var Tv,gM;function qH(){if(gM)return Tv;gM=1;function t(e,n){return e==null?void 0:e[n]}return Tv=t,Tv}var Sv,yM;function hu(){if(yM)return Sv;yM=1;var t=FH(),e=qH();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return Sv=n,Sv}var Cv,xM;function Ay(){if(xM)return Cv;xM=1;var t=hu(),e=t(Object,"create");return Cv=e,Cv}var Iv,vM;function zH(){if(vM)return Iv;vM=1;var t=Ay();function e(){this.__data__=t?t(null):{},this.size=0}return Iv=e,Iv}var Nv,bM;function GH(){if(bM)return Nv;bM=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Nv=t,Nv}var Rv,wM;function HH(){if(wM)return Rv;wM=1;var t=Ay(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var u=o[a];return u===e?void 0:u}return r.call(o,a)?o[a]:void 0}return Rv=i,Rv}var Mv,EM;function $H(){if(EM)return Mv;EM=1;var t=Ay(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return Mv=r,Mv}var Dv,_M;function YH(){if(_M)return Dv;_M=1;var t=Ay(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return Dv=n,Dv}var Ov,AM;function KH(){if(AM)return Ov;AM=1;var t=zH(),e=GH(),n=HH(),r=$H(),i=YH();function a(o){var u=-1,h=o==null?0:o.length;for(this.clear();++u<h;){var f=o[u];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Ov=a,Ov}var Pv,TM;function WH(){if(TM)return Pv;TM=1;function t(){this.__data__=[],this.size=0}return Pv=t,Pv}var kv,SM;function aS(){if(SM)return kv;SM=1;function t(e,n){return e===n||e!==e&&n!==n}return kv=t,kv}var Lv,CM;function Ty(){if(CM)return Lv;CM=1;var t=aS();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Lv=e,Lv}var Bv,IM;function XH(){if(IM)return Bv;IM=1;var t=Ty(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var u=a.length-1;return o==u?a.pop():n.call(a,o,1),--this.size,!0}return Bv=r,Bv}var jv,NM;function QH(){if(NM)return jv;NM=1;var t=Ty();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return jv=e,jv}var Uv,RM;function JH(){if(RM)return Uv;RM=1;var t=Ty();function e(n){return t(this.__data__,n)>-1}return Uv=e,Uv}var Vv,MM;function ZH(){if(MM)return Vv;MM=1;var t=Ty();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return Vv=e,Vv}var Fv,DM;function Sy(){if(DM)return Fv;DM=1;var t=WH(),e=XH(),n=QH(),r=JH(),i=ZH();function a(o){var u=-1,h=o==null?0:o.length;for(this.clear();++u<h;){var f=o[u];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Fv=a,Fv}var qv,OM;function oS(){if(OM)return qv;OM=1;var t=hu(),e=fs(),n=t(e,"Map");return qv=n,qv}var zv,PM;function e$(){if(PM)return zv;PM=1;var t=KH(),e=Sy(),n=oS();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return zv=r,zv}var Gv,kM;function t$(){if(kM)return Gv;kM=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return Gv=t,Gv}var Hv,LM;function Cy(){if(LM)return Hv;LM=1;var t=t$();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Hv=e,Hv}var $v,BM;function n$(){if(BM)return $v;BM=1;var t=Cy();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return $v=e,$v}var Yv,jM;function r$(){if(jM)return Yv;jM=1;var t=Cy();function e(n){return t(this,n).get(n)}return Yv=e,Yv}var Kv,UM;function i$(){if(UM)return Kv;UM=1;var t=Cy();function e(n){return t(this,n).has(n)}return Kv=e,Kv}var Wv,VM;function a$(){if(VM)return Wv;VM=1;var t=Cy();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Wv=e,Wv}var Xv,FM;function sS(){if(FM)return Xv;FM=1;var t=e$(),e=n$(),n=r$(),r=i$(),i=a$();function a(o){var u=-1,h=o==null?0:o.length;for(this.clear();++u<h;){var f=o[u];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Xv=a,Xv}var Qv,qM;function YL(){if(qM)return Qv;qM=1;var t=sS(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,u=i?i.apply(this,o):o[0],h=a.cache;if(h.has(u))return h.get(u);var f=r.apply(this,o);return a.cache=h.set(u,f)||h,f};return a.cache=new(n.Cache||t),a}return n.Cache=t,Qv=n,Qv}var Jv,zM;function o$(){if(zM)return Jv;zM=1;var t=YL(),e=500;function n(r){var i=t(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return Jv=n,Jv}var Zv,GM;function s$(){if(GM)return Zv;GM=1;var t=o$(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,u,h,f){a.push(h?f.replace(n,"$1"):u||o)}),a});return Zv=r,Zv}var eb,HM;function lS(){if(HM)return eb;HM=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return eb=t,eb}var tb,$M;function l$(){if($M)return tb;$M=1;var t=Hp(),e=lS(),n=La(),r=of(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function o(u){if(typeof u=="string")return u;if(n(u))return e(u,o)+"";if(r(u))return a?a.call(u):"";var h=u+"";return h=="0"&&1/u==-1/0?"-0":h}return tb=o,tb}var nb,YM;function KL(){if(YM)return nb;YM=1;var t=l$();function e(n){return n==null?"":t(n)}return nb=e,nb}var rb,KM;function WL(){if(KM)return rb;KM=1;var t=La(),e=rS(),n=s$(),r=KL();function i(a,o){return t(a)?a:e(a,o)?[a]:n(r(a))}return rb=i,rb}var ib,WM;function Iy(){if(WM)return ib;WM=1;var t=of();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return ib=e,ib}var ab,XM;function cS(){if(XM)return ab;XM=1;var t=WL(),e=Iy();function n(r,i){i=t(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return ab=n,ab}var ob,QM;function XL(){if(QM)return ob;QM=1;var t=cS();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return ob=e,ob}var c$=XL();const Ao=pr(c$);var sb,JM;function u$(){if(JM)return sb;JM=1;function t(e){return e==null}return sb=t,sb}var d$=u$();const Rn=pr(d$);var lb,ZM;function f$(){if(ZM)return lb;ZM=1;var t=el(),e=La(),n=tl(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return lb=i,lb}var h$=f$();const $p=pr(h$);var p$=iS();const cn=pr(p$);var m$=nc();const sf=pr(m$);var cb={exports:{}},Kn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eD;function g$(){if(eD)return Kn;eD=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),P;P=Symbol.for("react.module.reference");function O(R){if(typeof R=="object"&&R!==null){var L=R.$$typeof;switch(L){case t:switch(R=R.type,R){case n:case i:case r:case f:case g:return R;default:switch(R=R&&R.$$typeof,R){case u:case o:case h:case A:case v:case a:return R;default:return L}}case e:return L}}}return Kn.ContextConsumer=o,Kn.ContextProvider=a,Kn.Element=t,Kn.ForwardRef=h,Kn.Fragment=n,Kn.Lazy=A,Kn.Memo=v,Kn.Portal=e,Kn.Profiler=i,Kn.StrictMode=r,Kn.Suspense=f,Kn.SuspenseList=g,Kn.isAsyncMode=function(){return!1},Kn.isConcurrentMode=function(){return!1},Kn.isContextConsumer=function(R){return O(R)===o},Kn.isContextProvider=function(R){return O(R)===a},Kn.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===t},Kn.isForwardRef=function(R){return O(R)===h},Kn.isFragment=function(R){return O(R)===n},Kn.isLazy=function(R){return O(R)===A},Kn.isMemo=function(R){return O(R)===v},Kn.isPortal=function(R){return O(R)===e},Kn.isProfiler=function(R){return O(R)===i},Kn.isStrictMode=function(R){return O(R)===r},Kn.isSuspense=function(R){return O(R)===f},Kn.isSuspenseList=function(R){return O(R)===g},Kn.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===n||R===i||R===r||R===f||R===g||R===N||typeof R=="object"&&R!==null&&(R.$$typeof===A||R.$$typeof===v||R.$$typeof===a||R.$$typeof===o||R.$$typeof===h||R.$$typeof===P||R.getModuleId!==void 0)},Kn.typeOf=O,Kn}var tD;function y$(){return tD||(tD=1,cb.exports=g$()),cb.exports}var x$=y$(),ub,nD;function QL(){if(nD)return ub;nD=1;var t=el(),e=tl(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return ub=r,ub}var db,rD;function v$(){if(rD)return db;rD=1;var t=QL();function e(n){return t(n)&&n!=+n}return db=e,db}var b$=v$();const lf=pr(b$);var w$=QL();const E$=pr(w$);var Fo=function(e){return e===0?0:e>0?1:-1},Fc=function(e){return $p(e)&&e.indexOf("%")===e.length-1},bt=function(e){return E$(e)&&!lf(e)},vi=function(e){return bt(e)||$p(e)},_$=0,Yp=function(e){var n=++_$;return"".concat(e||"").concat(n)},ou=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(e)&&!$p(e))return r;var a;if(Fc(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return lf(a)&&(a=r),i&&a>n&&(a=n),a},Bl=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},A$=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},bo=function(e,n){return bt(e)&&bt(n)?function(r){return e+r*(n-e)}:function(){return n}};function eg(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ao(r,e))===n})}function yd(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function U_(t){"@babel/helpers - typeof";return U_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U_(t)}var T$=["viewBox","children"],S$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iD=["points","pathLength"],fb={svg:T$,polygon:iD,polyline:iD},uS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tg=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(le.isValidElement(e)&&(r=e.props),!sf(r))return null;var i={};return Object.keys(r).forEach(function(a){uS.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},C$=function(e,n,r){return function(i){return e(n,r,i),null}},ng=function(e,n,r){if(!sf(e)||U_(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];uS.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=C$(o,n,r))}),i},I$=["children"],N$=["children"];function aD(t,e){if(t==null)return{};var n=R$(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function R$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function V_(t){"@babel/helpers - typeof";return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(t)}var oD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},zs=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},sD=null,hb=null,dS=function t(e){if(e===sD&&Array.isArray(hb))return hb;var n=[];return le.Children.forEach(e,function(r){Rn(r)||(x$.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),hb=n,sD=e,n};function qo(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return zs(i)}):r=[zs(e)],dS(t).forEach(function(i){var a=Ao(i,"type.displayName")||Ao(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Xa(t,e){var n=qo(t,e);return n&&n[0]}var lD=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!bt(r)||r<=0||!bt(i)||i<=0)},M$=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],D$=function(e){return e&&e.type&&$p(e.type)&&M$.indexOf(e.type)>=0},O$=function(e){return e&&V_(e)==="object"&&"clipDot"in e},P$=function(e,n,r,i){var a,o=(a=fb==null?void 0:fb[i])!==null&&a!==void 0?a:[];return!cn(e)&&(i&&o.includes(n)||S$.includes(n))||r&&uS.includes(n)},bn=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(le.isValidElement(e)&&(i=e.props),!sf(i))return null;var a={};return Object.keys(i).forEach(function(o){var u;P$((u=i)===null||u===void 0?void 0:u[o],o,n,r)&&(a[o]=i[o])}),a},F_=function t(e,n){if(e===n)return!0;var r=le.Children.count(e);if(r!==le.Children.count(n))return!1;if(r===0)return!0;if(r===1)return cD(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!cD(a,o))return!1}return!0},cD=function(e,n){if(Rn(e)&&Rn(n))return!0;if(!Rn(e)&&!Rn(n)){var r=e.props||{},i=r.children,a=aD(r,I$),o=n.props||{},u=o.children,h=aD(o,N$);return i&&u?yd(a,h)&&F_(i,u):!i&&!u?yd(a,h):!1}return!1},uD=function(e,n){var r=[],i={};return dS(e).forEach(function(a,o){if(D$(a))r.push(a);else if(a){var u=zs(a.type),h=n[u]||{},f=h.handler,g=h.once;if(f&&(!g||!i[u])){var v=f(a,u,o);r.push(v),i[u]=!0}}}),r},k$=function(e){var n=e&&e.type;return n&&oD[n]?oD[n]:null},L$=function(e,n){return dS(n).indexOf(e)},B$=["children","width","height","viewBox","className","style","title","desc"];function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q_.apply(this,arguments)}function j$(t,e){if(t==null)return{};var n=U$(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function U$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function z_(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,u=t.title,h=t.desc,f=j$(t,B$),g=i||{width:n,height:r,x:0,y:0},v=Fn("recharts-surface",a);return we.createElement("svg",q_({},bn(f,!0,"svg"),{className:v,width:n,height:r,style:o,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height)}),we.createElement("title",null,u),we.createElement("desc",null,h),e)}var V$=["children","className"];function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G_.apply(this,arguments)}function F$(t,e){if(t==null)return{};var n=q$(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Vr=we.forwardRef(function(t,e){var n=t.children,r=t.className,i=F$(t,V$),a=Fn("recharts-layer",r);return we.createElement("g",G_({className:a},bn(i,!0),{ref:e}),n)}),Gs=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},pb,dD;function z$(){if(dD)return pb;dD=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+n];return o}return pb=t,pb}var mb,fD;function G$(){if(fD)return mb;fD=1;var t=z$();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return mb=e,mb}var gb,hD;function JL(){if(hD)return gb;hD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="\\u200d",u=RegExp("["+o+t+i+a+"]");function h(f){return u.test(f)}return gb=h,gb}var yb,pD;function H$(){if(pD)return yb;pD=1;function t(e){return e.split("")}return yb=t,yb}var xb,mD;function $$(){if(mD)return xb;mD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",u="["+i+"]",h="\\ud83c[\\udffb-\\udfff]",f="(?:"+u+"|"+h+")",g="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",N="\\u200d",P=f+"?",O="["+a+"]?",R="(?:"+N+"(?:"+[g,v,A].join("|")+")"+O+P+")*",L=O+P+R,U="(?:"+[g+u+"?",u,v,A,o].join("|")+")",F=RegExp(h+"(?="+h+")|"+U+L,"g");function q(H){return H.match(F)||[]}return xb=q,xb}var vb,gD;function Y$(){if(gD)return vb;gD=1;var t=H$(),e=JL(),n=$$();function r(i){return e(i)?n(i):t(i)}return vb=r,vb}var bb,yD;function K$(){if(yD)return bb;yD=1;var t=G$(),e=JL(),n=Y$(),r=KL();function i(a){return function(o){o=r(o);var u=e(o)?n(o):void 0,h=u?u[0]:o.charAt(0),f=u?t(u,1).join(""):o.slice(1);return h[a]()+f}}return bb=i,bb}var wb,xD;function W$(){if(xD)return wb;xD=1;var t=K$(),e=t("toUpperCase");return wb=e,wb}var X$=W$();const Ny=pr(X$);function wr(t){return function(){return t}}const ZL=Math.cos,rg=Math.sin,$o=Math.sqrt,ig=Math.PI,Ry=2*ig,H_=Math.PI,$_=2*H_,Pc=1e-6,Q$=$_-Pc;function e9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function J$(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return e9;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Z${constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?e9:J$(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,h=r-e,f=i-n,g=o-e,v=u-n,A=g*g+v*v;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(A>Pc)if(!(Math.abs(v*h-f*g)>Pc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let N=r-o,P=i-u,O=h*h+f*f,R=N*N+P*P,L=Math.sqrt(O),U=Math.sqrt(A),F=a*Math.tan((H_-Math.acos((O+A-R)/(2*L*U)))/2),q=F/U,H=F/L;Math.abs(q-1)>Pc&&this._append`L${e+q*g},${n+q*v}`,this._append`A${a},${a},0,0,${+(v*N>g*P)},${this._x1=e+H*h},${this._y1=n+H*f}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),h=r*Math.sin(i),f=e+u,g=n+h,v=1^o,A=o?i-a:a-i;this._x1===null?this._append`M${f},${g}`:(Math.abs(this._x1-f)>Pc||Math.abs(this._y1-g)>Pc)&&this._append`L${f},${g}`,r&&(A<0&&(A=A%$_+$_),A>Q$?this._append`A${r},${r},0,1,${v},${e-u},${n-h}A${r},${r},0,1,${v},${this._x1=f},${this._y1=g}`:A>Pc&&this._append`A${r},${r},0,${+(A>=H_)},${v},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function fS(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Z$(e)}function hS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function t9(t){this._context=t}t9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function My(t){return new t9(t)}function n9(t){return t[0]}function r9(t){return t[1]}function i9(t,e){var n=wr(!0),r=null,i=My,a=null,o=fS(u);t=typeof t=="function"?t:t===void 0?n9:wr(t),e=typeof e=="function"?e:e===void 0?r9:wr(e);function u(h){var f,g=(h=hS(h)).length,v,A=!1,N;for(r==null&&(a=i(N=o())),f=0;f<=g;++f)!(f<g&&n(v=h[f],f,h))===A&&((A=!A)?a.lineStart():a.lineEnd()),A&&a.point(+t(v,f,h),+e(v,f,h));if(N)return a=null,N+""||null}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:wr(+h),u):t},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:wr(+h),u):e},u.defined=function(h){return arguments.length?(n=typeof h=="function"?h:wr(!!h),u):n},u.curve=function(h){return arguments.length?(i=h,r!=null&&(a=i(r)),u):i},u.context=function(h){return arguments.length?(h==null?r=a=null:a=i(r=h),u):r},u}function um(t,e,n){var r=null,i=wr(!0),a=null,o=My,u=null,h=fS(f);t=typeof t=="function"?t:t===void 0?n9:wr(+t),e=typeof e=="function"?e:wr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?r9:wr(+n);function f(v){var A,N,P,O=(v=hS(v)).length,R,L=!1,U,F=new Array(O),q=new Array(O);for(a==null&&(u=o(U=h())),A=0;A<=O;++A){if(!(A<O&&i(R=v[A],A,v))===L)if(L=!L)N=A,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),P=A-1;P>=N;--P)u.point(F[P],q[P]);u.lineEnd(),u.areaEnd()}L&&(F[A]=+t(R,A,v),q[A]=+e(R,A,v),u.point(r?+r(R,A,v):F[A],n?+n(R,A,v):q[A]))}if(U)return u=null,U+""||null}function g(){return i9().defined(i).curve(o).context(a)}return f.x=function(v){return arguments.length?(t=typeof v=="function"?v:wr(+v),r=null,f):t},f.x0=function(v){return arguments.length?(t=typeof v=="function"?v:wr(+v),f):t},f.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:wr(+v),f):r},f.y=function(v){return arguments.length?(e=typeof v=="function"?v:wr(+v),n=null,f):e},f.y0=function(v){return arguments.length?(e=typeof v=="function"?v:wr(+v),f):e},f.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:wr(+v),f):n},f.lineX0=f.lineY0=function(){return g().x(t).y(e)},f.lineY1=function(){return g().x(t).y(n)},f.lineX1=function(){return g().x(r).y(e)},f.defined=function(v){return arguments.length?(i=typeof v=="function"?v:wr(!!v),f):i},f.curve=function(v){return arguments.length?(o=v,a!=null&&(u=o(a)),f):o},f.context=function(v){return arguments.length?(v==null?a=u=null:u=o(a=v),f):a},f}class a9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function eY(t){return new a9(t,!0)}function tY(t){return new a9(t,!1)}const pS={draw(t,e){const n=$o(e/ig);t.moveTo(n,0),t.arc(0,0,n,0,Ry)}},nY={draw(t,e){const n=$o(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},o9=$o(1/3),rY=o9*2,iY={draw(t,e){const n=$o(e/rY),r=n*o9;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},aY={draw(t,e){const n=$o(e),r=-n/2;t.rect(r,r,n,n)}},oY=.8908130915292852,s9=rg(ig/10)/rg(7*ig/10),sY=rg(Ry/10)*s9,lY=-ZL(Ry/10)*s9,cY={draw(t,e){const n=$o(e*oY),r=sY*n,i=lY*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=Ry*a/5,u=ZL(o),h=rg(o);t.lineTo(h*n,-u*n),t.lineTo(u*r-h*i,h*r+u*i)}t.closePath()}},Eb=$o(3),uY={draw(t,e){const n=-$o(e/(Eb*3));t.moveTo(0,n*2),t.lineTo(-Eb*n,-n),t.lineTo(Eb*n,-n),t.closePath()}},yo=-.5,xo=$o(3)/2,Y_=1/$o(12),dY=(Y_/2+1)*3,fY={draw(t,e){const n=$o(e/dY),r=n/2,i=n*Y_,a=r,o=n*Y_+n,u=-a,h=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(u,h),t.lineTo(yo*r-xo*i,xo*r+yo*i),t.lineTo(yo*a-xo*o,xo*a+yo*o),t.lineTo(yo*u-xo*h,xo*u+yo*h),t.lineTo(yo*r+xo*i,yo*i-xo*r),t.lineTo(yo*a+xo*o,yo*o-xo*a),t.lineTo(yo*u+xo*h,yo*h-xo*u),t.closePath()}};function hY(t,e){let n=null,r=fS(i);t=typeof t=="function"?t:wr(t||pS),e=typeof e=="function"?e:wr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:wr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:wr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function ag(){}function og(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function l9(t){this._context=t}l9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:og(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:og(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pY(t){return new l9(t)}function c9(t){this._context=t}c9.prototype={areaStart:ag,areaEnd:ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:og(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mY(t){return new c9(t)}function u9(t){this._context=t}u9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:og(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gY(t){return new u9(t)}function d9(t){this._context=t}d9.prototype={areaStart:ag,areaEnd:ag,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yY(t){return new d9(t)}function vD(t){return t<0?-1:1}function bD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(vD(a)+vD(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function wD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _b(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,o-u*n,a,o)}function sg(t){this._context=t}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_b(this,this._t0,wD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_b(this,wD(this,n=bD(this,t,e)),n);break;default:_b(this,this._t0,n=bD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function f9(t){this._context=new h9(t)}(f9.prototype=Object.create(sg.prototype)).point=function(t,e){sg.prototype.point.call(this,e,t)};function h9(t){this._context=t}h9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function xY(t){return new sg(t)}function vY(t){return new f9(t)}function p9(t){this._context=t}p9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=ED(t),i=ED(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ED(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function bY(t){return new p9(t)}function Dy(t,e){this._context=t,this._t=e}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function wY(t){return new Dy(t,.5)}function EY(t){return new Dy(t,0)}function _Y(t){return new Dy(t,1)}function Dd(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,u=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function K_(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function AY(t,e){return t[e]}function TY(t){const e=[];return e.key=t,e}function SY(){var t=wr([]),e=K_,n=Dd,r=AY;function i(a){var o=Array.from(t.apply(this,arguments),TY),u,h=o.length,f=-1,g;for(const v of a)for(u=0,++f;u<h;++u)(o[u][f]=[0,+r(v,o[u].key,f,a)]).data=v;for(u=0,g=hS(e(o));u<h;++u)o[g[u]].index=u;return n(o,g),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:wr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:wr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?K_:typeof a=="function"?a:wr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Dd,i):n},i}function CY(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Dd(t,e)}}function IY(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,u=0;o<i;++o)u+=t[o][n][1]||0;r[n][1]+=r[n][0]=-u/2}Dd(t,e)}}function NY(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var u=0,h=0,f=0;u<o;++u){for(var g=t[e[u]],v=g[r][1]||0,A=g[r-1][1]||0,N=(v-A)/2,P=0;P<u;++P){var O=t[e[P]],R=O[r][1]||0,L=O[r-1][1]||0;N+=R-L}h+=v,f+=N*v}i[r-1][1]+=i[r-1][0]=n,h&&(n-=f/h)}i[r-1][1]+=i[r-1][0]=n,Dd(t,e)}}function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}var RY=["type","size","sizeType"];function W_(){return W_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W_.apply(this,arguments)}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){MY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MY(t,e,n){return e=DY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DY(t){var e=OY(t,"string");return ep(e)=="symbol"?e:e+""}function OY(t,e){if(ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PY(t,e){if(t==null)return{};var n=kY(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var m9={symbolCircle:pS,symbolCross:nY,symbolDiamond:iY,symbolSquare:aY,symbolStar:cY,symbolTriangle:uY,symbolWye:fY},LY=Math.PI/180,BY=function(e){var n="symbol".concat(Ny(e));return m9[n]||pS},jY=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*LY;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},UY=function(e,n){m9["symbol".concat(Ny(e))]=n},mS=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,u=o===void 0?"area":o,h=PY(e,RY),f=AD(AD({},h),{},{type:r,size:a,sizeType:u}),g=function(){var R=BY(r),L=hY().type(R).size(jY(a,u,r));return L()},v=f.className,A=f.cx,N=f.cy,P=bn(f,!0);return A===+A&&N===+N&&a===+a?we.createElement("path",W_({},P,{className:Fn("recharts-symbols",v),transform:"translate(".concat(A,", ").concat(N,")"),d:g()})):null};mS.registerSymbol=UY;function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}function X_(){return X_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X_.apply(this,arguments)}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){tp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y9(r.key),r)}}function zY(t,e,n){return e&&qY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GY(t,e,n){return e=lg(e),HY(t,g9()?Reflect.construct(e,n||[],lg(t).constructor):e.apply(t,n))}function HY(t,e){if(e&&(Od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Y(t)}function $Y(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g9=function(){return!!t})()}function lg(t){return lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lg(t)}function YY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q_(t,e)}function Q_(t,e){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q_(t,e)}function tp(t,e,n){return e=y9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y9(t){var e=KY(t,"string");return Od(e)=="symbol"?e:e+""}function KY(t,e){if(Od(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vo=32,gS=(function(t){function e(){return FY(this,e),GY(this,e,arguments)}return YY(e,t),zY(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=vo/2,o=vo/6,u=vo/3,h=r.inactive?i:r.color;if(r.type==="plainline")return we.createElement("line",{strokeWidth:4,fill:"none",stroke:h,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:vo,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return we.createElement("path",{strokeWidth:4,fill:"none",stroke:h,d:"M0,".concat(a,"h").concat(u,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*u,",").concat(a,`
            H`).concat(vo,"M").concat(2*u,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(u,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return we.createElement("path",{stroke:"none",fill:h,d:"M0,".concat(vo/8,"h").concat(vo,"v").concat(vo*3/4,"h").concat(-vo,"z"),className:"recharts-legend-icon"});if(we.isValidElement(r.legendIcon)){var f=VY({},r);return delete f.legendIcon,we.cloneElement(r.legendIcon,f)}return we.createElement(mS,{fill:h,cx:a,cy:a,size:vo,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,u=i.layout,h=i.formatter,f=i.inactiveColor,g={x:0,y:0,width:vo,height:vo},v={display:u==="horizontal"?"inline-block":"block",marginRight:10},A={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(N,P){var O=N.formatter||h,R=Fn(tp(tp({"recharts-legend-item":!0},"legend-item-".concat(P),!0),"inactive",N.inactive));if(N.type==="none")return null;var L=cn(N.value)?null:N.value;Gs(!cn(N.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var U=N.inactive?f:N.color;return we.createElement("li",X_({className:R,style:v,key:"legend-item-".concat(P)},ng(r.props,N,P)),we.createElement(z_,{width:o,height:o,viewBox:g,style:A},r.renderIcon(N)),we.createElement("span",{className:"recharts-legend-item-text",style:{color:U}},O?O(L,N,P):L))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var u={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return we.createElement("ul",{className:"recharts-default-legend",style:u},this.renderItems())}}])})(le.PureComponent);tp(gS,"displayName","Legend");tp(gS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ab,SD;function WY(){if(SD)return Ab;SD=1;var t=Sy();function e(){this.__data__=new t,this.size=0}return Ab=e,Ab}var Tb,CD;function XY(){if(CD)return Tb;CD=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Tb=t,Tb}var Sb,ID;function QY(){if(ID)return Sb;ID=1;function t(e){return this.__data__.get(e)}return Sb=t,Sb}var Cb,ND;function JY(){if(ND)return Cb;ND=1;function t(e){return this.__data__.has(e)}return Cb=t,Cb}var Ib,RD;function ZY(){if(RD)return Ib;RD=1;var t=Sy(),e=oS(),n=sS(),r=200;function i(a,o){var u=this.__data__;if(u instanceof t){var h=u.__data__;if(!e||h.length<r-1)return h.push([a,o]),this.size=++u.size,this;u=this.__data__=new n(h)}return u.set(a,o),this.size=u.size,this}return Ib=i,Ib}var Nb,MD;function x9(){if(MD)return Nb;MD=1;var t=Sy(),e=WY(),n=XY(),r=QY(),i=JY(),a=ZY();function o(u){var h=this.__data__=new t(u);this.size=h.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,Nb=o,Nb}var Rb,DD;function eK(){if(DD)return Rb;DD=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Rb=e,Rb}var Mb,OD;function tK(){if(OD)return Mb;OD=1;function t(e){return this.__data__.has(e)}return Mb=t,Mb}var Db,PD;function v9(){if(PD)return Db;PD=1;var t=sS(),e=eK(),n=tK();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Db=r,Db}var Ob,kD;function b9(){if(kD)return Ob;kD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return Ob=t,Ob}var Pb,LD;function w9(){if(LD)return Pb;LD=1;function t(e,n){return e.has(n)}return Pb=t,Pb}var kb,BD;function E9(){if(BD)return kb;BD=1;var t=v9(),e=b9(),n=w9(),r=1,i=2;function a(o,u,h,f,g,v){var A=h&r,N=o.length,P=u.length;if(N!=P&&!(A&&P>N))return!1;var O=v.get(o),R=v.get(u);if(O&&R)return O==u&&R==o;var L=-1,U=!0,F=h&i?new t:void 0;for(v.set(o,u),v.set(u,o);++L<N;){var q=o[L],H=u[L];if(f)var G=A?f(H,q,L,u,o,v):f(q,H,L,o,u,v);if(G!==void 0){if(G)continue;U=!1;break}if(F){if(!e(u,function(B,z){if(!n(F,z)&&(q===B||g(q,B,h,f,v)))return F.push(z)})){U=!1;break}}else if(!(q===H||g(q,H,h,f,v))){U=!1;break}}return v.delete(o),v.delete(u),U}return kb=a,kb}var Lb,jD;function nK(){if(jD)return Lb;jD=1;var t=fs(),e=t.Uint8Array;return Lb=e,Lb}var Bb,UD;function rK(){if(UD)return Bb;UD=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return Bb=t,Bb}var jb,VD;function yS(){if(VD)return jb;VD=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return jb=t,jb}var Ub,FD;function iK(){if(FD)return Ub;FD=1;var t=Hp(),e=nK(),n=aS(),r=E9(),i=rK(),a=yS(),o=1,u=2,h="[object Boolean]",f="[object Date]",g="[object Error]",v="[object Map]",A="[object Number]",N="[object RegExp]",P="[object Set]",O="[object String]",R="[object Symbol]",L="[object ArrayBuffer]",U="[object DataView]",F=t?t.prototype:void 0,q=F?F.valueOf:void 0;function H(G,B,z,V,ee,Q,X){switch(z){case U:if(G.byteLength!=B.byteLength||G.byteOffset!=B.byteOffset)return!1;G=G.buffer,B=B.buffer;case L:return!(G.byteLength!=B.byteLength||!Q(new e(G),new e(B)));case h:case f:case A:return n(+G,+B);case g:return G.name==B.name&&G.message==B.message;case N:case O:return G==B+"";case v:var K=i;case P:var ge=V&o;if(K||(K=a),G.size!=B.size&&!ge)return!1;var re=X.get(G);if(re)return re==B;V|=u,X.set(G,B);var te=r(K(G),K(B),V,ee,Q,X);return X.delete(G),te;case R:if(q)return q.call(G)==q.call(B)}return!1}return Ub=H,Ub}var Vb,qD;function _9(){if(qD)return Vb;qD=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return Vb=t,Vb}var Fb,zD;function aK(){if(zD)return Fb;zD=1;var t=_9(),e=La();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return Fb=n,Fb}var qb,GD;function oK(){if(GD)return qb;GD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var u=e[r];n(u,r,e)&&(o[a++]=u)}return o}return qb=t,qb}var zb,HD;function sK(){if(HD)return zb;HD=1;function t(){return[]}return zb=t,zb}var Gb,$D;function lK(){if($D)return Gb;$D=1;var t=oK(),e=sK(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(u){return r.call(o,u)}))}:e;return Gb=a,Gb}var Hb,YD;function cK(){if(YD)return Hb;YD=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Hb=t,Hb}var $b,KD;function uK(){if(KD)return $b;KD=1;var t=el(),e=tl(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return $b=r,$b}var Yb,WD;function xS(){if(WD)return Yb;WD=1;var t=uK(),e=tl(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Yb=a,Yb}var Sh={exports:{}},Kb,XD;function dK(){if(XD)return Kb;XD=1;function t(){return!1}return Kb=t,Kb}Sh.exports;var QD;function A9(){return QD||(QD=1,(function(t,e){var n=fs(),r=dK(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,u=o?n.Buffer:void 0,h=u?u.isBuffer:void 0,f=h||r;t.exports=f})(Sh,Sh.exports)),Sh.exports}var Wb,JD;function vS(){if(JD)return Wb;JD=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Wb=n,Wb}var Xb,ZD;function bS(){if(ZD)return Xb;ZD=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Xb=e,Xb}var Qb,eO;function fK(){if(eO)return Qb;eO=1;var t=el(),e=bS(),n=tl(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",u="[object Error]",h="[object Function]",f="[object Map]",g="[object Number]",v="[object Object]",A="[object RegExp]",N="[object Set]",P="[object String]",O="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",U="[object Float32Array]",F="[object Float64Array]",q="[object Int8Array]",H="[object Int16Array]",G="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",V="[object Uint16Array]",ee="[object Uint32Array]",Q={};Q[U]=Q[F]=Q[q]=Q[H]=Q[G]=Q[B]=Q[z]=Q[V]=Q[ee]=!0,Q[r]=Q[i]=Q[R]=Q[a]=Q[L]=Q[o]=Q[u]=Q[h]=Q[f]=Q[g]=Q[v]=Q[A]=Q[N]=Q[P]=Q[O]=!1;function X(K){return n(K)&&e(K.length)&&!!Q[t(K)]}return Qb=X,Qb}var Jb,tO;function T9(){if(tO)return Jb;tO=1;function t(e){return function(n){return e(n)}}return Jb=t,Jb}var Ch={exports:{}};Ch.exports;var nO;function hK(){return nO||(nO=1,(function(t,e){var n=HL(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,u=(function(){try{var h=i&&i.require&&i.require("util").types;return h||o&&o.binding&&o.binding("util")}catch{}})();t.exports=u})(Ch,Ch.exports)),Ch.exports}var Zb,rO;function S9(){if(rO)return Zb;rO=1;var t=fK(),e=T9(),n=hK(),r=n&&n.isTypedArray,i=r?e(r):t;return Zb=i,Zb}var ew,iO;function pK(){if(iO)return ew;iO=1;var t=cK(),e=xS(),n=La(),r=A9(),i=vS(),a=S9(),o=Object.prototype,u=o.hasOwnProperty;function h(f,g){var v=n(f),A=!v&&e(f),N=!v&&!A&&r(f),P=!v&&!A&&!N&&a(f),O=v||A||N||P,R=O?t(f.length,String):[],L=R.length;for(var U in f)(g||u.call(f,U))&&!(O&&(U=="length"||N&&(U=="offset"||U=="parent")||P&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||i(U,L)))&&R.push(U);return R}return ew=h,ew}var tw,aO;function mK(){if(aO)return tw;aO=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return tw=e,tw}var nw,oO;function C9(){if(oO)return nw;oO=1;function t(e,n){return function(r){return e(n(r))}}return nw=t,nw}var rw,sO;function gK(){if(sO)return rw;sO=1;var t=C9(),e=t(Object.keys,Object);return rw=e,rw}var iw,lO;function yK(){if(lO)return iw;lO=1;var t=mK(),e=gK(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var u in Object(a))r.call(a,u)&&u!="constructor"&&o.push(u);return o}return iw=i,iw}var aw,cO;function Kp(){if(cO)return aw;cO=1;var t=iS(),e=bS();function n(r){return r!=null&&e(r.length)&&!t(r)}return aw=n,aw}var ow,uO;function Oy(){if(uO)return ow;uO=1;var t=pK(),e=yK(),n=Kp();function r(i){return n(i)?t(i):e(i)}return ow=r,ow}var sw,dO;function xK(){if(dO)return sw;dO=1;var t=aK(),e=lK(),n=Oy();function r(i){return t(i,n,e)}return sw=r,sw}var lw,fO;function vK(){if(fO)return lw;fO=1;var t=xK(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,u,h,f,g){var v=u&e,A=t(a),N=A.length,P=t(o),O=P.length;if(N!=O&&!v)return!1;for(var R=N;R--;){var L=A[R];if(!(v?L in o:r.call(o,L)))return!1}var U=g.get(a),F=g.get(o);if(U&&F)return U==o&&F==a;var q=!0;g.set(a,o),g.set(o,a);for(var H=v;++R<N;){L=A[R];var G=a[L],B=o[L];if(h)var z=v?h(B,G,L,o,a,g):h(G,B,L,a,o,g);if(!(z===void 0?G===B||f(G,B,u,h,g):z)){q=!1;break}H||(H=L=="constructor")}if(q&&!H){var V=a.constructor,ee=o.constructor;V!=ee&&"constructor"in a&&"constructor"in o&&!(typeof V=="function"&&V instanceof V&&typeof ee=="function"&&ee instanceof ee)&&(q=!1)}return g.delete(a),g.delete(o),q}return lw=i,lw}var cw,hO;function bK(){if(hO)return cw;hO=1;var t=hu(),e=fs(),n=t(e,"DataView");return cw=n,cw}var uw,pO;function wK(){if(pO)return uw;pO=1;var t=hu(),e=fs(),n=t(e,"Promise");return uw=n,uw}var dw,mO;function I9(){if(mO)return dw;mO=1;var t=hu(),e=fs(),n=t(e,"Set");return dw=n,dw}var fw,gO;function EK(){if(gO)return fw;gO=1;var t=hu(),e=fs(),n=t(e,"WeakMap");return fw=n,fw}var hw,yO;function _K(){if(yO)return hw;yO=1;var t=bK(),e=oS(),n=wK(),r=I9(),i=EK(),a=el(),o=$L(),u="[object Map]",h="[object Object]",f="[object Promise]",g="[object Set]",v="[object WeakMap]",A="[object DataView]",N=o(t),P=o(e),O=o(n),R=o(r),L=o(i),U=a;return(t&&U(new t(new ArrayBuffer(1)))!=A||e&&U(new e)!=u||n&&U(n.resolve())!=f||r&&U(new r)!=g||i&&U(new i)!=v)&&(U=function(F){var q=a(F),H=q==h?F.constructor:void 0,G=H?o(H):"";if(G)switch(G){case N:return A;case P:return u;case O:return f;case R:return g;case L:return v}return q}),hw=U,hw}var pw,xO;function AK(){if(xO)return pw;xO=1;var t=x9(),e=E9(),n=iK(),r=vK(),i=_K(),a=La(),o=A9(),u=S9(),h=1,f="[object Arguments]",g="[object Array]",v="[object Object]",A=Object.prototype,N=A.hasOwnProperty;function P(O,R,L,U,F,q){var H=a(O),G=a(R),B=H?g:i(O),z=G?g:i(R);B=B==f?v:B,z=z==f?v:z;var V=B==v,ee=z==v,Q=B==z;if(Q&&o(O)){if(!o(R))return!1;H=!0,V=!1}if(Q&&!V)return q||(q=new t),H||u(O)?e(O,R,L,U,F,q):n(O,R,B,L,U,F,q);if(!(L&h)){var X=V&&N.call(O,"__wrapped__"),K=ee&&N.call(R,"__wrapped__");if(X||K){var ge=X?O.value():O,re=K?R.value():R;return q||(q=new t),F(ge,re,L,U,q)}}return Q?(q||(q=new t),r(O,R,L,U,F,q)):!1}return pw=P,pw}var mw,vO;function wS(){if(vO)return mw;vO=1;var t=AK(),e=tl();function n(r,i,a,o,u){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,u)}return mw=n,mw}var gw,bO;function TK(){if(bO)return gw;bO=1;var t=x9(),e=wS(),n=1,r=2;function i(a,o,u,h){var f=u.length,g=f,v=!h;if(a==null)return!g;for(a=Object(a);f--;){var A=u[f];if(v&&A[2]?A[1]!==a[A[0]]:!(A[0]in a))return!1}for(;++f<g;){A=u[f];var N=A[0],P=a[N],O=A[1];if(v&&A[2]){if(P===void 0&&!(N in a))return!1}else{var R=new t;if(h)var L=h(P,O,N,a,o,R);if(!(L===void 0?e(O,P,n|r,h,R):L))return!1}}return!0}return gw=i,gw}var yw,wO;function N9(){if(wO)return yw;wO=1;var t=nc();function e(n){return n===n&&!t(n)}return yw=e,yw}var xw,EO;function SK(){if(EO)return xw;EO=1;var t=N9(),e=Oy();function n(r){for(var i=e(r),a=i.length;a--;){var o=i[a],u=r[o];i[a]=[o,u,t(u)]}return i}return xw=n,xw}var vw,_O;function R9(){if(_O)return vw;_O=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return vw=t,vw}var bw,AO;function CK(){if(AO)return bw;AO=1;var t=TK(),e=SK(),n=R9();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return bw=r,bw}var ww,TO;function IK(){if(TO)return ww;TO=1;function t(e,n){return e!=null&&n in Object(e)}return ww=t,ww}var Ew,SO;function NK(){if(SO)return Ew;SO=1;var t=WL(),e=xS(),n=La(),r=vS(),i=bS(),a=Iy();function o(u,h,f){h=t(h,u);for(var g=-1,v=h.length,A=!1;++g<v;){var N=a(h[g]);if(!(A=u!=null&&f(u,N)))break;u=u[N]}return A||++g!=v?A:(v=u==null?0:u.length,!!v&&i(v)&&r(N,v)&&(n(u)||e(u)))}return Ew=o,Ew}var _w,CO;function RK(){if(CO)return _w;CO=1;var t=IK(),e=NK();function n(r,i){return r!=null&&e(r,i,t)}return _w=n,_w}var Aw,IO;function MK(){if(IO)return Aw;IO=1;var t=wS(),e=XL(),n=RK(),r=rS(),i=N9(),a=R9(),o=Iy(),u=1,h=2;function f(g,v){return r(g)&&i(v)?a(o(g),v):function(A){var N=e(A,g);return N===void 0&&N===v?n(A,g):t(v,N,u|h)}}return Aw=f,Aw}var Tw,NO;function cf(){if(NO)return Tw;NO=1;function t(e){return e}return Tw=t,Tw}var Sw,RO;function DK(){if(RO)return Sw;RO=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Sw=t,Sw}var Cw,MO;function OK(){if(MO)return Cw;MO=1;var t=cS();function e(n){return function(r){return t(r,n)}}return Cw=e,Cw}var Iw,DO;function PK(){if(DO)return Iw;DO=1;var t=DK(),e=OK(),n=rS(),r=Iy();function i(a){return n(a)?t(r(a)):e(a)}return Iw=i,Iw}var Nw,OO;function rc(){if(OO)return Nw;OO=1;var t=CK(),e=MK(),n=cf(),r=La(),i=PK();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return Nw=a,Nw}var Rw,PO;function M9(){if(PO)return Rw;PO=1;function t(e,n,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return Rw=t,Rw}var Mw,kO;function kK(){if(kO)return Mw;kO=1;function t(e){return e!==e}return Mw=t,Mw}var Dw,LO;function LK(){if(LO)return Dw;LO=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return Dw=t,Dw}var Ow,BO;function BK(){if(BO)return Ow;BO=1;var t=M9(),e=kK(),n=LK();function r(i,a,o){return a===a?n(i,a,o):t(i,e,o)}return Ow=r,Ow}var Pw,jO;function jK(){if(jO)return Pw;jO=1;var t=BK();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return Pw=e,Pw}var kw,UO;function UK(){if(UO)return kw;UO=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return kw=t,kw}var Lw,VO;function VK(){if(VO)return Lw;VO=1;function t(){}return Lw=t,Lw}var Bw,FO;function FK(){if(FO)return Bw;FO=1;var t=I9(),e=VK(),n=yS(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return Bw=i,Bw}var jw,qO;function qK(){if(qO)return jw;qO=1;var t=v9(),e=jK(),n=UK(),r=w9(),i=FK(),a=yS(),o=200;function u(h,f,g){var v=-1,A=e,N=h.length,P=!0,O=[],R=O;if(g)P=!1,A=n;else if(N>=o){var L=f?null:i(h);if(L)return a(L);P=!1,A=r,R=new t}else R=f?[]:O;e:for(;++v<N;){var U=h[v],F=f?f(U):U;if(U=g||U!==0?U:0,P&&F===F){for(var q=R.length;q--;)if(R[q]===F)continue e;f&&R.push(F),O.push(U)}else A(R,F,g)||(R!==O&&R.push(F),O.push(U))}return O}return jw=u,jw}var Uw,zO;function zK(){if(zO)return Uw;zO=1;var t=rc(),e=qK();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return Uw=n,Uw}var GK=zK();const GO=pr(GK);function D9(t,e,n){return e===!0?GO(t,n):cn(e)?GO(t,e):t}function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(t)}var HK=["ref"];function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){Py(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P9(r.key),r)}}function YK(t,e,n){return e&&$O(t.prototype,e),n&&$O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KK(t,e,n){return e=cg(e),WK(t,O9()?Reflect.construct(e,n||[],cg(t).constructor):e.apply(t,n))}function WK(t,e){if(e&&(Pd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XK(t)}function XK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O9=function(){return!!t})()}function cg(t){return cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cg(t)}function QK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J_(t,e)}function J_(t,e){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J_(t,e)}function Py(t,e,n){return e=P9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P9(t){var e=JK(t,"string");return Pd(e)=="symbol"?e:e+""}function JK(t,e){if(Pd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ZK(t,e){if(t==null)return{};var n=eW(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tW(t){return t.value}function nW(t,e){if(we.isValidElement(t))return we.cloneElement(t,e);if(typeof t=="function")return we.createElement(t,e);e.ref;var n=ZK(e,HK);return we.createElement(gS,n)}var YO=1,xd=(function(t){function e(){var n;$K(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=KK(this,e,[].concat(i)),Py(n,"lastBoundingBox",{width:-1,height:-1}),n}return QK(e,t),YK(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>YO||Math.abs(i.height-this.lastBoundingBox.height)>YO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ls({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,u=i.verticalAlign,h=i.margin,f=i.chartWidth,g=i.chartHeight,v,A;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var N=this.getBBoxSnapshot();v={left:((f||0)-N.width)/2}}else v=o==="right"?{right:h&&h.right||0}:{left:h&&h.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(u==="middle"){var P=this.getBBoxSnapshot();A={top:((g||0)-P.height)/2}}else A=u==="bottom"?{bottom:h&&h.bottom||0}:{top:h&&h.top||0};return Ls(Ls({},v),A)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,u=i.height,h=i.wrapperStyle,f=i.payloadUniqBy,g=i.payload,v=Ls(Ls({position:"absolute",width:o||"auto",height:u||"auto"},this.getDefaultPosition(h)),h);return we.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:function(N){r.wrapperNode=N}},nW(a,Ls(Ls({},this.props),{},{payload:D9(g,f,tW)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Ls(Ls({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&bt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])})(le.PureComponent);Py(xd,"displayName","Legend");Py(xd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Vw,KO;function rW(){if(KO)return Vw;KO=1;var t=Hp(),e=xS(),n=La(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return Vw=i,Vw}var Fw,WO;function k9(){if(WO)return Fw;WO=1;var t=_9(),e=rW();function n(r,i,a,o,u){var h=-1,f=r.length;for(a||(a=e),u||(u=[]);++h<f;){var g=r[h];i>0&&a(g)?i>1?n(g,i-1,a,o,u):t(u,g):o||(u[u.length]=g)}return u}return Fw=n,Fw}var qw,XO;function iW(){if(XO)return qw;XO=1;function t(e){return function(n,r,i){for(var a=-1,o=Object(n),u=i(n),h=u.length;h--;){var f=u[e?h:++a];if(r(o[f],f,o)===!1)break}return n}}return qw=t,qw}var zw,QO;function aW(){if(QO)return zw;QO=1;var t=iW(),e=t();return zw=e,zw}var Gw,JO;function L9(){if(JO)return Gw;JO=1;var t=aW(),e=Oy();function n(r,i){return r&&t(r,i,e)}return Gw=n,Gw}var Hw,ZO;function oW(){if(ZO)return Hw;ZO=1;var t=Kp();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var o=i.length,u=r?o:-1,h=Object(i);(r?u--:++u<o)&&a(h[u],u,h)!==!1;);return i}}return Hw=e,Hw}var $w,e3;function ES(){if(e3)return $w;e3=1;var t=L9(),e=oW(),n=e(t);return $w=n,$w}var Yw,t3;function B9(){if(t3)return Yw;t3=1;var t=ES(),e=Kp();function n(r,i){var a=-1,o=e(r)?Array(r.length):[];return t(r,function(u,h,f){o[++a]=i(u,h,f)}),o}return Yw=n,Yw}var Kw,n3;function sW(){if(n3)return Kw;n3=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return Kw=t,Kw}var Ww,r3;function lW(){if(r3)return Ww;r3=1;var t=of();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,o=n===n,u=t(n),h=r!==void 0,f=r===null,g=r===r,v=t(r);if(!f&&!v&&!u&&n>r||u&&h&&g&&!f&&!v||a&&h&&g||!i&&g||!o)return 1;if(!a&&!u&&!v&&n<r||v&&i&&o&&!a&&!u||f&&i&&o||!h&&o||!g)return-1}return 0}return Ww=e,Ww}var Xw,i3;function cW(){if(i3)return Xw;i3=1;var t=lW();function e(n,r,i){for(var a=-1,o=n.criteria,u=r.criteria,h=o.length,f=i.length;++a<h;){var g=t(o[a],u[a]);if(g){if(a>=f)return g;var v=i[a];return g*(v=="desc"?-1:1)}}return n.index-r.index}return Xw=e,Xw}var Qw,a3;function uW(){if(a3)return Qw;a3=1;var t=lS(),e=cS(),n=rc(),r=B9(),i=sW(),a=T9(),o=cW(),u=cf(),h=La();function f(g,v,A){v.length?v=t(v,function(O){return h(O)?function(R){return e(R,O.length===1?O[0]:O)}:O}):v=[u];var N=-1;v=t(v,a(n));var P=r(g,function(O,R,L){var U=t(v,function(F){return F(O)});return{criteria:U,index:++N,value:O}});return i(P,function(O,R){return o(O,R,A)})}return Qw=f,Qw}var Jw,o3;function dW(){if(o3)return Jw;o3=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return Jw=t,Jw}var Zw,s3;function fW(){if(s3)return Zw;s3=1;var t=dW(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,u=-1,h=e(o.length-i,0),f=Array(h);++u<h;)f[u]=o[i+u];u=-1;for(var g=Array(i+1);++u<i;)g[u]=o[u];return g[i]=a(f),t(r,this,g)}}return Zw=n,Zw}var eE,l3;function hW(){if(l3)return eE;l3=1;function t(e){return function(){return e}}return eE=t,eE}var tE,c3;function j9(){if(c3)return tE;c3=1;var t=hu(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return tE=e,tE}var nE,u3;function pW(){if(u3)return nE;u3=1;var t=hW(),e=j9(),n=cf(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return nE=r,nE}var rE,d3;function mW(){if(d3)return rE;d3=1;var t=800,e=16,n=Date.now;function r(i){var a=0,o=0;return function(){var u=n(),h=e-(u-o);if(o=u,h>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return rE=r,rE}var iE,f3;function gW(){if(f3)return iE;f3=1;var t=pW(),e=mW(),n=e(t);return iE=n,iE}var aE,h3;function yW(){if(h3)return aE;h3=1;var t=cf(),e=fW(),n=gW();function r(i,a){return n(e(i,a,t),i+"")}return aE=r,aE}var oE,p3;function ky(){if(p3)return oE;p3=1;var t=aS(),e=Kp(),n=vS(),r=nc();function i(a,o,u){if(!r(u))return!1;var h=typeof o;return(h=="number"?e(u)&&n(o,u.length):h=="string"&&o in u)?t(u[o],a):!1}return oE=i,oE}var sE,m3;function xW(){if(m3)return sE;m3=1;var t=k9(),e=uW(),n=yW(),r=ky(),i=n(function(a,o){if(a==null)return[];var u=o.length;return u>1&&r(a,o[0],o[1])?o=[]:u>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return sE=i,sE}var vW=xW();const _S=pr(vW);function np(t){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(t)}function Z_(){return Z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z_.apply(this,arguments)}function bW(t,e){return AW(t)||_W(t,e)||EW(t,e)||wW()}function wW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EW(t,e){if(t){if(typeof t=="string")return g3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g3(t,e)}}function g3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _W(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function AW(t){if(Array.isArray(t))return t}function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(n),!0).forEach(function(r){TW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TW(t,e,n){return e=SW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SW(t){var e=CW(t,"string");return np(e)=="symbol"?e:e+""}function CW(t,e){if(np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IW(t){return Array.isArray(t)&&vi(t[0])&&vi(t[1])?t.join(" ~ "):t}var NW=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,u=o===void 0?{}:o,h=e.labelStyle,f=h===void 0?{}:h,g=e.payload,v=e.formatter,A=e.itemSorter,N=e.wrapperClassName,P=e.labelClassName,O=e.label,R=e.labelFormatter,L=e.accessibilityLayer,U=L===void 0?!1:L,F=function(){if(g&&g.length){var X={padding:0,margin:0},K=(A?_S(g,A):g).map(function(ge,re){if(ge.type==="none")return null;var te=lE({display:"block",paddingTop:4,paddingBottom:4,color:ge.color||"#000"},u),se=ge.formatter||v||IW,_e=ge.value,ke=ge.name,Ke=_e,ce=ke;if(se&&Ke!=null&&ce!=null){var fe=se(_e,ke,ge,re,g);if(Array.isArray(fe)){var Ae=bW(fe,2);Ke=Ae[0],ce=Ae[1]}else Ke=fe}return we.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(re),style:te},vi(ce)?we.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,vi(ce)?we.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,we.createElement("span",{className:"recharts-tooltip-item-value"},Ke),we.createElement("span",{className:"recharts-tooltip-item-unit"},ge.unit||""))});return we.createElement("ul",{className:"recharts-tooltip-item-list",style:X},K)}return null},q=lE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),H=lE({margin:0},f),G=!Rn(O),B=G?O:"",z=Fn("recharts-default-tooltip",N),V=Fn("recharts-tooltip-label",P);G&&R&&g!==void 0&&g!==null&&(B=R(O,g));var ee=U?{role:"status","aria-live":"assertive"}:{};return we.createElement("div",Z_({className:z,style:q},ee),we.createElement("p",{className:V,style:H},we.isValidElement(B)?B:"".concat(B)),F())};function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function dm(t,e,n){return e=RW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RW(t){var e=MW(t,"string");return rp(e)=="symbol"?e:e+""}function MW(t,e){if(rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uh="recharts-tooltip-wrapper",DW={visibility:"hidden"};function OW(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Fn(uh,dm(dm(dm(dm({},"".concat(uh,"-right"),bt(n)&&e&&bt(e.x)&&n>=e.x),"".concat(uh,"-left"),bt(n)&&e&&bt(e.x)&&n<e.x),"".concat(uh,"-bottom"),bt(r)&&e&&bt(e.y)&&r>=e.y),"".concat(uh,"-top"),bt(r)&&e&&bt(e.y)&&r<e.y))}function x3(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,u=t.tooltipDimension,h=t.viewBox,f=t.viewBoxDimension;if(a&&bt(a[r]))return a[r];var g=n[r]-u-i,v=n[r]+i;if(e[r])return o[r]?g:v;if(o[r]){var A=g,N=h[r];return A<N?Math.max(v,h[r]):Math.max(g,h[r])}var P=v+u,O=h[r]+f;return P>O?Math.max(g,h[r]):Math.max(v,h[r])}function PW(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function kW(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,u=t.useTranslate3d,h=t.viewBox,f,g,v;return o.height>0&&o.width>0&&n?(g=x3({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:h,viewBoxDimension:h.width}),v=x3({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:h,viewBoxDimension:h.height}),f=PW({translateX:g,translateY:v,useTranslate3d:u})):f=DW,{cssProperties:f,cssClasses:OW({translateX:g,translateY:v,coordinate:n})}}function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function v3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v3(Object(n),!0).forEach(function(r){tA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V9(r.key),r)}}function jW(t,e,n){return e&&BW(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UW(t,e,n){return e=ug(e),VW(t,U9()?Reflect.construct(e,n||[],ug(t).constructor):e.apply(t,n))}function VW(t,e){if(e&&(kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FW(t)}function FW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U9=function(){return!!t})()}function ug(t){return ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ug(t)}function qW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eA(t,e)}function eA(t,e){return eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eA(t,e)}function tA(t,e,n){return e=V9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V9(t){var e=zW(t,"string");return kd(e)=="symbol"?e:e+""}function zW(t,e){if(kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w3=1,GW=(function(t){function e(){var n;LW(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=UW(this,e,[].concat(i)),tA(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),tA(n,"handleKeyDown",function(o){if(o.key==="Escape"){var u,h,f,g;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(u=(h=n.props.coordinate)===null||h===void 0?void 0:h.x)!==null&&u!==void 0?u:0,y:(f=(g=n.props.coordinate)===null||g===void 0?void 0:g.y)!==null&&f!==void 0?f:0}})}}),n}return qW(e,t),jW(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>w3||Math.abs(r.height-this.state.lastBoundingBox.height)>w3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,u=i.animationDuration,h=i.animationEasing,f=i.children,g=i.coordinate,v=i.hasPayload,A=i.isAnimationActive,N=i.offset,P=i.position,O=i.reverseDirection,R=i.useTranslate3d,L=i.viewBox,U=i.wrapperStyle,F=kW({allowEscapeViewBox:o,coordinate:g,offsetTopLeft:N,position:P,reverseDirection:O,tooltipBox:this.state.lastBoundingBox,useTranslate3d:R,viewBox:L}),q=F.cssClasses,H=F.cssProperties,G=b3(b3({transition:A&&a?"transform ".concat(u,"ms ").concat(h):void 0},H),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&v?"visible":"hidden",position:"absolute",top:0,left:0},U);return we.createElement("div",{tabIndex:-1,className:q,style:G,ref:function(z){r.wrapperNode=z}},f)}}])})(le.PureComponent),HW=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},uf={isSsr:HW()};function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(t)}function E3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E3(Object(n),!0).forEach(function(r){AS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q9(r.key),r)}}function KW(t,e,n){return e&&YW(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function WW(t,e,n){return e=dg(e),XW(t,F9()?Reflect.construct(e,n||[],dg(t).constructor):e.apply(t,n))}function XW(t,e){if(e&&(Ld(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QW(t)}function QW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F9=function(){return!!t})()}function dg(t){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dg(t)}function JW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nA(t,e)}function nA(t,e){return nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nA(t,e)}function AS(t,e,n){return e=q9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q9(t){var e=ZW(t,"string");return Ld(e)=="symbol"?e:e+""}function ZW(t,e){if(Ld(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eX(t){return t.dataKey}function tX(t,e){return we.isValidElement(t)?we.cloneElement(t,e):typeof t=="function"?we.createElement(t,e):we.createElement(NW,e)}var Bo=(function(t){function e(){return $W(this,e),WW(this,e,arguments)}return JW(e,t),KW(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,u=i.animationDuration,h=i.animationEasing,f=i.content,g=i.coordinate,v=i.filterNull,A=i.isAnimationActive,N=i.offset,P=i.payload,O=i.payloadUniqBy,R=i.position,L=i.reverseDirection,U=i.useTranslate3d,F=i.viewBox,q=i.wrapperStyle,H=P??[];v&&H.length&&(H=D9(P.filter(function(B){return B.value!=null&&(B.hide!==!0||r.props.includeHidden)}),O,eX));var G=H.length>0;return we.createElement(GW,{allowEscapeViewBox:o,animationDuration:u,animationEasing:h,isAnimationActive:A,active:a,coordinate:g,hasPayload:G,offset:N,position:R,reverseDirection:L,useTranslate3d:U,viewBox:F,wrapperStyle:q},tX(f,_3(_3({},this.props),{},{payload:H})))}}])})(le.PureComponent);AS(Bo,"displayName","Tooltip");AS(Bo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!uf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var cE,A3;function nX(){if(A3)return cE;A3=1;var t=fs(),e=function(){return t.Date.now()};return cE=e,cE}var uE,T3;function rX(){if(T3)return uE;T3=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return uE=e,uE}var dE,S3;function iX(){if(S3)return dE;S3=1;var t=rX(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return dE=n,dE}var fE,C3;function z9(){if(C3)return fE;C3=1;var t=iX(),e=nc(),n=of(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;function h(f){if(typeof f=="number")return f;if(n(f))return r;if(e(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=e(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=t(f);var v=a.test(f);return v||o.test(f)?u(f.slice(2),v?2:8):i.test(f)?r:+f}return fE=h,fE}var hE,I3;function aX(){if(I3)return hE;I3=1;var t=nc(),e=nX(),n=z9(),r="Expected a function",i=Math.max,a=Math.min;function o(u,h,f){var g,v,A,N,P,O,R=0,L=!1,U=!1,F=!0;if(typeof u!="function")throw new TypeError(r);h=n(h)||0,t(f)&&(L=!!f.leading,U="maxWait"in f,A=U?i(n(f.maxWait)||0,h):A,F="trailing"in f?!!f.trailing:F);function q(K){var ge=g,re=v;return g=v=void 0,R=K,N=u.apply(re,ge),N}function H(K){return R=K,P=setTimeout(z,h),L?q(K):N}function G(K){var ge=K-O,re=K-R,te=h-ge;return U?a(te,A-re):te}function B(K){var ge=K-O,re=K-R;return O===void 0||ge>=h||ge<0||U&&re>=A}function z(){var K=e();if(B(K))return V(K);P=setTimeout(z,G(K))}function V(K){return P=void 0,F&&g?q(K):(g=v=void 0,N)}function ee(){P!==void 0&&clearTimeout(P),R=0,g=O=v=P=void 0}function Q(){return P===void 0?N:V(e())}function X(){var K=e(),ge=B(K);if(g=arguments,v=this,O=K,ge){if(P===void 0)return H(O);if(U)return clearTimeout(P),P=setTimeout(z,h),q(O)}return P===void 0&&(P=setTimeout(z,h)),N}return X.cancel=ee,X.flush=Q,X}return hE=o,hE}var pE,N3;function oX(){if(N3)return pE;N3=1;var t=aX(),e=nc(),n="Expected a function";function r(i,a,o){var u=!0,h=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(u="leading"in o?!!o.leading:u,h="trailing"in o?!!o.trailing:h),t(i,a,{leading:u,maxWait:a,trailing:h})}return pE=r,pE}var sX=oX();const G9=pr(sX);function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function R3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R3(Object(n),!0).forEach(function(r){lX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lX(t,e,n){return e=cX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cX(t){var e=uX(t,"string");return ip(e)=="symbol"?e:e+""}function uX(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dX(t,e){return mX(t)||pX(t,e)||hX(t,e)||fX()}function fX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hX(t,e){if(t){if(typeof t=="string")return M3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M3(t,e)}}function M3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function mX(t){if(Array.isArray(t))return t}var H9=le.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,u=t.height,h=u===void 0?"100%":u,f=t.minWidth,g=f===void 0?0:f,v=t.minHeight,A=t.maxHeight,N=t.children,P=t.debounce,O=P===void 0?0:P,R=t.id,L=t.className,U=t.onResize,F=t.style,q=F===void 0?{}:F,H=le.useRef(null),G=le.useRef();G.current=U,le.useImperativeHandle(e,function(){return Object.defineProperty(H.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),H.current},configurable:!0})});var B=le.useState({containerWidth:i.width,containerHeight:i.height}),z=dX(B,2),V=z[0],ee=z[1],Q=le.useCallback(function(K,ge){ee(function(re){var te=Math.round(K),se=Math.round(ge);return re.containerWidth===te&&re.containerHeight===se?re:{containerWidth:te,containerHeight:se}})},[]);le.useEffect(function(){var K=function(ke){var Ke,ce=ke[0].contentRect,fe=ce.width,Ae=ce.height;Q(fe,Ae),(Ke=G.current)===null||Ke===void 0||Ke.call(G,fe,Ae)};O>0&&(K=G9(K,O,{trailing:!0,leading:!1}));var ge=new ResizeObserver(K),re=H.current.getBoundingClientRect(),te=re.width,se=re.height;return Q(te,se),ge.observe(H.current),function(){ge.disconnect()}},[Q,O]);var X=le.useMemo(function(){var K=V.containerWidth,ge=V.containerHeight;if(K<0||ge<0)return null;Gs(Fc(o)||Fc(h),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,h),Gs(!n||n>0,"The aspect(%s) must be greater than zero.",n);var re=Fc(o)?K:o,te=Fc(h)?ge:h;n&&n>0&&(re?te=re/n:te&&(re=te*n),A&&te>A&&(te=A)),Gs(re>0||te>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,re,te,o,h,g,v,n);var se=!Array.isArray(N)&&zs(N.type).endsWith("Chart");return we.Children.map(N,function(_e){return we.isValidElement(_e)?le.cloneElement(_e,fm({width:re,height:te},se?{style:fm({height:"100%",width:"100%",maxHeight:te,maxWidth:re},_e.props.style)}:{})):_e})},[n,N,h,A,v,g,V,o]);return we.createElement("div",{id:R?"".concat(R):void 0,className:Fn("recharts-responsive-container",L),style:fm(fm({},q),{},{width:o,height:h,minWidth:g,minHeight:v,maxHeight:A}),ref:H},X)}),TS=function(e){return null};TS.displayName="Cell";function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function D3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D3(Object(n),!0).forEach(function(r){gX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gX(t,e,n){return e=yX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yX(t){var e=xX(t,"string");return ap(e)=="symbol"?e:e+""}function xX(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ed={widthCache:{},cacheCount:0},vX=2e3,bX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},O3="recharts_measurement_span";function wX(t){var e=rA({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Lh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||uf.isSsr)return{width:0,height:0};var r=wX(n),i=JSON.stringify({text:e,copyStyle:r});if(ed.widthCache[i])return ed.widthCache[i];try{var a=document.getElementById(O3);a||(a=document.createElement("span"),a.setAttribute("id",O3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=rA(rA({},bX),r);Object.assign(a.style,o),a.textContent="".concat(e);var u=a.getBoundingClientRect(),h={width:u.width,height:u.height};return ed.widthCache[i]=h,++ed.cacheCount>vX&&(ed.cacheCount=0,ed.widthCache={}),h}catch{return{width:0,height:0}}},EX=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function fg(t,e){return SX(t)||TX(t,e)||AX(t,e)||_X()}function _X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AX(t,e){if(t){if(typeof t=="string")return P3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P3(t,e)}}function P3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function SX(t){if(Array.isArray(t))return t}function CX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NX(r.key),r)}}function IX(t,e,n){return e&&k3(t.prototype,e),n&&k3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NX(t){var e=RX(t,"string");return op(e)=="symbol"?e:e+""}function RX(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var L3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},OX=Object.keys($9),cd="NaN";function PX(t,e){return t*$9[e]}var hm=(function(){function t(e,n){CX(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!MX.test(n)&&(this.num=NaN,this.unit=""),OX.includes(n)&&(this.num=PX(e,n),this.unit="px")}return IX(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=DX.exec(n))!==null&&r!==void 0?r:[],a=fg(i,3),o=a[1],u=a[2];return new t(parseFloat(o),u??"")}}])})();function Y9(t){if(t.includes(cd))return cd;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=L3.exec(e))!==null&&n!==void 0?n:[],i=fg(r,4),a=i[1],o=i[2],u=i[3],h=hm.parse(a??""),f=hm.parse(u??""),g=o==="*"?h.multiply(f):h.divide(f);if(g.isNaN())return cd;e=e.replace(L3,g.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var v,A=(v=B3.exec(e))!==null&&v!==void 0?v:[],N=fg(A,4),P=N[1],O=N[2],R=N[3],L=hm.parse(P??""),U=hm.parse(R??""),F=O==="+"?L.add(U):L.subtract(U);if(F.isNaN())return cd;e=e.replace(B3,F.toString())}return e}var j3=/\(([^()]*)\)/;function kX(t){for(var e=t;e.includes("(");){var n=j3.exec(e),r=fg(n,2),i=r[1];e=e.replace(j3,Y9(i))}return e}function LX(t){var e=t.replace(/\s+/g,"");return e=kX(e),e=Y9(e),e}function BX(t){try{return LX(t)}catch{return cd}}function mE(t){var e=BX(t.slice(5,-1));return e===cd?"":e}var jX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],UX=["dx","dy","angle","className","breakAll"];function iA(){return iA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iA.apply(this,arguments)}function U3(t,e){if(t==null)return{};var n=VX(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function V3(t,e){return GX(t)||zX(t,e)||qX(t,e)||FX()}function FX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qX(t,e){if(t){if(typeof t=="string")return F3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F3(t,e)}}function F3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function GX(t){if(Array.isArray(t))return t}var K9=/[ \f\n\r\t\v\u2028\u2029]+/,W9=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Rn(n)||(r?a=n.toString().split(""):a=n.toString().split(K9));var o=a.map(function(h){return{word:h,width:Lh(h,i).width}}),u=r?0:Lh("",i).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}},HX=function(e,n,r,i,a){var o=e.maxLines,u=e.children,h=e.style,f=e.breakAll,g=bt(o),v=u,A=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return re.reduce(function(te,se){var _e=se.word,ke=se.width,Ke=te[te.length-1];if(Ke&&(i==null||a||Ke.width+ke+r<Number(i)))Ke.words.push(_e),Ke.width+=ke+r;else{var ce={words:[_e],width:ke};te.push(ce)}return te},[])},N=A(n),P=function(re){return re.reduce(function(te,se){return te.width>se.width?te:se})};if(!g)return N;for(var O="",R=function(re){var te=v.slice(0,re),se=W9({breakAll:f,style:h,children:te+O}).wordsWithComputedWidth,_e=A(se),ke=_e.length>o||P(_e).width>Number(i);return[ke,_e]},L=0,U=v.length-1,F=0,q;L<=U&&F<=v.length-1;){var H=Math.floor((L+U)/2),G=H-1,B=R(G),z=V3(B,2),V=z[0],ee=z[1],Q=R(H),X=V3(Q,1),K=X[0];if(!V&&!K&&(L=H+1),V&&K&&(U=H-1),!V&&K){q=ee;break}F++}return q||N},q3=function(e){var n=Rn(e)?[]:e.toString().split(K9);return[{words:n}]},$X=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,u=e.maxLines;if((n||r)&&!uf.isSsr){var h,f,g=W9({breakAll:o,children:i,style:a});if(g){var v=g.wordsWithComputedWidth,A=g.spaceWidth;h=v,f=A}else return q3(i);return HX({breakAll:o,children:i,maxLines:u,style:a},h,f,n,r)}return q3(i)},z3="#808080",hg=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,u=o===void 0?"1em":o,h=e.capHeight,f=h===void 0?"0.71em":h,g=e.scaleToFit,v=g===void 0?!1:g,A=e.textAnchor,N=A===void 0?"start":A,P=e.verticalAnchor,O=P===void 0?"end":P,R=e.fill,L=R===void 0?z3:R,U=U3(e,jX),F=le.useMemo(function(){return $X({breakAll:U.breakAll,children:U.children,maxLines:U.maxLines,scaleToFit:v,style:U.style,width:U.width})},[U.breakAll,U.children,U.maxLines,v,U.style,U.width]),q=U.dx,H=U.dy,G=U.angle,B=U.className,z=U.breakAll,V=U3(U,UX);if(!vi(r)||!vi(a))return null;var ee=r+(bt(q)?q:0),Q=a+(bt(H)?H:0),X;switch(O){case"start":X=mE("calc(".concat(f,")"));break;case"middle":X=mE("calc(".concat((F.length-1)/2," * -").concat(u," + (").concat(f," / 2))"));break;default:X=mE("calc(".concat(F.length-1," * -").concat(u,")"));break}var K=[];if(v){var ge=F[0].width,re=U.width;K.push("scale(".concat((bt(re)?re/ge:1)/ge,")"))}return G&&K.push("rotate(".concat(G,", ").concat(ee,", ").concat(Q,")")),K.length&&(V.transform=K.join(" ")),we.createElement("text",iA({},bn(V,!0),{x:ee,y:Q,className:Fn("recharts-text",B),textAnchor:N,fill:L.includes("url")?z3:L}),F.map(function(te,se){var _e=te.words.join(z?"":" ");return we.createElement("tspan",{x:ee,dy:se===0?X:u,key:"".concat(_e,"-").concat(se)},_e)}))};function Kl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function YX(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function SS(t){let e,n,r;t.length!==2?(e=Kl,n=(u,h)=>Kl(t(u),h),r=(u,h)=>t(u)-h):(e=t===Kl||t===YX?t:KX,n=t,r=t);function i(u,h,f=0,g=u.length){if(f<g){if(e(h,h)!==0)return g;do{const v=f+g>>>1;n(u[v],h)<0?f=v+1:g=v}while(f<g)}return f}function a(u,h,f=0,g=u.length){if(f<g){if(e(h,h)!==0)return g;do{const v=f+g>>>1;n(u[v],h)<=0?f=v+1:g=v}while(f<g)}return f}function o(u,h,f=0,g=u.length){const v=i(u,h,f,g-1);return v>f&&r(u[v-1],h)>-r(u[v],h)?v-1:v}return{left:i,center:o,right:a}}function KX(){return 0}function X9(t){return t===null?NaN:+t}function*WX(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const XX=SS(Kl),Wp=XX.right;SS(X9).center;class G3 extends Map{constructor(e,n=ZX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(H3(this,e))}has(e){return super.has(H3(this,e))}set(e,n){return super.set(QX(this,e),n)}delete(e){return super.delete(JX(this,e))}}function H3({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function QX({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function JX({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ZX(t){return t!==null&&typeof t=="object"?t.valueOf():t}function eQ(t=Kl){if(t===Kl)return Q9;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Q9(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const tQ=Math.sqrt(50),nQ=Math.sqrt(10),rQ=Math.sqrt(2);function pg(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=tQ?10:a>=nQ?5:a>=rQ?2:1;let u,h,f;return i<0?(f=Math.pow(10,-i)/o,u=Math.round(t*f),h=Math.round(e*f),u/f<t&&++u,h/f>e&&--h,f=-f):(f=Math.pow(10,i)*o,u=Math.round(t/f),h=Math.round(e/f),u*f<t&&++u,h*f>e&&--h),h<u&&.5<=n&&n<2?pg(t,e,n*2):[u,h,f]}function aA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?pg(e,t,n):pg(t,e,n);if(!(a>=i))return[];const u=a-i+1,h=new Array(u);if(r)if(o<0)for(let f=0;f<u;++f)h[f]=(a-f)/-o;else for(let f=0;f<u;++f)h[f]=(a-f)*o;else if(o<0)for(let f=0;f<u;++f)h[f]=(i+f)/-o;else for(let f=0;f<u;++f)h[f]=(i+f)*o;return h}function oA(t,e,n){return e=+e,t=+t,n=+n,pg(t,e,n)[2]}function sA(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?oA(e,t,n):oA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function $3(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Y3(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function J9(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Q9:eQ(i);r>n;){if(r-n>600){const h=r-n+1,f=e-n+1,g=Math.log(h),v=.5*Math.exp(2*g/3),A=.5*Math.sqrt(g*v*(h-v)/h)*(f-h/2<0?-1:1),N=Math.max(n,Math.floor(e-f*v/h+A)),P=Math.min(r,Math.floor(e+(h-f)*v/h+A));J9(t,e,N,P,i)}const a=t[e];let o=n,u=r;for(dh(t,n,e),i(t[r],a)>0&&dh(t,n,r);o<u;){for(dh(t,o,u),++o,--u;i(t[o],a)<0;)++o;for(;i(t[u],a)>0;)--u}i(t[n],a)===0?dh(t,n,u):(++u,dh(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function dh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function iQ(t,e,n){if(t=Float64Array.from(WX(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Y3(t);if(e>=1)return $3(t);var r,i=(r-1)*e,a=Math.floor(i),o=$3(J9(t,a).subarray(0,a+1)),u=Y3(t.subarray(a+1));return o+(u-o)*(i-a)}}function aQ(t,e,n=X9){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return o+(u-o)*(i-a)}}function oQ(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Io(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function nl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const lA=Symbol("implicit");function CS(){var t=new G3,e=[],n=[],r=lA;function i(a){let o=t.get(a);if(o===void 0){if(r!==lA)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new G3;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return CS(e,n).unknown(r)},Io.apply(i,arguments),i}function sp(){var t=CS().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,u=!1,h=0,f=0,g=.5;delete t.unknown;function v(){var A=e().length,N=i<r,P=N?i:r,O=N?r:i;a=(O-P)/Math.max(1,A-h+f*2),u&&(a=Math.floor(a)),P+=(O-P-a*(A-h))*g,o=a*(1-h),u&&(P=Math.round(P),o=Math.round(o));var R=oQ(A).map(function(L){return P+a*L});return n(N?R.reverse():R)}return t.domain=function(A){return arguments.length?(e(A),v()):e()},t.range=function(A){return arguments.length?([r,i]=A,r=+r,i=+i,v()):[r,i]},t.rangeRound=function(A){return[r,i]=A,r=+r,i=+i,u=!0,v()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(A){return arguments.length?(u=!!A,v()):u},t.padding=function(A){return arguments.length?(h=Math.min(1,f=+A),v()):h},t.paddingInner=function(A){return arguments.length?(h=Math.min(1,A),v()):h},t.paddingOuter=function(A){return arguments.length?(f=+A,v()):f},t.align=function(A){return arguments.length?(g=Math.max(0,Math.min(1,A)),v()):g},t.copy=function(){return sp(e(),[r,i]).round(u).paddingInner(h).paddingOuter(f).align(g)},Io.apply(v(),arguments)}function Z9(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Z9(e())},t}function Bh(){return Z9(sp.apply(null,arguments).paddingInner(1))}function IS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function eB(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Xp(){}var lp=.7,mg=1/lp,vd="\\s*([+-]?\\d+)\\s*",cp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sQ=/^#([0-9a-f]{3,8})$/,lQ=new RegExp(`^rgb\\(${vd},${vd},${vd}\\)$`),cQ=new RegExp(`^rgb\\(${ls},${ls},${ls}\\)$`),uQ=new RegExp(`^rgba\\(${vd},${vd},${vd},${cp}\\)$`),dQ=new RegExp(`^rgba\\(${ls},${ls},${ls},${cp}\\)$`),fQ=new RegExp(`^hsl\\(${cp},${ls},${ls}\\)$`),hQ=new RegExp(`^hsla\\(${cp},${ls},${ls},${cp}\\)$`),K3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};IS(Xp,up,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:W3,formatHex:W3,formatHex8:pQ,formatHsl:mQ,formatRgb:X3,toString:X3});function W3(){return this.rgb().formatHex()}function pQ(){return this.rgb().formatHex8()}function mQ(){return tB(this).formatHsl()}function X3(){return this.rgb().formatRgb()}function up(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sQ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Q3(e):n===3?new Pa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?pm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?pm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lQ.exec(t))?new Pa(e[1],e[2],e[3],1):(e=cQ.exec(t))?new Pa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uQ.exec(t))?pm(e[1],e[2],e[3],e[4]):(e=dQ.exec(t))?pm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fQ.exec(t))?e4(e[1],e[2]/100,e[3]/100,1):(e=hQ.exec(t))?e4(e[1],e[2]/100,e[3]/100,e[4]):K3.hasOwnProperty(t)?Q3(K3[t]):t==="transparent"?new Pa(NaN,NaN,NaN,0):null}function Q3(t){return new Pa(t>>16&255,t>>8&255,t&255,1)}function pm(t,e,n,r){return r<=0&&(t=e=n=NaN),new Pa(t,e,n,r)}function gQ(t){return t instanceof Xp||(t=up(t)),t?(t=t.rgb(),new Pa(t.r,t.g,t.b,t.opacity)):new Pa}function cA(t,e,n,r){return arguments.length===1?gQ(t):new Pa(t,e,n,r??1)}function Pa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}IS(Pa,cA,eB(Xp,{brighter(t){return t=t==null?mg:Math.pow(mg,t),new Pa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?lp:Math.pow(lp,t),new Pa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pa(Kc(this.r),Kc(this.g),Kc(this.b),gg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J3,formatHex:J3,formatHex8:yQ,formatRgb:Z3,toString:Z3}));function J3(){return`#${qc(this.r)}${qc(this.g)}${qc(this.b)}`}function yQ(){return`#${qc(this.r)}${qc(this.g)}${qc(this.b)}${qc((isNaN(this.opacity)?1:this.opacity)*255)}`}function Z3(){const t=gg(this.opacity);return`${t===1?"rgb(":"rgba("}${Kc(this.r)}, ${Kc(this.g)}, ${Kc(this.b)}${t===1?")":`, ${t})`}`}function gg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qc(t){return t=Kc(t),(t<16?"0":"")+t.toString(16)}function e4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vo(t,e,n,r)}function tB(t){if(t instanceof Vo)return new Vo(t.h,t.s,t.l,t.opacity);if(t instanceof Xp||(t=up(t)),!t)return new Vo;if(t instanceof Vo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,u=a-i,h=(a+i)/2;return u?(e===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-e)/u+2:o=(e-n)/u+4,u/=h<.5?a+i:2-a-i,o*=60):u=h>0&&h<1?0:o,new Vo(o,u,h,t.opacity)}function xQ(t,e,n,r){return arguments.length===1?tB(t):new Vo(t,e,n,r??1)}function Vo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}IS(Vo,xQ,eB(Xp,{brighter(t){return t=t==null?mg:Math.pow(mg,t),new Vo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?lp:Math.pow(lp,t),new Vo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Pa(gE(t>=240?t-240:t+120,i,r),gE(t,i,r),gE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Vo(t4(this.h),mm(this.s),mm(this.l),gg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gg(this.opacity);return`${t===1?"hsl(":"hsla("}${t4(this.h)}, ${mm(this.s)*100}%, ${mm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function t4(t){return t=(t||0)%360,t<0?t+360:t}function mm(t){return Math.max(0,Math.min(1,t||0))}function gE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const NS=t=>()=>t;function vQ(t,e){return function(n){return t+n*e}}function bQ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function wQ(t){return(t=+t)==1?nB:function(e,n){return n-e?bQ(e,n,t):NS(isNaN(e)?n:e)}}function nB(t,e){var n=e-t;return n?vQ(t,n):NS(isNaN(t)?e:t)}const n4=(function t(e){var n=wQ(e);function r(i,a){var o=n((i=cA(i)).r,(a=cA(a)).r),u=n(i.g,a.g),h=n(i.b,a.b),f=nB(i.opacity,a.opacity);return function(g){return i.r=o(g),i.g=u(g),i.b=h(g),i.opacity=f(g),i+""}}return r.gamma=t,r})(1);function EQ(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function _Q(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function AQ(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=df(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function TQ(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function yg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function SQ(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=df(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var uA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yE=new RegExp(uA.source,"g");function CQ(t){return function(){return t}}function IQ(t){return function(e){return t(e)+""}}function NQ(t,e){var n=uA.lastIndex=yE.lastIndex=0,r,i,a,o=-1,u=[],h=[];for(t=t+"",e=e+"";(r=uA.exec(t))&&(i=yE.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,h.push({i:o,x:yg(r,i)})),n=yE.lastIndex;return n<e.length&&(a=e.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?h[0]?IQ(h[0].x):CQ(e):(e=h.length,function(f){for(var g=0,v;g<e;++g)u[(v=h[g]).i]=v.x(f);return u.join("")})}function df(t,e){var n=typeof e,r;return e==null||n==="boolean"?NS(e):(n==="number"?yg:n==="string"?(r=up(e))?(e=r,n4):NQ:e instanceof up?n4:e instanceof Date?TQ:_Q(e)?EQ:Array.isArray(e)?AQ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?SQ:yg)(t,e)}function RS(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function RQ(t,e){e===void 0&&(e=t,t=df);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function MQ(t){return function(){return t}}function xg(t){return+t}var r4=[0,1];function ha(t){return t}function dA(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:MQ(isNaN(e)?NaN:.5)}function DQ(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function OQ(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=dA(i,r),a=n(o,a)):(r=dA(r,i),a=n(a,o)),function(u){return a(r(u))}}function PQ(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=dA(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(u){var h=Wp(t,u,1,r)-1;return a[h](i[h](u))}}function Qp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ly(){var t=r4,e=r4,n=df,r,i,a,o=ha,u,h,f;function g(){var A=Math.min(t.length,e.length);return o!==ha&&(o=DQ(t[0],t[A-1])),u=A>2?PQ:OQ,h=f=null,v}function v(A){return A==null||isNaN(A=+A)?a:(h||(h=u(t.map(r),e,n)))(r(o(A)))}return v.invert=function(A){return o(i((f||(f=u(e,t.map(r),yg)))(A)))},v.domain=function(A){return arguments.length?(t=Array.from(A,xg),g()):t.slice()},v.range=function(A){return arguments.length?(e=Array.from(A),g()):e.slice()},v.rangeRound=function(A){return e=Array.from(A),n=RS,g()},v.clamp=function(A){return arguments.length?(o=A?!0:ha,g()):o!==ha},v.interpolate=function(A){return arguments.length?(n=A,g()):n},v.unknown=function(A){return arguments.length?(a=A,v):a},function(A,N){return r=A,i=N,g()}}function MS(){return Ly()(ha,ha)}function kQ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function vg(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Bd(t){return t=vg(Math.abs(t)),t?t[1]:NaN}function LQ(t,e){return function(n,r){for(var i=n.length,a=[],o=0,u=t[0],h=0;i>0&&u>0&&(h+u+1>r&&(u=Math.max(1,r-h)),a.push(n.substring(i-=u,i+u)),!((h+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(e)}}function BQ(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dp(t){if(!(e=jQ.exec(t)))throw new Error("invalid format: "+t);var e;return new DS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}dp.prototype=DS.prototype;function DS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}DS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UQ(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var bg;function VQ(t,e){var n=vg(t,e);if(!n)return bg=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(bg=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+vg(t,Math.max(0,e+a-1))[0]}function i4(t,e){var n=vg(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const a4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:kQ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>i4(t*100,e),r:i4,s:VQ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function o4(t){return t}var s4=Array.prototype.map,l4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FQ(t){var e=t.grouping===void 0||t.thousands===void 0?o4:LQ(s4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?o4:BQ(s4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",h=t.nan===void 0?"NaN":t.nan+"";function f(v,A){v=dp(v);var N=v.fill,P=v.align,O=v.sign,R=v.symbol,L=v.zero,U=v.width,F=v.comma,q=v.precision,H=v.trim,G=v.type;G==="n"?(F=!0,G="g"):a4[G]||(q===void 0&&(q=12),H=!0,G="g"),(L||N==="0"&&P==="=")&&(L=!0,N="0",P="=");var B=(A&&A.prefix!==void 0?A.prefix:"")+(R==="$"?n:R==="#"&&/[boxX]/.test(G)?"0"+G.toLowerCase():""),z=(R==="$"?r:/[%p]/.test(G)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),V=a4[G],ee=/[defgprs%]/.test(G);q=q===void 0?6:/[gprs]/.test(G)?Math.max(1,Math.min(21,q)):Math.max(0,Math.min(20,q));function Q(X){var K=B,ge=z,re,te,se;if(G==="c")ge=V(X)+ge,X="";else{X=+X;var _e=X<0||1/X<0;if(X=isNaN(X)?h:V(Math.abs(X),q),H&&(X=UQ(X)),_e&&+X==0&&O!=="+"&&(_e=!1),K=(_e?O==="("?O:u:O==="-"||O==="("?"":O)+K,ge=(G==="s"&&!isNaN(X)&&bg!==void 0?l4[8+bg/3]:"")+ge+(_e&&O==="("?")":""),ee){for(re=-1,te=X.length;++re<te;)if(se=X.charCodeAt(re),48>se||se>57){ge=(se===46?i+X.slice(re+1):X.slice(re))+ge,X=X.slice(0,re);break}}}F&&!L&&(X=e(X,1/0));var ke=K.length+X.length+ge.length,Ke=ke<U?new Array(U-ke+1).join(N):"";switch(F&&L&&(X=e(Ke+X,Ke.length?U-ge.length:1/0),Ke=""),P){case"<":X=K+X+ge+Ke;break;case"=":X=K+Ke+X+ge;break;case"^":X=Ke.slice(0,ke=Ke.length>>1)+K+X+ge+Ke.slice(ke);break;default:X=Ke+K+X+ge;break}return a(X)}return Q.toString=function(){return v+""},Q}function g(v,A){var N=Math.max(-8,Math.min(8,Math.floor(Bd(A)/3)))*3,P=Math.pow(10,-N),O=f((v=dp(v),v.type="f",v),{suffix:l4[8+N/3]});return function(R){return O(P*R)}}return{format:f,formatPrefix:g}}var gm,OS,rB;qQ({thousands:",",grouping:[3],currency:["$",""]});function qQ(t){return gm=FQ(t),OS=gm.format,rB=gm.formatPrefix,gm}function zQ(t){return Math.max(0,-Bd(Math.abs(t)))}function GQ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bd(e)/3)))*3-Bd(Math.abs(t)))}function HQ(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bd(e)-Bd(t))+1}function iB(t,e,n,r){var i=sA(t,e,n),a;switch(r=dp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=GQ(i,o))&&(r.precision=a),rB(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=HQ(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=zQ(i))&&(r.precision=a-(r.type==="%")*2);break}}return OS(r)}function ic(t){var e=t.domain;return t.ticks=function(n){var r=e();return aA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return iB(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],u=r[a],h,f,g=10;for(u<o&&(f=o,o=u,u=f,f=i,i=a,a=f);g-- >0;){if(f=oA(o,u,n),f===h)return r[i]=o,r[a]=u,e(r);if(f>0)o=Math.floor(o/f)*f,u=Math.ceil(u/f)*f;else if(f<0)o=Math.ceil(o*f)/f,u=Math.floor(u*f)/f;else break;h=f}return t},t}function wg(){var t=MS();return t.copy=function(){return Qp(t,wg())},Io.apply(t,arguments),ic(t)}function aB(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,xg),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return aB(t).unknown(e)},t=arguments.length?Array.from(t,xg):[0,1],ic(n)}function oB(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function c4(t){return Math.log(t)}function u4(t){return Math.exp(t)}function $Q(t){return-Math.log(-t)}function YQ(t){return-Math.exp(-t)}function KQ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function WQ(t){return t===10?KQ:t===Math.E?Math.exp:e=>Math.pow(t,e)}function XQ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function d4(t){return(e,n)=>-t(-e,n)}function PS(t){const e=t(c4,u4),n=e.domain;let r=10,i,a;function o(){return i=XQ(r),a=WQ(r),n()[0]<0?(i=d4(i),a=d4(a),t($Q,YQ)):t(c4,u4),e}return e.base=function(u){return arguments.length?(r=+u,o()):r},e.domain=function(u){return arguments.length?(n(u),o()):n()},e.ticks=u=>{const h=n();let f=h[0],g=h[h.length-1];const v=g<f;v&&([f,g]=[g,f]);let A=i(f),N=i(g),P,O;const R=u==null?10:+u;let L=[];if(!(r%1)&&N-A<R){if(A=Math.floor(A),N=Math.ceil(N),f>0){for(;A<=N;++A)for(P=1;P<r;++P)if(O=A<0?P/a(-A):P*a(A),!(O<f)){if(O>g)break;L.push(O)}}else for(;A<=N;++A)for(P=r-1;P>=1;--P)if(O=A>0?P/a(-A):P*a(A),!(O<f)){if(O>g)break;L.push(O)}L.length*2<R&&(L=aA(f,g,R))}else L=aA(A,N,Math.min(N-A,R)).map(a);return v?L.reverse():L},e.tickFormat=(u,h)=>{if(u==null&&(u=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=dp(h)).precision==null&&(h.trim=!0),h=OS(h)),u===1/0)return h;const f=Math.max(1,r*u/e.ticks().length);return g=>{let v=g/a(Math.round(i(g)));return v*r<r-.5&&(v*=r),v<=f?h(g):""}},e.nice=()=>n(oB(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),e}function sB(){const t=PS(Ly()).domain([1,10]);return t.copy=()=>Qp(t,sB()).base(t.base()),Io.apply(t,arguments),t}function f4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function h4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function kS(t){var e=1,n=t(f4(e),h4(e));return n.constant=function(r){return arguments.length?t(f4(e=+r),h4(e)):e},ic(n)}function lB(){var t=kS(Ly());return t.copy=function(){return Qp(t,lB()).constant(t.constant())},Io.apply(t,arguments)}function p4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function QQ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function JQ(t){return t<0?-t*t:t*t}function LS(t){var e=t(ha,ha),n=1;function r(){return n===1?t(ha,ha):n===.5?t(QQ,JQ):t(p4(n),p4(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ic(e)}function BS(){var t=LS(Ly());return t.copy=function(){return Qp(t,BS()).exponent(t.exponent())},Io.apply(t,arguments),t}function ZQ(){return BS.apply(null,arguments).exponent(.5)}function m4(t){return Math.sign(t)*t*t}function eJ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function cB(){var t=MS(),e=[0,1],n=!1,r;function i(a){var o=eJ(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(m4(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,xg)).map(m4)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return cB(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Io.apply(i,arguments),ic(i)}function uB(){var t=[],e=[],n=[],r;function i(){var o=0,u=Math.max(1,e.length);for(n=new Array(u-1);++o<u;)n[o-1]=aQ(t,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:e[Wp(n,o)]}return a.invertExtent=function(o){var u=e.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let u of o)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Kl),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return uB().domain(t).range(e).unknown(r)},Io.apply(a,arguments)}function dB(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(h){return h!=null&&h<=h?i[Wp(r,h,0,n)]:a}function u(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*e-(h-n)*t)/(n+1);return o}return o.domain=function(h){return arguments.length?([t,e]=h,t=+t,e=+e,u()):[t,e]},o.range=function(h){return arguments.length?(n=(i=Array.from(h)).length-1,u()):i.slice()},o.invertExtent=function(h){var f=i.indexOf(h);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},o.unknown=function(h){return arguments.length&&(a=h),o},o.thresholds=function(){return r.slice()},o.copy=function(){return dB().domain([t,e]).range(i).unknown(a)},Io.apply(ic(o),arguments)}function fB(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Wp(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return fB().domain(t).range(e).unknown(n)},Io.apply(i,arguments)}const xE=new Date,vE=new Date;function wi(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const h=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return h;let f;do h.push(f=new Date(+a)),e(a,u),t(a);while(f<a&&a<o);return h},i.filter=a=>wi(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;e(o,-1),!a(o););else for(;--u>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(xE.setTime(+a),vE.setTime(+o),t(xE),t(vE),Math.floor(n(xE,vE))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Eg=wi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Eg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Eg);Eg.range;const js=1e3,Eo=js*60,Us=Eo*60,Ks=Us*24,jS=Ks*7,g4=Ks*30,bE=Ks*365,zc=wi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*js)},(t,e)=>(e-t)/js,t=>t.getUTCSeconds());zc.range;const US=wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*js)},(t,e)=>{t.setTime(+t+e*Eo)},(t,e)=>(e-t)/Eo,t=>t.getMinutes());US.range;const VS=wi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Eo)},(t,e)=>(e-t)/Eo,t=>t.getUTCMinutes());VS.range;const FS=wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*js-t.getMinutes()*Eo)},(t,e)=>{t.setTime(+t+e*Us)},(t,e)=>(e-t)/Us,t=>t.getHours());FS.range;const qS=wi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Us)},(t,e)=>(e-t)/Us,t=>t.getUTCHours());qS.range;const Jp=wi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Eo)/Ks,t=>t.getDate()-1);Jp.range;const By=wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ks,t=>t.getUTCDate()-1);By.range;const hB=wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ks,t=>Math.floor(t/Ks));hB.range;function pu(t){return wi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Eo)/jS)}const jy=pu(0),_g=pu(1),tJ=pu(2),nJ=pu(3),jd=pu(4),rJ=pu(5),iJ=pu(6);jy.range;_g.range;tJ.range;nJ.range;jd.range;rJ.range;iJ.range;function mu(t){return wi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/jS)}const Uy=mu(0),Ag=mu(1),aJ=mu(2),oJ=mu(3),Ud=mu(4),sJ=mu(5),lJ=mu(6);Uy.range;Ag.range;aJ.range;oJ.range;Ud.range;sJ.range;lJ.range;const zS=wi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());zS.range;const GS=wi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());GS.range;const Ws=wi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ws.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ws.range;const Xs=wi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Xs.range;function pB(t,e,n,r,i,a){const o=[[zc,1,js],[zc,5,5*js],[zc,15,15*js],[zc,30,30*js],[a,1,Eo],[a,5,5*Eo],[a,15,15*Eo],[a,30,30*Eo],[i,1,Us],[i,3,3*Us],[i,6,6*Us],[i,12,12*Us],[r,1,Ks],[r,2,2*Ks],[n,1,jS],[e,1,g4],[e,3,3*g4],[t,1,bE]];function u(f,g,v){const A=g<f;A&&([f,g]=[g,f]);const N=v&&typeof v.range=="function"?v:h(f,g,v),P=N?N.range(f,+g+1):[];return A?P.reverse():P}function h(f,g,v){const A=Math.abs(g-f)/v,N=SS(([,,R])=>R).right(o,A);if(N===o.length)return t.every(sA(f/bE,g/bE,v));if(N===0)return Eg.every(Math.max(sA(f,g,v),1));const[P,O]=o[A/o[N-1][2]<o[N][2]/A?N-1:N];return P.every(O)}return[u,h]}const[cJ,uJ]=pB(Xs,GS,Uy,hB,qS,VS),[dJ,fJ]=pB(Ws,zS,jy,Jp,FS,US);function wE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function EE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function hJ(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,h=t.shortMonths,f=hh(i),g=ph(i),v=hh(a),A=ph(a),N=hh(o),P=ph(o),O=hh(u),R=ph(u),L=hh(h),U=ph(h),F={a:se,A:_e,b:ke,B:Ke,c:null,d:E4,e:E4,f:LJ,g:$J,G:KJ,H:OJ,I:PJ,j:kJ,L:mB,m:BJ,M:jJ,p:ce,q:fe,Q:T4,s:S4,S:UJ,u:VJ,U:FJ,V:qJ,w:zJ,W:GJ,x:null,X:null,y:HJ,Y:YJ,Z:WJ,"%":A4},q={a:Ae,A:He,b:ot,B:Ye,c:null,d:_4,e:_4,f:ZJ,g:cZ,G:dZ,H:XJ,I:QJ,j:JJ,L:yB,m:eZ,M:tZ,p:Ce,q:et,Q:T4,s:S4,S:nZ,u:rZ,U:iZ,V:aZ,w:oZ,W:sZ,x:null,X:null,y:lZ,Y:uZ,Z:fZ,"%":A4},H={a:ee,A:Q,b:X,B:K,c:ge,d:b4,e:b4,f:NJ,g:v4,G:x4,H:w4,I:w4,j:TJ,L:IJ,m:AJ,M:SJ,p:V,q:_J,Q:MJ,s:DJ,S:CJ,u:xJ,U:vJ,V:bJ,w:yJ,W:wJ,x:re,X:te,y:v4,Y:x4,Z:EJ,"%":RJ};F.x=G(n,F),F.X=G(r,F),F.c=G(e,F),q.x=G(n,q),q.X=G(r,q),q.c=G(e,q);function G(Be,ct){return function(rt){var je=[],yt=-1,wt=0,Le=Be.length,he,ve,$e;for(rt instanceof Date||(rt=new Date(+rt));++yt<Le;)Be.charCodeAt(yt)===37&&(je.push(Be.slice(wt,yt)),(ve=y4[he=Be.charAt(++yt)])!=null?he=Be.charAt(++yt):ve=he==="e"?" ":"0",($e=ct[he])&&(he=$e(rt,ve)),je.push(he),wt=yt+1);return je.push(Be.slice(wt,yt)),je.join("")}}function B(Be,ct){return function(rt){var je=fh(1900,void 0,1),yt=z(je,Be,rt+="",0),wt,Le;if(yt!=rt.length)return null;if("Q"in je)return new Date(je.Q);if("s"in je)return new Date(je.s*1e3+("L"in je?je.L:0));if(ct&&!("Z"in je)&&(je.Z=0),"p"in je&&(je.H=je.H%12+je.p*12),je.m===void 0&&(je.m="q"in je?je.q:0),"V"in je){if(je.V<1||je.V>53)return null;"w"in je||(je.w=1),"Z"in je?(wt=EE(fh(je.y,0,1)),Le=wt.getUTCDay(),wt=Le>4||Le===0?Ag.ceil(wt):Ag(wt),wt=By.offset(wt,(je.V-1)*7),je.y=wt.getUTCFullYear(),je.m=wt.getUTCMonth(),je.d=wt.getUTCDate()+(je.w+6)%7):(wt=wE(fh(je.y,0,1)),Le=wt.getDay(),wt=Le>4||Le===0?_g.ceil(wt):_g(wt),wt=Jp.offset(wt,(je.V-1)*7),je.y=wt.getFullYear(),je.m=wt.getMonth(),je.d=wt.getDate()+(je.w+6)%7)}else("W"in je||"U"in je)&&("w"in je||(je.w="u"in je?je.u%7:"W"in je?1:0),Le="Z"in je?EE(fh(je.y,0,1)).getUTCDay():wE(fh(je.y,0,1)).getDay(),je.m=0,je.d="W"in je?(je.w+6)%7+je.W*7-(Le+5)%7:je.w+je.U*7-(Le+6)%7);return"Z"in je?(je.H+=je.Z/100|0,je.M+=je.Z%100,EE(je)):wE(je)}}function z(Be,ct,rt,je){for(var yt=0,wt=ct.length,Le=rt.length,he,ve;yt<wt;){if(je>=Le)return-1;if(he=ct.charCodeAt(yt++),he===37){if(he=ct.charAt(yt++),ve=H[he in y4?ct.charAt(yt++):he],!ve||(je=ve(Be,rt,je))<0)return-1}else if(he!=rt.charCodeAt(je++))return-1}return je}function V(Be,ct,rt){var je=f.exec(ct.slice(rt));return je?(Be.p=g.get(je[0].toLowerCase()),rt+je[0].length):-1}function ee(Be,ct,rt){var je=N.exec(ct.slice(rt));return je?(Be.w=P.get(je[0].toLowerCase()),rt+je[0].length):-1}function Q(Be,ct,rt){var je=v.exec(ct.slice(rt));return je?(Be.w=A.get(je[0].toLowerCase()),rt+je[0].length):-1}function X(Be,ct,rt){var je=L.exec(ct.slice(rt));return je?(Be.m=U.get(je[0].toLowerCase()),rt+je[0].length):-1}function K(Be,ct,rt){var je=O.exec(ct.slice(rt));return je?(Be.m=R.get(je[0].toLowerCase()),rt+je[0].length):-1}function ge(Be,ct,rt){return z(Be,e,ct,rt)}function re(Be,ct,rt){return z(Be,n,ct,rt)}function te(Be,ct,rt){return z(Be,r,ct,rt)}function se(Be){return o[Be.getDay()]}function _e(Be){return a[Be.getDay()]}function ke(Be){return h[Be.getMonth()]}function Ke(Be){return u[Be.getMonth()]}function ce(Be){return i[+(Be.getHours()>=12)]}function fe(Be){return 1+~~(Be.getMonth()/3)}function Ae(Be){return o[Be.getUTCDay()]}function He(Be){return a[Be.getUTCDay()]}function ot(Be){return h[Be.getUTCMonth()]}function Ye(Be){return u[Be.getUTCMonth()]}function Ce(Be){return i[+(Be.getUTCHours()>=12)]}function et(Be){return 1+~~(Be.getUTCMonth()/3)}return{format:function(Be){var ct=G(Be+="",F);return ct.toString=function(){return Be},ct},parse:function(Be){var ct=B(Be+="",!1);return ct.toString=function(){return Be},ct},utcFormat:function(Be){var ct=G(Be+="",q);return ct.toString=function(){return Be},ct},utcParse:function(Be){var ct=B(Be+="",!0);return ct.toString=function(){return Be},ct}}}var y4={"-":"",_:" ",0:"0"},Ri=/^\s*\d+/,pJ=/^%/,mJ=/[\\^$*+?|[\]().{}]/g;function qn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function gJ(t){return t.replace(mJ,"\\$&")}function hh(t){return new RegExp("^(?:"+t.map(gJ).join("|")+")","i")}function ph(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function yJ(t,e,n){var r=Ri.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function xJ(t,e,n){var r=Ri.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vJ(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bJ(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function wJ(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function x4(t,e,n){var r=Ri.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function v4(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function EJ(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _J(t,e,n){var r=Ri.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function AJ(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function b4(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function TJ(t,e,n){var r=Ri.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function w4(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function SJ(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function CJ(t,e,n){var r=Ri.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function IJ(t,e,n){var r=Ri.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function NJ(t,e,n){var r=Ri.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function RJ(t,e,n){var r=pJ.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function MJ(t,e,n){var r=Ri.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function DJ(t,e,n){var r=Ri.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function E4(t,e){return qn(t.getDate(),e,2)}function OJ(t,e){return qn(t.getHours(),e,2)}function PJ(t,e){return qn(t.getHours()%12||12,e,2)}function kJ(t,e){return qn(1+Jp.count(Ws(t),t),e,3)}function mB(t,e){return qn(t.getMilliseconds(),e,3)}function LJ(t,e){return mB(t,e)+"000"}function BJ(t,e){return qn(t.getMonth()+1,e,2)}function jJ(t,e){return qn(t.getMinutes(),e,2)}function UJ(t,e){return qn(t.getSeconds(),e,2)}function VJ(t){var e=t.getDay();return e===0?7:e}function FJ(t,e){return qn(jy.count(Ws(t)-1,t),e,2)}function gB(t){var e=t.getDay();return e>=4||e===0?jd(t):jd.ceil(t)}function qJ(t,e){return t=gB(t),qn(jd.count(Ws(t),t)+(Ws(t).getDay()===4),e,2)}function zJ(t){return t.getDay()}function GJ(t,e){return qn(_g.count(Ws(t)-1,t),e,2)}function HJ(t,e){return qn(t.getFullYear()%100,e,2)}function $J(t,e){return t=gB(t),qn(t.getFullYear()%100,e,2)}function YJ(t,e){return qn(t.getFullYear()%1e4,e,4)}function KJ(t,e){var n=t.getDay();return t=n>=4||n===0?jd(t):jd.ceil(t),qn(t.getFullYear()%1e4,e,4)}function WJ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qn(e/60|0,"0",2)+qn(e%60,"0",2)}function _4(t,e){return qn(t.getUTCDate(),e,2)}function XJ(t,e){return qn(t.getUTCHours(),e,2)}function QJ(t,e){return qn(t.getUTCHours()%12||12,e,2)}function JJ(t,e){return qn(1+By.count(Xs(t),t),e,3)}function yB(t,e){return qn(t.getUTCMilliseconds(),e,3)}function ZJ(t,e){return yB(t,e)+"000"}function eZ(t,e){return qn(t.getUTCMonth()+1,e,2)}function tZ(t,e){return qn(t.getUTCMinutes(),e,2)}function nZ(t,e){return qn(t.getUTCSeconds(),e,2)}function rZ(t){var e=t.getUTCDay();return e===0?7:e}function iZ(t,e){return qn(Uy.count(Xs(t)-1,t),e,2)}function xB(t){var e=t.getUTCDay();return e>=4||e===0?Ud(t):Ud.ceil(t)}function aZ(t,e){return t=xB(t),qn(Ud.count(Xs(t),t)+(Xs(t).getUTCDay()===4),e,2)}function oZ(t){return t.getUTCDay()}function sZ(t,e){return qn(Ag.count(Xs(t)-1,t),e,2)}function lZ(t,e){return qn(t.getUTCFullYear()%100,e,2)}function cZ(t,e){return t=xB(t),qn(t.getUTCFullYear()%100,e,2)}function uZ(t,e){return qn(t.getUTCFullYear()%1e4,e,4)}function dZ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ud(t):Ud.ceil(t),qn(t.getUTCFullYear()%1e4,e,4)}function fZ(){return"+0000"}function A4(){return"%"}function T4(t){return+t}function S4(t){return Math.floor(+t/1e3)}var td,vB,bB;hZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hZ(t){return td=hJ(t),vB=td.format,td.parse,bB=td.utcFormat,td.utcParse,td}function pZ(t){return new Date(t)}function mZ(t){return t instanceof Date?+t:+new Date(+t)}function HS(t,e,n,r,i,a,o,u,h,f){var g=MS(),v=g.invert,A=g.domain,N=f(".%L"),P=f(":%S"),O=f("%I:%M"),R=f("%I %p"),L=f("%a %d"),U=f("%b %d"),F=f("%B"),q=f("%Y");function H(G){return(h(G)<G?N:u(G)<G?P:o(G)<G?O:a(G)<G?R:r(G)<G?i(G)<G?L:U:n(G)<G?F:q)(G)}return g.invert=function(G){return new Date(v(G))},g.domain=function(G){return arguments.length?A(Array.from(G,mZ)):A().map(pZ)},g.ticks=function(G){var B=A();return t(B[0],B[B.length-1],G??10)},g.tickFormat=function(G,B){return B==null?H:f(B)},g.nice=function(G){var B=A();return(!G||typeof G.range!="function")&&(G=e(B[0],B[B.length-1],G??10)),G?A(oB(B,G)):g},g.copy=function(){return Qp(g,HS(t,e,n,r,i,a,o,u,h,f))},g}function gZ(){return Io.apply(HS(dJ,fJ,Ws,zS,jy,Jp,FS,US,zc,vB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yZ(){return Io.apply(HS(cJ,uJ,Xs,GS,Uy,By,qS,VS,zc,bB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vy(){var t=0,e=1,n,r,i,a,o=ha,u=!1,h;function f(v){return v==null||isNaN(v=+v)?h:o(i===0?.5:(v=(a(v)-n)*i,u?Math.max(0,Math.min(1,v)):v))}f.domain=function(v){return arguments.length?([t,e]=v,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(v){return arguments.length?(u=!!v,f):u},f.interpolator=function(v){return arguments.length?(o=v,f):o};function g(v){return function(A){var N,P;return arguments.length?([N,P]=A,o=v(N,P),f):[o(0),o(1)]}}return f.range=g(df),f.rangeRound=g(RS),f.unknown=function(v){return arguments.length?(h=v,f):h},function(v){return a=v,n=v(t),r=v(e),i=n===r?0:1/(r-n),f}}function ac(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wB(){var t=ic(Vy()(ha));return t.copy=function(){return ac(t,wB())},nl.apply(t,arguments)}function EB(){var t=PS(Vy()).domain([1,10]);return t.copy=function(){return ac(t,EB()).base(t.base())},nl.apply(t,arguments)}function _B(){var t=kS(Vy());return t.copy=function(){return ac(t,_B()).constant(t.constant())},nl.apply(t,arguments)}function $S(){var t=LS(Vy());return t.copy=function(){return ac(t,$S()).exponent(t.exponent())},nl.apply(t,arguments)}function xZ(){return $S.apply(null,arguments).exponent(.5)}function AB(){var t=[],e=ha;function n(r){if(r!=null&&!isNaN(r=+r))return e((Wp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Kl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>iQ(t,a/r))},n.copy=function(){return AB(e).domain(t)},nl.apply(n,arguments)}function Fy(){var t=0,e=.5,n=1,r=1,i,a,o,u,h,f=ha,g,v=!1,A;function N(O){return isNaN(O=+O)?A:(O=.5+((O=+g(O))-a)*(r*O<r*a?u:h),f(v?Math.max(0,Math.min(1,O)):O))}N.domain=function(O){return arguments.length?([t,e,n]=O,i=g(t=+t),a=g(e=+e),o=g(n=+n),u=i===a?0:.5/(a-i),h=a===o?0:.5/(o-a),r=a<i?-1:1,N):[t,e,n]},N.clamp=function(O){return arguments.length?(v=!!O,N):v},N.interpolator=function(O){return arguments.length?(f=O,N):f};function P(O){return function(R){var L,U,F;return arguments.length?([L,U,F]=R,f=RQ(O,[L,U,F]),N):[f(0),f(.5),f(1)]}}return N.range=P(df),N.rangeRound=P(RS),N.unknown=function(O){return arguments.length?(A=O,N):A},function(O){return g=O,i=O(t),a=O(e),o=O(n),u=i===a?0:.5/(a-i),h=a===o?0:.5/(o-a),r=a<i?-1:1,N}}function TB(){var t=ic(Fy()(ha));return t.copy=function(){return ac(t,TB())},nl.apply(t,arguments)}function SB(){var t=PS(Fy()).domain([.1,1,10]);return t.copy=function(){return ac(t,SB()).base(t.base())},nl.apply(t,arguments)}function CB(){var t=kS(Fy());return t.copy=function(){return ac(t,CB()).constant(t.constant())},nl.apply(t,arguments)}function YS(){var t=LS(Fy());return t.copy=function(){return ac(t,YS()).exponent(t.exponent())},nl.apply(t,arguments)}function vZ(){return YS.apply(null,arguments).exponent(.5)}const C4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sp,scaleDiverging:TB,scaleDivergingLog:SB,scaleDivergingPow:YS,scaleDivergingSqrt:vZ,scaleDivergingSymlog:CB,scaleIdentity:aB,scaleImplicit:lA,scaleLinear:wg,scaleLog:sB,scaleOrdinal:CS,scalePoint:Bh,scalePow:BS,scaleQuantile:uB,scaleQuantize:dB,scaleRadial:cB,scaleSequential:wB,scaleSequentialLog:EB,scaleSequentialPow:$S,scaleSequentialQuantile:AB,scaleSequentialSqrt:xZ,scaleSequentialSymlog:_B,scaleSqrt:ZQ,scaleSymlog:lB,scaleThreshold:fB,scaleTime:gZ,scaleUtc:yZ,tickFormat:iB},Symbol.toStringTag,{value:"Module"}));var _E,I4;function IB(){if(I4)return _E;I4=1;var t=of();function e(n,r,i){for(var a=-1,o=n.length;++a<o;){var u=n[a],h=r(u);if(h!=null&&(f===void 0?h===h&&!t(h):i(h,f)))var f=h,g=u}return g}return _E=e,_E}var AE,N4;function bZ(){if(N4)return AE;N4=1;function t(e,n){return e>n}return AE=t,AE}var TE,R4;function wZ(){if(R4)return TE;R4=1;var t=IB(),e=bZ(),n=cf();function r(i){return i&&i.length?t(i,n,e):void 0}return TE=r,TE}var EZ=wZ();const Vl=pr(EZ);var SE,M4;function _Z(){if(M4)return SE;M4=1;function t(e,n){return e<n}return SE=t,SE}var CE,D4;function AZ(){if(D4)return CE;D4=1;var t=IB(),e=_Z(),n=cf();function r(i){return i&&i.length?t(i,n,e):void 0}return CE=r,CE}var TZ=AZ();const qy=pr(TZ);var IE,O4;function SZ(){if(O4)return IE;O4=1;var t=lS(),e=rc(),n=B9(),r=La();function i(a,o){var u=r(a)?t:n;return u(a,e(o,3))}return IE=i,IE}var NE,P4;function CZ(){if(P4)return NE;P4=1;var t=k9(),e=SZ();function n(r,i){return t(e(r,i),1)}return NE=n,NE}var IZ=CZ();const NZ=pr(IZ);var RE,k4;function RZ(){if(k4)return RE;k4=1;var t=wS();function e(n,r){return t(n,r)}return RE=e,RE}var MZ=RZ();const fp=pr(MZ);var ff=1e9,DZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},WS,Dr=!0,So="[DecimalError] ",Wc=So+"Invalid argument: ",KS=So+"Exponent out of range: ",hf=Math.floor,kc=Math.pow,OZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qa,Ni=1e7,Sr=7,NB=9007199254740991,Tg=hf(NB/Sr),Mt={};Mt.absoluteValue=Mt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Mt.comparedTo=Mt.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Sr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Mt.dividedBy=Mt.div=function(t){return Hs(this,new this.constructor(t))};Mt.dividedToIntegerBy=Mt.idiv=function(t){var e=this,n=e.constructor;return xr(Hs(e,new n(t),0,1),n.precision)};Mt.equals=Mt.eq=function(t){return!this.cmp(t)};Mt.exponent=function(){return ci(this)};Mt.greaterThan=Mt.gt=function(t){return this.cmp(t)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(t){return this.cmp(t)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(t){return this.cmp(t)<0};Mt.lessThanOrEqualTo=Mt.lte=function(t){return this.cmp(t)<1};Mt.logarithm=Mt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Qa))throw Error(So+"NaN");if(n.s<1)throw Error(So+(n.s?"NaN":"-Infinity"));return n.eq(Qa)?new r(0):(Dr=!1,e=Hs(hp(n,a),hp(t,a),a),Dr=!0,xr(e,i))};Mt.minus=Mt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?DB(e,t):RB(e,(t.s=-t.s,t))};Mt.modulo=Mt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(So+"NaN");return n.s?(Dr=!1,e=Hs(n,t,0,1).times(t),Dr=!0,n.minus(e)):xr(new r(n),i)};Mt.naturalExponential=Mt.exp=function(){return MB(this)};Mt.naturalLogarithm=Mt.ln=function(){return hp(this)};Mt.negated=Mt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Mt.plus=Mt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?RB(e,t):DB(e,(t.s=-t.s,t))};Mt.precision=Mt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Wc+t);if(e=ci(i)+1,r=i.d.length-1,n=r*Sr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Mt.squareRoot=Mt.sqrt=function(){var t,e,n,r,i,a,o,u=this,h=u.constructor;if(u.s<1){if(!u.s)return new h(0);throw Error(So+"NaN")}for(t=ci(u),Dr=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=os(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=hf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new h(e)):r=new h(i.toString()),n=h.precision,i=o=n+3;;)if(a=r,r=a.plus(Hs(u,a,o+2)).times(.5),os(a.d).slice(0,o)===(e=os(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(xr(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(e!="9999")break;o+=4}return Dr=!0,xr(r,n)};Mt.times=Mt.mul=function(t){var e,n,r,i,a,o,u,h,f,g=this,v=g.constructor,A=g.d,N=(t=new v(t)).d;if(!g.s||!t.s)return new v(0);for(t.s*=g.s,n=g.e+t.e,h=A.length,f=N.length,h<f&&(a=A,A=N,N=a,o=h,h=f,f=o),a=[],o=h+f,r=o;r--;)a.push(0);for(r=f;--r>=0;){for(e=0,i=h+r;i>r;)u=a[i]+N[r]*A[i-r-1]+e,a[i--]=u%Ni|0,e=u/Ni|0;a[i]=(a[i]+e)%Ni|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Dr?xr(t,v.precision):t};Mt.toDecimalPlaces=Mt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ds(t,0,ff),e===void 0?e=r.rounding:ds(e,0,8),xr(n,t+ci(n)+1,e))};Mt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=su(r,!0):(ds(t,0,ff),e===void 0?e=i.rounding:ds(e,0,8),r=xr(new i(r),t+1,e),n=su(r,!0,t+1)),n};Mt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?su(i):(ds(t,0,ff),e===void 0?e=a.rounding:ds(e,0,8),r=xr(new a(i),t+ci(i)+1,e),n=su(r.abs(),!1,t+ci(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Mt.toInteger=Mt.toint=function(){var t=this,e=t.constructor;return xr(new e(t),ci(t)+1,e.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(t){var e,n,r,i,a,o,u=this,h=u.constructor,f=12,g=+(t=new h(t));if(!t.s)return new h(Qa);if(u=new h(u),!u.s){if(t.s<1)throw Error(So+"Infinity");return u}if(u.eq(Qa))return u;if(r=h.precision,t.eq(Qa))return xr(u,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=u.s,o){if((n=g<0?-g:g)<=NB){for(i=new h(Qa),e=Math.ceil(r/Sr+4),Dr=!1;n%2&&(i=i.times(u),B4(i.d,e)),n=hf(n/2),n!==0;)u=u.times(u),B4(u.d,e);return Dr=!0,t.s<0?new h(Qa).div(i):xr(i,r)}}else if(a<0)throw Error(So+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Dr=!1,i=t.times(hp(u,r+f)),Dr=!0,i=MB(i),i.s=a,i};Mt.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=ci(i),r=su(i,n<=a.toExpNeg||n>=a.toExpPos)):(ds(t,1,ff),e===void 0?e=a.rounding:ds(e,0,8),i=xr(new a(i),t,e),n=ci(i),r=su(i,t<=n||n<=a.toExpNeg,t)),r};Mt.toSignificantDigits=Mt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ds(t,1,ff),e===void 0?e=r.rounding:ds(e,0,8)),xr(new r(n),t,e)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ci(t),n=t.constructor;return su(t,e<=n.toExpNeg||e>=n.toExpPos)};function RB(t,e){var n,r,i,a,o,u,h,f,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s||(e=new g(t)),Dr?xr(e,v):e;if(h=t.d,f=e.d,o=t.e,i=e.e,h=h.slice(),a=o-i,a){for(a<0?(r=h,a=-a,u=f.length):(r=f,i=o,u=h.length),o=Math.ceil(v/Sr),u=o>u?o+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=h.length,a=f.length,u-a<0&&(a=u,r=f,f=h,h=r),n=0;a;)n=(h[--a]=h[a]+f[a]+n)/Ni|0,h[a]%=Ni;for(n&&(h.unshift(n),++i),u=h.length;h[--u]==0;)h.pop();return e.d=h,e.e=i,Dr?xr(e,v):e}function ds(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Wc+t)}function os(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Sr-r.length,n&&(a+=kl(n)),a+=r;o=t[e],r=o+"",n=Sr-r.length,n&&(a+=kl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Hs=(function(){function t(r,i){var a,o=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+o,r[u]=a%Ni|0,o=a/Ni|0;return o&&r.unshift(o),r}function e(r,i,a,o){var u,h;if(a!=o)h=a>o?1:-1;else for(u=h=0;u<a;u++)if(r[u]!=i[u]){h=r[u]>i[u]?1:-1;break}return h}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Ni+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var u,h,f,g,v,A,N,P,O,R,L,U,F,q,H,G,B,z,V=r.constructor,ee=r.s==i.s?1:-1,Q=r.d,X=i.d;if(!r.s)return new V(r);if(!i.s)throw Error(So+"Division by zero");for(h=r.e-i.e,B=X.length,H=Q.length,N=new V(ee),P=N.d=[],f=0;X[f]==(Q[f]||0);)++f;if(X[f]>(Q[f]||0)&&--h,a==null?U=a=V.precision:o?U=a+(ci(r)-ci(i))+1:U=a,U<0)return new V(0);if(U=U/Sr+2|0,f=0,B==1)for(g=0,X=X[0],U++;(f<H||g)&&U--;f++)F=g*Ni+(Q[f]||0),P[f]=F/X|0,g=F%X|0;else{for(g=Ni/(X[0]+1)|0,g>1&&(X=t(X,g),Q=t(Q,g),B=X.length,H=Q.length),q=B,O=Q.slice(0,B),R=O.length;R<B;)O[R++]=0;z=X.slice(),z.unshift(0),G=X[0],X[1]>=Ni/2&&++G;do g=0,u=e(X,O,B,R),u<0?(L=O[0],B!=R&&(L=L*Ni+(O[1]||0)),g=L/G|0,g>1?(g>=Ni&&(g=Ni-1),v=t(X,g),A=v.length,R=O.length,u=e(v,O,A,R),u==1&&(g--,n(v,B<A?z:X,A))):(g==0&&(u=g=1),v=X.slice()),A=v.length,A<R&&v.unshift(0),n(O,v,R),u==-1&&(R=O.length,u=e(X,O,B,R),u<1&&(g++,n(O,B<R?z:X,R))),R=O.length):u===0&&(g++,O=[0]),P[f++]=g,u&&O[0]?O[R++]=Q[q]||0:(O=[Q[q]],R=1);while((q++<H||O[0]!==void 0)&&U--)}return P[0]||P.shift(),N.e=h,xr(N,o?a+ci(N)+1:a)}})();function MB(t,e){var n,r,i,a,o,u,h=0,f=0,g=t.constructor,v=g.precision;if(ci(t)>16)throw Error(KS+ci(t));if(!t.s)return new g(Qa);for(Dr=!1,u=v,o=new g(.03125);t.abs().gte(.1);)t=t.times(o),f+=5;for(r=Math.log(kc(2,f))/Math.LN10*2+5|0,u+=r,n=i=a=new g(Qa),g.precision=u;;){if(i=xr(i.times(t),u),n=n.times(++h),o=a.plus(Hs(i,n,u)),os(o.d).slice(0,u)===os(a.d).slice(0,u)){for(;f--;)a=xr(a.times(a),u);return g.precision=v,e==null?(Dr=!0,xr(a,v)):a}a=o}}function ci(t){for(var e=t.e*Sr,n=t.d[0];n>=10;n/=10)e++;return e}function ME(t,e,n){if(e>t.LN10.sd())throw Dr=!0,n&&(t.precision=n),Error(So+"LN10 precision limit exceeded");return xr(new t(t.LN10),e)}function kl(t){for(var e="";t--;)e+="0";return e}function hp(t,e){var n,r,i,a,o,u,h,f,g,v=1,A=10,N=t,P=N.d,O=N.constructor,R=O.precision;if(N.s<1)throw Error(So+(N.s?"NaN":"-Infinity"));if(N.eq(Qa))return new O(0);if(e==null?(Dr=!1,f=R):f=e,N.eq(10))return e==null&&(Dr=!0),ME(O,f);if(f+=A,O.precision=f,n=os(P),r=n.charAt(0),a=ci(N),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)N=N.times(t),n=os(N.d),r=n.charAt(0),v++;a=ci(N),r>1?(N=new O("0."+n),a++):N=new O(r+"."+n.slice(1))}else return h=ME(O,f+2,R).times(a+""),N=hp(new O(r+"."+n.slice(1)),f-A).plus(h),O.precision=R,e==null?(Dr=!0,xr(N,R)):N;for(u=o=N=Hs(N.minus(Qa),N.plus(Qa),f),g=xr(N.times(N),f),i=3;;){if(o=xr(o.times(g),f),h=u.plus(Hs(o,new O(i),f)),os(h.d).slice(0,f)===os(u.d).slice(0,f))return u=u.times(2),a!==0&&(u=u.plus(ME(O,f+2,R).times(a+""))),u=Hs(u,new O(v),f),O.precision=R,e==null?(Dr=!0,xr(u,R)):u;u=h,i+=2}}function L4(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=hf(n/Sr),t.d=[],r=(n+1)%Sr,n<0&&(r+=Sr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Sr;r<i;)t.d.push(+e.slice(r,r+=Sr));e=e.slice(r),r=Sr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Dr&&(t.e>Tg||t.e<-Tg))throw Error(KS+n)}else t.s=0,t.e=0,t.d=[0];return t}function xr(t,e,n){var r,i,a,o,u,h,f,g,v=t.d;for(o=1,a=v[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Sr,i=e,f=v[g=0];else{if(g=Math.ceil((r+1)/Sr),a=v.length,g>=a)return t;for(f=a=v[g],o=1;a>=10;a/=10)o++;r%=Sr,i=r-Sr+o}if(n!==void 0&&(a=kc(10,o-i-1),u=f/a%10|0,h=e<0||v[g+1]!==void 0||f%a,h=n<4?(u||h)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||h||n==6&&(r>0?i>0?f/kc(10,o-i):0:v[g-1])%10&1||n==(t.s<0?8:7))),e<1||!v[0])return h?(a=ci(t),v.length=1,e=e-a-1,v[0]=kc(10,(Sr-e%Sr)%Sr),t.e=hf(-e/Sr)||0):(v.length=1,v[0]=t.e=t.s=0),t;if(r==0?(v.length=g,a=1,g--):(v.length=g+1,a=kc(10,Sr-r),v[g]=i>0?(f/kc(10,o-i)%kc(10,i)|0)*a:0),h)for(;;)if(g==0){(v[0]+=a)==Ni&&(v[0]=1,++t.e);break}else{if(v[g]+=a,v[g]!=Ni)break;v[g--]=0,a=1}for(r=v.length;v[--r]===0;)v.pop();if(Dr&&(t.e>Tg||t.e<-Tg))throw Error(KS+ci(t));return t}function DB(t,e){var n,r,i,a,o,u,h,f,g,v,A=t.constructor,N=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Dr?xr(e,N):e;if(h=t.d,v=e.d,r=e.e,f=t.e,h=h.slice(),o=f-r,o){for(g=o<0,g?(n=h,o=-o,u=v.length):(n=v,r=f,u=h.length),i=Math.max(Math.ceil(N/Sr),u)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=h.length,u=v.length,g=i<u,g&&(u=i),i=0;i<u;i++)if(h[i]!=v[i]){g=h[i]<v[i];break}o=0}for(g&&(n=h,h=v,v=n,e.s=-e.s),u=h.length,i=v.length-u;i>0;--i)h[u++]=0;for(i=v.length;i>o;){if(h[--i]<v[i]){for(a=i;a&&h[--a]===0;)h[a]=Ni-1;--h[a],h[i]+=Ni}h[i]-=v[i]}for(;h[--u]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(e.d=h,e.e=r,Dr?xr(e,N):e):new A(0)}function su(t,e,n){var r,i=ci(t),a=os(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+kl(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+kl(-i-1)+a,n&&(r=n-o)>0&&(a+=kl(r))):i>=o?(a+=kl(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+kl(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=kl(r))),t.s<0?"-"+a:a}function B4(t,e){if(t.length>e)return t.length=e,!0}function OB(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Wc+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return L4(o,a.toString())}else if(typeof a!="string")throw Error(Wc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,OZ.test(a))L4(o,a);else throw Error(Wc+a)}if(i.prototype=Mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=OB,i.config=i.set=PZ,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function PZ(t){if(!t||typeof t!="object")throw Error(So+"Object expected");var e,n,r,i=["precision",1,ff,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(hf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Wc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Wc+n+": "+r);return this}var WS=OB(DZ);Qa=new WS(1);const fr=WS;function kZ(t){return UZ(t)||jZ(t)||BZ(t)||LZ()}function LZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BZ(t,e){if(t){if(typeof t=="string")return fA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fA(t,e)}}function jZ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function UZ(t){if(Array.isArray(t))return fA(t)}function fA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var VZ=function(e){return e},PB={},kB=function(e){return e===PB},j4=function(e){return function n(){return arguments.length===0||arguments.length===1&&kB(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},FZ=function t(e,n){return e===1?n:j4(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(u){return u!==PB}).length;return o>=e?n.apply(void 0,i):t(e-o,j4(function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];var g=i.map(function(v){return kB(v)?h.shift():v});return n.apply(void 0,kZ(g).concat(h))}))})},zy=function(e){return FZ(e.length,e)},hA=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},qZ=zy(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),zZ=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return VZ;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(u,h){return h(u)},a.apply(void 0,arguments))}},pA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},LB=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(u,h){return u===n[h]})||(n=a,r=e.apply(void 0,a)),r}};function GZ(t){var e;return t===0?e=1:e=Math.floor(new fr(t).abs().log(10).toNumber())+1,e}function HZ(t,e,n){for(var r=new fr(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var $Z=zy(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),YZ=zy(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),KZ=zy(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Gy={rangeStep:HZ,getDigitCount:GZ,interpolateNumber:$Z,uninterpolateNumber:YZ,uninterpolateTruncation:KZ};function mA(t){return QZ(t)||XZ(t)||BB(t)||WZ()}function WZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XZ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function QZ(t){if(Array.isArray(t))return gA(t)}function pp(t,e){return eee(t)||ZZ(t,e)||BB(t,e)||JZ()}function JZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BB(t,e){if(t){if(typeof t=="string")return gA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gA(t,e)}}function gA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZZ(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),u;!(r=(u=o.next()).done)&&(n.push(u.value),!(e&&n.length===e));r=!0);}catch(h){i=!0,a=h}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function eee(t){if(Array.isArray(t))return t}function jB(t){var e=pp(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function UB(t,e,n){if(t.lte(0))return new fr(0);var r=Gy.getDigitCount(t.toNumber()),i=new fr(10).pow(r),a=t.div(i),o=r!==1?.05:.1,u=new fr(Math.ceil(a.div(o).toNumber())).add(n).mul(o),h=u.mul(i);return e?h:new fr(Math.ceil(h))}function tee(t,e,n){var r=1,i=new fr(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new fr(10).pow(Gy.getDigitCount(t)-1),i=new fr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new fr(Math.floor(t)))}else t===0?i=new fr(Math.floor((e-1)/2)):n||(i=new fr(Math.floor(t)));var o=Math.floor((e-1)/2),u=zZ(qZ(function(h){return i.add(new fr(h-o).mul(r)).toNumber()}),hA);return u(0,e)}function VB(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new fr(0),tickMin:new fr(0),tickMax:new fr(0)};var a=UB(new fr(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new fr(0):(o=new fr(t).add(e).div(2),o=o.sub(new fr(o).mod(a)));var u=Math.ceil(o.sub(t).div(a).toNumber()),h=Math.ceil(new fr(e).sub(o).div(a).toNumber()),f=u+h+1;return f>n?VB(t,e,n,r,i+1):(f<n&&(h=e>0?h+(n-f):h,u=e>0?u:u+(n-f)),{step:a,tickMin:o.sub(new fr(u).mul(a)),tickMax:o.add(new fr(h).mul(a))})}function nee(t){var e=pp(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),u=jB([n,r]),h=pp(u,2),f=h[0],g=h[1];if(f===-1/0||g===1/0){var v=g===1/0?[f].concat(mA(hA(0,i-1).map(function(){return 1/0}))):[].concat(mA(hA(0,i-1).map(function(){return-1/0})),[g]);return n>r?pA(v):v}if(f===g)return tee(f,i,a);var A=VB(f,g,o,a),N=A.step,P=A.tickMin,O=A.tickMax,R=Gy.rangeStep(P,O.add(new fr(.1).mul(N)),N);return n>r?pA(R):R}function ree(t,e){var n=pp(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=jB([r,i]),u=pp(o,2),h=u[0],f=u[1];if(h===-1/0||f===1/0)return[r,i];if(h===f)return[h];var g=Math.max(e,2),v=UB(new fr(f).sub(h).div(g-1),a,0),A=[].concat(mA(Gy.rangeStep(new fr(h),new fr(f).sub(new fr(.99).mul(v)),v)),[f]);return r>i?pA(A):A}var iee=LB(nee),aee=LB(ree),oee="Invariant failed";function lu(t,e){throw new Error(oee)}var see=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sg.apply(this,arguments)}function lee(t,e){return fee(t)||dee(t,e)||uee(t,e)||cee()}function cee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uee(t,e){if(t){if(typeof t=="string")return U4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U4(t,e)}}function U4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function fee(t){if(Array.isArray(t))return t}function hee(t,e){if(t==null)return{};var n=pee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zB(r.key),r)}}function yee(t,e,n){return e&&gee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xee(t,e,n){return e=Cg(e),vee(t,FB()?Reflect.construct(e,n||[],Cg(t).constructor):e.apply(t,n))}function vee(t,e){if(e&&(Vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bee(t)}function bee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!t})()}function Cg(t){return Cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cg(t)}function wee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yA(t,e)}function qB(t,e,n){return e=zB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zB(t){var e=Eee(t,"string");return Vd(e)=="symbol"?e:e+""}function Eee(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hy=(function(t){function e(){return mee(this,e),xee(this,e,arguments)}return wee(e,t),yee(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,u=r.dataKey,h=r.data,f=r.dataPointFormatter,g=r.xAxis,v=r.yAxis,A=hee(r,see),N=bn(A,!1);this.props.direction==="x"&&g.type!=="number"&&lu();var P=h.map(function(O){var R=f(O,u),L=R.x,U=R.y,F=R.value,q=R.errorVal;if(!q)return null;var H=[],G,B;if(Array.isArray(q)){var z=lee(q,2);G=z[0],B=z[1]}else G=B=q;if(a==="vertical"){var V=g.scale,ee=U+i,Q=ee+o,X=ee-o,K=V(F-G),ge=V(F+B);H.push({x1:ge,y1:Q,x2:ge,y2:X}),H.push({x1:K,y1:ee,x2:ge,y2:ee}),H.push({x1:K,y1:Q,x2:K,y2:X})}else if(a==="horizontal"){var re=v.scale,te=L+i,se=te-o,_e=te+o,ke=re(F-G),Ke=re(F+B);H.push({x1:se,y1:Ke,x2:_e,y2:Ke}),H.push({x1:te,y1:ke,x2:te,y2:Ke}),H.push({x1:se,y1:ke,x2:_e,y2:ke})}return we.createElement(Vr,Sg({className:"recharts-errorBar",key:"bar-".concat(H.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},N),H.map(function(ce){return we.createElement("line",Sg({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return we.createElement(Vr,{className:"recharts-errorBars"},P)}}])})(we.Component);qB(Hy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});qB(Hy,"displayName","ErrorBar");function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){_ee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ee(t,e,n){return e=Aee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aee(t){var e=Tee(t,"string");return mp(e)=="symbol"?e:e+""}function Tee(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GB=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Xa(n,xd);if(!o)return null;var u=xd.defaultProps,h=u!==void 0?Mc(Mc({},u),o.props):{},f;return o.props&&o.props.payload?f=o.props&&o.props.payload:a==="children"?f=(r||[]).reduce(function(g,v){var A=v.item,N=v.props,P=N.sectors||N.data||[];return g.concat(P.map(function(O){return{type:o.props.iconType||A.props.legendType,value:O.name,color:O.fill,payload:O}}))},[]):f=(r||[]).map(function(g){var v=g.item,A=v.type.defaultProps,N=A!==void 0?Mc(Mc({},A),v.props):{},P=N.dataKey,O=N.name,R=N.legendType,L=N.hide;return{inactive:L,dataKey:P,type:h.iconType||R||"square",color:XS(v),value:O||P,payload:N}}),Mc(Mc(Mc({},h),xd.getWithHeight(o,i)),{},{payload:f,item:o})};function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function F4(t){return Nee(t)||Iee(t)||Cee(t)||See()}function See(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cee(t,e){if(t){if(typeof t=="string")return xA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xA(t,e)}}function Iee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nee(t){if(Array.isArray(t))return xA(t)}function xA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q4(Object(n),!0).forEach(function(r){bd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bd(t,e,n){return e=Ree(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ree(t){var e=Mee(t,"string");return gp(e)=="symbol"?e:e+""}function Mee(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function to(t,e,n){return Rn(t)||Rn(e)?n:vi(e)?Ao(t,e,n):cn(e)?e(t):n}function jh(t,e,n,r){var i=NZ(t,function(u){return to(u,e)});if(n==="number"){var a=i.filter(function(u){return bt(u)||parseFloat(u)});return a.length?[qy(a),Vl(a)]:[1/0,-1/0]}var o=r?i.filter(function(u){return!Rn(u)}):i;return o.map(function(u){return vi(u)||u instanceof Date?u:""})}var Dee=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,u=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(u<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var h=a.range,f=0;f<u;f++){var g=f>0?i[f-1].coordinate:i[u-1].coordinate,v=i[f].coordinate,A=f>=u-1?i[0].coordinate:i[f+1].coordinate,N=void 0;if(Fo(v-g)!==Fo(A-v)){var P=[];if(Fo(A-v)===Fo(h[1]-h[0])){N=A;var O=v+h[1]-h[0];P[0]=Math.min(O,(O+g)/2),P[1]=Math.max(O,(O+g)/2)}else{N=g;var R=A+h[1]-h[0];P[0]=Math.min(v,(R+v)/2),P[1]=Math.max(v,(R+v)/2)}var L=[Math.min(v,(N+v)/2),Math.max(v,(N+v)/2)];if(e>L[0]&&e<=L[1]||e>=P[0]&&e<=P[1]){o=i[f].index;break}}else{var U=Math.min(g,A),F=Math.max(g,A);if(e>(U+v)/2&&e<=(F+v)/2){o=i[f].index;break}}}else for(var q=0;q<u;q++)if(q===0&&e<=(r[q].coordinate+r[q+1].coordinate)/2||q>0&&q<u-1&&e>(r[q].coordinate+r[q-1].coordinate)/2&&e<=(r[q].coordinate+r[q+1].coordinate)/2||q===u-1&&e>(r[q].coordinate+r[q-1].coordinate)/2){o=r[q].index;break}return o},XS=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Wr(Wr({},e.type.defaultProps),e.props):e.props,o=a.stroke,u=a.fill,h;switch(i){case"Line":h=o;break;case"Area":case"Radar":h=o&&o!=="none"?o:u;break;default:h=u;break}return h},Oee=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},u=Object.keys(a),h=0,f=u.length;h<f;h++)for(var g=a[u[h]].stackGroups,v=Object.keys(g),A=0,N=v.length;A<N;A++){var P=g[v[A]],O=P.items,R=P.cateAxisId,L=O.filter(function(B){return zs(B.type).indexOf("Bar")>=0});if(L&&L.length){var U=L[0].type.defaultProps,F=U!==void 0?Wr(Wr({},U),L[0].props):L[0].props,q=F.barSize,H=F[R];o[H]||(o[H]=[]);var G=Rn(q)?n:q;o[H].push({item:L[0],stackList:L.slice(1),barSize:Rn(G)?void 0:ou(G,r,0)})}}return o},Pee=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,u=e.maxBarSize,h=o.length;if(h<1)return null;var f=ou(n,i,0,!0),g,v=[];if(o[0].barSize===+o[0].barSize){var A=!1,N=i/h,P=o.reduce(function(q,H){return q+H.barSize||0},0);P+=(h-1)*f,P>=i&&(P-=(h-1)*f,f=0),P>=i&&N>0&&(A=!0,N*=.9,P=h*N);var O=(i-P)/2>>0,R={offset:O-f,size:0};g=o.reduce(function(q,H){var G={item:H.item,position:{offset:R.offset+R.size+f,size:A?N:H.barSize}},B=[].concat(F4(q),[G]);return R=B[B.length-1].position,H.stackList&&H.stackList.length&&H.stackList.forEach(function(z){B.push({item:z,position:R})}),B},v)}else{var L=ou(r,i,0,!0);i-2*L-(h-1)*f<=0&&(f=0);var U=(i-2*L-(h-1)*f)/h;U>1&&(U>>=0);var F=u===+u?Math.min(U,u):U;g=o.reduce(function(q,H,G){var B=[].concat(F4(q),[{item:H.item,position:{offset:L+(U+f)*G+(U-F)/2,size:F}}]);return H.stackList&&H.stackList.length&&H.stackList.forEach(function(z){B.push({item:z,position:B[B.length-1].position})}),B},v)}return g},kee=function(e,n,r,i){var a=r.children,o=r.width,u=r.margin,h=o-(u.left||0)-(u.right||0),f=GB({children:a,legendWidth:h});if(f){var g=i||{},v=g.width,A=g.height,N=f.align,P=f.verticalAlign,O=f.layout;if((O==="vertical"||O==="horizontal"&&P==="middle")&&N!=="center"&&bt(e[N]))return Wr(Wr({},e),{},bd({},N,e[N]+(v||0)));if((O==="horizontal"||O==="vertical"&&N==="center")&&P!=="middle"&&bt(e[P]))return Wr(Wr({},e),{},bd({},P,e[P]+(A||0)))}return e},Lee=function(e,n,r){return Rn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},HB=function(e,n,r,i,a){var o=n.props.children,u=qo(o,Hy).filter(function(f){return Lee(i,a,f.props.direction)});if(u&&u.length){var h=u.map(function(f){return f.props.dataKey});return e.reduce(function(f,g){var v=to(g,r);if(Rn(v))return f;var A=Array.isArray(v)?[qy(v),Vl(v)]:[v,v],N=h.reduce(function(P,O){var R=to(g,O,0),L=A[0]-Math.abs(Array.isArray(R)?R[0]:R),U=A[1]+Math.abs(Array.isArray(R)?R[1]:R);return[Math.min(L,P[0]),Math.max(U,P[1])]},[1/0,-1/0]);return[Math.min(N[0],f[0]),Math.max(N[1],f[1])]},[1/0,-1/0])}return null},Bee=function(e,n,r,i,a){var o=n.map(function(u){return HB(e,u,r,a,i)}).filter(function(u){return!Rn(u)});return o&&o.length?o.reduce(function(u,h){return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]):null},$B=function(e,n,r,i,a){var o=n.map(function(h){var f=h.props.dataKey;return r==="number"&&f&&HB(e,h,f,i)||jh(e,f,r,a)});if(r==="number")return o.reduce(function(h,f){return[Math.min(h[0],f[0]),Math.max(h[1],f[1])]},[1/0,-1/0]);var u={};return o.reduce(function(h,f){for(var g=0,v=f.length;g<v;g++)u[f[g]]||(u[f[g]]=!0,h.push(f[g]));return h},[])},YB=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},KB=function(e,n,r,i){if(i)return e.map(function(h){return h.coordinate});var a,o,u=e.map(function(h){return h.coordinate===n&&(a=!0),h.coordinate===r&&(o=!0),h.coordinate});return a||u.push(n),o||u.push(r),u},Vs=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,u=e.range,h=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,f=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/h:0;if(f=e.axisType==="angleAxis"&&(u==null?void 0:u.length)>=2?Fo(u[0]-u[1])*2*f:f,n&&(e.ticks||e.niceTicks)){var g=(e.ticks||e.niceTicks).map(function(v){var A=a?a.indexOf(v):v;return{coordinate:i(A)+f,value:v,offset:f}});return g.filter(function(v){return!lf(v.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(v,A){return{coordinate:i(v)+f,value:v,index:A,offset:f}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(v){return{coordinate:i(v)+f,value:v,offset:f}}):i.domain().map(function(v,A){return{coordinate:i(v)+f,value:a?a[v]:v,index:A,offset:f}})},DE=new WeakMap,ym=function(e,n){if(typeof n!="function")return e;DE.has(e)||DE.set(e,new WeakMap);var r=DE.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},jee=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,u=e.axisType;if(i==="auto")return o==="radial"&&u==="radiusAxis"?{scale:sp(),realScaleType:"band"}:o==="radial"&&u==="angleAxis"?{scale:wg(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Bh(),realScaleType:"point"}:a==="category"?{scale:sp(),realScaleType:"band"}:{scale:wg(),realScaleType:"linear"};if($p(i)){var h="scale".concat(Ny(i));return{scale:(C4[h]||Bh)(),realScaleType:C4[h]?h:"point"}}return cn(i)?{scale:i}:{scale:Bh(),realScaleType:"point"}},z4=1e-4,Uee=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-z4,o=Math.max(i[0],i[1])+z4,u=e(n[0]),h=e(n[r-1]);(u<a||u>o||h<a||h>o)&&e.domain([n[0],n[r-1]])}},Vee=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Fee=function(e,n){if(!n||n.length!==2||!bt(n[0])||!bt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!bt(e[0])||e[0]<r)&&(a[0]=r),(!bt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},qee=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,u=0;u<n;++u){var h=lf(e[u][r][1])?e[u][r][0]:e[u][r][1];h>=0?(e[u][r][0]=a,e[u][r][1]=a+h,a=e[u][r][1]):(e[u][r][0]=o,e[u][r][1]=o+h,o=e[u][r][1])}},zee=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var u=lf(e[o][r][1])?e[o][r][0]:e[o][r][1];u>=0?(e[o][r][0]=a,e[o][r][1]=a+u,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},Gee={sign:qee,expand:CY,none:Dd,silhouette:IY,wiggle:NY,positive:zee},Hee=function(e,n,r){var i=n.map(function(u){return u.props.dataKey}),a=Gee[r],o=SY().keys(i).value(function(u,h){return+to(u,h,0)}).order(K_).offset(a);return o(e)},$ee=function(e,n,r,i,a,o){if(!e)return null;var u=o?n.reverse():n,h={},f=u.reduce(function(v,A){var N,P=(N=A.type)!==null&&N!==void 0&&N.defaultProps?Wr(Wr({},A.type.defaultProps),A.props):A.props,O=P.stackId,R=P.hide;if(R)return v;var L=P[r],U=v[L]||{hasStack:!1,stackGroups:{}};if(vi(O)){var F=U.stackGroups[O]||{numericAxisId:r,cateAxisId:i,items:[]};F.items.push(A),U.hasStack=!0,U.stackGroups[O]=F}else U.stackGroups[Yp("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[A]};return Wr(Wr({},v),{},bd({},L,U))},h),g={};return Object.keys(f).reduce(function(v,A){var N=f[A];if(N.hasStack){var P={};N.stackGroups=Object.keys(N.stackGroups).reduce(function(O,R){var L=N.stackGroups[R];return Wr(Wr({},O),{},bd({},R,{numericAxisId:r,cateAxisId:i,items:L.items,stackedData:Hee(e,L.items,a)}))},P)}return Wr(Wr({},v),{},bd({},A,N))},g)},Yee=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,u=n.allowDecimals,h=r||n.scale;if(h!=="auto"&&h!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var f=e.domain();if(!f.length)return null;var g=iee(f,a,u);return e.domain([qy(g),Vl(g)]),{niceTicks:g}}if(a&&i==="number"){var v=e.domain(),A=aee(v,a,u);return{niceTicks:A}}return null};function G4(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Rn(i[e.dataKey])){var u=eg(n,"value",i[e.dataKey]);if(u)return u.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var h=to(i,Rn(o)?e.dataKey:o);return Rn(h)?null:e.scale(h)}var H4=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,u=e.index;if(n.type==="category")return r[u]?r[u].coordinate+i:null;var h=to(o,n.dataKey,n.domain[u]);return Rn(h)?null:n.scale(h)-a/2+i},Kee=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Wee=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Wr(Wr({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(vi(a)){var o=n[a];if(o){var u=o.items.indexOf(e);return u>=0?o.stackedData[u]:null}}return null},Xee=function(e){return e.reduce(function(n,r){return[qy(r.concat([n[0]]).filter(bt)),Vl(r.concat([n[1]]).filter(bt))]},[1/0,-1/0])},WB=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],u=o.stackedData,h=u.reduce(function(f,g){var v=Xee(g.slice(n,r+1));return[Math.min(f[0],v[0]),Math.max(f[1],v[1])]},[1/0,-1/0]);return[Math.min(h[0],i[0]),Math.max(h[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},$4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Y4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vA=function(e,n,r){if(cn(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(bt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if($4.test(e[0])){var a=+$4.exec(e[0])[1];i[0]=n[0]-a}else cn(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(bt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(Y4.test(e[1])){var o=+Y4.exec(e[1])[1];i[1]=n[1]+o}else cn(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Ig=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=_S(n,function(v){return v.coordinate}),o=1/0,u=1,h=a.length;u<h;u++){var f=a[u],g=a[u-1];o=Math.min((f.coordinate||0)-(g.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},K4=function(e,n,r){return!e||!e.length||fp(e,Ao(r,"type.defaultProps.domain"))?n:e},XB=function(e,n){var r=e.type.defaultProps?Wr(Wr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,u=r.formatter,h=r.tooltipType,f=r.chartType,g=r.hide;return Wr(Wr({},bn(e,!1)),{},{dataKey:i,unit:o,formatter:u,name:a||i,color:XS(e),value:to(n,i),type:h,payload:n,chartType:f,hide:g})};function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function W4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W4(Object(n),!0).forEach(function(r){Qee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qee(t,e,n){return e=Jee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jee(t){var e=Zee(t,"string");return yp(e)=="symbol"?e:e+""}function Zee(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ng=Math.PI/180,ete=function(e){return e*180/Math.PI},Hi=function(e,n,r,i){return{x:e+Math.cos(-Ng*i)*r,y:n+Math.sin(-Ng*i)*r}},tte=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},nte=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,u=tte({x:r,y:i},{x:a,y:o});if(u<=0)return{radius:u};var h=(r-a)/u,f=Math.acos(h);return i>o&&(f=2*Math.PI-f),{radius:u,angle:ete(f),angleInRadian:f}},rte=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},ite=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),u=Math.min(a,o);return e+u*360},Q4=function(e,n){var r=e.x,i=e.y,a=nte({x:r,y:i},n),o=a.radius,u=a.angle,h=n.innerRadius,f=n.outerRadius;if(o<h||o>f)return!1;if(o===0)return!0;var g=rte(n),v=g.startAngle,A=g.endAngle,N=u,P;if(v<=A){for(;N>A;)N-=360;for(;N<v;)N+=360;P=N>=v&&N<=A}else{for(;N>v;)N-=360;for(;N<A;)N+=360;P=N>=A&&N<=v}return P?X4(X4({},n),{},{radius:o,angle:ite(N,n)}):null};function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}var ate=["offset"];function ote(t){return ute(t)||cte(t)||lte(t)||ste()}function ste(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lte(t,e){if(t){if(typeof t=="string")return bA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bA(t,e)}}function cte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ute(t){if(Array.isArray(t))return bA(t)}function bA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dte(t,e){if(t==null)return{};var n=fte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function J4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J4(Object(n),!0).forEach(function(r){hte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hte(t,e,n){return e=pte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pte(t){var e=mte(t,"string");return xp(e)=="symbol"?e:e+""}function mte(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vp(){return vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vp.apply(this,arguments)}var gte=function(e){var n=e.value,r=e.formatter,i=Rn(e.children)?n:e.children;return cn(r)?r(i):i},yte=function(e,n){var r=Fo(n-e),i=Math.min(Math.abs(n-e),360);return r*i},xte=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,u=e.className,h=a,f=h.cx,g=h.cy,v=h.innerRadius,A=h.outerRadius,N=h.startAngle,P=h.endAngle,O=h.clockWise,R=(v+A)/2,L=yte(N,P),U=L>=0?1:-1,F,q;i==="insideStart"?(F=N+U*o,q=O):i==="insideEnd"?(F=P-U*o,q=!O):i==="end"&&(F=P+U*o,q=O),q=L<=0?q:!q;var H=Hi(f,g,R,F),G=Hi(f,g,R,F+(q?1:-1)*359),B="M".concat(H.x,",").concat(H.y,`
    A`).concat(R,",").concat(R,",0,1,").concat(q?0:1,`,
    `).concat(G.x,",").concat(G.y),z=Rn(e.id)?Yp("recharts-radial-line-"):e.id;return we.createElement("text",vp({},r,{dominantBaseline:"central",className:Fn("recharts-radial-bar-label",u)}),we.createElement("defs",null,we.createElement("path",{id:z,d:B})),we.createElement("textPath",{xlinkHref:"#".concat(z)},n))},vte=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,u=a.cy,h=a.innerRadius,f=a.outerRadius,g=a.startAngle,v=a.endAngle,A=(g+v)/2;if(i==="outside"){var N=Hi(o,u,f+r,A),P=N.x,O=N.y;return{x:P,y:O,textAnchor:P>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"end"};var R=(h+f)/2,L=Hi(o,u,R,A),U=L.x,F=L.y;return{x:U,y:F,textAnchor:"middle",verticalAnchor:"middle"}},bte=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,u=o.x,h=o.y,f=o.width,g=o.height,v=g>=0?1:-1,A=v*i,N=v>0?"end":"start",P=v>0?"start":"end",O=f>=0?1:-1,R=O*i,L=O>0?"end":"start",U=O>0?"start":"end";if(a==="top"){var F={x:u+f/2,y:h-v*i,textAnchor:"middle",verticalAnchor:N};return xi(xi({},F),r?{height:Math.max(h-r.y,0),width:f}:{})}if(a==="bottom"){var q={x:u+f/2,y:h+g+A,textAnchor:"middle",verticalAnchor:P};return xi(xi({},q),r?{height:Math.max(r.y+r.height-(h+g),0),width:f}:{})}if(a==="left"){var H={x:u-R,y:h+g/2,textAnchor:L,verticalAnchor:"middle"};return xi(xi({},H),r?{width:Math.max(H.x-r.x,0),height:g}:{})}if(a==="right"){var G={x:u+f+R,y:h+g/2,textAnchor:U,verticalAnchor:"middle"};return xi(xi({},G),r?{width:Math.max(r.x+r.width-G.x,0),height:g}:{})}var B=r?{width:f,height:g}:{};return a==="insideLeft"?xi({x:u+R,y:h+g/2,textAnchor:U,verticalAnchor:"middle"},B):a==="insideRight"?xi({x:u+f-R,y:h+g/2,textAnchor:L,verticalAnchor:"middle"},B):a==="insideTop"?xi({x:u+f/2,y:h+A,textAnchor:"middle",verticalAnchor:P},B):a==="insideBottom"?xi({x:u+f/2,y:h+g-A,textAnchor:"middle",verticalAnchor:N},B):a==="insideTopLeft"?xi({x:u+R,y:h+A,textAnchor:U,verticalAnchor:P},B):a==="insideTopRight"?xi({x:u+f-R,y:h+A,textAnchor:L,verticalAnchor:P},B):a==="insideBottomLeft"?xi({x:u+R,y:h+g-A,textAnchor:U,verticalAnchor:N},B):a==="insideBottomRight"?xi({x:u+f-R,y:h+g-A,textAnchor:L,verticalAnchor:N},B):sf(a)&&(bt(a.x)||Fc(a.x))&&(bt(a.y)||Fc(a.y))?xi({x:u+ou(a.x,f),y:h+ou(a.y,g),textAnchor:"end",verticalAnchor:"end"},B):xi({x:u+f/2,y:h+g/2,textAnchor:"middle",verticalAnchor:"middle"},B)},wte=function(e){return"cx"in e&&bt(e.cx)};function ea(t){var e=t.offset,n=e===void 0?5:e,r=dte(t,ate),i=xi({offset:n},r),a=i.viewBox,o=i.position,u=i.value,h=i.children,f=i.content,g=i.className,v=g===void 0?"":g,A=i.textBreakAll;if(!a||Rn(u)&&Rn(h)&&!le.isValidElement(f)&&!cn(f))return null;if(le.isValidElement(f))return le.cloneElement(f,i);var N;if(cn(f)){if(N=le.createElement(f,i),le.isValidElement(N))return N}else N=gte(i);var P=wte(a),O=bn(i,!0);if(P&&(o==="insideStart"||o==="insideEnd"||o==="end"))return xte(i,N,O);var R=P?vte(i):bte(i);return we.createElement(hg,vp({className:Fn("recharts-label",v)},O,R,{breakAll:A}),N)}ea.displayName="Label";var QB=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,u=e.r,h=e.radius,f=e.innerRadius,g=e.outerRadius,v=e.x,A=e.y,N=e.top,P=e.left,O=e.width,R=e.height,L=e.clockWise,U=e.labelViewBox;if(U)return U;if(bt(O)&&bt(R)){if(bt(v)&&bt(A))return{x:v,y:A,width:O,height:R};if(bt(N)&&bt(P))return{x:N,y:P,width:O,height:R}}return bt(v)&&bt(A)?{x:v,y:A,width:0,height:0}:bt(n)&&bt(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:f||0,outerRadius:g||h||u||0,clockWise:L}:e.viewBox?e.viewBox:{}},Ete=function(e,n){return e?e===!0?we.createElement(ea,{key:"label-implicit",viewBox:n}):vi(e)?we.createElement(ea,{key:"label-implicit",viewBox:n,value:e}):le.isValidElement(e)?e.type===ea?le.cloneElement(e,{key:"label-implicit",viewBox:n}):we.createElement(ea,{key:"label-implicit",content:e,viewBox:n}):cn(e)?we.createElement(ea,{key:"label-implicit",content:e,viewBox:n}):sf(e)?we.createElement(ea,vp({viewBox:n},e,{key:"label-implicit"})):null:null},_te=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=QB(e),o=qo(i,ea).map(function(h,f){return le.cloneElement(h,{viewBox:n||a,key:"label-".concat(f)})});if(!r)return o;var u=Ete(e.label,n||a);return[u].concat(ote(o))};ea.parseViewBox=QB;ea.renderCallByParent=_te;var OE,Z4;function Ate(){if(Z4)return OE;Z4=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return OE=t,OE}var Tte=Ate();const Ste=pr(Tte);function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}var Cte=["valueAccessor"],Ite=["data","dataKey","clockWise","id","textBreakAll"];function Nte(t){return Ote(t)||Dte(t)||Mte(t)||Rte()}function Rte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mte(t,e){if(t){if(typeof t=="string")return wA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wA(t,e)}}function Dte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ote(t){if(Array.isArray(t))return wA(t)}function wA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rg(){return Rg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rg.apply(this,arguments)}function eP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eP(Object(n),!0).forEach(function(r){Pte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pte(t,e,n){return e=kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kte(t){var e=Lte(t,"string");return bp(e)=="symbol"?e:e+""}function Lte(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nP(t,e){if(t==null)return{};var n=Bte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var jte=function(e){return Array.isArray(e.value)?Ste(e.value):e.value};function Wl(t){var e=t.valueAccessor,n=e===void 0?jte:e,r=nP(t,Cte),i=r.data,a=r.dataKey,o=r.clockWise,u=r.id,h=r.textBreakAll,f=nP(r,Ite);return!i||!i.length?null:we.createElement(Vr,{className:"recharts-label-list"},i.map(function(g,v){var A=Rn(a)?n(g,v):to(g&&g.payload,a),N=Rn(u)?{}:{id:"".concat(u,"-").concat(v)};return we.createElement(ea,Rg({},bn(g,!0),f,N,{parentViewBox:g.parentViewBox,value:A,textBreakAll:h,viewBox:ea.parseViewBox(Rn(o)?g:tP(tP({},g),{},{clockWise:o})),key:"label-".concat(v),index:v}))}))}Wl.displayName="LabelList";function Ute(t,e){return t?t===!0?we.createElement(Wl,{key:"labelList-implicit",data:e}):we.isValidElement(t)||cn(t)?we.createElement(Wl,{key:"labelList-implicit",data:e,content:t}):sf(t)?we.createElement(Wl,Rg({data:e},t,{key:"labelList-implicit"})):null:null}function Vte(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=qo(r,Wl).map(function(o,u){return le.cloneElement(o,{data:e,key:"labelList-".concat(u)})});if(!n)return i;var a=Ute(t.label,e);return[a].concat(Nte(i))}Wl.renderCallByParent=Vte;function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EA.apply(this,arguments)}function rP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rP(Object(n),!0).forEach(function(r){Fte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fte(t,e,n){return e=qte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t){var e=zte(t,"string");return wp(e)=="symbol"?e:e+""}function zte(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gte=function(e,n){var r=Fo(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},xm=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,u=e.isExternal,h=e.cornerRadius,f=e.cornerIsExternal,g=h*(u?1:-1)+i,v=Math.asin(h/g)/Ng,A=f?a:a+o*v,N=Hi(n,r,g,A),P=Hi(n,r,i,A),O=f?a-o*v:a,R=Hi(n,r,g*Math.cos(v*Ng),O);return{center:N,circleTangency:P,lineTangency:R,theta:v}},JB=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,u=e.endAngle,h=Gte(o,u),f=o+h,g=Hi(n,r,a,o),v=Hi(n,r,a,f),A="M ".concat(g.x,",").concat(g.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(h)>180),",").concat(+(o>f),`,
    `).concat(v.x,",").concat(v.y,`
  `);if(i>0){var N=Hi(n,r,i,o),P=Hi(n,r,i,f);A+="L ".concat(P.x,",").concat(P.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(h)>180),",").concat(+(o<=f),`,
            `).concat(N.x,",").concat(N.y," Z")}else A+="L ".concat(n,",").concat(r," Z");return A},Hte=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,u=e.forceCornerRadius,h=e.cornerIsExternal,f=e.startAngle,g=e.endAngle,v=Fo(g-f),A=xm({cx:n,cy:r,radius:a,angle:f,sign:v,cornerRadius:o,cornerIsExternal:h}),N=A.circleTangency,P=A.lineTangency,O=A.theta,R=xm({cx:n,cy:r,radius:a,angle:g,sign:-v,cornerRadius:o,cornerIsExternal:h}),L=R.circleTangency,U=R.lineTangency,F=R.theta,q=h?Math.abs(f-g):Math.abs(f-g)-O-F;if(q<0)return u?"M ".concat(P.x,",").concat(P.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):JB({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:f,endAngle:g});var H="M ".concat(P.x,",").concat(P.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(v<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(q>180),",").concat(+(v<0),",").concat(L.x,",").concat(L.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(v<0),",").concat(U.x,",").concat(U.y,`
  `);if(i>0){var G=xm({cx:n,cy:r,radius:i,angle:f,sign:v,isExternal:!0,cornerRadius:o,cornerIsExternal:h}),B=G.circleTangency,z=G.lineTangency,V=G.theta,ee=xm({cx:n,cy:r,radius:i,angle:g,sign:-v,isExternal:!0,cornerRadius:o,cornerIsExternal:h}),Q=ee.circleTangency,X=ee.lineTangency,K=ee.theta,ge=h?Math.abs(f-g):Math.abs(f-g)-V-K;if(ge<0&&o===0)return"".concat(H,"L").concat(n,",").concat(r,"Z");H+="L".concat(X.x,",").concat(X.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(v<0),",").concat(Q.x,",").concat(Q.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ge>180),",").concat(+(v>0),",").concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(v<0),",").concat(z.x,",").concat(z.y,"Z")}else H+="L".concat(n,",").concat(r,"Z");return H},$te={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZB=function(e){var n=iP(iP({},$te),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,u=n.cornerRadius,h=n.forceCornerRadius,f=n.cornerIsExternal,g=n.startAngle,v=n.endAngle,A=n.className;if(o<a||g===v)return null;var N=Fn("recharts-sector",A),P=o-a,O=ou(u,P,0,!0),R;return O>0&&Math.abs(g-v)<360?R=Hte({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(O,P/2),forceCornerRadius:h,cornerIsExternal:f,startAngle:g,endAngle:v}):R=JB({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:g,endAngle:v}),we.createElement("path",EA({},bn(n,!0),{className:N,d:R,role:"img"}))};function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function _A(){return _A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_A.apply(this,arguments)}function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){Yte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yte(t,e,n){return e=Kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kte(t){var e=Wte(t,"string");return Ep(e)=="symbol"?e:e+""}function Wte(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sP={curveBasisClosed:mY,curveBasisOpen:gY,curveBasis:pY,curveBumpX:eY,curveBumpY:tY,curveLinearClosed:yY,curveLinear:My,curveMonotoneX:xY,curveMonotoneY:vY,curveNatural:bY,curveStep:wY,curveStepAfter:_Y,curveStepBefore:EY},vm=function(e){return e.x===+e.x&&e.y===+e.y},mh=function(e){return e.x},gh=function(e){return e.y},Xte=function(e,n){if(cn(e))return e;var r="curve".concat(Ny(e));return(r==="curveMonotone"||r==="curveBump")&&n?sP["".concat(r).concat(n==="vertical"?"Y":"X")]:sP[r]||My},Qte=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,u=e.layout,h=e.connectNulls,f=h===void 0?!1:h,g=Xte(r,u),v=f?a.filter(function(O){return vm(O)}):a,A;if(Array.isArray(o)){var N=f?o.filter(function(O){return vm(O)}):o,P=v.map(function(O,R){return oP(oP({},O),{},{base:N[R]})});return u==="vertical"?A=um().y(gh).x1(mh).x0(function(O){return O.base.x}):A=um().x(mh).y1(gh).y0(function(O){return O.base.y}),A.defined(vm).curve(g),A(P)}return u==="vertical"&&bt(o)?A=um().y(gh).x1(mh).x0(o):bt(o)?A=um().x(mh).y1(gh).y0(o):A=i9().x(mh).y(gh),A.defined(vm).curve(g),A(v)},Uh=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?Qte(e):i;return we.createElement("path",_A({},bn(e,!1),tg(e),{className:Fn("recharts-curve",n),d:o,ref:a}))},PE={exports:{}},kE,lP;function Jte(){if(lP)return kE;lP=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kE=t,kE}var LE,cP;function Zte(){if(cP)return LE;cP=1;var t=Jte();function e(){}function n(){}return n.resetWarningCache=e,LE=function(){function r(o,u,h,f,g,v){if(v!==t){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},LE}var uP;function ene(){return uP||(uP=1,PE.exports=Zte()()),PE.exports}var tne=ene();const Wn=pr(tne),{getOwnPropertyNames:nne,getOwnPropertySymbols:rne}=Object,{hasOwnProperty:ine}=Object.prototype;function BE(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function bm(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:a}=i,o=a.get(n),u=a.get(r);if(o&&u)return o===r&&u===n;a.set(n,r),a.set(r,n);const h=t(n,r,i);return a.delete(n),a.delete(r),h}}function ane(t){return t!=null?t[Symbol.toStringTag]:void 0}function dP(t){return nne(t).concat(rne(t))}const one=Object.hasOwn||((t,e)=>ine.call(t,e));function gu(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const sne="__v",lne="__o",cne="_owner",{getOwnPropertyDescriptor:fP,keys:hP}=Object;function une(t,e){return t.byteLength===e.byteLength&&Mg(new Uint8Array(t),new Uint8Array(e))}function dne(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function fne(t,e){return t.byteLength===e.byteLength&&Mg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function hne(t,e){return gu(t.getTime(),e.getTime())}function pne(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function mne(t,e){return t===e}function pP(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.entries();let o,u,h=0;for(;(o=a.next())&&!o.done;){const f=e.entries();let g=!1,v=0;for(;(u=f.next())&&!u.done;){if(i[v]){v++;continue}const A=o.value,N=u.value;if(n.equals(A[0],N[0],h,v,t,e,n)&&n.equals(A[1],N[1],A[0],N[0],t,e,n)){g=i[v]=!0;break}v++}if(!g)return!1;h++}return!0}const gne=gu;function yne(t,e,n){const r=hP(t);let i=r.length;if(hP(e).length!==i)return!1;for(;i-- >0;)if(!ej(t,e,n,r[i]))return!1;return!0}function yh(t,e,n){const r=dP(t);let i=r.length;if(dP(e).length!==i)return!1;let a,o,u;for(;i-- >0;)if(a=r[i],!ej(t,e,n,a)||(o=fP(t,a),u=fP(e,a),(o||u)&&(!o||!u||o.configurable!==u.configurable||o.enumerable!==u.enumerable||o.writable!==u.writable)))return!1;return!0}function xne(t,e){return gu(t.valueOf(),e.valueOf())}function vne(t,e){return t.source===e.source&&t.flags===e.flags}function mP(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.values();let o,u;for(;(o=a.next())&&!o.done;){const h=e.values();let f=!1,g=0;for(;(u=h.next())&&!u.done;){if(!i[g]&&n.equals(o.value,u.value,o.value,u.value,t,e,n)){f=i[g]=!0;break}g++}if(!f)return!1}return!0}function Mg(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function bne(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function ej(t,e,n,r){return(r===cne||r===lne||r===sne)&&(t.$$typeof||e.$$typeof)?!0:one(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const wne="[object ArrayBuffer]",Ene="[object Arguments]",_ne="[object Boolean]",Ane="[object DataView]",Tne="[object Date]",Sne="[object Error]",Cne="[object Map]",Ine="[object Number]",Nne="[object Object]",Rne="[object RegExp]",Mne="[object Set]",Dne="[object String]",One={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Pne="[object URL]",kne=Object.prototype.toString;function Lne({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:o,areNumbersEqual:u,areObjectsEqual:h,arePrimitiveWrappersEqual:f,areRegExpsEqual:g,areSetsEqual:v,areTypedArraysEqual:A,areUrlsEqual:N,unknownTagComparators:P}){return function(R,L,U){if(R===L)return!0;if(R==null||L==null)return!1;const F=typeof R;if(F!==typeof L)return!1;if(F!=="object")return F==="number"?u(R,L,U):F==="function"?a(R,L,U):!1;const q=R.constructor;if(q!==L.constructor)return!1;if(q===Object)return h(R,L,U);if(Array.isArray(R))return e(R,L,U);if(q===Date)return r(R,L,U);if(q===RegExp)return g(R,L,U);if(q===Map)return o(R,L,U);if(q===Set)return v(R,L,U);const H=kne.call(R);if(H===Tne)return r(R,L,U);if(H===Rne)return g(R,L,U);if(H===Cne)return o(R,L,U);if(H===Mne)return v(R,L,U);if(H===Nne)return typeof R.then!="function"&&typeof L.then!="function"&&h(R,L,U);if(H===Pne)return N(R,L,U);if(H===Sne)return i(R,L,U);if(H===Ene)return h(R,L,U);if(One[H])return A(R,L,U);if(H===wne)return t(R,L,U);if(H===Ane)return n(R,L,U);if(H===_ne||H===Ine||H===Dne)return f(R,L,U);if(P){let G=P[H];if(!G){const B=ane(R);B&&(G=P[B])}if(G)return G(R,L,U)}return!1}}function Bne({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:une,areArraysEqual:n?yh:dne,areDataViewsEqual:fne,areDatesEqual:hne,areErrorsEqual:pne,areFunctionsEqual:mne,areMapsEqual:n?BE(pP,yh):pP,areNumbersEqual:gne,areObjectsEqual:n?yh:yne,arePrimitiveWrappersEqual:xne,areRegExpsEqual:vne,areSetsEqual:n?BE(mP,yh):mP,areTypedArraysEqual:n?BE(Mg,yh):Mg,areUrlsEqual:bne,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=bm(r.areArraysEqual),a=bm(r.areMapsEqual),o=bm(r.areObjectsEqual),u=bm(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:u})}return r}function jne(t){return function(e,n,r,i,a,o,u){return t(e,n,u)}}function Une({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(u,h){const{cache:f=t?new WeakMap:void 0,meta:g}=n();return e(u,h,{cache:f,equals:r,meta:g,strict:i})};if(t)return function(u,h){return e(u,h,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,h){return e(u,h,a)}}const Vne=oc();oc({strict:!0});oc({circular:!0});oc({circular:!0,strict:!0});oc({createInternalComparator:()=>gu});oc({strict:!0,createInternalComparator:()=>gu});oc({circular:!0,createInternalComparator:()=>gu});oc({circular:!0,createInternalComparator:()=>gu,strict:!0});function oc(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,a=Bne(t),o=Lne(a),u=n?n(o):jne(o);return Une({circular:e,comparator:o,createState:r,equals:u,strict:i})}function Fne(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function gP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):Fne(i)};requestAnimationFrame(r)}function AA(t){"@babel/helpers - typeof";return AA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AA(t)}function qne(t){return $ne(t)||Hne(t)||Gne(t)||zne()}function zne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gne(t,e){if(t){if(typeof t=="string")return yP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yP(t,e)}}function yP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ne(t){if(Array.isArray(t))return t}function Yne(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,u=qne(o),h=u[0],f=u.slice(1);if(typeof h=="number"){gP(i.bind(null,f),h);return}i(h),gP(i.bind(null,f));return}AA(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function xP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xP(Object(n),!0).forEach(function(r){tj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tj(t,e,n){return e=Kne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kne(t){var e=Wne(t,"string");return _p(e)==="symbol"?e:String(e)}function Wne(t,e){if(_p(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_p(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xne=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Qne=function(e){return e},Jne=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Vh=function(e,n){return Object.keys(n).reduce(function(r,i){return vP(vP({},r),{},tj({},i,e(i,n[i])))},{})},bP=function(e,n,r){return e.map(function(i){return"".concat(Jne(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Zne(t,e){return nre(t)||tre(t,e)||nj(t,e)||ere()}function ere(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function nre(t){if(Array.isArray(t))return t}function rre(t){return ore(t)||are(t)||nj(t)||ire()}function ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nj(t,e){if(t){if(typeof t=="string")return TA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(t,e)}}function are(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ore(t){if(Array.isArray(t))return TA(t)}function TA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Dg=1e-4,rj=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},ij=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},wP=function(e,n){return function(r){var i=rj(e,n);return ij(i,r)}},sre=function(e,n){return function(r){var i=rj(e,n),a=[].concat(rre(i.map(function(o,u){return o*u}).slice(1)),[0]);return ij(a,r)}},EP=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],u=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,u=1;break;case"ease":i=.25,a=.1,o=.25,u=1;break;case"ease-in":i=.42,a=0,o=1,u=1;break;case"ease-out":i=.42,a=0,o=.58,u=1;break;case"ease-in-out":i=0,a=0,o=.58,u=1;break;default:{var h=n[0].split("(");if(h[0]==="cubic-bezier"&&h[1].split(")")[0].split(",").length===4){var f=h[1].split(")")[0].split(",").map(function(R){return parseFloat(R)}),g=Zne(f,4);i=g[0],a=g[1],o=g[2],u=g[3]}}}var v=wP(i,o),A=wP(a,u),N=sre(i,o),P=function(L){return L>1?1:L<0?0:L},O=function(L){for(var U=L>1?1:L,F=U,q=0;q<8;++q){var H=v(F)-U,G=N(F);if(Math.abs(H-U)<Dg||G<Dg)return A(F);F=P(F-H/G)}return A(F)};return O.isStepper=!1,O},lre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,u=o===void 0?17:o,h=function(g,v,A){var N=-(g-v)*r,P=A*a,O=A+(N-P)*u/1e3,R=A*u/1e3+g;return Math.abs(R-v)<Dg&&Math.abs(O)<Dg?[v,0]:[R,O]};return h.isStepper=!0,h.dt=u,h},cre=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return EP(i);case"spring":return lre();default:if(i.split("(")[0]==="cubic-bezier")return EP(i)}return typeof i=="function"?i:null};function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function _P(t){return fre(t)||dre(t)||aj(t)||ure()}function ure(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fre(t){if(Array.isArray(t))return CA(t)}function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){SA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SA(t,e,n){return e=hre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hre(t){var e=pre(t,"string");return Ap(e)==="symbol"?e:String(e)}function pre(t,e){if(Ap(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ap(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mre(t,e){return xre(t)||yre(t,e)||aj(t,e)||gre()}function gre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aj(t,e){if(t){if(typeof t=="string")return CA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CA(t,e)}}function CA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function xre(t){if(Array.isArray(t))return t}var Og=function(e,n,r){return e+(n-e)*r},IA=function(e){var n=e.from,r=e.to;return n!==r},vre=function t(e,n,r){var i=Vh(function(a,o){if(IA(o)){var u=e(o.from,o.to,o.velocity),h=mre(u,2),f=h[0],g=h[1];return Fi(Fi({},o),{},{from:f,velocity:g})}return o},n);return r<1?Vh(function(a,o){return IA(o)?Fi(Fi({},o),{},{velocity:Og(o.velocity,i[a].velocity,r),from:Og(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const bre=(function(t,e,n,r,i){var a=Xne(t,e),o=a.reduce(function(R,L){return Fi(Fi({},R),{},SA({},L,[t[L],e[L]]))},{}),u=a.reduce(function(R,L){return Fi(Fi({},R),{},SA({},L,{from:t[L],velocity:0,to:e[L]}))},{}),h=-1,f,g,v=function(){return null},A=function(){return Vh(function(L,U){return U.from},u)},N=function(){return!Object.values(u).filter(IA).length},P=function(L){f||(f=L);var U=L-f,F=U/n.dt;u=vre(n,u,F),i(Fi(Fi(Fi({},t),e),A())),f=L,N()||(h=requestAnimationFrame(v))},O=function(L){g||(g=L);var U=(L-g)/r,F=Vh(function(H,G){return Og.apply(void 0,_P(G).concat([n(U)]))},o);if(i(Fi(Fi(Fi({},t),e),F)),U<1)h=requestAnimationFrame(v);else{var q=Vh(function(H,G){return Og.apply(void 0,_P(G).concat([n(1)]))},o);i(Fi(Fi(Fi({},t),e),q))}};return v=n.isStepper?P:O,function(){return requestAnimationFrame(v),function(){cancelAnimationFrame(h)}}});function Fd(t){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(t)}var wre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ere(t,e){if(t==null)return{};var n=_re(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _re(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jE(t){return Cre(t)||Sre(t)||Tre(t)||Are()}function Are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tre(t,e){if(t){if(typeof t=="string")return NA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NA(t,e)}}function Sre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cre(t){if(Array.isArray(t))return NA(t)}function NA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(n),!0).forEach(function(r){Ih(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ih(t,e,n){return e=oj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ire(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oj(r.key),r)}}function Rre(t,e,n){return e&&Nre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oj(t){var e=Mre(t,"string");return Fd(e)==="symbol"?e:String(e)}function Mre(t,e){if(Fd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RA(t,e)}function RA(t,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RA(t,e)}function Ore(t){var e=Pre();return function(){var r=Pg(t),i;if(e){var a=Pg(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return MA(this,i)}}function MA(t,e){if(e&&(Fd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DA(t)}function DA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pg(t){return Pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pg(t)}var Qs=(function(t){Dre(n,t);var e=Ore(n);function n(r,i){var a;Ire(this,n),a=e.call(this,r,i);var o=a.props,u=o.isActive,h=o.attributeName,f=o.from,g=o.to,v=o.steps,A=o.children,N=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(DA(a)),a.changeStyle=a.changeStyle.bind(DA(a)),!u||N<=0)return a.state={style:{}},typeof A=="function"&&(a.state={style:g}),MA(a);if(v&&v.length)a.state={style:v[0].style};else if(f){if(typeof A=="function")return a.state={style:f},MA(a);a.state={style:h?Ih({},h,f):f}}else a.state={style:{}};return a}return Rre(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,u=a.canBegin,h=a.attributeName,f=a.shouldReAnimate,g=a.to,v=a.from,A=this.state.style;if(u){if(!o){var N={style:h?Ih({},h,g):g};this.state&&A&&(h&&A[h]!==g||!h&&A!==g)&&this.setState(N);return}if(!(Vne(i.to,g)&&i.canBegin&&i.isActive)){var P=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var O=P||f?v:i.to;if(this.state&&A){var R={style:h?Ih({},h,O):O};(h&&A[h]!==O||!h&&A!==O)&&this.setState(R)}this.runAnimation(Lo(Lo({},this.props),{},{from:O,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,u=i.to,h=i.duration,f=i.easing,g=i.begin,v=i.onAnimationEnd,A=i.onAnimationStart,N=bre(o,u,cre(f),h,this.changeStyle),P=function(){a.stopJSAnimation=N()};this.manager.start([A,g,P,h,v])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,u=i.begin,h=i.onAnimationStart,f=o[0],g=f.style,v=f.duration,A=v===void 0?0:v,N=function(O,R,L){if(L===0)return O;var U=R.duration,F=R.easing,q=F===void 0?"ease":F,H=R.style,G=R.properties,B=R.onAnimationEnd,z=L>0?o[L-1]:R,V=G||Object.keys(H);if(typeof q=="function"||q==="spring")return[].concat(jE(O),[a.runJSAnimation.bind(a,{from:z.style,to:H,duration:U,easing:q}),U]);var ee=bP(V,U,q),Q=Lo(Lo(Lo({},z.style),H),{},{transition:ee});return[].concat(jE(O),[Q,U,B]).filter(Qne)};return this.manager.start([h].concat(jE(o.reduce(N,[g,Math.max(A,u)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Yne());var a=i.begin,o=i.duration,u=i.attributeName,h=i.to,f=i.easing,g=i.onAnimationStart,v=i.onAnimationEnd,A=i.steps,N=i.children,P=this.manager;if(this.unSubscribe=P.subscribe(this.handleStyleChange),typeof f=="function"||typeof N=="function"||f==="spring"){this.runJSAnimation(i);return}if(A.length>1){this.runStepAnimation(i);return}var O=u?Ih({},u,h):h,R=bP(Object.keys(O),o,f);P.start([g,a,Lo(Lo({},O),{},{transition:R}),o,v])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var u=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var h=Ere(i,wre),f=le.Children.count(a),g=this.state.style;if(typeof a=="function")return a(g);if(!u||f===0||o<=0)return a;var v=function(N){var P=N.props,O=P.style,R=O===void 0?{}:O,L=P.className,U=le.cloneElement(N,Lo(Lo({},h),{},{style:Lo(Lo({},R),g),className:L}));return U};return f===1?v(le.Children.only(a)):we.createElement("div",null,le.Children.map(a,function(A){return v(A)}))}}]),n})(le.PureComponent);Qs.displayName="Animate";Qs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Qs.propTypes={from:Wn.oneOfType([Wn.object,Wn.string]),to:Wn.oneOfType([Wn.object,Wn.string]),attributeName:Wn.string,duration:Wn.number,begin:Wn.number,easing:Wn.oneOfType([Wn.string,Wn.func]),steps:Wn.arrayOf(Wn.shape({duration:Wn.number.isRequired,style:Wn.object.isRequired,easing:Wn.oneOfType([Wn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Wn.func]),properties:Wn.arrayOf("string"),onAnimationEnd:Wn.func})),children:Wn.oneOfType([Wn.node,Wn.func]),isActive:Wn.bool,canBegin:Wn.bool,onAnimationEnd:Wn.func,shouldReAnimate:Wn.bool,onAnimationStart:Wn.func,onAnimationReStart:Wn.func};function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function kg(){return kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kg.apply(this,arguments)}function kre(t,e){return Ure(t)||jre(t,e)||Bre(t,e)||Lre()}function Lre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(t,e){if(t){if(typeof t=="string")return SP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SP(t,e)}}function SP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function Ure(t){if(Array.isArray(t))return t}function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(r){Vre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vre(t,e,n){return e=Fre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fre(t){var e=qre(t,"string");return Tp(e)=="symbol"?e:e+""}function qre(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NP=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),u=i>=0?1:-1,h=r>=0?1:-1,f=i>=0&&r>=0||i<0&&r<0?1:0,g;if(o>0&&a instanceof Array){for(var v=[0,0,0,0],A=0,N=4;A<N;A++)v[A]=a[A]>o?o:a[A];g="M".concat(e,",").concat(n+u*v[0]),v[0]>0&&(g+="A ".concat(v[0],",").concat(v[0],",0,0,").concat(f,",").concat(e+h*v[0],",").concat(n)),g+="L ".concat(e+r-h*v[1],",").concat(n),v[1]>0&&(g+="A ".concat(v[1],",").concat(v[1],",0,0,").concat(f,`,
        `).concat(e+r,",").concat(n+u*v[1])),g+="L ".concat(e+r,",").concat(n+i-u*v[2]),v[2]>0&&(g+="A ".concat(v[2],",").concat(v[2],",0,0,").concat(f,`,
        `).concat(e+r-h*v[2],",").concat(n+i)),g+="L ".concat(e+h*v[3],",").concat(n+i),v[3]>0&&(g+="A ".concat(v[3],",").concat(v[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(n+i-u*v[3])),g+="Z"}else if(o>0&&a===+a&&a>0){var P=Math.min(o,a);g="M ".concat(e,",").concat(n+u*P,`
            A `).concat(P,",").concat(P,",0,0,").concat(f,",").concat(e+h*P,",").concat(n,`
            L `).concat(e+r-h*P,",").concat(n,`
            A `).concat(P,",").concat(P,",0,0,").concat(f,",").concat(e+r,",").concat(n+u*P,`
            L `).concat(e+r,",").concat(n+i-u*P,`
            A `).concat(P,",").concat(P,",0,0,").concat(f,",").concat(e+r-h*P,",").concat(n+i,`
            L `).concat(e+h*P,",").concat(n+i,`
            A `).concat(P,",").concat(P,",0,0,").concat(f,",").concat(e,",").concat(n+i-u*P," Z")}else g="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return g},zre=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,u=n.width,h=n.height;if(Math.abs(u)>0&&Math.abs(h)>0){var f=Math.min(a,a+u),g=Math.max(a,a+u),v=Math.min(o,o+h),A=Math.max(o,o+h);return r>=f&&r<=g&&i>=v&&i<=A}return!1},Gre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QS=function(e){var n=IP(IP({},Gre),e),r=le.useRef(),i=le.useState(-1),a=kre(i,2),o=a[0],u=a[1];le.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var q=r.current.getTotalLength();q&&u(q)}catch{}},[]);var h=n.x,f=n.y,g=n.width,v=n.height,A=n.radius,N=n.className,P=n.animationEasing,O=n.animationDuration,R=n.animationBegin,L=n.isAnimationActive,U=n.isUpdateAnimationActive;if(h!==+h||f!==+f||g!==+g||v!==+v||g===0||v===0)return null;var F=Fn("recharts-rectangle",N);return U?we.createElement(Qs,{canBegin:o>0,from:{width:g,height:v,x:h,y:f},to:{width:g,height:v,x:h,y:f},duration:O,animationEasing:P,isActive:U},function(q){var H=q.width,G=q.height,B=q.x,z=q.y;return we.createElement(Qs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:R,duration:O,isActive:L,easing:P},we.createElement("path",kg({},bn(n,!0),{className:F,d:NP(B,z,H,G,A),ref:r})))}):we.createElement("path",kg({},bn(n,!0),{className:F,d:NP(h,f,g,v,A)}))};function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OA.apply(this,arguments)}var JS=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=Fn("recharts-dot",a);return n===+n&&r===+r&&i===+i?we.createElement("circle",OA({},bn(e,!1),tg(e),{className:o,cx:n,cy:r,r:i})):null};function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}var Hre=["x","y","top","left","width","height","className"];function PA(){return PA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PA.apply(this,arguments)}function RP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(n),!0).forEach(function(r){Yre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yre(t,e,n){return e=Kre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kre(t){var e=Wre(t,"string");return Sp(e)=="symbol"?e:e+""}function Wre(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xre(t,e){if(t==null)return{};var n=Qre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Jre=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},Zre=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,u=o===void 0?0:o,h=e.left,f=h===void 0?0:h,g=e.width,v=g===void 0?0:g,A=e.height,N=A===void 0?0:A,P=e.className,O=Xre(e,Hre),R=$re({x:r,y:a,top:u,left:f,width:v,height:N},O);return!bt(r)||!bt(a)||!bt(v)||!bt(N)||!bt(u)||!bt(f)?null:we.createElement("path",PA({},bn(R,!0),{className:Fn("recharts-cross",P),d:Jre(r,a,v,N,u,f)}))},UE,MP;function eie(){if(MP)return UE;MP=1;var t=C9(),e=t(Object.getPrototypeOf,Object);return UE=e,UE}var VE,DP;function tie(){if(DP)return VE;DP=1;var t=el(),e=eie(),n=tl(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,u=a.hasOwnProperty,h=o.call(Object);function f(g){if(!n(g)||t(g)!=r)return!1;var v=e(g);if(v===null)return!0;var A=u.call(v,"constructor")&&v.constructor;return typeof A=="function"&&A instanceof A&&o.call(A)==h}return VE=f,VE}var nie=tie();const rie=pr(nie);var FE,OP;function iie(){if(OP)return FE;OP=1;var t=el(),e=tl(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return FE=r,FE}var aie=iie();const oie=pr(aie);function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function sie(t,e){return die(t)||uie(t,e)||cie(t,e)||lie()}function lie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cie(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function die(t){if(Array.isArray(t))return t}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){fie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fie(t,e,n){return e=hie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hie(t){var e=pie(t,"string");return Cp(e)=="symbol"?e:e+""}function pie(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BP=function(e,n,r,i,a){var o=r-i,u;return u="M ".concat(e,",").concat(n),u+="L ".concat(e+r,",").concat(n),u+="L ".concat(e+r-o/2,",").concat(n+a),u+="L ".concat(e+r-o/2-i,",").concat(n+a),u+="L ".concat(e,",").concat(n," Z"),u},mie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gie=function(e){var n=LP(LP({},mie),e),r=le.useRef(),i=le.useState(-1),a=sie(i,2),o=a[0],u=a[1];le.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var F=r.current.getTotalLength();F&&u(F)}catch{}},[]);var h=n.x,f=n.y,g=n.upperWidth,v=n.lowerWidth,A=n.height,N=n.className,P=n.animationEasing,O=n.animationDuration,R=n.animationBegin,L=n.isUpdateAnimationActive;if(h!==+h||f!==+f||g!==+g||v!==+v||A!==+A||g===0&&v===0||A===0)return null;var U=Fn("recharts-trapezoid",N);return L?we.createElement(Qs,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:A,x:h,y:f},to:{upperWidth:g,lowerWidth:v,height:A,x:h,y:f},duration:O,animationEasing:P,isActive:L},function(F){var q=F.upperWidth,H=F.lowerWidth,G=F.height,B=F.x,z=F.y;return we.createElement(Qs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:R,duration:O,easing:P},we.createElement("path",Lg({},bn(n,!0),{className:U,d:BP(B,z,q,H,G),ref:r})))}):we.createElement("g",null,we.createElement("path",Lg({},bn(n,!0),{className:U,d:BP(h,f,g,v,A)})))},yie=["option","shapeType","propTransformer","activeClassName","isActive"];function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function xie(t,e){if(t==null)return{};var n=vie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(r){bie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bie(t,e,n){return e=wie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wie(t){var e=Eie(t,"string");return Ip(e)=="symbol"?e:e+""}function Eie(t,e){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ie(t,e){return Bg(Bg({},e),t)}function Aie(t,e){return t==="symbols"}function UP(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return we.createElement(QS,n);case"trapezoid":return we.createElement(gie,n);case"sector":return we.createElement(ZB,n);case"symbols":if(Aie(e))return we.createElement(mS,n);break;default:return null}}function Tie(t){return le.isValidElement(t)?t.props:t}function Sie(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?_ie:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,u=t.isActive,h=xie(t,yie),f;if(le.isValidElement(e))f=le.cloneElement(e,Bg(Bg({},h),Tie(e)));else if(cn(e))f=e(h);else if(rie(e)&&!oie(e)){var g=i(e,h);f=we.createElement(UP,{shapeType:n,elementProps:g})}else{var v=h;f=we.createElement(UP,{shapeType:n,elementProps:v})}return u?we.createElement(Vr,{className:o},f):f}function $y(t,e){return e!=null&&"trapezoids"in t.props}function Yy(t,e){return e!=null&&"sectors"in t.props}function Np(t,e){return e!=null&&"points"in t.props}function Cie(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Iie(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Nie(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Rie(t,e){var n;return $y(t,e)?n=Cie:Yy(t,e)?n=Iie:Np(t,e)&&(n=Nie),n}function Mie(t,e){var n;return $y(t,e)?n="trapezoids":Yy(t,e)?n="sectors":Np(t,e)&&(n="points"),n}function Die(t,e){if($y(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Yy(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Np(t,e)?e.payload:{}}function Oie(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Mie(n,e),a=Die(n,e),o=r.filter(function(h,f){var g=fp(a,h),v=n.props[i].filter(function(P){var O=Rie(n,e);return O(P,e)}),A=n.props[i].indexOf(v[v.length-1]),N=f===A;return g&&N}),u=r.indexOf(o[o.length-1]);return u}var qE,VP;function Pie(){if(VP)return qE;VP=1;var t=Math.ceil,e=Math.max;function n(r,i,a,o){for(var u=-1,h=e(t((i-r)/(a||1)),0),f=Array(h);h--;)f[o?h:++u]=r,r+=a;return f}return qE=n,qE}var zE,FP;function sj(){if(FP)return zE;FP=1;var t=z9(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return zE=r,zE}var GE,qP;function kie(){if(qP)return GE;qP=1;var t=Pie(),e=ky(),n=sj();function r(i){return function(a,o,u){return u&&typeof u!="number"&&e(a,o,u)&&(o=u=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),u=u===void 0?a<o?1:-1:n(u),t(a,o,u,i)}}return GE=r,GE}var HE,zP;function Lie(){if(zP)return HE;zP=1;var t=kie(),e=t();return HE=e,HE}var Bie=Lie();const jg=pr(Bie);function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(r){lj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lj(t,e,n){return e=jie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jie(t){var e=Uie(t,"string");return Rp(e)=="symbol"?e:e+""}function Uie(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vie=["Webkit","Moz","O","ms"],Fie=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Vie.reduce(function(a,o){return HP(HP({},a),{},lj({},o+r,n))},{});return i[e]=n,i};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}function $P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $E(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(n),!0).forEach(function(r){Wa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uj(r.key),r)}}function zie(t,e,n){return e&&YP(t.prototype,e),n&&YP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gie(t,e,n){return e=Vg(e),Hie(t,cj()?Reflect.construct(e,n||[],Vg(t).constructor):e.apply(t,n))}function Hie(t,e){if(e&&(qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ie(t)}function $ie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cj=function(){return!!t})()}function Vg(t){return Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vg(t)}function Yie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kA(t,e)}function kA(t,e){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kA(t,e)}function Wa(t,e,n){return e=uj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uj(t){var e=Kie(t,"string");return qd(e)=="symbol"?e:e+""}function Kie(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wie=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,u=e.travellerWidth;if(!n||!n.length)return{};var h=n.length,f=Bh().domain(jg(0,h)).range([a,a+o-u]),g=f.domain().map(function(v){return f(v)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:f(r),endX:f(i),scale:f,scaleValues:g}},KP=function(e){return e.changedTouches&&!!e.changedTouches.length},zd=(function(t){function e(n){var r;return qie(this,e),r=Gie(this,e,[n]),Wa(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Wa(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Wa(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,u=i.startIndex;o==null||o({endIndex:a,startIndex:u})}),r.detachDragEndListener()}),Wa(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Wa(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Wa(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Wa(r,"handleSlideDragStart",function(i){var a=KP(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Yie(e,t),zie(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,u=this.props,h=u.gap,f=u.data,g=f.length-1,v=Math.min(i,a),A=Math.max(i,a),N=e.getIndexInRange(o,v),P=e.getIndexInRange(o,A);return{startIndex:N-N%h,endIndex:P===g?g:P-P%h}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,u=i.dataKey,h=to(a[r],u,r);return cn(o)?o(h,r):h}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,u=i.endX,h=this.props,f=h.x,g=h.width,v=h.travellerWidth,A=h.startIndex,N=h.endIndex,P=h.onChange,O=r.pageX-a;O>0?O=Math.min(O,f+g-v-u,f+g-v-o):O<0&&(O=Math.max(O,f-o,f-u));var R=this.getIndex({startX:o+O,endX:u+O});(R.startIndex!==A||R.endIndex!==N)&&P&&P(R),this.setState({startX:o+O,endX:u+O,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=KP(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,u=i.endX,h=i.startX,f=this.state[o],g=this.props,v=g.x,A=g.width,N=g.travellerWidth,P=g.onChange,O=g.gap,R=g.data,L={startX:this.state.startX,endX:this.state.endX},U=r.pageX-a;U>0?U=Math.min(U,v+A-N-f):U<0&&(U=Math.max(U,v-f)),L[o]=f+U;var F=this.getIndex(L),q=F.startIndex,H=F.endIndex,G=function(){var z=R.length-1;return o==="startX"&&(u>h?q%O===0:H%O===0)||u<h&&H===z||o==="endX"&&(u>h?H%O===0:q%O===0)||u>h&&H===z};this.setState(Wa(Wa({},o,f+U),"brushMoveStartX",r.pageX),function(){P&&G()&&P(F)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,u=o.scaleValues,h=o.startX,f=o.endX,g=this.state[i],v=u.indexOf(g);if(v!==-1){var A=v+r;if(!(A===-1||A>=u.length)){var N=u[A];i==="startX"&&N>=f||i==="endX"&&N<=h||this.setState(Wa({},i,N),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,u=r.height,h=r.fill,f=r.stroke;return we.createElement("rect",{stroke:f,fill:h,x:i,y:a,width:o,height:u})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,u=r.height,h=r.data,f=r.children,g=r.padding,v=le.Children.only(f);return v?we.cloneElement(v,{x:i,y:a,width:o,height:u,margin:g,compact:!0,data:h}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,u=this,h=this.props,f=h.y,g=h.travellerWidth,v=h.height,A=h.traveller,N=h.ariaLabel,P=h.data,O=h.startIndex,R=h.endIndex,L=Math.max(r,this.props.x),U=$E($E({},bn(this.props,!1)),{},{x:L,y:f,width:g,height:v}),F=N||"Min value: ".concat((a=P[O])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=P[R])===null||o===void 0?void 0:o.name);return we.createElement(Vr,{tabIndex:0,role:"slider","aria-label":F,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(H){["ArrowLeft","ArrowRight"].includes(H.key)&&(H.preventDefault(),H.stopPropagation(),u.handleTravellerMoveKeyboard(H.key==="ArrowRight"?1:-1,i))},onFocus:function(){u.setState({isTravellerFocused:!0})},onBlur:function(){u.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(A,U))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,u=a.height,h=a.stroke,f=a.travellerWidth,g=Math.min(r,i)+f,v=Math.max(Math.abs(i-r)-f,0);return we.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:h,fillOpacity:.2,x:g,y:o,width:v,height:u})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,u=r.height,h=r.travellerWidth,f=r.stroke,g=this.state,v=g.startX,A=g.endX,N=5,P={pointerEvents:"none",fill:f};return we.createElement(Vr,{className:"recharts-brush-texts"},we.createElement(hg,Ug({textAnchor:"end",verticalAnchor:"middle",x:Math.min(v,A)-N,y:o+u/2},P),this.getTextOfTick(i)),we.createElement(hg,Ug({textAnchor:"start",verticalAnchor:"middle",x:Math.max(v,A)+h+N,y:o+u/2},P),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,u=r.x,h=r.y,f=r.width,g=r.height,v=r.alwaysShowText,A=this.state,N=A.startX,P=A.endX,O=A.isTextActive,R=A.isSlideMoving,L=A.isTravellerMoving,U=A.isTravellerFocused;if(!i||!i.length||!bt(u)||!bt(h)||!bt(f)||!bt(g)||f<=0||g<=0)return null;var F=Fn("recharts-brush",a),q=we.Children.count(o)===1,H=Fie("userSelect","none");return we.createElement(Vr,{className:F,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:H},this.renderBackground(),q&&this.renderPanorama(),this.renderSlide(N,P),this.renderTravellerLayer(N,"startX"),this.renderTravellerLayer(P,"endX"),(O||R||L||U||v)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,u=r.height,h=r.stroke,f=Math.floor(a+u/2)-1;return we.createElement(we.Fragment,null,we.createElement("rect",{x:i,y:a,width:o,height:u,fill:h,stroke:"none"}),we.createElement("line",{x1:i+1,y1:f,x2:i+o-1,y2:f,fill:"none",stroke:"#fff"}),we.createElement("line",{x1:i+1,y1:f+2,x2:i+o-1,y2:f+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return we.isValidElement(r)?a=we.cloneElement(r,i):cn(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,u=r.x,h=r.travellerWidth,f=r.updateId,g=r.startIndex,v=r.endIndex;if(a!==i.prevData||f!==i.prevUpdateId)return $E({prevData:a,prevTravellerWidth:h,prevUpdateId:f,prevX:u,prevWidth:o},a&&a.length?Wie({data:a,width:o,x:u,travellerWidth:h,startIndex:g,endIndex:v}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||u!==i.prevX||h!==i.prevTravellerWidth)){i.scale.range([u,u+o-h]);var A=i.scale.domain().map(function(N){return i.scale(N)});return{prevData:a,prevTravellerWidth:h,prevUpdateId:f,prevX:u,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:A}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,u=a-1;u-o>1;){var h=Math.floor((o+u)/2);r[h]>i?u=h:o=h}return i>=r[u]?u:o}}])})(le.PureComponent);Wa(zd,"displayName","Brush");Wa(zd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var YE,WP;function Xie(){if(WP)return YE;WP=1;var t=ES();function e(n,r){var i;return t(n,function(a,o,u){return i=r(a,o,u),!i}),!!i}return YE=e,YE}var KE,XP;function Qie(){if(XP)return KE;XP=1;var t=b9(),e=rc(),n=Xie(),r=La(),i=ky();function a(o,u,h){var f=r(o)?t:n;return h&&i(o,u,h)&&(u=void 0),f(o,e(u,3))}return KE=a,KE}var Jie=Qie();const Zie=pr(Jie);var cs=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},WE,QP;function eae(){if(QP)return WE;QP=1;var t=j9();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return WE=e,WE}var XE,JP;function tae(){if(JP)return XE;JP=1;var t=eae(),e=L9(),n=rc();function r(i,a){var o={};return a=n(a,3),e(i,function(u,h,f){t(o,h,a(u,h,f))}),o}return XE=r,XE}var nae=tae();const rae=pr(nae);var QE,ZP;function iae(){if(ZP)return QE;ZP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return QE=t,QE}var JE,ek;function aae(){if(ek)return JE;ek=1;var t=ES();function e(n,r){var i=!0;return t(n,function(a,o,u){return i=!!r(a,o,u),i}),i}return JE=e,JE}var ZE,tk;function oae(){if(tk)return ZE;tk=1;var t=iae(),e=aae(),n=rc(),r=La(),i=ky();function a(o,u,h){var f=r(o)?t:e;return h&&i(o,u,h)&&(u=void 0),f(o,n(u,3))}return ZE=a,ZE}var sae=oae();const dj=pr(sae);var lae=["x","y"];function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LA.apply(this,arguments)}function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(n),!0).forEach(function(r){cae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cae(t,e,n){return e=uae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uae(t){var e=dae(t,"string");return Mp(e)=="symbol"?e:e+""}function dae(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fae(t,e){if(t==null)return{};var n=hae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pae(t,e){var n=t.x,r=t.y,i=fae(t,lae),a="".concat(n),o=parseInt(a,10),u="".concat(r),h=parseInt(u,10),f="".concat(e.height||i.height),g=parseInt(f,10),v="".concat(e.width||i.width),A=parseInt(v,10);return xh(xh(xh(xh(xh({},e),i),o?{x:o}:{}),h?{y:h}:{}),{},{height:g,width:A,name:e.name,radius:e.radius})}function rk(t){return we.createElement(Sie,LA({shapeType:"rectangle",propTransformer:pae,activeClassName:"recharts-active-bar"},t))}var mae=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||lu(),n)}},gae=["value","background"],fj;function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function yae(t,e){if(t==null)return{};var n=xae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fg(){return Fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fg.apply(this,arguments)}function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(n),!0).forEach(function(r){Fl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ak(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pj(r.key),r)}}function bae(t,e,n){return e&&ak(t.prototype,e),n&&ak(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wae(t,e,n){return e=qg(e),Eae(t,hj()?Reflect.construct(e,n||[],qg(t).constructor):e.apply(t,n))}function Eae(t,e){if(e&&(Gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ae(t)}function _ae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hj=function(){return!!t})()}function qg(t){return qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qg(t)}function Aae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BA(t,e)}function BA(t,e){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BA(t,e)}function Fl(t,e,n){return e=pj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pj(t){var e=Tae(t,"string");return Gd(e)=="symbol"?e:e+""}function Tae(t,e){if(Gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yu=(function(t){function e(){var n;vae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=wae(this,e,[].concat(i)),Fl(n,"state",{isAnimationFinished:!1}),Fl(n,"id",Yp("recharts-bar-")),Fl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Fl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Aae(e,t),bae(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,u=a.dataKey,h=a.activeIndex,f=a.activeBar,g=bn(this.props,!1);return r&&r.map(function(v,A){var N=A===h,P=N?f:o,O=li(li(li({},g),v),{},{isActive:N,option:P,index:A,dataKey:u,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return we.createElement(Vr,Fg({className:"recharts-bar-rectangle"},ng(i.props,v,A),{key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value)}),we.createElement(rk,O))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,u=i.isAnimationActive,h=i.animationBegin,f=i.animationDuration,g=i.animationEasing,v=i.animationId,A=this.state.prevData;return we.createElement(Qs,{begin:h,duration:f,isActive:u,easing:g,from:{t:0},to:{t:1},key:"bar-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var P=N.t,O=a.map(function(R,L){var U=A&&A[L];if(U){var F=bo(U.x,R.x),q=bo(U.y,R.y),H=bo(U.width,R.width),G=bo(U.height,R.height);return li(li({},R),{},{x:F(P),y:q(P),width:H(P),height:G(P)})}if(o==="horizontal"){var B=bo(0,R.height),z=B(P);return li(li({},R),{},{y:R.y+R.height-z,height:z})}var V=bo(0,R.width),ee=V(P);return li(li({},R),{},{width:ee})});return we.createElement(Vr,null,r.renderRectanglesStatically(O))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!fp(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,u=i.activeIndex,h=bn(this.props.background,!1);return a.map(function(f,g){f.value;var v=f.background,A=yae(f,gae);if(!v)return null;var N=li(li(li(li(li({},A),{},{fill:"#eee"},v),h),ng(r.props,f,g)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:g,className:"recharts-bar-background-rectangle"});return we.createElement(rk,Fg({key:"background-bar-".concat(g),option:r.props.background,isActive:g===u},N))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,u=a.xAxis,h=a.yAxis,f=a.layout,g=a.children,v=qo(g,Hy);if(!v)return null;var A=f==="vertical"?o[0].height/2:o[0].width/2,N=function(R,L){var U=Array.isArray(R.value)?R.value[1]:R.value;return{x:R.x,y:R.y,value:U,errorVal:to(R,L)}},P={clipPath:r?"url(#clipPath-".concat(i,")"):null};return we.createElement(Vr,P,v.map(function(O){return we.cloneElement(O,{key:"error-bar-".concat(i,"-").concat(O.props.dataKey),data:o,xAxis:u,yAxis:h,layout:f,offset:A,dataPointFormatter:N})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,u=r.xAxis,h=r.yAxis,f=r.left,g=r.top,v=r.width,A=r.height,N=r.isAnimationActive,P=r.background,O=r.id;if(i||!a||!a.length)return null;var R=this.state.isAnimationFinished,L=Fn("recharts-bar",o),U=u&&u.allowDataOverflow,F=h&&h.allowDataOverflow,q=U||F,H=Rn(O)?this.id:O;return we.createElement(Vr,{className:L},U||F?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(H)},we.createElement("rect",{x:U?f:f-v/2,y:F?g:g-A/2,width:U?v:v*2,height:F?A:A*2}))):null,we.createElement(Vr,{className:"recharts-bar-rectangles",clipPath:q?"url(#clipPath-".concat(H,")"):null},P?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(q,H),(!N||R)&&Wl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(le.PureComponent);fj=yu;Fl(yu,"displayName","Bar");Fl(yu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!uf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Fl(yu,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,u=t.xAxisTicks,h=t.yAxisTicks,f=t.stackedData,g=t.dataStartIndex,v=t.displayedData,A=t.offset,N=Vee(r,n);if(!N)return null;var P=e.layout,O=n.type.defaultProps,R=O!==void 0?li(li({},O),n.props):n.props,L=R.dataKey,U=R.children,F=R.minPointSize,q=P==="horizontal"?o:a,H=f?q.scale.domain():null,G=Kee({numericAxis:q}),B=qo(U,TS),z=v.map(function(V,ee){var Q,X,K,ge,re,te;f?Q=Fee(f[g+ee],H):(Q=to(V,L),Array.isArray(Q)||(Q=[G,Q]));var se=mae(F,fj.defaultProps.minPointSize)(Q[1],ee);if(P==="horizontal"){var _e,ke=[o.scale(Q[0]),o.scale(Q[1])],Ke=ke[0],ce=ke[1];X=H4({axis:a,ticks:u,bandSize:i,offset:N.offset,entry:V,index:ee}),K=(_e=ce??Ke)!==null&&_e!==void 0?_e:void 0,ge=N.size;var fe=Ke-ce;if(re=Number.isNaN(fe)?0:fe,te={x:X,y:o.y,width:ge,height:o.height},Math.abs(se)>0&&Math.abs(re)<Math.abs(se)){var Ae=Fo(re||se)*(Math.abs(se)-Math.abs(re));K-=Ae,re+=Ae}}else{var He=[a.scale(Q[0]),a.scale(Q[1])],ot=He[0],Ye=He[1];if(X=ot,K=H4({axis:o,ticks:h,bandSize:i,offset:N.offset,entry:V,index:ee}),ge=Ye-ot,re=N.size,te={x:a.x,y:K,width:a.width,height:re},Math.abs(se)>0&&Math.abs(ge)<Math.abs(se)){var Ce=Fo(ge||se)*(Math.abs(se)-Math.abs(ge));ge+=Ce}}return li(li(li({},V),{},{x:X,y:K,width:ge,height:re,value:f?Q:Q[1],payload:V,background:te},B&&B[ee]&&B[ee].props),{},{tooltipPayload:[XB(n,V)],tooltipPosition:{x:X+ge/2,y:K+re/2}})});return li({data:z,layout:P},A)});function Dp(t){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}function Sae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ok(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mj(r.key),r)}}function Cae(t,e,n){return e&&ok(t.prototype,e),n&&ok(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(n),!0).forEach(function(r){Ky(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ky(t,e,n){return e=mj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mj(t){var e=Iae(t,"string");return Dp(e)=="symbol"?e:e+""}function Iae(t,e){if(Dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gj=function(e,n,r,i,a){var o=e.width,u=e.height,h=e.layout,f=e.children,g=Object.keys(n),v={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:u-r.bottom,bottomMirror:u-r.bottom},A=!!Xa(f,yu);return g.reduce(function(N,P){var O=n[P],R=O.orientation,L=O.domain,U=O.padding,F=U===void 0?{}:U,q=O.mirror,H=O.reversed,G="".concat(R).concat(q?"Mirror":""),B,z,V,ee,Q;if(O.type==="number"&&(O.padding==="gap"||O.padding==="no-gap")){var X=L[1]-L[0],K=1/0,ge=O.categoricalDomain.sort();if(ge.forEach(function(He,ot){ot>0&&(K=Math.min((He||0)-(ge[ot-1]||0),K))}),Number.isFinite(K)){var re=K/X,te=O.layout==="vertical"?r.height:r.width;if(O.padding==="gap"&&(B=re*te/2),O.padding==="no-gap"){var se=ou(e.barCategoryGap,re*te),_e=re*te/2;B=_e-se-(_e-se)/te*se}}}i==="xAxis"?z=[r.left+(F.left||0)+(B||0),r.left+r.width-(F.right||0)-(B||0)]:i==="yAxis"?z=h==="horizontal"?[r.top+r.height-(F.bottom||0),r.top+(F.top||0)]:[r.top+(F.top||0)+(B||0),r.top+r.height-(F.bottom||0)-(B||0)]:z=O.range,H&&(z=[z[1],z[0]]);var ke=jee(O,a,A),Ke=ke.scale,ce=ke.realScaleType;Ke.domain(L).range(z),Uee(Ke);var fe=Yee(Ke,jo(jo({},O),{},{realScaleType:ce}));i==="xAxis"?(Q=R==="top"&&!q||R==="bottom"&&q,V=r.left,ee=v[G]-Q*O.height):i==="yAxis"&&(Q=R==="left"&&!q||R==="right"&&q,V=v[G]-Q*O.width,ee=r.top);var Ae=jo(jo(jo({},O),fe),{},{realScaleType:ce,x:V,y:ee,scale:Ke,width:i==="xAxis"?r.width:O.width,height:i==="yAxis"?r.height:O.height});return Ae.bandSize=Ig(Ae,fe),!O.hide&&i==="xAxis"?v[G]+=(Q?-1:1)*Ae.height:O.hide||(v[G]+=(Q?-1:1)*Ae.width),jo(jo({},N),{},Ky({},P,Ae))},{})},yj=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},Nae=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return yj({x:n,y:r},{x:i,y:a})},xj=(function(){function t(e){Sae(this,t),this.scale=e}return Cae(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var u=this.bandwidth?this.bandwidth():0;return this.scale(n)+u}default:return this.scale(n)}if(i){var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+h}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();Ky(xj,"EPS",1e-4);var ZS=function(e){var n=Object.keys(e).reduce(function(r,i){return jo(jo({},r),{},Ky({},i,xj.create(e[i])))},{});return jo(jo({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,u=a.position;return rae(i,function(h,f){return n[f].apply(h,{bandAware:o,position:u})})},isInRange:function(i){return dj(i,function(a,o){return n[o].isInRange(a)})}})};function Rae(t){return(t%180+180)%180}var Mae=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Rae(i),o=a*Math.PI/180,u=Math.atan(r/n),h=o>u&&o<Math.PI-u?r/Math.sin(o):n/Math.cos(o);return Math.abs(h)},e_,lk;function Dae(){if(lk)return e_;lk=1;var t=rc(),e=Kp(),n=Oy();function r(i){return function(a,o,u){var h=Object(a);if(!e(a)){var f=t(o,3);a=n(a),o=function(v){return f(h[v],v,h)}}var g=i(a,o,u);return g>-1?h[f?a[g]:g]:void 0}}return e_=r,e_}var t_,ck;function Oae(){if(ck)return t_;ck=1;var t=sj();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return t_=e,t_}var n_,uk;function Pae(){if(uk)return n_;uk=1;var t=M9(),e=rc(),n=Oae(),r=Math.max;function i(a,o,u){var h=a==null?0:a.length;if(!h)return-1;var f=u==null?0:n(u);return f<0&&(f=r(h+f,0)),t(a,e(o,3),f)}return n_=i,n_}var r_,dk;function kae(){if(dk)return r_;dk=1;var t=Dae(),e=Pae(),n=t(e);return r_=n,r_}var Lae=kae();const Bae=pr(Lae);var jae=YL();const Uae=pr(jae);var Vae=Uae(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),e2=le.createContext(void 0),t2=le.createContext(void 0),vj=le.createContext(void 0),bj=le.createContext({}),wj=le.createContext(void 0),Ej=le.createContext(0),_j=le.createContext(0),fk=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,u=e.children,h=e.width,f=e.height,g=Vae(a);return we.createElement(e2.Provider,{value:r},we.createElement(t2.Provider,{value:i},we.createElement(bj.Provider,{value:a},we.createElement(vj.Provider,{value:g},we.createElement(wj.Provider,{value:o},we.createElement(Ej.Provider,{value:f},we.createElement(_j.Provider,{value:h},u)))))))},Fae=function(){return le.useContext(wj)},Aj=function(e){var n=le.useContext(e2);n==null&&lu();var r=n[e];return r==null&&lu(),r},qae=function(){var e=le.useContext(e2);return Bl(e)},zae=function(){var e=le.useContext(t2),n=Bae(e,function(r){return dj(r.domain,Number.isFinite)});return n||Bl(e)},Tj=function(e){var n=le.useContext(t2);n==null&&lu();var r=n[e];return r==null&&lu(),r},Gae=function(){var e=le.useContext(vj);return e},Hae=function(){return le.useContext(bj)},n2=function(){return le.useContext(_j)},r2=function(){return le.useContext(Ej)};function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}function $ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cj(r.key),r)}}function Kae(t,e,n){return e&&Yae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wae(t,e,n){return e=zg(e),Xae(t,Sj()?Reflect.construct(e,n||[],zg(t).constructor):e.apply(t,n))}function Xae(t,e){if(e&&(Hd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qae(t)}function Qae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sj=function(){return!!t})()}function zg(t){return zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zg(t)}function Jae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jA(t,e)}function jA(t,e){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jA(t,e)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){i2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i2(t,e,n){return e=Cj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cj(t){var e=Zae(t,"string");return Hd(e)=="symbol"?e:e+""}function Zae(t,e){if(Hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eoe(t,e){return ioe(t)||roe(t,e)||noe(t,e)||toe()}function toe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function noe(t,e){if(t){if(typeof t=="string")return mk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mk(t,e)}}function mk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function roe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function ioe(t){if(Array.isArray(t))return t}function UA(){return UA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UA.apply(this,arguments)}var aoe=function(e,n){var r;return we.isValidElement(e)?r=we.cloneElement(e,n):cn(e)?r=e(n):r=we.createElement("line",UA({},n,{className:"recharts-reference-line-line"})),r},ooe=function(e,n,r,i,a,o,u,h,f){var g=a.x,v=a.y,A=a.width,N=a.height;if(r){var P=f.y,O=e.y.apply(P,{position:o});if(cs(f,"discard")&&!e.y.isInRange(O))return null;var R=[{x:g+A,y:O},{x:g,y:O}];return h==="left"?R.reverse():R}if(n){var L=f.x,U=e.x.apply(L,{position:o});if(cs(f,"discard")&&!e.x.isInRange(U))return null;var F=[{x:U,y:v+N},{x:U,y:v}];return u==="top"?F.reverse():F}if(i){var q=f.segment,H=q.map(function(G){return e.apply(G,{position:o})});return cs(f,"discard")&&Zie(H,function(G){return!e.isInRange(G)})?null:H}return null};function soe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,u=t.className,h=t.alwaysShow,f=Fae(),g=Aj(i),v=Tj(a),A=Gae();if(!f||!A)return null;Gs(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var N=ZS({x:g.scale,y:v.scale}),P=vi(e),O=vi(n),R=r&&r.length===2,L=ooe(N,P,O,R,A,t.position,g.orientation,v.orientation,t);if(!L)return null;var U=eoe(L,2),F=U[0],q=F.x,H=F.y,G=U[1],B=G.x,z=G.y,V=cs(t,"hidden")?"url(#".concat(f,")"):void 0,ee=pk(pk({clipPath:V},bn(t,!0)),{},{x1:q,y1:H,x2:B,y2:z});return we.createElement(Vr,{className:Fn("recharts-reference-line",u)},aoe(o,ee),ea.renderCallByParent(t,Nae({x1:q,y1:H,x2:B,y2:z})))}var a2=(function(t){function e(){return $ae(this,e),Wae(this,e,arguments)}return Jae(e,t),Kae(e,[{key:"render",value:function(){return we.createElement(soe,this.props)}}])})(we.Component);i2(a2,"displayName","ReferenceLine");i2(a2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function VA(){return VA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VA.apply(this,arguments)}function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(t)}function gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(n),!0).forEach(function(r){Wy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function loe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function coe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nj(r.key),r)}}function uoe(t,e,n){return e&&coe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function doe(t,e,n){return e=Gg(e),foe(t,Ij()?Reflect.construct(e,n||[],Gg(t).constructor):e.apply(t,n))}function foe(t,e){if(e&&($d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hoe(t)}function hoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ij(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ij=function(){return!!t})()}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gg(t)}function poe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FA(t,e)}function FA(t,e){return FA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FA(t,e)}function Wy(t,e,n){return e=Nj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nj(t){var e=moe(t,"string");return $d(e)=="symbol"?e:e+""}function moe(t,e){if($d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var goe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=ZS({x:i.scale,y:a.scale}),u=o.apply({x:n,y:r},{bandAware:!0});return cs(e,"discard")&&!o.isInRange(u)?null:u},Xy=(function(t){function e(){return loe(this,e),doe(this,e,arguments)}return poe(e,t),uoe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,u=r.alwaysShow,h=r.clipPathId,f=vi(i),g=vi(a);if(Gs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!f||!g)return null;var v=goe(this.props);if(!v)return null;var A=v.x,N=v.y,P=this.props,O=P.shape,R=P.className,L=cs(this.props,"hidden")?"url(#".concat(h,")"):void 0,U=yk(yk({clipPath:L},bn(this.props,!0)),{},{cx:A,cy:N});return we.createElement(Vr,{className:Fn("recharts-reference-dot",R)},e.renderDot(O,U),ea.renderCallByParent(this.props,{x:A-o,y:N-o,width:2*o,height:2*o}))}}])})(we.Component);Wy(Xy,"displayName","ReferenceDot");Wy(Xy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Wy(Xy,"renderDot",function(t,e){var n;return we.isValidElement(t)?n=we.cloneElement(t,e):cn(t)?n=t(e):n=we.createElement(JS,VA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function qA(){return qA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qA.apply(this,arguments)}function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){Qy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xoe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mj(r.key),r)}}function voe(t,e,n){return e&&xoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function boe(t,e,n){return e=Hg(e),woe(t,Rj()?Reflect.construct(e,n||[],Hg(t).constructor):e.apply(t,n))}function woe(t,e){if(e&&(Yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eoe(t)}function Eoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rj=function(){return!!t})()}function Hg(t){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hg(t)}function _oe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zA(t,e)}function zA(t,e){return zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zA(t,e)}function Qy(t,e,n){return e=Mj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mj(t){var e=Aoe(t,"string");return Yd(e)=="symbol"?e:e+""}function Aoe(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Toe=function(e,n,r,i,a){var o=a.x1,u=a.x2,h=a.y1,f=a.y2,g=a.xAxis,v=a.yAxis;if(!g||!v)return null;var A=ZS({x:g.scale,y:v.scale}),N={x:e?A.x.apply(o,{position:"start"}):A.x.rangeMin,y:r?A.y.apply(h,{position:"start"}):A.y.rangeMin},P={x:n?A.x.apply(u,{position:"end"}):A.x.rangeMax,y:i?A.y.apply(f,{position:"end"}):A.y.rangeMax};return cs(a,"discard")&&(!A.isInRange(N)||!A.isInRange(P))?null:yj(N,P)},Jy=(function(t){function e(){return yoe(this,e),boe(this,e,arguments)}return _oe(e,t),voe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,u=r.y2,h=r.className,f=r.alwaysShow,g=r.clipPathId;Gs(f===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=vi(i),A=vi(a),N=vi(o),P=vi(u),O=this.props.shape;if(!v&&!A&&!N&&!P&&!O)return null;var R=Toe(v,A,N,P,this.props);if(!R&&!O)return null;var L=cs(this.props,"hidden")?"url(#".concat(g,")"):void 0;return we.createElement(Vr,{className:Fn("recharts-reference-area",h)},e.renderRect(O,vk(vk({clipPath:L},bn(this.props,!0)),R)),ea.renderCallByParent(this.props,R))}}])})(we.Component);Qy(Jy,"displayName","ReferenceArea");Qy(Jy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Qy(Jy,"renderRect",function(t,e){var n;return we.isValidElement(t)?n=we.cloneElement(t,e):cn(t)?n=t(e):n=we.createElement(QS,qA({},e,{className:"recharts-reference-area-rect"})),n});function Dj(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Soe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Mae(r,n)}function Coe(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,u=t.height;return e===1?{start:r?i:a,end:r?i+o:a+u}:{start:r?i+o:a+u,end:r?i:a}}function $g(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Ioe(t,e){return Dj(t,e+1)}function Noe(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,u=e.end,h=0,f=1,g=o,v=function(){var P=r==null?void 0:r[h];if(P===void 0)return{v:Dj(r,f)};var O=h,R,L=function(){return R===void 0&&(R=n(P,O)),R},U=P.coordinate,F=h===0||$g(t,U,L,g,u);F||(h=0,g=o,f+=1),F&&(g=U+t*(L()/2+i),h+=f)},A;f<=a.length;)if(A=v(),A)return A.v;return[]}function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bk(Object(n),!0).forEach(function(r){Roe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Roe(t,e,n){return e=Moe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Moe(t){var e=Doe(t,"string");return Op(e)=="symbol"?e:e+""}function Doe(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ooe(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,u=e.start,h=e.end,f=function(A){var N=a[A],P,O=function(){return P===void 0&&(P=n(N,A)),P};if(A===o-1){var R=t*(N.coordinate+t*O()/2-h);a[A]=N=Zi(Zi({},N),{},{tickCoord:R>0?N.coordinate-R*t:N.coordinate})}else a[A]=N=Zi(Zi({},N),{},{tickCoord:N.coordinate});var L=$g(t,N.tickCoord,O,u,h);L&&(h=N.tickCoord-t*(O()/2+i),a[A]=Zi(Zi({},N),{},{isShow:!0}))},g=o-1;g>=0;g--)f(g);return a}function Poe(t,e,n,r,i,a){var o=(r||[]).slice(),u=o.length,h=e.start,f=e.end;if(a){var g=r[u-1],v=n(g,u-1),A=t*(g.coordinate+t*v/2-f);o[u-1]=g=Zi(Zi({},g),{},{tickCoord:A>0?g.coordinate-A*t:g.coordinate});var N=$g(t,g.tickCoord,function(){return v},h,f);N&&(f=g.tickCoord-t*(v/2+i),o[u-1]=Zi(Zi({},g),{},{isShow:!0}))}for(var P=a?u-1:u,O=function(U){var F=o[U],q,H=function(){return q===void 0&&(q=n(F,U)),q};if(U===0){var G=t*(F.coordinate-t*H()/2-h);o[U]=F=Zi(Zi({},F),{},{tickCoord:G<0?F.coordinate-G*t:F.coordinate})}else o[U]=F=Zi(Zi({},F),{},{tickCoord:F.coordinate});var B=$g(t,F.tickCoord,H,h,f);B&&(h=F.tickCoord+t*(H()/2+i),o[U]=Zi(Zi({},F),{},{isShow:!0}))},R=0;R<P;R++)O(R);return o}function o2(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,u=t.orientation,h=t.interval,f=t.tickFormatter,g=t.unit,v=t.angle;if(!i||!i.length||!r)return[];if(bt(h)||uf.isSsr)return Ioe(i,typeof h=="number"&&bt(h)?h:0);var A=[],N=u==="top"||u==="bottom"?"width":"height",P=g&&N==="width"?Lh(g,{fontSize:e,letterSpacing:n}):{width:0,height:0},O=function(F,q){var H=cn(f)?f(F.value,q):F.value;return N==="width"?Soe(Lh(H,{fontSize:e,letterSpacing:n}),P,v):Lh(H,{fontSize:e,letterSpacing:n})[N]},R=i.length>=2?Fo(i[1].coordinate-i[0].coordinate):1,L=Coe(a,R,N);return h==="equidistantPreserveStart"?Noe(R,L,O,i,o):(h==="preserveStart"||h==="preserveStartEnd"?A=Poe(R,L,O,i,o,h==="preserveStartEnd"):A=Ooe(R,L,O,i,o),A.filter(function(U){return U.isShow}))}var koe=["viewBox"],Loe=["viewBox"],Boe=["ticks"];function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ud.apply(this,arguments)}function wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ua(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wk(Object(n),!0).forEach(function(r){s2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i_(t,e){if(t==null)return{};var n=joe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function joe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Uoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ek(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pj(r.key),r)}}function Voe(t,e,n){return e&&Ek(t.prototype,e),n&&Ek(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Foe(t,e,n){return e=Yg(e),qoe(t,Oj()?Reflect.construct(e,n||[],Yg(t).constructor):e.apply(t,n))}function qoe(t,e){if(e&&(Kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zoe(t)}function zoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oj=function(){return!!t})()}function Yg(t){return Yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yg(t)}function Goe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GA(t,e)}function GA(t,e){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GA(t,e)}function s2(t,e,n){return e=Pj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pj(t){var e=Hoe(t,"string");return Kd(e)=="symbol"?e:e+""}function Hoe(t,e){if(Kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pf=(function(t){function e(n){var r;return Uoe(this,e),r=Foe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Goe(e,t),Voe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=i_(r,koe),u=this.props,h=u.viewBox,f=i_(u,Loe);return!yd(a,h)||!yd(o,f)||!yd(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,u=i.width,h=i.height,f=i.orientation,g=i.tickSize,v=i.mirror,A=i.tickMargin,N,P,O,R,L,U,F=v?-1:1,q=r.tickSize||g,H=bt(r.tickCoord)?r.tickCoord:r.coordinate;switch(f){case"top":N=P=r.coordinate,R=o+ +!v*h,O=R-F*q,U=O-F*A,L=H;break;case"left":O=R=r.coordinate,P=a+ +!v*u,N=P-F*q,L=N-F*A,U=H;break;case"right":O=R=r.coordinate,P=a+ +v*u,N=P+F*q,L=N+F*A,U=H;break;default:N=P=r.coordinate,R=o+ +v*h,O=R+F*q,U=O+F*A,L=H;break}return{line:{x1:N,y1:O,x2:P,y2:R},tick:{x:L,y:U}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,u=r.height,h=r.orientation,f=r.mirror,g=r.axisLine,v=ua(ua(ua({},bn(this.props,!1)),bn(g,!1)),{},{fill:"none"});if(h==="top"||h==="bottom"){var A=+(h==="top"&&!f||h==="bottom"&&f);v=ua(ua({},v),{},{x1:i,y1:a+A*u,x2:i+o,y2:a+A*u})}else{var N=+(h==="left"&&!f||h==="right"&&f);v=ua(ua({},v),{},{x1:i+N*o,y1:a,x2:i+N*o,y2:a+u})}return we.createElement("line",ud({},v,{className:Fn("recharts-cartesian-axis-line",Ao(g,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,u=this.props,h=u.tickLine,f=u.stroke,g=u.tick,v=u.tickFormatter,A=u.unit,N=o2(ua(ua({},this.props),{},{ticks:r}),i,a),P=this.getTickTextAnchor(),O=this.getTickVerticalAnchor(),R=bn(this.props,!1),L=bn(g,!1),U=ua(ua({},R),{},{fill:"none"},bn(h,!1)),F=N.map(function(q,H){var G=o.getTickLineCoord(q),B=G.line,z=G.tick,V=ua(ua(ua(ua({textAnchor:P,verticalAnchor:O},R),{},{stroke:"none",fill:f},L),z),{},{index:H,payload:q,visibleTicksCount:N.length,tickFormatter:v});return we.createElement(Vr,ud({className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},ng(o.props,q,H)),h&&we.createElement("line",ud({},U,B,{className:Fn("recharts-cartesian-axis-tick-line",Ao(h,"className"))})),g&&e.renderTickItem(g,V,"".concat(cn(v)?v(q.value,H):q.value).concat(A||"")))});return we.createElement("g",{className:"recharts-cartesian-axis-ticks"},F)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,u=i.height,h=i.ticksGenerator,f=i.className,g=i.hide;if(g)return null;var v=this.props,A=v.ticks,N=i_(v,Boe),P=A;return cn(h)&&(P=A&&A.length>0?h(this.props):h(N)),o<=0||u<=0||!P||!P.length?null:we.createElement(Vr,{className:Fn("recharts-cartesian-axis",f),ref:function(R){r.layerReference=R}},a&&this.renderAxisLine(),this.renderTicks(P,this.state.fontSize,this.state.letterSpacing),ea.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return we.isValidElement(r)?o=we.cloneElement(r,i):cn(r)?o=r(i):o=we.createElement(hg,ud({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])})(le.Component);s2(pf,"displayName","CartesianAxis");s2(pf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var $oe=["x1","y1","x2","y2","key"],Yoe=["offset"];function cu(t){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(t)}function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(r){Koe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Koe(t,e,n){return e=Woe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Woe(t){var e=Xoe(t,"string");return cu(e)=="symbol"?e:e+""}function Xoe(t,e){if(cu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gc.apply(this,arguments)}function Ak(t,e){if(t==null)return{};var n=Qoe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Joe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,u=e.height,h=e.ry;return we.createElement("rect",{x:i,y:a,ry:h,width:o,height:u,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function kj(t,e){var n;if(we.isValidElement(t))n=we.cloneElement(t,e);else if(cn(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,u=e.key,h=Ak(e,$oe),f=bn(h,!1);f.offset;var g=Ak(f,Yoe);n=we.createElement("line",Gc({},g,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:u}))}return n}function Zoe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(u,h){var f=ta(ta({},t),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(h),index:h});return kj(i,f)});return we.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function ese(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(u,h){var f=ta(ta({},t),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(h),index:h});return kj(i,f)});return we.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function tse(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,u=t.horizontalPoints,h=t.horizontal,f=h===void 0?!0:h;if(!f||!e||!e.length)return null;var g=u.map(function(A){return Math.round(A+i-i)}).sort(function(A,N){return A-N});i!==g[0]&&g.unshift(0);var v=g.map(function(A,N){var P=!g[N+1],O=P?i+o-A:g[N+1]-A;if(O<=0)return null;var R=N%e.length;return we.createElement("rect",{key:"react-".concat(N),y:A,x:r,height:O,width:a,stroke:"none",fill:e[R],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},v)}function nse(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,u=t.width,h=t.height,f=t.verticalPoints;if(!n||!r||!r.length)return null;var g=f.map(function(A){return Math.round(A+a-a)}).sort(function(A,N){return A-N});a!==g[0]&&g.unshift(0);var v=g.map(function(A,N){var P=!g[N+1],O=P?a+u-A:g[N+1]-A;if(O<=0)return null;var R=N%r.length;return we.createElement("rect",{key:"react-".concat(N),x:A,y:o,width:O,height:h,stroke:"none",fill:r[R],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},v)}var rse=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return KB(o2(ta(ta(ta({},pf.defaultProps),r),{},{ticks:Vs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},ise=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return KB(o2(ta(ta(ta({},pf.defaultProps),r),{},{ticks:Vs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},nd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function l2(t){var e,n,r,i,a,o,u=n2(),h=r2(),f=Hae(),g=ta(ta({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:nd.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:nd.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:nd.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:nd.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:nd.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:nd.verticalFill,x:bt(t.x)?t.x:f.left,y:bt(t.y)?t.y:f.top,width:bt(t.width)?t.width:f.width,height:bt(t.height)?t.height:f.height}),v=g.x,A=g.y,N=g.width,P=g.height,O=g.syncWithTicks,R=g.horizontalValues,L=g.verticalValues,U=qae(),F=zae();if(!bt(N)||N<=0||!bt(P)||P<=0||!bt(v)||v!==+v||!bt(A)||A!==+A)return null;var q=g.verticalCoordinatesGenerator||rse,H=g.horizontalCoordinatesGenerator||ise,G=g.horizontalPoints,B=g.verticalPoints;if((!G||!G.length)&&cn(H)){var z=R&&R.length,V=H({yAxis:F?ta(ta({},F),{},{ticks:z?R:F.ticks}):void 0,width:u,height:h,offset:f},z?!0:O);Gs(Array.isArray(V),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(cu(V),"]")),Array.isArray(V)&&(G=V)}if((!B||!B.length)&&cn(q)){var ee=L&&L.length,Q=q({xAxis:U?ta(ta({},U),{},{ticks:ee?L:U.ticks}):void 0,width:u,height:h,offset:f},ee?!0:O);Gs(Array.isArray(Q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(cu(Q),"]")),Array.isArray(Q)&&(B=Q)}return we.createElement("g",{className:"recharts-cartesian-grid"},we.createElement(Joe,{fill:g.fill,fillOpacity:g.fillOpacity,x:g.x,y:g.y,width:g.width,height:g.height,ry:g.ry}),we.createElement(Zoe,Gc({},g,{offset:f,horizontalPoints:G,xAxis:U,yAxis:F})),we.createElement(ese,Gc({},g,{offset:f,verticalPoints:B,xAxis:U,yAxis:F})),we.createElement(tse,Gc({},g,{horizontalPoints:G})),we.createElement(nse,Gc({},g,{verticalPoints:B})))}l2.displayName="CartesianGrid";var ase=["layout","type","stroke","connectNulls","isRange","ref"],ose=["key"],Lj;function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}function Bj(t,e){if(t==null)return{};var n=sse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hc.apply(this,arguments)}function Tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(n),!0).forEach(function(r){ss(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uj(r.key),r)}}function cse(t,e,n){return e&&Sk(t.prototype,e),n&&Sk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function use(t,e,n){return e=Kg(e),dse(t,jj()?Reflect.construct(e,n||[],Kg(t).constructor):e.apply(t,n))}function dse(t,e){if(e&&(Wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fse(t)}function fse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jj=function(){return!!t})()}function Kg(t){return Kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kg(t)}function hse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HA(t,e)}function HA(t,e){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HA(t,e)}function ss(t,e,n){return e=Uj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uj(t){var e=pse(t,"string");return Wd(e)=="symbol"?e:e+""}function pse(t,e){if(Wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sc=(function(t){function e(){var n;lse(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=use(this,e,[].concat(i)),ss(n,"state",{isAnimationFinished:!0}),ss(n,"id",Yp("recharts-area-")),ss(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),cn(o)&&o()}),ss(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),cn(o)&&o()}),n}return hse(e,t),cse(e,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,u=this.state.isAnimationFinished;if(o&&!u)return null;var h=this.props,f=h.dot,g=h.points,v=h.dataKey,A=bn(this.props,!1),N=bn(f,!0),P=g.map(function(R,L){var U=Pl(Pl(Pl({key:"dot-".concat(L),r:3},A),N),{},{index:L,cx:R.x,cy:R.y,dataKey:v,value:R.value,payload:R.payload,points:g});return e.renderDotItem(f,U)}),O={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return we.createElement(Vr,Hc({className:"recharts-area-dots"},O),P)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,u=i.strokeWidth,h=o[0].x,f=o[o.length-1].x,g=r*Math.abs(h-f),v=Vl(o.map(function(A){return A.y||0}));return bt(a)&&typeof a=="number"?v=Math.max(a,v):a&&Array.isArray(a)&&a.length&&(v=Math.max(Vl(a.map(function(A){return A.y||0})),v)),bt(v)?we.createElement("rect",{x:h<f?h:h-g,y:0,width:g,height:Math.floor(v+(u?parseInt("".concat(u),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,u=i.strokeWidth,h=o[0].y,f=o[o.length-1].y,g=r*Math.abs(h-f),v=Vl(o.map(function(A){return A.x||0}));return bt(a)&&typeof a=="number"?v=Math.max(a,v):a&&Array.isArray(a)&&a.length&&(v=Math.max(Vl(a.map(function(A){return A.x||0})),v)),bt(v)?we.createElement("rect",{x:0,y:h<f?h:h-g,width:v+(u?parseInt("".concat(u),10):1),height:Math.floor(g)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var u=this.props,h=u.layout,f=u.type,g=u.stroke,v=u.connectNulls,A=u.isRange;u.ref;var N=Bj(u,ase);return we.createElement(Vr,{clipPath:a?"url(#clipPath-".concat(o,")"):null},we.createElement(Uh,Hc({},bn(N,!0),{points:r,connectNulls:v,type:f,baseLine:i,layout:h,stroke:"none",className:"recharts-area-area"})),g!=="none"&&we.createElement(Uh,Hc({},bn(this.props,!1),{className:"recharts-area-curve",layout:h,type:f,connectNulls:v,fill:"none",points:r})),g!=="none"&&A&&we.createElement(Uh,Hc({},bn(this.props,!1),{className:"recharts-area-curve",layout:h,type:f,connectNulls:v,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,u=o.points,h=o.baseLine,f=o.isAnimationActive,g=o.animationBegin,v=o.animationDuration,A=o.animationEasing,N=o.animationId,P=this.state,O=P.prevPoints,R=P.prevBaseLine;return we.createElement(Qs,{begin:g,duration:v,isActive:f,easing:A,from:{t:0},to:{t:1},key:"area-".concat(N),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var U=L.t;if(O){var F=O.length/u.length,q=u.map(function(z,V){var ee=Math.floor(V*F);if(O[ee]){var Q=O[ee],X=bo(Q.x,z.x),K=bo(Q.y,z.y);return Pl(Pl({},z),{},{x:X(U),y:K(U)})}return z}),H;if(bt(h)&&typeof h=="number"){var G=bo(R,h);H=G(U)}else if(Rn(h)||lf(h)){var B=bo(R,0);H=B(U)}else H=h.map(function(z,V){var ee=Math.floor(V*F);if(R[ee]){var Q=R[ee],X=bo(Q.x,z.x),K=bo(Q.y,z.y);return Pl(Pl({},z),{},{x:X(U),y:K(U)})}return z});return a.renderAreaStatically(q,H,r,i)}return we.createElement(Vr,null,we.createElement("defs",null,we.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(U))),we.createElement(Vr,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(u,h,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,u=a.baseLine,h=a.isAnimationActive,f=this.state,g=f.prevPoints,v=f.prevBaseLine,A=f.totalLength;return h&&o&&o.length&&(!g&&A>0||!fp(g,o)||!fp(v,u))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,u,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,u=i.points,h=i.className,f=i.top,g=i.left,v=i.xAxis,A=i.yAxis,N=i.width,P=i.height,O=i.isAnimationActive,R=i.id;if(a||!u||!u.length)return null;var L=this.state.isAnimationFinished,U=u.length===1,F=Fn("recharts-area",h),q=v&&v.allowDataOverflow,H=A&&A.allowDataOverflow,G=q||H,B=Rn(R)?this.id:R,z=(r=bn(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},V=z.r,ee=V===void 0?3:V,Q=z.strokeWidth,X=Q===void 0?2:Q,K=O$(o)?o:{},ge=K.clipDot,re=ge===void 0?!0:ge,te=ee*2+X;return we.createElement(Vr,{className:F},q||H?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(B)},we.createElement("rect",{x:q?g:g-N/2,y:H?f:f-P/2,width:q?N:N*2,height:H?P:P*2})),!re&&we.createElement("clipPath",{id:"clipPath-dots-".concat(B)},we.createElement("rect",{x:g-te/2,y:f-te/2,width:N+te,height:P+te}))):null,U?null:this.renderArea(G,B),(o||U)&&this.renderDots(G,re,B),(!O||L)&&Wl.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(le.PureComponent);Lj=sc;ss(sc,"displayName","Area");ss(sc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!uf.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ss(sc,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,o=e.props.baseValue,u=o??a;if(bt(u)&&typeof u=="number")return u;var h=i==="horizontal"?r:n,f=h.scale.domain();if(h.type==="number"){var g=Math.max(f[0],f[1]),v=Math.min(f[0],f[1]);return u==="dataMin"?v:u==="dataMax"||g<0?g:Math.max(Math.min(f[0],f[1]),0)}return u==="dataMin"?f[0]:u==="dataMax"?f[1]:f[0]});ss(sc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,u=t.bandSize,h=t.dataKey,f=t.stackedData,g=t.dataStartIndex,v=t.displayedData,A=t.offset,N=e.layout,P=f&&f.length,O=Lj.getBaseValue(e,n,r,i),R=N==="horizontal",L=!1,U=v.map(function(q,H){var G;P?G=f[g+H]:(G=to(q,h),Array.isArray(G)?L=!0:G=[O,G]);var B=G[1]==null||P&&to(q,h)==null;return R?{x:G4({axis:r,ticks:a,bandSize:u,entry:q,index:H}),y:B?null:i.scale(G[1]),value:G,payload:q}:{x:B?null:r.scale(G[1]),y:G4({axis:i,ticks:o,bandSize:u,entry:q,index:H}),value:G,payload:q}}),F;return P||L?F=U.map(function(q){var H=Array.isArray(q.value)?q.value[0]:null;return R?{x:q.x,y:H!=null&&q.y!=null?i.scale(H):null}:{x:H!=null?r.scale(H):null,y:q.y}}):F=R?i.scale(O):r.scale(O),Pl({points:U,baseLine:F,layout:N,isRange:L},A)});ss(sc,"renderDotItem",function(t,e){var n;if(we.isValidElement(t))n=we.cloneElement(t,e);else if(cn(t))n=t(e);else{var r=Fn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=Bj(e,ose);n=we.createElement(JS,Hc({},a,{key:i,className:r}))}return n});function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function mse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gse(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qj(r.key),r)}}function yse(t,e,n){return e&&gse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xse(t,e,n){return e=Wg(e),vse(t,Vj()?Reflect.construct(e,n||[],Wg(t).constructor):e.apply(t,n))}function vse(t,e){if(e&&(Xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bse(t)}function bse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vj=function(){return!!t})()}function Wg(t){return Wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wg(t)}function wse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$A(t,e)}function $A(t,e){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$A(t,e)}function Fj(t,e,n){return e=qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qj(t){var e=Ese(t,"string");return Xd(e)=="symbol"?e:e+""}function Ese(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YA.apply(this,arguments)}function _se(t){var e=t.xAxisId,n=n2(),r=r2(),i=Aj(e);return i==null?null:we.createElement(pf,YA({},i,{className:Fn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Vs(o,!0)}}))}var mf=(function(t){function e(){return mse(this,e),xse(this,e,arguments)}return wse(e,t),yse(e,[{key:"render",value:function(){return we.createElement(_se,this.props)}}])})(we.Component);Fj(mf,"displayName","XAxis");Fj(mf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function Ase(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tse(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hj(r.key),r)}}function Sse(t,e,n){return e&&Tse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cse(t,e,n){return e=Xg(e),Ise(t,zj()?Reflect.construct(e,n||[],Xg(t).constructor):e.apply(t,n))}function Ise(t,e){if(e&&(Qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nse(t)}function Nse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zj=function(){return!!t})()}function Xg(t){return Xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xg(t)}function Rse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KA(t,e)}function KA(t,e){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KA(t,e)}function Gj(t,e,n){return e=Hj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hj(t){var e=Mse(t,"string");return Qd(e)=="symbol"?e:e+""}function Mse(t,e){if(Qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WA.apply(this,arguments)}var Dse=function(e){var n=e.yAxisId,r=n2(),i=r2(),a=Tj(n);return a==null?null:we.createElement(pf,WA({},a,{className:Fn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(u){return Vs(u,!0)}}))},gf=(function(t){function e(){return Ase(this,e),Cse(this,e,arguments)}return Rse(e,t),Sse(e,[{key:"render",value:function(){return we.createElement(Dse,this.props)}}])})(we.Component);Gj(gf,"displayName","YAxis");Gj(gf,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Ck(t){return Lse(t)||kse(t)||Pse(t)||Ose()}function Ose(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pse(t,e){if(t){if(typeof t=="string")return XA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XA(t,e)}}function kse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lse(t){if(Array.isArray(t))return XA(t)}function XA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var QA=function(e,n,r,i,a){var o=qo(e,a2),u=qo(e,Xy),h=[].concat(Ck(o),Ck(u)),f=qo(e,Jy),g="".concat(i,"Id"),v=i[0],A=n;if(h.length&&(A=h.reduce(function(O,R){if(R.props[g]===r&&cs(R.props,"extendDomain")&&bt(R.props[v])){var L=R.props[v];return[Math.min(O[0],L),Math.max(O[1],L)]}return O},A)),f.length){var N="".concat(v,"1"),P="".concat(v,"2");A=f.reduce(function(O,R){if(R.props[g]===r&&cs(R.props,"extendDomain")&&bt(R.props[N])&&bt(R.props[P])){var L=R.props[N],U=R.props[P];return[Math.min(O[0],L,U),Math.max(O[1],L,U)]}return O},A)}return a&&a.length&&(A=a.reduce(function(O,R){return bt(R)?[Math.min(O[0],R),Math.max(O[1],R)]:O},A)),A},a_={exports:{}},Ik;function Bse(){return Ik||(Ik=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(h,f,g){this.fn=h,this.context=f,this.once=g||!1}function a(h,f,g,v,A){if(typeof g!="function")throw new TypeError("The listener must be a function");var N=new i(g,v||h,A),P=n?n+f:f;return h._events[P]?h._events[P].fn?h._events[P]=[h._events[P],N]:h._events[P].push(N):(h._events[P]=N,h._eventsCount++),h}function o(h,f){--h._eventsCount===0?h._events=new r:delete h._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],g,v;if(this._eventsCount===0)return f;for(v in g=this._events)e.call(g,v)&&f.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(g)):f},u.prototype.listeners=function(f){var g=n?n+f:f,v=this._events[g];if(!v)return[];if(v.fn)return[v.fn];for(var A=0,N=v.length,P=new Array(N);A<N;A++)P[A]=v[A].fn;return P},u.prototype.listenerCount=function(f){var g=n?n+f:f,v=this._events[g];return v?v.fn?1:v.length:0},u.prototype.emit=function(f,g,v,A,N,P){var O=n?n+f:f;if(!this._events[O])return!1;var R=this._events[O],L=arguments.length,U,F;if(R.fn){switch(R.once&&this.removeListener(f,R.fn,void 0,!0),L){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,g),!0;case 3:return R.fn.call(R.context,g,v),!0;case 4:return R.fn.call(R.context,g,v,A),!0;case 5:return R.fn.call(R.context,g,v,A,N),!0;case 6:return R.fn.call(R.context,g,v,A,N,P),!0}for(F=1,U=new Array(L-1);F<L;F++)U[F-1]=arguments[F];R.fn.apply(R.context,U)}else{var q=R.length,H;for(F=0;F<q;F++)switch(R[F].once&&this.removeListener(f,R[F].fn,void 0,!0),L){case 1:R[F].fn.call(R[F].context);break;case 2:R[F].fn.call(R[F].context,g);break;case 3:R[F].fn.call(R[F].context,g,v);break;case 4:R[F].fn.call(R[F].context,g,v,A);break;default:if(!U)for(H=1,U=new Array(L-1);H<L;H++)U[H-1]=arguments[H];R[F].fn.apply(R[F].context,U)}}return!0},u.prototype.on=function(f,g,v){return a(this,f,g,v,!1)},u.prototype.once=function(f,g,v){return a(this,f,g,v,!0)},u.prototype.removeListener=function(f,g,v,A){var N=n?n+f:f;if(!this._events[N])return this;if(!g)return o(this,N),this;var P=this._events[N];if(P.fn)P.fn===g&&(!A||P.once)&&(!v||P.context===v)&&o(this,N);else{for(var O=0,R=[],L=P.length;O<L;O++)(P[O].fn!==g||A&&!P[O].once||v&&P[O].context!==v)&&R.push(P[O]);R.length?this._events[N]=R.length===1?R[0]:R:o(this,N)}return this},u.prototype.removeAllListeners=function(f){var g;return f?(g=n?n+f:f,this._events[g]&&o(this,g)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(a_)),a_.exports}var jse=Bse();const Use=pr(jse);var o_=new Use,s_="recharts.syncMouseEvents";function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function Vse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fse(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$j(r.key),r)}}function qse(t,e,n){return e&&Fse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function l_(t,e,n){return e=$j(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $j(t){var e=zse(t,"string");return Pp(e)=="symbol"?e:e+""}function zse(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gse=(function(){function t(){Vse(this,t),l_(this,"activeIndex",0),l_(this,"coordinateList",[]),l_(this,"layout","horizontal")}return qse(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,u=o===void 0?null:o,h=n.layout,f=h===void 0?null:h,g=n.offset,v=g===void 0?null:g,A=n.mouseHandlerCallback,N=A===void 0?null:A;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=u??this.container,this.layout=f??this.layout,this.offset=v??this.offset,this.mouseHandlerCallback=N??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,u=i.height,h=this.coordinateList[this.activeIndex].coordinate,f=((n=window)===null||n===void 0?void 0:n.scrollX)||0,g=((r=window)===null||r===void 0?void 0:r.scrollY)||0,v=a+h+f,A=o+this.offset.top+u/2+g;this.mouseHandlerCallback({pageX:v,pageY:A})}}}])})();function Hse(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&bt(r)&&bt(i))return!0}return!1}function $se(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Yj(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=Hi(e,n,r,i),u=Hi(e,n,r,a);return{points:[o,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Yse(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var u=e.cx,h=e.cy,f=e.innerRadius,g=e.outerRadius,v=e.angle,A=Hi(u,h,f,v),N=Hi(u,h,g,v);r=A.x,i=A.y,a=N.x,o=N.y}else return Yj(e);return[{x:r,y:i},{x:a,y:o}]}function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function Nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(n),!0).forEach(function(r){Kse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kse(t,e,n){return e=Wse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wse(t){var e=Xse(t,"string");return kp(e)=="symbol"?e:e+""}function Xse(t,e){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qse(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,u=t.activePayload,h=t.offset,f=t.activeTooltipIndex,g=t.tooltipAxisBandSize,v=t.layout,A=t.chartName,N=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!N||!a||!o||A!=="ScatterChart"&&i!=="axis")return null;var P,O=Uh;if(A==="ScatterChart")P=o,O=Zre;else if(A==="BarChart")P=$se(v,o,h,g),O=QS;else if(v==="radial"){var R=Yj(o),L=R.cx,U=R.cy,F=R.radius,q=R.startAngle,H=R.endAngle;P={cx:L,cy:U,startAngle:q,endAngle:H,innerRadius:F,outerRadius:F},O=ZB}else P={points:Yse(v,o,h)},O=Uh;var G=wm(wm(wm(wm({stroke:"#ccc",pointerEvents:"none"},h),P),bn(N,!1)),{},{payload:u,payloadIndex:f,className:Fn("recharts-tooltip-cursor",N.className)});return le.isValidElement(N)?le.cloneElement(N,G):le.createElement(O,G)}var Jse=["item"],Zse=["children","className","width","height","style","compact","title","desc"];function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function Rk(t,e){return nle(t)||tle(t,e)||Wj(t,e)||ele()}function ele(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,u=[],h=!0,f=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,i=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function nle(t){if(Array.isArray(t))return t}function Mk(t,e){if(t==null)return{};var n=rle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ile(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ale(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xj(r.key),r)}}function ole(t,e,n){return e&&ale(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sle(t,e,n){return e=Qg(e),lle(t,Kj()?Reflect.construct(e,n||[],Qg(t).constructor):e.apply(t,n))}function lle(t,e){if(e&&(Jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cle(t)}function cle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kj=function(){return!!t})()}function Qg(t){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(t)}function ule(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JA(t,e)}function JA(t,e){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JA(t,e)}function Zd(t){return hle(t)||fle(t)||Wj(t)||dle()}function dle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wj(t,e){if(t){if(typeof t=="string")return ZA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZA(t,e)}}function fle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hle(t){if(Array.isArray(t))return ZA(t)}function ZA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){Kt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kt(t,e,n){return e=Xj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xj(t){var e=ple(t,"string");return Jd(e)=="symbol"?e:e+""}function ple(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mle={xAxis:["bottom","top"],yAxis:["left","right"]},gle={width:"100%",height:"100%"},Qj={x:0,y:0};function Em(t){return t}var yle=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},xle=function(e,n,r,i){var a=n.find(function(g){return g&&g.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,u=i.radius;return Qe(Qe(Qe({},i),Hi(i.cx,i.cy,u,o)),{},{angle:o,radius:u})}var h=a.coordinate,f=i.angle;return Qe(Qe(Qe({},i),Hi(i.cx,i.cy,h,f)),{},{angle:f,radius:h})}return Qj},Zy=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(u,h){var f=h.props.data;return f&&f.length?[].concat(Zd(u),Zd(f)):u},[]);return o.length>0?o:e&&e.length&&bt(i)&&bt(a)?e.slice(i,a+1):[]};function Jj(t){return t==="number"?[0,"auto"]:void 0}var eT=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,u=Zy(n,e);return r<0||!a||!a.length||r>=u.length?null:a.reduce(function(h,f){var g,v=(g=f.props.data)!==null&&g!==void 0?g:n;v&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(v=v.slice(e.dataStartIndex,e.dataEndIndex+1));var A;if(o.dataKey&&!o.allowDuplicatedCategory){var N=v===void 0?u:v;A=eg(N,o.dataKey,i)}else A=v&&v[r]||u[r];return A?[].concat(Zd(h),[XB(f,A)]):h},[])},Ok=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=yle(a,r),u=e.orderedTooltipTicks,h=e.tooltipAxis,f=e.tooltipTicks,g=Dee(o,u,f,h);if(g>=0&&f){var v=f[g]&&f[g].value,A=eT(e,n,g,v),N=xle(r,u,g,a);return{activeTooltipIndex:g,activeLabel:v,activePayload:A,activeCoordinate:N}}return null},vle=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,u=n.stackGroups,h=n.dataStartIndex,f=n.dataEndIndex,g=e.layout,v=e.children,A=e.stackOffset,N=YB(g,a);return r.reduce(function(P,O){var R,L=O.type.defaultProps!==void 0?Qe(Qe({},O.type.defaultProps),O.props):O.props,U=L.type,F=L.dataKey,q=L.allowDataOverflow,H=L.allowDuplicatedCategory,G=L.scale,B=L.ticks,z=L.includeHidden,V=L[o];if(P[V])return P;var ee=Zy(e.data,{graphicalItems:i.filter(function(fe){var Ae,He=o in fe.props?fe.props[o]:(Ae=fe.type.defaultProps)===null||Ae===void 0?void 0:Ae[o];return He===V}),dataStartIndex:h,dataEndIndex:f}),Q=ee.length,X,K,ge;Hse(L.domain,q,U)&&(X=vA(L.domain,null,q),N&&(U==="number"||G!=="auto")&&(ge=jh(ee,F,"category")));var re=Jj(U);if(!X||X.length===0){var te,se=(te=L.domain)!==null&&te!==void 0?te:re;if(F){if(X=jh(ee,F,U),U==="category"&&N){var _e=A$(X);H&&_e?(K=X,X=jg(0,Q)):H||(X=K4(se,X,O).reduce(function(fe,Ae){return fe.indexOf(Ae)>=0?fe:[].concat(Zd(fe),[Ae])},[]))}else if(U==="category")H?X=X.filter(function(fe){return fe!==""&&!Rn(fe)}):X=K4(se,X,O).reduce(function(fe,Ae){return fe.indexOf(Ae)>=0||Ae===""||Rn(Ae)?fe:[].concat(Zd(fe),[Ae])},[]);else if(U==="number"){var ke=Bee(ee,i.filter(function(fe){var Ae,He,ot=o in fe.props?fe.props[o]:(Ae=fe.type.defaultProps)===null||Ae===void 0?void 0:Ae[o],Ye="hide"in fe.props?fe.props.hide:(He=fe.type.defaultProps)===null||He===void 0?void 0:He.hide;return ot===V&&(z||!Ye)}),F,a,g);ke&&(X=ke)}N&&(U==="number"||G!=="auto")&&(ge=jh(ee,F,"category"))}else N?X=jg(0,Q):u&&u[V]&&u[V].hasStack&&U==="number"?X=A==="expand"?[0,1]:WB(u[V].stackGroups,h,f):X=$B(ee,i.filter(function(fe){var Ae=o in fe.props?fe.props[o]:fe.type.defaultProps[o],He="hide"in fe.props?fe.props.hide:fe.type.defaultProps.hide;return Ae===V&&(z||!He)}),U,g,!0);if(U==="number")X=QA(v,X,V,a,B),se&&(X=vA(se,X,q));else if(U==="category"&&se){var Ke=se,ce=X.every(function(fe){return Ke.indexOf(fe)>=0});ce&&(X=Ke)}}return Qe(Qe({},P),{},Kt({},V,Qe(Qe({},L),{},{axisType:a,domain:X,categoricalDomain:ge,duplicateDomain:K,originalDomain:(R=L.domain)!==null&&R!==void 0?R:re,isCategorical:N,layout:g})))},{})},ble=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,u=n.stackGroups,h=n.dataStartIndex,f=n.dataEndIndex,g=e.layout,v=e.children,A=Zy(e.data,{graphicalItems:r,dataStartIndex:h,dataEndIndex:f}),N=A.length,P=YB(g,a),O=-1;return r.reduce(function(R,L){var U=L.type.defaultProps!==void 0?Qe(Qe({},L.type.defaultProps),L.props):L.props,F=U[o],q=Jj("number");if(!R[F]){O++;var H;return P?H=jg(0,N):u&&u[F]&&u[F].hasStack?(H=WB(u[F].stackGroups,h,f),H=QA(v,H,F,a)):(H=vA(q,$B(A,r.filter(function(G){var B,z,V=o in G.props?G.props[o]:(B=G.type.defaultProps)===null||B===void 0?void 0:B[o],ee="hide"in G.props?G.props.hide:(z=G.type.defaultProps)===null||z===void 0?void 0:z.hide;return V===F&&!ee}),"number",g),i.defaultProps.allowDataOverflow),H=QA(v,H,F,a)),Qe(Qe({},R),{},Kt({},F,Qe(Qe({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ao(mle,"".concat(a,".").concat(O%2),null),domain:H,originalDomain:q,isCategorical:P,layout:g})))}return R},{})},wle=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,u=n.stackGroups,h=n.dataStartIndex,f=n.dataEndIndex,g=e.children,v="".concat(i,"Id"),A=qo(g,a),N={};return A&&A.length?N=vle(e,{axes:A,graphicalItems:o,axisType:i,axisIdKey:v,stackGroups:u,dataStartIndex:h,dataEndIndex:f}):o&&o.length&&(N=ble(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:v,stackGroups:u,dataStartIndex:h,dataEndIndex:f})),N},Ele=function(e){var n=Bl(e),r=Vs(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:_S(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ig(n,r)}},Pk=function(e){var n=e.children,r=e.defaultShowTooltip,i=Xa(n,zd),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},_le=function(e){return!e||!e.length?!1:e.some(function(n){var r=zs(n&&n.type);return r&&r.indexOf("Bar")>=0})},kk=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ale=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,u=e.yAxisMap,h=u===void 0?{}:u,f=r.width,g=r.height,v=r.children,A=r.margin||{},N=Xa(v,zd),P=Xa(v,xd),O=Object.keys(h).reduce(function(H,G){var B=h[G],z=B.orientation;return!B.mirror&&!B.hide?Qe(Qe({},H),{},Kt({},z,H[z]+B.width)):H},{left:A.left||0,right:A.right||0}),R=Object.keys(o).reduce(function(H,G){var B=o[G],z=B.orientation;return!B.mirror&&!B.hide?Qe(Qe({},H),{},Kt({},z,Ao(H,"".concat(z))+B.height)):H},{top:A.top||0,bottom:A.bottom||0}),L=Qe(Qe({},R),O),U=L.bottom;N&&(L.bottom+=N.props.height||zd.defaultProps.height),P&&n&&(L=kee(L,i,r,n));var F=f-L.left-L.right,q=g-L.top-L.bottom;return Qe(Qe({brushBottom:U},L),{},{width:Math.max(F,0),height:Math.max(q,0)})},Tle=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Zj=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,u=o===void 0?["axis"]:o,h=e.axisComponents,f=e.legendContent,g=e.formatAxisMap,v=e.defaultProps,A=function(L,U){var F=U.graphicalItems,q=U.stackGroups,H=U.offset,G=U.updateId,B=U.dataStartIndex,z=U.dataEndIndex,V=L.barSize,ee=L.layout,Q=L.barGap,X=L.barCategoryGap,K=L.maxBarSize,ge=kk(ee),re=ge.numericAxisName,te=ge.cateAxisName,se=_le(F),_e=[];return F.forEach(function(ke,Ke){var ce=Zy(L.data,{graphicalItems:[ke],dataStartIndex:B,dataEndIndex:z}),fe=ke.type.defaultProps!==void 0?Qe(Qe({},ke.type.defaultProps),ke.props):ke.props,Ae=fe.dataKey,He=fe.maxBarSize,ot=fe["".concat(re,"Id")],Ye=fe["".concat(te,"Id")],Ce={},et=h.reduce(function(Ie,mt){var dt=U["".concat(mt.axisType,"Map")],Ee=fe["".concat(mt.axisType,"Id")];dt&&dt[Ee]||mt.axisType==="zAxis"||lu();var nt=dt[Ee];return Qe(Qe({},Ie),{},Kt(Kt({},mt.axisType,nt),"".concat(mt.axisType,"Ticks"),Vs(nt)))},Ce),Be=et[te],ct=et["".concat(te,"Ticks")],rt=q&&q[ot]&&q[ot].hasStack&&Wee(ke,q[ot].stackGroups),je=zs(ke.type).indexOf("Bar")>=0,yt=Ig(Be,ct),wt=[],Le=se&&Oee({barSize:V,stackGroups:q,totalSize:Tle(et,te)});if(je){var he,ve,$e=Rn(He)?K:He,We=(he=(ve=Ig(Be,ct,!0))!==null&&ve!==void 0?ve:$e)!==null&&he!==void 0?he:0;wt=Pee({barGap:Q,barCategoryGap:X,bandSize:We!==yt?We:yt,sizeList:Le[Ye],maxBarSize:$e}),We!==yt&&(wt=wt.map(function(Ie){return Qe(Qe({},Ie),{},{position:Qe(Qe({},Ie.position),{},{offset:Ie.position.offset-We/2})})}))}var ye=ke&&ke.type&&ke.type.getComposedData;ye&&_e.push({props:Qe(Qe({},ye(Qe(Qe({},et),{},{displayedData:ce,props:L,dataKey:Ae,item:ke,bandSize:yt,barPosition:wt,offset:H,stackedData:rt,layout:ee,dataStartIndex:B,dataEndIndex:z}))),{},Kt(Kt(Kt({key:ke.key||"item-".concat(Ke)},re,et[re]),te,et[te]),"animationId",G)),childIndex:L$(ke,L.children),item:ke})}),_e},N=function(L,U){var F=L.props,q=L.dataStartIndex,H=L.dataEndIndex,G=L.updateId;if(!lD({props:F}))return null;var B=F.children,z=F.layout,V=F.stackOffset,ee=F.data,Q=F.reverseStackOrder,X=kk(z),K=X.numericAxisName,ge=X.cateAxisName,re=qo(B,r),te=$ee(ee,re,"".concat(K,"Id"),"".concat(ge,"Id"),V,Q),se=h.reduce(function(fe,Ae){var He="".concat(Ae.axisType,"Map");return Qe(Qe({},fe),{},Kt({},He,wle(F,Qe(Qe({},Ae),{},{graphicalItems:re,stackGroups:Ae.axisType===K&&te,dataStartIndex:q,dataEndIndex:H}))))},{}),_e=Ale(Qe(Qe({},se),{},{props:F,graphicalItems:re}),U==null?void 0:U.legendBBox);Object.keys(se).forEach(function(fe){se[fe]=g(F,se[fe],_e,fe.replace("Map",""),n)});var ke=se["".concat(ge,"Map")],Ke=Ele(ke),ce=A(F,Qe(Qe({},se),{},{dataStartIndex:q,dataEndIndex:H,updateId:G,graphicalItems:re,stackGroups:te,offset:_e}));return Qe(Qe({formattedGraphicalItems:ce,graphicalItems:re,offset:_e,stackGroups:te},Ke),se)},P=(function(R){function L(U){var F,q,H;return ile(this,L),H=sle(this,L,[U]),Kt(H,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kt(H,"accessibilityManager",new Gse),Kt(H,"handleLegendBBoxUpdate",function(G){if(G){var B=H.state,z=B.dataStartIndex,V=B.dataEndIndex,ee=B.updateId;H.setState(Qe({legendBBox:G},N({props:H.props,dataStartIndex:z,dataEndIndex:V,updateId:ee},Qe(Qe({},H.state),{},{legendBBox:G}))))}}),Kt(H,"handleReceiveSyncEvent",function(G,B,z){if(H.props.syncId===G){if(z===H.eventEmitterSymbol&&typeof H.props.syncMethod!="function")return;H.applySyncEvent(B)}}),Kt(H,"handleBrushChange",function(G){var B=G.startIndex,z=G.endIndex;if(B!==H.state.dataStartIndex||z!==H.state.dataEndIndex){var V=H.state.updateId;H.setState(function(){return Qe({dataStartIndex:B,dataEndIndex:z},N({props:H.props,dataStartIndex:B,dataEndIndex:z,updateId:V},H.state))}),H.triggerSyncEvent({dataStartIndex:B,dataEndIndex:z})}}),Kt(H,"handleMouseEnter",function(G){var B=H.getMouseInfo(G);if(B){var z=Qe(Qe({},B),{},{isTooltipActive:!0});H.setState(z),H.triggerSyncEvent(z);var V=H.props.onMouseEnter;cn(V)&&V(z,G)}}),Kt(H,"triggeredAfterMouseMove",function(G){var B=H.getMouseInfo(G),z=B?Qe(Qe({},B),{},{isTooltipActive:!0}):{isTooltipActive:!1};H.setState(z),H.triggerSyncEvent(z);var V=H.props.onMouseMove;cn(V)&&V(z,G)}),Kt(H,"handleItemMouseEnter",function(G){H.setState(function(){return{isTooltipActive:!0,activeItem:G,activePayload:G.tooltipPayload,activeCoordinate:G.tooltipPosition||{x:G.cx,y:G.cy}}})}),Kt(H,"handleItemMouseLeave",function(){H.setState(function(){return{isTooltipActive:!1}})}),Kt(H,"handleMouseMove",function(G){G.persist(),H.throttleTriggeredAfterMouseMove(G)}),Kt(H,"handleMouseLeave",function(G){H.throttleTriggeredAfterMouseMove.cancel();var B={isTooltipActive:!1};H.setState(B),H.triggerSyncEvent(B);var z=H.props.onMouseLeave;cn(z)&&z(B,G)}),Kt(H,"handleOuterEvent",function(G){var B=k$(G),z=Ao(H.props,"".concat(B));if(B&&cn(z)){var V,ee;/.*touch.*/i.test(B)?ee=H.getMouseInfo(G.changedTouches[0]):ee=H.getMouseInfo(G),z((V=ee)!==null&&V!==void 0?V:{},G)}}),Kt(H,"handleClick",function(G){var B=H.getMouseInfo(G);if(B){var z=Qe(Qe({},B),{},{isTooltipActive:!0});H.setState(z),H.triggerSyncEvent(z);var V=H.props.onClick;cn(V)&&V(z,G)}}),Kt(H,"handleMouseDown",function(G){var B=H.props.onMouseDown;if(cn(B)){var z=H.getMouseInfo(G);B(z,G)}}),Kt(H,"handleMouseUp",function(G){var B=H.props.onMouseUp;if(cn(B)){var z=H.getMouseInfo(G);B(z,G)}}),Kt(H,"handleTouchMove",function(G){G.changedTouches!=null&&G.changedTouches.length>0&&H.throttleTriggeredAfterMouseMove(G.changedTouches[0])}),Kt(H,"handleTouchStart",function(G){G.changedTouches!=null&&G.changedTouches.length>0&&H.handleMouseDown(G.changedTouches[0])}),Kt(H,"handleTouchEnd",function(G){G.changedTouches!=null&&G.changedTouches.length>0&&H.handleMouseUp(G.changedTouches[0])}),Kt(H,"handleDoubleClick",function(G){var B=H.props.onDoubleClick;if(cn(B)){var z=H.getMouseInfo(G);B(z,G)}}),Kt(H,"handleContextMenu",function(G){var B=H.props.onContextMenu;if(cn(B)){var z=H.getMouseInfo(G);B(z,G)}}),Kt(H,"triggerSyncEvent",function(G){H.props.syncId!==void 0&&o_.emit(s_,H.props.syncId,G,H.eventEmitterSymbol)}),Kt(H,"applySyncEvent",function(G){var B=H.props,z=B.layout,V=B.syncMethod,ee=H.state.updateId,Q=G.dataStartIndex,X=G.dataEndIndex;if(G.dataStartIndex!==void 0||G.dataEndIndex!==void 0)H.setState(Qe({dataStartIndex:Q,dataEndIndex:X},N({props:H.props,dataStartIndex:Q,dataEndIndex:X,updateId:ee},H.state)));else if(G.activeTooltipIndex!==void 0){var K=G.chartX,ge=G.chartY,re=G.activeTooltipIndex,te=H.state,se=te.offset,_e=te.tooltipTicks;if(!se)return;if(typeof V=="function")re=V(_e,G);else if(V==="value"){re=-1;for(var ke=0;ke<_e.length;ke++)if(_e[ke].value===G.activeLabel){re=ke;break}}var Ke=Qe(Qe({},se),{},{x:se.left,y:se.top}),ce=Math.min(K,Ke.x+Ke.width),fe=Math.min(ge,Ke.y+Ke.height),Ae=_e[re]&&_e[re].value,He=eT(H.state,H.props.data,re),ot=_e[re]?{x:z==="horizontal"?_e[re].coordinate:ce,y:z==="horizontal"?fe:_e[re].coordinate}:Qj;H.setState(Qe(Qe({},G),{},{activeLabel:Ae,activeCoordinate:ot,activePayload:He,activeTooltipIndex:re}))}else H.setState(G)}),Kt(H,"renderCursor",function(G){var B,z=H.state,V=z.isTooltipActive,ee=z.activeCoordinate,Q=z.activePayload,X=z.offset,K=z.activeTooltipIndex,ge=z.tooltipAxisBandSize,re=H.getTooltipEventType(),te=(B=G.props.active)!==null&&B!==void 0?B:V,se=H.props.layout,_e=G.key||"_recharts-cursor";return we.createElement(Qse,{key:_e,activeCoordinate:ee,activePayload:Q,activeTooltipIndex:K,chartName:n,element:G,isActive:te,layout:se,offset:X,tooltipAxisBandSize:ge,tooltipEventType:re})}),Kt(H,"renderPolarAxis",function(G,B,z){var V=Ao(G,"type.axisType"),ee=Ao(H.state,"".concat(V,"Map")),Q=G.type.defaultProps,X=Q!==void 0?Qe(Qe({},Q),G.props):G.props,K=ee&&ee[X["".concat(V,"Id")]];return le.cloneElement(G,Qe(Qe({},K),{},{className:Fn(V,K.className),key:G.key||"".concat(B,"-").concat(z),ticks:Vs(K,!0)}))}),Kt(H,"renderPolarGrid",function(G){var B=G.props,z=B.radialLines,V=B.polarAngles,ee=B.polarRadius,Q=H.state,X=Q.radiusAxisMap,K=Q.angleAxisMap,ge=Bl(X),re=Bl(K),te=re.cx,se=re.cy,_e=re.innerRadius,ke=re.outerRadius;return le.cloneElement(G,{polarAngles:Array.isArray(V)?V:Vs(re,!0).map(function(Ke){return Ke.coordinate}),polarRadius:Array.isArray(ee)?ee:Vs(ge,!0).map(function(Ke){return Ke.coordinate}),cx:te,cy:se,innerRadius:_e,outerRadius:ke,key:G.key||"polar-grid",radialLines:z})}),Kt(H,"renderLegend",function(){var G=H.state.formattedGraphicalItems,B=H.props,z=B.children,V=B.width,ee=B.height,Q=H.props.margin||{},X=V-(Q.left||0)-(Q.right||0),K=GB({children:z,formattedGraphicalItems:G,legendWidth:X,legendContent:f});if(!K)return null;var ge=K.item,re=Mk(K,Jse);return le.cloneElement(ge,Qe(Qe({},re),{},{chartWidth:V,chartHeight:ee,margin:Q,onBBoxUpdate:H.handleLegendBBoxUpdate}))}),Kt(H,"renderTooltip",function(){var G,B=H.props,z=B.children,V=B.accessibilityLayer,ee=Xa(z,Bo);if(!ee)return null;var Q=H.state,X=Q.isTooltipActive,K=Q.activeCoordinate,ge=Q.activePayload,re=Q.activeLabel,te=Q.offset,se=(G=ee.props.active)!==null&&G!==void 0?G:X;return le.cloneElement(ee,{viewBox:Qe(Qe({},te),{},{x:te.left,y:te.top}),active:se,label:re,payload:se?ge:[],coordinate:K,accessibilityLayer:V})}),Kt(H,"renderBrush",function(G){var B=H.props,z=B.margin,V=B.data,ee=H.state,Q=ee.offset,X=ee.dataStartIndex,K=ee.dataEndIndex,ge=ee.updateId;return le.cloneElement(G,{key:G.key||"_recharts-brush",onChange:ym(H.handleBrushChange,G.props.onChange),data:V,x:bt(G.props.x)?G.props.x:Q.left,y:bt(G.props.y)?G.props.y:Q.top+Q.height+Q.brushBottom-(z.bottom||0),width:bt(G.props.width)?G.props.width:Q.width,startIndex:X,endIndex:K,updateId:"brush-".concat(ge)})}),Kt(H,"renderReferenceElement",function(G,B,z){if(!G)return null;var V=H,ee=V.clipPathId,Q=H.state,X=Q.xAxisMap,K=Q.yAxisMap,ge=Q.offset,re=G.type.defaultProps||{},te=G.props,se=te.xAxisId,_e=se===void 0?re.xAxisId:se,ke=te.yAxisId,Ke=ke===void 0?re.yAxisId:ke;return le.cloneElement(G,{key:G.key||"".concat(B,"-").concat(z),xAxis:X[_e],yAxis:K[Ke],viewBox:{x:ge.left,y:ge.top,width:ge.width,height:ge.height},clipPathId:ee})}),Kt(H,"renderActivePoints",function(G){var B=G.item,z=G.activePoint,V=G.basePoint,ee=G.childIndex,Q=G.isRange,X=[],K=B.props.key,ge=B.item.type.defaultProps!==void 0?Qe(Qe({},B.item.type.defaultProps),B.item.props):B.item.props,re=ge.activeDot,te=ge.dataKey,se=Qe(Qe({index:ee,dataKey:te,cx:z.x,cy:z.y,r:4,fill:XS(B.item),strokeWidth:2,stroke:"#fff",payload:z.payload,value:z.value},bn(re,!1)),tg(re));return X.push(L.renderActiveDot(re,se,"".concat(K,"-activePoint-").concat(ee))),V?X.push(L.renderActiveDot(re,Qe(Qe({},se),{},{cx:V.x,cy:V.y}),"".concat(K,"-basePoint-").concat(ee))):Q&&X.push(null),X}),Kt(H,"renderGraphicChild",function(G,B,z){var V=H.filterFormatItem(G,B,z);if(!V)return null;var ee=H.getTooltipEventType(),Q=H.state,X=Q.isTooltipActive,K=Q.tooltipAxis,ge=Q.activeTooltipIndex,re=Q.activeLabel,te=H.props.children,se=Xa(te,Bo),_e=V.props,ke=_e.points,Ke=_e.isRange,ce=_e.baseLine,fe=V.item.type.defaultProps!==void 0?Qe(Qe({},V.item.type.defaultProps),V.item.props):V.item.props,Ae=fe.activeDot,He=fe.hide,ot=fe.activeBar,Ye=fe.activeShape,Ce=!!(!He&&X&&se&&(Ae||ot||Ye)),et={};ee!=="axis"&&se&&se.props.trigger==="click"?et={onClick:ym(H.handleItemMouseEnter,G.props.onClick)}:ee!=="axis"&&(et={onMouseLeave:ym(H.handleItemMouseLeave,G.props.onMouseLeave),onMouseEnter:ym(H.handleItemMouseEnter,G.props.onMouseEnter)});var Be=le.cloneElement(G,Qe(Qe({},V.props),et));function ct(mt){return typeof K.dataKey=="function"?K.dataKey(mt.payload):null}if(Ce)if(ge>=0){var rt,je;if(K.dataKey&&!K.allowDuplicatedCategory){var yt=typeof K.dataKey=="function"?ct:"payload.".concat(K.dataKey.toString());rt=eg(ke,yt,re),je=Ke&&ce&&eg(ce,yt,re)}else rt=ke==null?void 0:ke[ge],je=Ke&&ce&&ce[ge];if(Ye||ot){var wt=G.props.activeIndex!==void 0?G.props.activeIndex:ge;return[le.cloneElement(G,Qe(Qe(Qe({},V.props),et),{},{activeIndex:wt})),null,null]}if(!Rn(rt))return[Be].concat(Zd(H.renderActivePoints({item:V,activePoint:rt,basePoint:je,childIndex:ge,isRange:Ke})))}else{var Le,he=(Le=H.getItemByXY(H.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:Be},ve=he.graphicalItem,$e=ve.item,We=$e===void 0?G:$e,ye=ve.childIndex,Ie=Qe(Qe(Qe({},V.props),et),{},{activeIndex:ye});return[le.cloneElement(We,Ie),null,null]}return Ke?[Be,null,null]:[Be,null]}),Kt(H,"renderCustomized",function(G,B,z){return le.cloneElement(G,Qe(Qe({key:"recharts-customized-".concat(z)},H.props),H.state))}),Kt(H,"renderMap",{CartesianGrid:{handler:Em,once:!0},ReferenceArea:{handler:H.renderReferenceElement},ReferenceLine:{handler:Em},ReferenceDot:{handler:H.renderReferenceElement},XAxis:{handler:Em},YAxis:{handler:Em},Brush:{handler:H.renderBrush,once:!0},Bar:{handler:H.renderGraphicChild},Line:{handler:H.renderGraphicChild},Area:{handler:H.renderGraphicChild},Radar:{handler:H.renderGraphicChild},RadialBar:{handler:H.renderGraphicChild},Scatter:{handler:H.renderGraphicChild},Pie:{handler:H.renderGraphicChild},Funnel:{handler:H.renderGraphicChild},Tooltip:{handler:H.renderCursor,once:!0},PolarGrid:{handler:H.renderPolarGrid,once:!0},PolarAngleAxis:{handler:H.renderPolarAxis},PolarRadiusAxis:{handler:H.renderPolarAxis},Customized:{handler:H.renderCustomized}}),H.clipPathId="".concat((F=U.id)!==null&&F!==void 0?F:Yp("recharts"),"-clip"),H.throttleTriggeredAfterMouseMove=G9(H.triggeredAfterMouseMove,(q=U.throttleDelay)!==null&&q!==void 0?q:1e3/60),H.state={},H}return ule(L,R),ole(L,[{key:"componentDidMount",value:function(){var F,q;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(F=this.props.margin.left)!==null&&F!==void 0?F:0,top:(q=this.props.margin.top)!==null&&q!==void 0?q:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var F=this.props,q=F.children,H=F.data,G=F.height,B=F.layout,z=Xa(q,Bo);if(z){var V=z.props.defaultIndex;if(!(typeof V!="number"||V<0||V>this.state.tooltipTicks.length-1)){var ee=this.state.tooltipTicks[V]&&this.state.tooltipTicks[V].value,Q=eT(this.state,H,V,ee),X=this.state.tooltipTicks[V].coordinate,K=(this.state.offset.top+G)/2,ge=B==="horizontal",re=ge?{x:X,y:K}:{y:X,x:K},te=this.state.formattedGraphicalItems.find(function(_e){var ke=_e.item;return ke.type.name==="Scatter"});te&&(re=Qe(Qe({},re),te.props.points[V].tooltipPosition),Q=te.props.points[V].tooltipPayload);var se={activeTooltipIndex:V,isTooltipActive:!0,activeLabel:ee,activePayload:Q,activeCoordinate:re};this.setState(se),this.renderCursor(z),this.accessibilityManager.setIndex(V)}}}},{key:"getSnapshotBeforeUpdate",value:function(F,q){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==q.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==F.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==F.margin){var H,G;this.accessibilityManager.setDetails({offset:{left:(H=this.props.margin.left)!==null&&H!==void 0?H:0,top:(G=this.props.margin.top)!==null&&G!==void 0?G:0}})}return null}},{key:"componentDidUpdate",value:function(F){F_([Xa(F.children,Bo)],[Xa(this.props.children,Bo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var F=Xa(this.props.children,Bo);if(F&&typeof F.props.shared=="boolean"){var q=F.props.shared?"axis":"item";return u.indexOf(q)>=0?q:a}return a}},{key:"getMouseInfo",value:function(F){if(!this.container)return null;var q=this.container,H=q.getBoundingClientRect(),G=EX(H),B={chartX:Math.round(F.pageX-G.left),chartY:Math.round(F.pageY-G.top)},z=H.width/q.offsetWidth||1,V=this.inRange(B.chartX,B.chartY,z);if(!V)return null;var ee=this.state,Q=ee.xAxisMap,X=ee.yAxisMap,K=this.getTooltipEventType();if(K!=="axis"&&Q&&X){var ge=Bl(Q).scale,re=Bl(X).scale,te=ge&&ge.invert?ge.invert(B.chartX):null,se=re&&re.invert?re.invert(B.chartY):null;return Qe(Qe({},B),{},{xValue:te,yValue:se})}var _e=Ok(this.state,this.props.data,this.props.layout,V);return _e?Qe(Qe({},B),_e):null}},{key:"inRange",value:function(F,q){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,G=this.props.layout,B=F/H,z=q/H;if(G==="horizontal"||G==="vertical"){var V=this.state.offset,ee=B>=V.left&&B<=V.left+V.width&&z>=V.top&&z<=V.top+V.height;return ee?{x:B,y:z}:null}var Q=this.state,X=Q.angleAxisMap,K=Q.radiusAxisMap;if(X&&K){var ge=Bl(X);return Q4({x:B,y:z},ge)}return null}},{key:"parseEventsOfWrapper",value:function(){var F=this.props.children,q=this.getTooltipEventType(),H=Xa(F,Bo),G={};H&&q==="axis"&&(H.props.trigger==="click"?G={onClick:this.handleClick}:G={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var B=tg(this.props,this.handleOuterEvent);return Qe(Qe({},B),G)}},{key:"addListener",value:function(){o_.on(s_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){o_.removeListener(s_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(F,q,H){for(var G=this.state.formattedGraphicalItems,B=0,z=G.length;B<z;B++){var V=G[B];if(V.item===F||V.props.key===F.key||q===zs(V.item.type)&&H===V.childIndex)return V}return null}},{key:"renderClipPath",value:function(){var F=this.clipPathId,q=this.state.offset,H=q.left,G=q.top,B=q.height,z=q.width;return we.createElement("defs",null,we.createElement("clipPath",{id:F},we.createElement("rect",{x:H,y:G,height:B,width:z})))}},{key:"getXScales",value:function(){var F=this.state.xAxisMap;return F?Object.entries(F).reduce(function(q,H){var G=Rk(H,2),B=G[0],z=G[1];return Qe(Qe({},q),{},Kt({},B,z.scale))},{}):null}},{key:"getYScales",value:function(){var F=this.state.yAxisMap;return F?Object.entries(F).reduce(function(q,H){var G=Rk(H,2),B=G[0],z=G[1];return Qe(Qe({},q),{},Kt({},B,z.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(F){var q;return(q=this.state.xAxisMap)===null||q===void 0||(q=q[F])===null||q===void 0?void 0:q.scale}},{key:"getYScaleByAxisId",value:function(F){var q;return(q=this.state.yAxisMap)===null||q===void 0||(q=q[F])===null||q===void 0?void 0:q.scale}},{key:"getItemByXY",value:function(F){var q=this.state,H=q.formattedGraphicalItems,G=q.activeItem;if(H&&H.length)for(var B=0,z=H.length;B<z;B++){var V=H[B],ee=V.props,Q=V.item,X=Q.type.defaultProps!==void 0?Qe(Qe({},Q.type.defaultProps),Q.props):Q.props,K=zs(Q.type);if(K==="Bar"){var ge=(ee.data||[]).find(function(_e){return zre(F,_e)});if(ge)return{graphicalItem:V,payload:ge}}else if(K==="RadialBar"){var re=(ee.data||[]).find(function(_e){return Q4(F,_e)});if(re)return{graphicalItem:V,payload:re}}else if($y(V,G)||Yy(V,G)||Np(V,G)){var te=Oie({graphicalItem:V,activeTooltipItem:G,itemData:X.data}),se=X.activeIndex===void 0?te:X.activeIndex;return{graphicalItem:Qe(Qe({},V),{},{childIndex:se}),payload:Np(V,G)?X.data[te]:V.props.data[te]}}}return null}},{key:"render",value:function(){var F=this;if(!lD(this))return null;var q=this.props,H=q.children,G=q.className,B=q.width,z=q.height,V=q.style,ee=q.compact,Q=q.title,X=q.desc,K=Mk(q,Zse),ge=bn(K,!1);if(ee)return we.createElement(fk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement(z_,dd({},ge,{width:B,height:z,title:Q,desc:X}),this.renderClipPath(),uD(H,this.renderMap)));if(this.props.accessibilityLayer){var re,te;ge.tabIndex=(re=this.props.tabIndex)!==null&&re!==void 0?re:0,ge.role=(te=this.props.role)!==null&&te!==void 0?te:"application",ge.onKeyDown=function(_e){F.accessibilityManager.keyboardEvent(_e)},ge.onFocus=function(){F.accessibilityManager.focus()}}var se=this.parseEventsOfWrapper();return we.createElement(fk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement("div",dd({className:Fn("recharts-wrapper",G),style:Qe({position:"relative",cursor:"default",width:B,height:z},V)},se,{ref:function(ke){F.container=ke}}),we.createElement(z_,dd({},ge,{width:B,height:z,title:Q,desc:X,style:gle}),this.renderClipPath(),uD(H,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(le.Component);Kt(P,"displayName",n),Kt(P,"defaultProps",Qe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},v)),Kt(P,"getDerivedStateFromProps",function(R,L){var U=R.dataKey,F=R.data,q=R.children,H=R.width,G=R.height,B=R.layout,z=R.stackOffset,V=R.margin,ee=L.dataStartIndex,Q=L.dataEndIndex;if(L.updateId===void 0){var X=Pk(R);return Qe(Qe(Qe({},X),{},{updateId:0},N(Qe(Qe({props:R},X),{},{updateId:0}),L)),{},{prevDataKey:U,prevData:F,prevWidth:H,prevHeight:G,prevLayout:B,prevStackOffset:z,prevMargin:V,prevChildren:q})}if(U!==L.prevDataKey||F!==L.prevData||H!==L.prevWidth||G!==L.prevHeight||B!==L.prevLayout||z!==L.prevStackOffset||!yd(V,L.prevMargin)){var K=Pk(R),ge={chartX:L.chartX,chartY:L.chartY,isTooltipActive:L.isTooltipActive},re=Qe(Qe({},Ok(L,F,B)),{},{updateId:L.updateId+1}),te=Qe(Qe(Qe({},K),ge),re);return Qe(Qe(Qe({},te),N(Qe({props:R},te),L)),{},{prevDataKey:U,prevData:F,prevWidth:H,prevHeight:G,prevLayout:B,prevStackOffset:z,prevMargin:V,prevChildren:q})}if(!F_(q,L.prevChildren)){var se,_e,ke,Ke,ce=Xa(q,zd),fe=ce&&(se=(_e=ce.props)===null||_e===void 0?void 0:_e.startIndex)!==null&&se!==void 0?se:ee,Ae=ce&&(ke=(Ke=ce.props)===null||Ke===void 0?void 0:Ke.endIndex)!==null&&ke!==void 0?ke:Q,He=fe!==ee||Ae!==Q,ot=!Rn(F),Ye=ot&&!He?L.updateId:L.updateId+1;return Qe(Qe({updateId:Ye},N(Qe(Qe({props:R},L),{},{updateId:Ye,dataStartIndex:fe,dataEndIndex:Ae}),L)),{},{prevChildren:q,dataStartIndex:fe,dataEndIndex:Ae})}return null}),Kt(P,"renderActiveDot",function(R,L,U){var F;return le.isValidElement(R)?F=le.cloneElement(R,L):cn(R)?F=R(L):F=we.createElement(JS,L),we.createElement(Vr,{className:"recharts-active-dot",key:U},F)});var O=le.forwardRef(function(L,U){return we.createElement(P,dd({},L,{ref:U}))});return O.displayName=P.displayName,O},Sle=Zj({chartName:"BarChart",GraphicalChild:yu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:mf},{axisType:"yAxis",AxisComp:gf}],formatAxisMap:gj}),Cle=Zj({chartName:"AreaChart",GraphicalChild:sc,axisComponents:[{axisType:"xAxis",AxisComp:mf},{axisType:"yAxis",AxisComp:gf}],formatAxisMap:gj});const Ile=({transactions:t=[],products:e=[],categories:n=[],accounts:r=[],daySessions:i=[],customers:a=[],vendors:o=[],purchaseOrders:u=[],onNavigate:h,onUpdateProduct:f,onJumpTo:g})=>{const v=le.useMemo(()=>{const R=new Date,L=R.getFullYear()+"-"+String(R.getMonth()+1).padStart(2,"0")+"-"+String(R.getDate()).padStart(2,"0"),U=t.filter(re=>re&&re.date&&re.date.split("T")[0]===L),F=re=>{var se;if(re.costBasis!==void 0)return re.costBasis;let te=0;return(se=re.items)==null||se.forEach(_e=>{const ke=e.find(Ke=>Ke.id===_e.productId);ke&&(te+=Number(ke.cost||0)*Number(_e.quantity))}),te},q=U.filter(re=>re.type==="SALE"||re.type==="SALE_HISTORY_IMPORT").reduce((re,te)=>re+Number(te.amount||0),0),H=U.filter(re=>re.type==="SALE").reduce((re,te)=>re+F(te),0),G=q-H,B=q>0?G/q*100:0,z=i.find(re=>re.date===L),V=Number((z==null?void 0:z.openingBalance)||0),ee=U.reduce((re,te)=>{if(te.paymentMethod!=="CASH"&&!(te.type==="TRANSFER"&&te.destinationAccountId==="cash"))return re;let se=0;return te.type==="SALE"?se=Number(te.paidAmount||(te.paymentMethod==="CASH"?te.amount:0)):(te.type==="CREDIT_PAYMENT"||te.type==="TRANSFER")&&(se=Number(te.amount||0)),re+se},0),Q=U.filter(re=>(re.type==="EXPENSE"||re.type==="PURCHASE"||re.type==="TRANSFER"&&re.accountId==="cash")&&re.paymentMethod==="CASH").reduce((re,te)=>re+Number(te.amount||0),0),X=V+ee-Q,K=e.reduce((re,te)=>re+Number(te.cost||0)*Number(te.stock||0),0),ge=U.filter(re=>re.type==="EXPENSE"||re.type==="PURCHASE").reduce((re,te)=>re+Number(te.amount||0),0);return{revenue:q,profit:G,todayCash:X,burn:ge,totalStockValue:K,margin:B}},[t,e,i]),A=le.useMemo(()=>{const R={};return Array.from({length:30},(U,F)=>{const q=new Date;return q.setDate(q.getDate()-F),q.toLocaleDateString("en-US",{day:"numeric",month:"short"})}).reverse().forEach(U=>R[U]=0),t.forEach(U=>{if(!(!U||!U.date)&&(U.type==="SALE"||U.type==="SALE_HISTORY_IMPORT"||U.type==="CREDIT_PAYMENT")){const F=new Date(U.date).toLocaleDateString("en-US",{day:"numeric",month:"short"});R[F]!==void 0&&(R[F]+=Number(U.amount||0))}}),Object.entries(R).map(([U,F])=>({date:U,amount:F}))},[t]),N=le.useMemo(()=>{const R={},L={};return t.filter(F=>F&&(F.type==="SALE"||F.type==="SALE_HISTORY_IMPORT")).forEach(F=>{var q;(q=F.items)==null||q.forEach(H=>{const G=e.find(ee=>ee.id===H.productId),B=Number(H.quantity)*Number(H.price),z=Number(H.quantity),V=Number(H.discount||0);if(G){const ee=z*Number(G.cost||0),Q=B-ee-V;R[G.id]||(R[G.id]={name:G.name,revenue:0,units:0,profit:0}),R[G.id].revenue+=B,R[G.id].units+=z,R[G.id].profit+=Q;const X=G.categoryId||"UNCATEGORIZED";if(!L[X]){const K=n.find(ge=>ge.id===X);L[X]={name:K?K.name:X==="UNCATEGORIZED"?"UNCATEGORIZED":X,revenue:0,units:0}}L[X].revenue+=B,L[X].units+=z}})}),{topProfitProducts:Object.values(R).sort((F,q)=>q.profit-F.profit).slice(0,5),topProducts:Object.values(R).sort((F,q)=>q.revenue-F.revenue).slice(0,5),topCategories:Object.values(L).sort((F,q)=>q.revenue-F.revenue).slice(0,5)}},[t,e,n]),P=le.useMemo(()=>{const R=[];t.forEach(q=>{var H,G;if(q&&q.paymentMethod==="CHEQUE"&&q.chequeDate){const B=q.type==="SALE"||q.type==="CREDIT_PAYMENT"||q.type==="SALE_HISTORY_IMPORT";R.push({id:q.id,date:q.chequeDate,amount:q.amount,entityId:B?q.customerId:q.vendorId,entity:B?((H=a.find(z=>z.id===q.customerId))==null?void 0:H.name)||"Client":((G=o.find(z=>z.id===q.vendorId))==null?void 0:G.name)||"Supplier",type:B?"INCOMING":"OUTGOING",desc:"PDC MATURITY",method:"CHEQUE",jumpType:B?"SALE":"VENDOR"})}}),a.forEach(q=>{Number(q.totalCredit)>0&&R.push({id:q.id,date:"OUTSTANDING",amount:q.totalCredit,entityId:q.id,entity:q.name,type:"INCOMING",desc:"CREDIT EXPOSURE",method:"CREDIT",jumpType:"CUSTOMER"})}),o.forEach(q=>{Number(q.totalBalance)>0&&R.push({id:q.id,date:"OUTSTANDING",amount:q.totalBalance,entityId:q.id,entity:q.name,type:"OUTGOING",desc:"CREDIT LIABILITY",method:"CREDIT",jumpType:"VENDOR"})}),u&&u.forEach(q=>{var H;q&&q.status==="PENDING"&&R.push({id:q.id,date:q.chequeDate||q.date.split("T")[0],amount:q.totalAmount,entityId:q.vendorId,entity:((H=o.find(G=>G.id===q.vendorId))==null?void 0:H.name)||"Supplier",type:"OUTGOING",desc:q.paymentMethod==="CHEQUE"?"PO CHEQUE MATURITY":"COMMITTED PO",method:q.paymentMethod,jumpType:"PO"})});const L=R.sort((q,H)=>q.date==="OUTSTANDING"&&H.date!=="OUTSTANDING"?-1:q.date!=="OUTSTANDING"&&H.date==="OUTSTANDING"?1:q.date==="OUTSTANDING"&&H.date==="OUTSTANDING"?H.amount-q.amount:q.date.localeCompare(H.date)),U=L.filter(q=>q.type==="INCOMING").reduce((q,H)=>q+Number(H.amount),0),F=L.filter(q=>q.type==="OUTGOING").reduce((q,H)=>q+Number(H.amount),0);return{list:L,totalIn:U,totalOut:F}},[t,u,a,o]),O=le.useMemo(()=>e.filter(R=>R.stock<=R.lowStockThreshold).sort((R,L)=>R.stock-L.stock),[e]);return x.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-20",children:[x.jsx("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tighter uppercase",children:"Market Intelligence"}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] mt-1",children:"Unified Financial Core Snapshot"})]})}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[{label:"Today's Revenue",value:v.revenue,color:"text-indigo-600",icon:"",sub:"Gross Daily"},{label:"Today's Profit",value:v.profit,color:"text-emerald-600",icon:"",sub:`Margin: ${v.margin.toFixed(1)}%`},{label:"Cash Position",value:v.todayCash,color:"text-slate-900",icon:"",sub:"In-Drawer Float"},{label:"Asset Valuation",value:v.totalStockValue,color:"text-amber-600",icon:"",sub:"Inventory at Cost"},{label:"Capital Outflow",value:v.burn,color:"text-rose-600",icon:"",sub:"Expenses + Purchases"}].map((R,L)=>x.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm hover:shadow-2xl transition-all duration-500 group",children:[x.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-50 flex items-center justify-center text-xl mb-8 shadow-inner border border-slate-100/50 group-hover:scale-110 transition-transform",children:R.icon}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:R.label}),x.jsxs("p",{className:`text-xl font-black font-mono tracking-tighter ${R.color}`,children:["Rs. ",R.value.toLocaleString()]}),x.jsx("p",{className:"text-[8px] font-black text-slate-300 uppercase tracking-widest mt-2",children:R.sub})]},L))}),x.jsxs("div",{className:"bg-white rounded-[3.5rem] p-10 shadow-sm border border-slate-100 relative overflow-hidden animate-in slide-in-from-bottom-2",children:[x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mb-8 pb-6 border-b border-slate-50",children:[x.jsxs("div",{className:"flex items-center gap-6",children:[x.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-2xl shadow-xl shadow-indigo-600/20",children:""}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-black uppercase text-slate-900 tracking-tighter leading-none",children:"Future Cheque + Credit + PO Roadmap"}),x.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-[0.3em] mt-2 opacity-80",children:"Aggregate PDC, Unsettled Portfolio & Committed Orders Manifest"})]})]}),x.jsxs("div",{className:"flex gap-6",children:[x.jsxs("div",{className:"bg-emerald-50 px-6 py-3 rounded-2xl border border-emerald-100 flex flex-col items-center",children:[x.jsx("p",{className:"text-[8px] font-black uppercase text-emerald-600 mb-1 tracking-widest opacity-80",children:"Total Receivables"}),x.jsxs("p",{className:"text-xl font-black font-mono text-emerald-700",children:["Rs. ",P.totalIn.toLocaleString()]})]}),x.jsxs("div",{className:"bg-rose-50 px-6 py-3 rounded-2xl border border-rose-100 flex flex-col items-center",children:[x.jsx("p",{className:"text-[8px] font-black uppercase text-rose-600 mb-1 tracking-widest opacity-80",children:"Total Commitments"}),x.jsxs("p",{className:"text-xl font-black font-mono text-rose-700",children:["Rs. ",P.totalOut.toLocaleString()]})]})]})]}),x.jsx("div",{className:"flex flex-col gap-3 max-h-[450px] overflow-y-auto custom-scrollbar pr-4",children:P.list.length>0?P.list.map((R,L)=>x.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-[1.5rem] border border-slate-100 hover:border-indigo-100 hover:bg-white transition-all shadow-sm flex flex-col md:flex-row items-center gap-6 group",children:[x.jsxs("div",{className:"w-full md:w-32 shrink-0",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Maturity / Status"}),x.jsx("p",{className:`text-[13px] font-black font-mono tracking-tight ${R.date==="OUTSTANDING"?"text-indigo-600 animate-pulse":"text-slate-900"}`,children:R.date})]}),x.jsx("div",{className:"hidden md:block w-px h-10 bg-slate-200"}),x.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-4",children:[x.jsx("div",{className:`w-3 h-3 rounded-full shrink-0 ${R.type==="INCOMING"?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.5)]"}`}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("button",{onClick:()=>g==null?void 0:g(R.jumpType,R.entityId||R.id),className:"text-[14px] font-black text-slate-900 uppercase truncate leading-tight group-hover:text-indigo-600 transition-colors text-left hover:underline decoration-indigo-200 underline-offset-4",children:R.entity}),x.jsxs("div",{className:"flex gap-2 items-center mt-1",children:[x.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded ${R.method==="CHEQUE"?"bg-indigo-100 text-indigo-600":R.method==="CREDIT"?"bg-rose-100 text-rose-600":"bg-slate-200 text-slate-600"}`,children:R.method}),x.jsxs("button",{onClick:()=>g==null?void 0:g(R.jumpType,R.id),className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest italic truncate hover:text-indigo-500 transition-colors",children:[R.desc," ",R.id.length>5&&`(${R.id.substring(0,8)})`]})]})]})]}),x.jsxs("div",{className:"w-full md:w-48 text-right shrink-0",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Value (Rs.)"}),x.jsxs("p",{className:`text-xl font-black font-mono tracking-tighter ${R.type==="INCOMING"?"text-emerald-600":"text-rose-600"}`,children:[R.type==="INCOMING"?"+":"-"," ",Number(R.amount).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]},L)):x.jsxs("div",{className:"py-20 text-center text-slate-300 bg-slate-50/30 rounded-[2.5rem] border border-dashed border-slate-200",children:[x.jsx("div",{className:"text-5xl mb-4 grayscale opacity-20",children:""}),x.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.4em]",children:"Zero Unsettled Ledger Entries found"})]})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[x.jsxs("div",{className:"bg-white p-12 rounded-[3.5rem] border border-slate-100 shadow-sm",children:[x.jsxs("div",{className:"flex justify-between items-end mb-10",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-1",children:"Category Performance"}),x.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tighter",children:"Top 5 Categories"})]}),x.jsx("p",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest",children:"Revenue"})]}),x.jsx("div",{className:"space-y-8",children:N.topCategories.map((R,L)=>{const U=Math.max(...N.topCategories.map(q=>q.revenue),1),F=R.revenue/U*100;return x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex justify-between items-end",children:[x.jsxs("div",{children:[x.jsxs("p",{className:"text-[12px] font-black text-slate-800 uppercase tracking-tight",children:[L+1,". ",R.name]}),x.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase mt-1 opacity-70",children:["Units: ",R.units]})]}),x.jsxs("p",{className:"text-[12px] font-black font-mono text-indigo-600",children:["RS. ",R.revenue.toLocaleString()]})]}),x.jsx("div",{className:"h-4 w-full bg-slate-50 rounded-full overflow-hidden shadow-inner border border-slate-100",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-emerald-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${F}%`}})})]},L)})})]}),x.jsxs("div",{className:"bg-white p-12 rounded-[3.5rem] border border-slate-100 shadow-sm",children:[x.jsxs("div",{className:"flex justify-between items-end mb-10",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-1",children:"Item Leaders"}),x.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tighter",children:"Top 5 Products"})]}),x.jsx("p",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest",children:"Revenue"})]}),x.jsx("div",{className:"space-y-8",children:N.topProducts.map((R,L)=>{const U=Math.max(...N.topProducts.map(q=>q.revenue),1),F=R.revenue/U*100;return x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex justify-between items-end",children:[x.jsxs("div",{children:[x.jsxs("p",{className:"text-[12px] font-black text-slate-800 uppercase tracking-tight",children:[L+1,". ",R.name]}),x.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase mt-1 opacity-70",children:["Units: ",R.units]})]}),x.jsxs("p",{className:"text-[12px] font-black font-mono text-indigo-600",children:["RS. ",R.revenue.toLocaleString()]})]}),x.jsx("div",{className:"h-4 w-full bg-slate-50 rounded-full overflow-hidden shadow-inner border border-slate-100",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-emerald-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${F}%`}})})]},L)})})]})]}),x.jsxs("div",{className:"bg-white p-12 rounded-[3.5rem] border border-slate-100 shadow-sm animate-in slide-in-from-bottom-4 duration-700",children:[x.jsxs("div",{className:"flex justify-between items-end mb-10",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-1",children:"PROFIT CONTRIBUTION"}),x.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Top 5 Products by Profit"})]}),x.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"NET PROFIT"})]}),x.jsxs("div",{className:"space-y-10",children:[N.topProfitProducts.map((R,L)=>{const U=Math.max(...N.topProfitProducts.map(q=>q.profit),1),F=R.profit/U*100;return x.jsxs("div",{className:"space-y-3 group",children:[x.jsxs("div",{className:"flex justify-between items-end",children:[x.jsx("div",{className:"min-w-0",children:x.jsxs("p",{className:"text-[14px] font-black text-slate-800 uppercase tracking-tight truncate",children:[x.jsxs("span",{className:"text-slate-400 mr-2",children:[L+1,"."]})," ",R.name]})}),x.jsx("div",{className:"text-right",children:x.jsxs("p",{className:"text-[14px] font-black font-mono text-emerald-600",children:["RS. ",R.profit.toLocaleString()]})})]}),x.jsx("div",{className:"h-5 w-full bg-slate-50 rounded-full overflow-hidden shadow-inner border border-slate-100 p-0.5",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-amber-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${F}%`}})}),x.jsx("div",{className:"flex justify-between items-center px-1",children:x.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Units: ",x.jsx("span",{className:"text-slate-600",children:R.units}),"  Revenue: ",x.jsxs("span",{className:"text-slate-600",children:["Rs. ",R.revenue.toLocaleString()]})]})})]},L)}),N.topProfitProducts.length===0&&x.jsx("div",{className:"py-20 text-center opacity-20",children:x.jsx("p",{className:"text-xs font-black uppercase tracking-[0.3em]",children:"No profitable sales recorded in cycle"})})]})]}),O.length>0&&x.jsxs("div",{className:"bg-gradient-to-br from-rose-600 via-rose-700 to-red-900 rounded-[3.5rem] p-12 text-white shadow-2xl relative overflow-hidden animate-in slide-in-from-bottom-4 duration-700",children:[x.jsx("div",{className:"absolute top-0 right-0 p-16 opacity-[0.05] pointer-events-none text-9xl font-black italic tracking-tighter select-none rotate-[-15deg]",children:"ALERT"}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-12",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.4em] text-rose-200 opacity-80",children:"INVENTORY DEPLETION ALERT"}),x.jsx("h2",{className:"text-4xl font-black uppercase tracking-tighter leading-none",children:"CRITICAL STOCK SHORTFALL"})]}),x.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 px-8 py-4 rounded-3xl text-center shadow-lg",children:x.jsxs("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-rose-100",children:[O.length," ITEMS BELOW THRESHOLD"]})})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:O.slice(0,4).map((R,L)=>x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl p-8 rounded-[2.5rem] border border-white/10 hover:bg-white/20 transition-all duration-300 group shadow-xl",children:[x.jsxs("div",{className:"flex justify-between items-start mb-6",children:[x.jsx("span",{className:"text-[9px] font-black text-rose-200 font-mono opacity-60",children:R.sku}),x.jsx("span",{className:`px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest ${R.stock===0?"bg-red-900 text-white":"bg-rose-50 text-white"}`,children:R.stock===0?"OUT OF STOCK":"LOW STOCK"})]}),x.jsx("h4",{className:"text-[13px] font-black uppercase tracking-tight leading-snug mb-8 h-10 line-clamp-2",children:R.name}),x.jsxs("div",{className:"flex justify-between items-end pt-6",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[9px] font-black text-rose-200 uppercase tracking-widest opacity-60",children:"Available"}),x.jsx("p",{className:"text-3xl font-black font-mono",children:R.stock})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[9px] font-black text-rose-200 uppercase tracking-widest opacity-60",children:"Threshold"}),x.jsx("p",{className:"text-xl font-black text-rose-200 font-mono",children:R.lowStockThreshold})]})]})]},L))}),x.jsx("div",{className:"mt-10 text-center",children:x.jsxs("button",{onClick:()=>h("INVENTORY"),className:"text-[10px] font-black uppercase tracking-[0.4em] text-rose-100 hover:text-white transition-all underline underline-offset-8",children:["VIEW ALL ",O.length," ALERTS IN MASTER CATALOG"]})})]})]}),x.jsxs("div",{className:"bg-white p-12 rounded-[3.5rem] border border-slate-100 shadow-sm relative overflow-hidden",children:[x.jsxs("div",{className:"flex justify-between items-center mb-12",children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Volume Velocity (30 Days)"}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Enterprise Revenue Flow"})]}),x.jsx("div",{className:"h-[400px] w-full",children:x.jsx(H9,{width:"100%",height:"100%",children:x.jsxs(Cle,{data:A,children:[x.jsx("defs",{children:x.jsxs("linearGradient",{id:"colorAmt",x1:"0",y1:"0",x2:"0",y2:"1",children:[x.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.15}),x.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),x.jsx(l2,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),x.jsx(mf,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:9,fontWeights:900,fill:"#94a3b8"},dy:15,interval:4}),x.jsx(gf,{axisLine:!1,tickLine:!1,tick:{fontSize:9,fontWeights:900,fill:"#94a3b8"},tickFormatter:R=>`Rs.${R/1e3}k`}),x.jsx(Bo,{contentStyle:{borderRadius:"1rem",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)",fontWeight:900,fontSize:"10px"}}),x.jsx(sc,{type:"monotone",dataKey:"amount",stroke:"#6366f1",strokeWidth:5,fillOpacity:1,fill:"url(#colorAmt)",dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"}})]})})})]})]})};var Rt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Rt||(Rt={}));var Lk=new Map([[Rt.QR_CODE,"QR_CODE"],[Rt.AZTEC,"AZTEC"],[Rt.CODABAR,"CODABAR"],[Rt.CODE_39,"CODE_39"],[Rt.CODE_93,"CODE_93"],[Rt.CODE_128,"CODE_128"],[Rt.DATA_MATRIX,"DATA_MATRIX"],[Rt.MAXICODE,"MAXICODE"],[Rt.ITF,"ITF"],[Rt.EAN_13,"EAN_13"],[Rt.EAN_8,"EAN_8"],[Rt.PDF_417,"PDF_417"],[Rt.RSS_14,"RSS_14"],[Rt.RSS_EXPANDED,"RSS_EXPANDED"],[Rt.UPC_A,"UPC_A"],[Rt.UPC_E,"UPC_E"],[Rt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Bk;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Bk||(Bk={}));function Nle(t){return Object.values(Rt).includes(t)}var Zl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Zl||(Zl={}));var Uo=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Zl.SCAN_TYPE_CAMERA,Zl.SCAN_TYPE_FILE],t})(),eU=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Lk.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Lk.get(e))},t})(),jk=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),tT;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(tT||(tT={}));var tU=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:tT.UNKWOWN_ERROR}},t})(),nU=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function rs(t){return typeof t>"u"||t===null}function Rle(t,e,n){return t>n?n:t<e?e:t}var fd=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),nr=(function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t})(),Uk=(function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t})(),rU=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),o=Object.keys(e),u=0,h=o;u<h.length;u++){var f=h[u];if(a.has(f))return n.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},t})(),Nh={exports:{}},Mle=Nh.exports,Vk;function Dle(){return Vk||(Vk=1,(function(t,e){(function(n,r){r(e)})(Mle,(function(n){function r(J){return J==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,l){J.__proto__=l}||function(J,l){for(var d in l)l.hasOwnProperty(d)&&(J[d]=l[d])};function a(J,l){i(J,l);function d(){this.constructor=J}J.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}function o(J,l){var d=Object.setPrototypeOf;d?d(J,l):J.__proto__=l}function u(J,l){l===void 0&&(l=J.constructor);var d=Error.captureStackTrace;d&&d(J,l)}var h=(function(J){a(l,J);function l(d){var p=this.constructor,y=J.call(this,d)||this;return Object.defineProperty(y,"name",{value:p.name,enumerable:!1}),o(y,p.prototype),u(y),y}return l})(Error);class f extends h{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}f.kind="Exception";class g extends f{}g.kind="ArgumentException";class v extends f{}v.kind="IllegalArgumentException";class A{constructor(l){if(this.binarizer=l,l===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,d){return this.binarizer.getBlackRow(l,d)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,d,p,y){const b=this.binarizer.getLuminanceSource().crop(l,d,p,y);return new A(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class N extends f{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class P{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class O{static arraycopy(l,d,p,y,b){for(;b--;)p[y++]=l[d++]}static currentTimeMillis(){return Date.now()}}class R extends f{}R.kind="IndexOutOfBoundsException";class L extends R{constructor(l=void 0,d=void 0){super(d),this.index=l,this.message=d}}L.kind="ArrayIndexOutOfBoundsException";class U{static fill(l,d){for(let p=0,y=l.length;p<y;p++)l[p]=d}static fillWithin(l,d,p,y){U.rangeCheck(l.length,d,p);for(let b=d;b<p;b++)l[b]=y}static rangeCheck(l,d,p){if(d>p)throw new v("fromIndex("+d+") > toIndex("+p+")");if(d<0)throw new L(d);if(p>l)throw new L(p)}static asList(...l){return l}static create(l,d,p){return Array.from({length:l}).map(b=>Array.from({length:d}).fill(p))}static createInt32Array(l,d,p){return Array.from({length:l}).map(b=>Int32Array.from({length:d}).fill(p))}static equals(l,d){if(!l||!d||!l.length||!d.length||l.length!==d.length)return!1;for(let p=0,y=l.length;p<y;p++)if(l[p]!==d[p])return!1;return!0}static hashCode(l){if(l===null)return 0;let d=1;for(const p of l)d=31*d+p;return d}static fillUint8Array(l,d){for(let p=0;p!==l.length;p++)l[p]=d}static copyOf(l,d){return l.slice(0,d)}static copyOfUint8Array(l,d){if(l.length<=d){const p=new Uint8Array(d);return p.set(l),p}return l.slice(0,d)}static copyOfRange(l,d,p){const y=p-d,b=new Int32Array(y);return O.arraycopy(l,d,b,0,y),b}static binarySearch(l,d,p){p===void 0&&(p=U.numberComparator);let y=0,b=l.length-1;for(;y<=b;){const E=b+y>>1,T=p(d,l[E]);if(T>0)y=E+1;else if(T<0)b=E-1;else return E}return-y-1}static numberComparator(l,d){return l-d}}class F{static numberOfTrailingZeros(l){let d;if(l===0)return 32;let p=31;return d=l<<16,d!==0&&(p-=16,l=d),d=l<<8,d!==0&&(p-=8,l=d),d=l<<4,d!==0&&(p-=4,l=d),d=l<<2,d!==0&&(p-=2,l=d),p-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let d=1;return l>>>16||(d+=16,l<<=16),l>>>24||(d+=8,l<<=8),l>>>28||(d+=4,l<<=4),l>>>30||(d+=2,l<<=2),d-=l>>>31,d}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,d){return Math.trunc(l/d)}static parseInt(l,d=void 0){return parseInt(l,d)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class q{constructor(l,d){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,d==null?this.bits=q.makeArray(l):this.bits=d)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const d=q.makeArray(l);O.arraycopy(this.bits,0,d,0,this.bits.length),this.bits=d}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const d=this.size;if(l>=d)return d;const p=this.bits;let y=Math.floor(l/32),b=p[y];b&=~((1<<(l&31))-1);const E=p.length;for(;b===0;){if(++y===E)return d;b=p[y]}const T=y*32+F.numberOfTrailingZeros(b);return T>d?d:T}getNextUnset(l){const d=this.size;if(l>=d)return d;const p=this.bits;let y=Math.floor(l/32),b=~p[y];b&=~((1<<(l&31))-1);const E=p.length;for(;b===0;){if(++y===E)return d;b=~p[y]}const T=y*32+F.numberOfTrailingZeros(b);return T>d?d:T}setBulk(l,d){this.bits[Math.floor(l/32)]=d}setRange(l,d){if(d<l||l<0||d>this.size)throw new v;if(d===l)return;d--;const p=Math.floor(l/32),y=Math.floor(d/32),b=this.bits;for(let E=p;E<=y;E++){const T=E>p?0:l&31,k=(2<<(E<y?31:d&31))-(1<<T);b[E]|=k}}clear(){const l=this.bits.length,d=this.bits;for(let p=0;p<l;p++)d[p]=0}isRange(l,d,p){if(d<l||l<0||d>this.size)throw new v;if(d===l)return!0;d--;const y=Math.floor(l/32),b=Math.floor(d/32),E=this.bits;for(let T=y;T<=b;T++){const M=T>y?0:l&31,$=(2<<(T<b?31:d&31))-(1<<M)&4294967295;if((E[T]&$)!==(p?$:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,d){if(d<0||d>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+d);for(let p=d;p>0;p--)this.appendBit((l>>p-1&1)===1)}appendBitArray(l){const d=l.size;this.ensureCapacity(this.size+d);for(let p=0;p<d;p++)this.appendBit(l.get(p))}xor(l){if(this.size!==l.size)throw new v("Sizes don't match");const d=this.bits;for(let p=0,y=d.length;p<y;p++)d[p]^=l.bits[p]}toBytes(l,d,p,y){for(let b=0;b<y;b++){let E=0;for(let T=0;T<8;T++)this.get(l)&&(E|=1<<7-T),l++;d[p+b]=E}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),d=Math.floor((this.size-1)/32),p=d+1,y=this.bits;for(let b=0;b<p;b++){let E=y[b];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,l[d-b]=E}if(this.size!==p*32){const b=p*32-this.size;let E=l[0]>>>b;for(let T=1;T<p;T++){const M=l[T];E|=M<<32-b,l[T-1]=E,E=M>>>b}l[p-1]=E}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof q))return!1;const d=l;return this.size===d.size&&U.equals(this.bits,d.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let l="";for(let d=0,p=this.size;d<p;d++)(d&7)===0&&(l+=" "),l+=this.get(d)?"X":".";return l}clone(){return new q(this.size,this.bits.slice())}}var H;(function(J){J[J.OTHER=0]="OTHER",J[J.PURE_BARCODE=1]="PURE_BARCODE",J[J.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",J[J.TRY_HARDER=3]="TRY_HARDER",J[J.CHARACTER_SET=4]="CHARACTER_SET",J[J.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",J[J.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",J[J.ASSUME_GS1=7]="ASSUME_GS1",J[J.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",J[J.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",J[J.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var G=H;class B extends f{static getFormatInstance(){return new B}}B.kind="FormatException";var z;(function(J){J[J.Cp437=0]="Cp437",J[J.ISO8859_1=1]="ISO8859_1",J[J.ISO8859_2=2]="ISO8859_2",J[J.ISO8859_3=3]="ISO8859_3",J[J.ISO8859_4=4]="ISO8859_4",J[J.ISO8859_5=5]="ISO8859_5",J[J.ISO8859_6=6]="ISO8859_6",J[J.ISO8859_7=7]="ISO8859_7",J[J.ISO8859_8=8]="ISO8859_8",J[J.ISO8859_9=9]="ISO8859_9",J[J.ISO8859_10=10]="ISO8859_10",J[J.ISO8859_11=11]="ISO8859_11",J[J.ISO8859_13=12]="ISO8859_13",J[J.ISO8859_14=13]="ISO8859_14",J[J.ISO8859_15=14]="ISO8859_15",J[J.ISO8859_16=15]="ISO8859_16",J[J.SJIS=16]="SJIS",J[J.Cp1250=17]="Cp1250",J[J.Cp1251=18]="Cp1251",J[J.Cp1252=19]="Cp1252",J[J.Cp1256=20]="Cp1256",J[J.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",J[J.UTF8=22]="UTF8",J[J.ASCII=23]="ASCII",J[J.Big5=24]="Big5",J[J.GB18030=25]="GB18030",J[J.EUC_KR=26]="EUC_KR"})(z||(z={}));class V{constructor(l,d,p,...y){this.valueIdentifier=l,this.name=p,typeof d=="number"?this.values=Int32Array.from([d]):this.values=d,this.otherEncodingNames=y,V.VALUE_IDENTIFIER_TO_ECI.set(l,this),V.NAME_TO_ECI.set(p,this);const b=this.values;for(let E=0,T=b.length;E!==T;E++){const M=b[E];V.VALUES_TO_ECI.set(M,this)}for(const E of y)V.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new B("incorect value");const d=V.VALUES_TO_ECI.get(l);if(d===void 0)throw new B("incorect value");return d}static getCharacterSetECIByName(l){const d=V.NAME_TO_ECI.get(l);if(d===void 0)throw new B("incorect value");return d}equals(l){if(!(l instanceof V))return!1;const d=l;return this.getName()===d.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(z.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(z.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(z.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(z.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(z.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(z.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(z.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(z.Big5,28,"Big5"),V.GB18030=new V(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(z.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends f{}ee.kind="UnsupportedOperationException";class Q{static decode(l,d){const p=this.encodingName(d);return this.customDecoder?this.customDecoder(l,p):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(p)?this.decodeFallback(l,p):new TextDecoder(p).decode(l)}static shouldDecodeOnFallback(l){return!Q.isBrowser()&&l==="ISO-8859-1"}static encode(l,d){const p=this.encodingName(d);return this.customEncoder?this.customEncoder(l,p):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof V?l:V.getCharacterSetECIByName(l)}static decodeFallback(l,d){const p=this.encodingCharacterSet(d);if(Q.isDecodeFallbackSupported(p)){let y="";for(let b=0,E=l.length;b<E;b++){let T=l[b].toString(16);T.length<2&&(T="0"+T),y+="%"+T}return decodeURIComponent(y)}if(p.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new ee(`Encoding ${this.encodingName(d)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(V.UTF8)||l.equals(V.ISO8859_1)||l.equals(V.ASCII)}static encodeFallback(l){const p=btoa(unescape(encodeURIComponent(l))).split(""),y=[];for(let b=0;b<p.length;b++)y.push(p[b].charCodeAt(0));return new Uint8Array(y)}}class X{static castAsNonUtf8Char(l,d=null){const p=d?d.getName():this.ISO88591;return Q.decode(new Uint8Array([l]),p)}static guessEncoding(l,d){if(d!=null&&d.get(G.CHARACTER_SET)!==void 0)return d.get(G.CHARACTER_SET).toString();const p=l.length;let y=!0,b=!0,E=!0,T=0,M=0,k=0,$=0,Z=0,ne=0,ue=0,me=0,xe=0,Ne=0,qe=0;const ft=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let ut=0;ut<p&&(y||b||E);ut++){const at=l[ut]&255;E&&(T>0?(at&128)===0?E=!1:T--:(at&128)!==0&&((at&64)===0?E=!1:(T++,(at&32)===0?M++:(T++,(at&16)===0?k++:(T++,(at&8)===0?$++:E=!1))))),y&&(at>127&&at<160?y=!1:at>159&&(at<192||at===215||at===247)&&qe++),b&&(Z>0?at<64||at===127||at>252?b=!1:Z--:at===128||at===160||at>239?b=!1:at>160&&at<224?(ne++,me=0,ue++,ue>xe&&(xe=ue)):at>127?(Z++,ue=0,me++,me>Ne&&(Ne=me)):(ue=0,me=0))}return E&&T>0&&(E=!1),b&&Z>0&&(b=!1),E&&(ft||M+k+$>0)?X.UTF8:b&&(X.ASSUME_SHIFT_JIS||xe>=3||Ne>=3)?X.SHIFT_JIS:y&&b?xe===2&&ne===2||qe*10>=p?X.SHIFT_JIS:X.ISO88591:y?X.ISO88591:b?X.SHIFT_JIS:E?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(l,...d){let p=-1;function y(E,T,M,k,$,Z){if(E==="%%")return"%";if(d[++p]===void 0)return;E=k?parseInt(k.substr(1)):void 0;let ne=$?parseInt($.substr(1)):void 0,ue;switch(Z){case"s":ue=d[p];break;case"c":ue=d[p][0];break;case"f":ue=parseFloat(d[p]).toFixed(E);break;case"p":ue=parseFloat(d[p]).toPrecision(E);break;case"e":ue=parseFloat(d[p]).toExponential(E);break;case"x":ue=parseInt(d[p]).toString(ne||16);break;case"d":ue=parseFloat(parseInt(d[p],ne||10).toPrecision(E)).toFixed(0);break}ue=typeof ue=="object"?JSON.stringify(ue):(+ue).toString(ne);let me=parseInt(M),xe=M&&M[0]+""=="0"?"0":" ";for(;ue.length<me;)ue=T!==void 0?ue+xe:xe+ue;return ue}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(b,y)}static getBytes(l,d){return Q.encode(l,d)}static getCharCode(l,d=0){return l.charCodeAt(d)}static getCharAt(l){return String.fromCharCode(l)}}X.SHIFT_JIS=V.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=V.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=V.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class K{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=X.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,d,p){for(let y=d;d<d+p;y++)this.append(l[y]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,d){this.value=this.value.substr(0,l)+d+this.value.substr(l+1)}substring(l,d){return this.value.substring(l,d)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,d){this.value=this.value.substr(0,l)+d+this.value.substr(l+d.length)}}class ge{constructor(l,d,p,y){if(this.width=l,this.height=d,this.rowSize=p,this.bits=y,d==null&&(d=l),this.height=d,l<1||d<1)throw new v("Both dimensions must be greater than 0");p==null&&(p=Math.floor((l+31)/32)),this.rowSize=p,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const d=l.length,p=l[0].length,y=new ge(p,d);for(let b=0;b<d;b++){const E=l[b];for(let T=0;T<p;T++)E[T]&&y.set(T,b)}return y}static parseFromString(l,d,p){if(l===null)throw new v("stringRepresentation cannot be null");const y=new Array(l.length);let b=0,E=0,T=-1,M=0,k=0;for(;k<l.length;)if(l.charAt(k)===`
`||l.charAt(k)==="\r"){if(b>E){if(T===-1)T=b-E;else if(b-E!==T)throw new v("row lengths do not match");E=b,M++}k++}else if(l.substring(k,k+d.length)===d)k+=d.length,y[b]=!0,b++;else if(l.substring(k,k+p.length)===p)k+=p.length,y[b]=!1,b++;else throw new v("illegal character encountered: "+l.substring(k));if(b>E){if(T===-1)T=b-E;else if(b-E!==T)throw new v("row lengths do not match");M++}const $=new ge(T,M);for(let Z=0;Z<b;Z++)y[Z]&&$.set(Math.floor(Z%T),Math.floor(Z/T));return $}get(l,d){const p=d*this.rowSize+Math.floor(l/32);return(this.bits[p]>>>(l&31)&1)!==0}set(l,d){const p=d*this.rowSize+Math.floor(l/32);this.bits[p]|=1<<(l&31)&4294967295}unset(l,d){const p=d*this.rowSize+Math.floor(l/32);this.bits[p]&=~(1<<(l&31)&4294967295)}flip(l,d){const p=d*this.rowSize+Math.floor(l/32);this.bits[p]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new v("input matrix dimensions do not match");const d=new q(Math.floor(this.width/32)+1),p=this.rowSize,y=this.bits;for(let b=0,E=this.height;b<E;b++){const T=b*p,M=l.getRow(b,d).getBitArray();for(let k=0;k<p;k++)y[T+k]^=M[k]}}clear(){const l=this.bits,d=l.length;for(let p=0;p<d;p++)l[p]=0}setRegion(l,d,p,y){if(d<0||l<0)throw new v("Left and top must be nonnegative");if(y<1||p<1)throw new v("Height and width must be at least 1");const b=l+p,E=d+y;if(E>this.height||b>this.width)throw new v("The region must fit inside the matrix");const T=this.rowSize,M=this.bits;for(let k=d;k<E;k++){const $=k*T;for(let Z=l;Z<b;Z++)M[$+Math.floor(Z/32)]|=1<<(Z&31)&4294967295}}getRow(l,d){d==null||d.getSize()<this.width?d=new q(this.width):d.clear();const p=this.rowSize,y=this.bits,b=l*p;for(let E=0;E<p;E++)d.setBulk(E*32,y[b+E]);return d}setRow(l,d){O.arraycopy(d.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),d=this.getHeight();let p=new q(l),y=new q(l);for(let b=0,E=Math.floor((d+1)/2);b<E;b++)p=this.getRow(b,p),y=this.getRow(d-1-b,y),p.reverse(),y.reverse(),this.setRow(b,y),this.setRow(d-1-b,p)}getEnclosingRectangle(){const l=this.width,d=this.height,p=this.rowSize,y=this.bits;let b=l,E=d,T=-1,M=-1;for(let k=0;k<d;k++)for(let $=0;$<p;$++){const Z=y[k*p+$];if(Z!==0){if(k<E&&(E=k),k>M&&(M=k),$*32<b){let ne=0;for(;(Z<<31-ne&4294967295)===0;)ne++;$*32+ne<b&&(b=$*32+ne)}if($*32+31>T){let ne=31;for(;!(Z>>>ne);)ne--;$*32+ne>T&&(T=$*32+ne)}}}return T<b||M<E?null:Int32Array.from([b,E,T-b+1,M-E+1])}getTopLeftOnBit(){const l=this.rowSize,d=this.bits;let p=0;for(;p<d.length&&d[p]===0;)p++;if(p===d.length)return null;const y=p/l;let b=p%l*32;const E=d[p];let T=0;for(;(E<<31-T&4294967295)===0;)T++;return b+=T,Int32Array.from([b,y])}getBottomRightOnBit(){const l=this.rowSize,d=this.bits;let p=d.length-1;for(;p>=0&&d[p]===0;)p--;if(p<0)return null;const y=Math.floor(p/l);let b=Math.floor(p%l)*32;const E=d[p];let T=31;for(;!(E>>>T);)T--;return b+=T,Int32Array.from([b,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof ge))return!1;const d=l;return this.width===d.width&&this.height===d.height&&this.rowSize===d.rowSize&&U.equals(this.bits,d.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+U.hashCode(this.bits),l}toString(l="X ",d="  ",p=`
`){return this.buildToString(l,d,p)}buildToString(l,d,p){let y=new K;for(let b=0,E=this.height;b<E;b++){for(let T=0,M=this.width;T<M;T++)y.append(this.get(T,b)?l:d);y.append(p)}return y.toString()}clone(){return new ge(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends f{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class te extends P{constructor(l){super(l),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(l,d){const p=this.getLuminanceSource(),y=p.getWidth();d==null||d.getSize()<y?d=new q(y):d.clear(),this.initArrays(y);const b=p.getRow(l,this.luminances),E=this.buckets;for(let M=0;M<y;M++)E[(b[M]&255)>>te.LUMINANCE_SHIFT]++;const T=te.estimateBlackPoint(E);if(y<3)for(let M=0;M<y;M++)(b[M]&255)<T&&d.set(M);else{let M=b[0]&255,k=b[1]&255;for(let $=1;$<y-1;$++){const Z=b[$+1]&255;(k*4-M-Z)/2<T&&d.set($),M=k,k=Z}}return d}getBlackMatrix(){const l=this.getLuminanceSource(),d=l.getWidth(),p=l.getHeight(),y=new ge(d,p);this.initArrays(d);const b=this.buckets;for(let M=1;M<5;M++){const k=Math.floor(p*M/5),$=l.getRow(k,this.luminances),Z=Math.floor(d*4/5);for(let ne=Math.floor(d/5);ne<Z;ne++){const ue=$[ne]&255;b[ue>>te.LUMINANCE_SHIFT]++}}const E=te.estimateBlackPoint(b),T=l.getMatrix();for(let M=0;M<p;M++){const k=M*d;for(let $=0;$<d;$++)(T[k+$]&255)<E&&y.set($,M)}return y}createBinarizer(l){return new te(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const d=this.buckets;for(let p=0;p<te.LUMINANCE_BUCKETS;p++)d[p]=0}static estimateBlackPoint(l){const d=l.length;let p=0,y=0,b=0;for(let $=0;$<d;$++)l[$]>b&&(y=$,b=l[$]),l[$]>p&&(p=l[$]);let E=0,T=0;for(let $=0;$<d;$++){const Z=$-y,ne=l[$]*Z*Z;ne>T&&(E=$,T=ne)}if(y>E){const $=y;y=E,E=$}if(E-y<=d/16)throw new re;let M=E-1,k=-1;for(let $=E-1;$>y;$--){const Z=$-y,ne=Z*Z*(E-$)*(p-l[$]);ne>k&&(M=$,k=ne)}return M<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class se extends te{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),d=l.getWidth(),p=l.getHeight();if(d>=se.MINIMUM_DIMENSION&&p>=se.MINIMUM_DIMENSION){const y=l.getMatrix();let b=d>>se.BLOCK_SIZE_POWER;(d&se.BLOCK_SIZE_MASK)!==0&&b++;let E=p>>se.BLOCK_SIZE_POWER;(p&se.BLOCK_SIZE_MASK)!==0&&E++;const T=se.calculateBlackPoints(y,b,E,d,p),M=new ge(d,p);se.calculateThresholdForBlock(y,b,E,d,p,T,M),this.matrix=M}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new se(l)}static calculateThresholdForBlock(l,d,p,y,b,E,T){const M=b-se.BLOCK_SIZE,k=y-se.BLOCK_SIZE;for(let $=0;$<p;$++){let Z=$<<se.BLOCK_SIZE_POWER;Z>M&&(Z=M);const ne=se.cap($,2,p-3);for(let ue=0;ue<d;ue++){let me=ue<<se.BLOCK_SIZE_POWER;me>k&&(me=k);const xe=se.cap(ue,2,d-3);let Ne=0;for(let ft=-2;ft<=2;ft++){const ut=E[ne+ft];Ne+=ut[xe-2]+ut[xe-1]+ut[xe]+ut[xe+1]+ut[xe+2]}const qe=Ne/25;se.thresholdBlock(l,me,Z,qe,y,T)}}}static cap(l,d,p){return l<d?d:l>p?p:l}static thresholdBlock(l,d,p,y,b,E){for(let T=0,M=p*b+d;T<se.BLOCK_SIZE;T++,M+=b)for(let k=0;k<se.BLOCK_SIZE;k++)(l[M+k]&255)<=y&&E.set(d+k,p+T)}static calculateBlackPoints(l,d,p,y,b){const E=b-se.BLOCK_SIZE,T=y-se.BLOCK_SIZE,M=new Array(p);for(let k=0;k<p;k++){M[k]=new Int32Array(d);let $=k<<se.BLOCK_SIZE_POWER;$>E&&($=E);for(let Z=0;Z<d;Z++){let ne=Z<<se.BLOCK_SIZE_POWER;ne>T&&(ne=T);let ue=0,me=255,xe=0;for(let qe=0,ft=$*y+ne;qe<se.BLOCK_SIZE;qe++,ft+=y){for(let ut=0;ut<se.BLOCK_SIZE;ut++){const at=l[ft+ut]&255;ue+=at,at<me&&(me=at),at>xe&&(xe=at)}if(xe-me>se.MIN_DYNAMIC_RANGE)for(qe++,ft+=y;qe<se.BLOCK_SIZE;qe++,ft+=y)for(let ut=0;ut<se.BLOCK_SIZE;ut++)ue+=l[ft+ut]&255}let Ne=ue>>se.BLOCK_SIZE_POWER*2;if(xe-me<=se.MIN_DYNAMIC_RANGE&&(Ne=me/2,k>0&&Z>0)){const qe=(M[k-1][Z]+2*M[k][Z-1]+M[k-1][Z-1])/4;me<qe&&(Ne=qe)}M[k][Z]=Ne}}return M}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class _e{constructor(l,d){this.width=l,this.height=d}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,d,p,y){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let d=new K;for(let p=0;p<this.height;p++){const y=this.getRow(p,l);for(let b=0;b<this.width;b++){const E=y[b]&255;let T;E<64?T="#":E<128?T="+":E<192?T=".":T=" ",d.append(T)}d.append(`
`)}return d.toString()}}class ke extends _e{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,d){const p=this.delegate.getRow(l,d),y=this.getWidth();for(let b=0;b<y;b++)p[b]=255-(p[b]&255);return p}getMatrix(){const l=this.delegate.getMatrix(),d=this.getWidth()*this.getHeight(),p=new Uint8ClampedArray(d);for(let y=0;y<d;y++)p[y]=255-(l[y]&255);return p}isCropSupported(){return this.delegate.isCropSupported()}crop(l,d,p,y){return new ke(this.delegate.crop(l,d,p,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ke(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ke(this.delegate.rotateCounterClockwise45())}}class Ke extends _e{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=Ke.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const d=l.getContext("2d").getImageData(0,0,l.width,l.height);return Ke.toGrayscaleBuffer(d.data,l.width,l.height)}static toGrayscaleBuffer(l,d,p){const y=new Uint8ClampedArray(d*p);for(let b=0,E=0,T=l.length;b<T;b+=4,E++){let M;if(l[b+3]===0)M=255;else{const $=l[b],Z=l[b+1],ne=l[b+2];M=306*$+601*Z+117*ne+512>>10}y[E]=M}return y}getRow(l,d){if(l<0||l>=this.getHeight())throw new v("Requested row is outside the image: "+l);const p=this.getWidth(),y=l*p;return d===null?d=this.buffer.slice(y,y+p):(d.length<p&&(d=new Uint8ClampedArray(p)),d.set(this.buffer.slice(y,y+p))),d}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,d,p,y){return super.crop(l,d,p,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const d=this.getTempCanvasElement(),p=d.getContext("2d"),y=l*Ke.DEGREE_TO_RADIANS,b=this.canvas.width,E=this.canvas.height,T=Math.ceil(Math.abs(Math.cos(y))*b+Math.abs(Math.sin(y))*E),M=Math.ceil(Math.abs(Math.sin(y))*b+Math.abs(Math.cos(y))*E);return d.width=T,d.height=M,p.translate(T/2,M/2),p.rotate(y),p.drawImage(this.canvas,b/-2,E/-2),this.buffer=Ke.makeBufferFromCanvasImageData(d),this}invert(){return new ke(this)}}Ke.DEGREE_TO_RADIANS=Math.PI/180;class ce{constructor(l,d,p){this.deviceId=l,this.label=d,this.kind="videoinput",this.groupId=p||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var fe=(globalThis||jl||self||window||void 0)&&(globalThis||jl||self||window||void 0).__awaiter||function(J,l,d,p){function y(b){return b instanceof d?b:new d(function(E){E(b)})}return new(d||(d=Promise))(function(b,E){function T($){try{k(p.next($))}catch(Z){E(Z)}}function M($){try{k(p.throw($))}catch(Z){E(Z)}}function k($){$.done?b($.value):y($.value).then(T,M)}k((p=p.apply(J,l||[])).next())})};class Ae{constructor(l,d=500,p){this.reader=l,this.timeBetweenScansMillis=d,this._hints=p,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),d=[];for(const p of l){const y=p.kind==="video"?"videoinput":p.kind;if(y!=="videoinput")continue;const b=p.deviceId||p.id,E=p.label||`Video device ${d.length+1}`,T=p.groupId,M={deviceId:b,label:E,kind:y,groupId:T};d.push(M)}return d})}getVideoInputDevices(){return fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(d=>new ce(d.deviceId,d.label))})}findDeviceById(l){return fe(this,void 0,void 0,function*(){const d=yield this.listVideoInputDevices();return d?d.find(p=>p.deviceId===l):null})}decodeFromInputVideoDevice(l,d){return fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,d)})}decodeOnceFromVideoDevice(l,d){return fe(this,void 0,void 0,function*(){this.reset();let p;l?p={deviceId:{exact:l}}:p={facingMode:"environment"};const y={video:p};return yield this.decodeOnceFromConstraints(y,d)})}decodeOnceFromConstraints(l,d){return fe(this,void 0,void 0,function*(){const p=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(p,d)})}decodeOnceFromStream(l,d){return fe(this,void 0,void 0,function*(){this.reset();const p=yield this.attachStreamToVideo(l,d);return yield this.decodeOnce(p)})}decodeFromInputVideoDeviceContinuously(l,d,p){return fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,d,p)})}decodeFromVideoDevice(l,d,p){return fe(this,void 0,void 0,function*(){let y;l?y={deviceId:{exact:l}}:y={facingMode:"environment"};const b={video:y};return yield this.decodeFromConstraints(b,d,p)})}decodeFromConstraints(l,d,p){return fe(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(y,d,p)})}decodeFromStream(l,d,p){return fe(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(l,d);return yield this.decodeContinuously(y,p)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,d){return fe(this,void 0,void 0,function*(){const p=this.prepareVideoElement(d);return this.addVideoSource(p,l),this.videoElement=p,this.stream=l,yield this.playVideoOnLoadAsync(p),p})}playVideoOnLoadAsync(l){return new Promise((d,p)=>this.playVideoOnLoad(l,()=>d()))}playVideoOnLoad(l,d){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",d),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,d){const p=document.getElementById(l);if(!p)throw new g(`element with id '${l}' not found`);if(p.nodeName.toLowerCase()!==d.toLowerCase())throw new g(`element with id '${l}' must be an ${d} element`);return p}decodeFromImage(l,d){if(!l&&!d)throw new g("either imageElement with a src set or an url must be provided");return d&&!l?this.decodeFromImageUrl(d):this.decodeFromImageElement(l)}decodeFromVideo(l,d){if(!l&&!d)throw new g("Either an element with a src set or an URL must be provided");return d&&!l?this.decodeFromVideoUrl(d):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,d,p){if(l===void 0&&d===void 0)throw new g("Either an element with a src set or an URL must be provided");return d&&!l?this.decodeFromVideoUrlContinuously(d,p):this.decodeFromVideoElementContinuously(l,p)}decodeFromImageElement(l){if(!l)throw new g("An image element must be provided.");this.reset();const d=this.prepareImageElement(l);this.imageElement=d;let p;return this.isImageLoaded(d)?p=this.decodeOnce(d,!1,!0):p=this._decodeOnLoadImage(d),p}decodeFromVideoElement(l){const d=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(d)}decodeFromVideoElementContinuously(l,d){const p=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(p,d)}_decodeFromVideoElementSetup(l){if(!l)throw new g("A video element must be provided.");this.reset();const d=this.prepareVideoElement(l);return this.videoElement=d,d}decodeFromImageUrl(l){if(!l)throw new g("An URL must be provided.");this.reset();const d=this.prepareImageElement();this.imageElement=d;const p=this._decodeOnLoadImage(d);return d.src=l,p}decodeFromVideoUrl(l){if(!l)throw new g("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),p=this.decodeFromVideoElement(d);return d.src=l,p}decodeFromVideoUrlContinuously(l,d){if(!l)throw new g("An URL must be provided.");this.reset();const p=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(p,d);return p.src=l,y}_decodeOnLoadImage(l){return new Promise((d,p)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(d,p),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,d){return fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,d)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let d;return typeof l>"u"&&(d=document.createElement("img"),d.width=200,d.height=200),typeof l=="string"&&(d=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(d=l),d}prepareVideoElement(l){let d;return!l&&typeof document<"u"&&(d=document.createElement("video"),d.width=200,d.height=200),typeof l=="string"&&(d=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(d=l),d.setAttribute("autoplay","true"),d.setAttribute("muted","true"),d.setAttribute("playsinline","true"),d}decodeOnce(l,d=!0,p=!0){this._stopAsyncDecode=!1;const y=(b,E)=>{if(this._stopAsyncDecode){E(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const T=this.decode(l);b(T)}catch(T){const M=d&&T instanceof re,$=(T instanceof N||T instanceof B)&&p;if(M||$)return setTimeout(y,this._timeBetweenDecodingAttempts,b,E);E(T)}};return new Promise((b,E)=>y(b,E))}decodeContinuously(l,d){this._stopContinuousDecode=!1;const p=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(l);d(y,null),setTimeout(p,this.timeBetweenScansMillis)}catch(y){d(null,y);const b=y instanceof N||y instanceof B,E=y instanceof re;(b||E)&&setTimeout(p,this._timeBetweenDecodingAttempts)}};p()}decode(l){const d=this.createBinaryBitmap(l);return this.decodeBitmap(d)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,d,p){d||(d={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),p||(p=this.captureCanvasContext),p.drawImage(l,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}drawImageOnCanvas(l,d,p=this.captureCanvasContext){d||(d={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),p||(p=this.captureCanvasContext),p.drawImage(l,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const d=this.getCaptureCanvas(l),p=new Ke(d),y=new se(p);return new A(y)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const p=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=p}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const d=this.createCaptureCanvas(l);this.captureCanvas=d}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const d=document.createElement("canvas");let p,y;return typeof l<"u"&&(l instanceof HTMLVideoElement?(p=l.videoWidth,y=l.videoHeight):l instanceof HTMLImageElement&&(p=l.naturalWidth||l.width,y=l.naturalHeight||l.height)),d.style.width=p+"px",d.style.height=y+"px",d.width=p,d.height=y,d}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,d){try{l.srcObject=d}catch{l.src=URL.createObjectURL(d)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class He{constructor(l,d,p=d==null?0:8*d.length,y,b,E=O.currentTimeMillis()){this.text=l,this.rawBytes=d,this.numBits=p,this.resultPoints=y,this.format=b,this.timestamp=E,this.text=l,this.rawBytes=d,p==null?this.numBits=d==null?0:8*d.length:this.numBits=p,this.resultPoints=y,this.format=b,this.resultMetadata=null,E==null?this.timestamp=O.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,d){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,d)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const d=this.resultPoints;if(d===null)this.resultPoints=l;else if(l!==null&&l.length>0){const p=new Array(d.length+l.length);O.arraycopy(d,0,p,0,d.length),O.arraycopy(l,0,p,d.length,l.length),this.resultPoints=p}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ot;(function(J){J[J.AZTEC=0]="AZTEC",J[J.CODABAR=1]="CODABAR",J[J.CODE_39=2]="CODE_39",J[J.CODE_93=3]="CODE_93",J[J.CODE_128=4]="CODE_128",J[J.DATA_MATRIX=5]="DATA_MATRIX",J[J.EAN_8=6]="EAN_8",J[J.EAN_13=7]="EAN_13",J[J.ITF=8]="ITF",J[J.MAXICODE=9]="MAXICODE",J[J.PDF_417=10]="PDF_417",J[J.QR_CODE=11]="QR_CODE",J[J.RSS_14=12]="RSS_14",J[J.RSS_EXPANDED=13]="RSS_EXPANDED",J[J.UPC_A=14]="UPC_A",J[J.UPC_E=15]="UPC_E",J[J.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ot||(ot={}));var Ye=ot,Ce;(function(J){J[J.OTHER=0]="OTHER",J[J.ORIENTATION=1]="ORIENTATION",J[J.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",J[J.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",J[J.ISSUE_NUMBER=4]="ISSUE_NUMBER",J[J.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",J[J.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",J[J.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",J[J.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",J[J.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",J[J.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ce||(Ce={}));var et=Ce;class Be{constructor(l,d,p,y,b=-1,E=-1){this.rawBytes=l,this.text=d,this.byteSegments=p,this.ecLevel=y,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=E,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ct{exp(l){return this.expTable[l]}log(l){if(l===0)throw new v;return this.logTable[l]}static addOrSubtract(l,d){return l^d}}class rt{constructor(l,d){if(d.length===0)throw new v;this.field=l;const p=d.length;if(p>1&&d[0]===0){let y=1;for(;y<p&&d[y]===0;)y++;y===p?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(p-y),O.arraycopy(d,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const d=this.coefficients;let p;if(l===1){p=0;for(let E=0,T=d.length;E!==T;E++){const M=d[E];p=ct.addOrSubtract(p,M)}return p}p=d[0];const y=d.length,b=this.field;for(let E=1;E<y;E++)p=ct.addOrSubtract(b.multiply(l,p),d[E]);return p}addOrSubtract(l){if(!this.field.equals(l.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let d=this.coefficients,p=l.coefficients;if(d.length>p.length){const E=d;d=p,p=E}let y=new Int32Array(p.length);const b=p.length-d.length;O.arraycopy(p,0,y,0,b);for(let E=b;E<p.length;E++)y[E]=ct.addOrSubtract(d[E-b],p[E]);return new rt(this.field,y)}multiply(l){if(!this.field.equals(l.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const d=this.coefficients,p=d.length,y=l.coefficients,b=y.length,E=new Int32Array(p+b-1),T=this.field;for(let M=0;M<p;M++){const k=d[M];for(let $=0;$<b;$++)E[M+$]=ct.addOrSubtract(E[M+$],T.multiply(k,y[$]))}return new rt(T,E)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const d=this.coefficients.length,p=this.field,y=new Int32Array(d),b=this.coefficients;for(let E=0;E<d;E++)y[E]=p.multiply(b[E],l);return new rt(p,y)}multiplyByMonomial(l,d){if(l<0)throw new v;if(d===0)return this.field.getZero();const p=this.coefficients,y=p.length,b=new Int32Array(y+l),E=this.field;for(let T=0;T<y;T++)b[T]=E.multiply(p[T],d);return new rt(E,b)}divide(l){if(!this.field.equals(l.field))throw new v("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new v("Divide by 0");const d=this.field;let p=d.getZero(),y=this;const b=l.getCoefficient(l.getDegree()),E=d.inverse(b);for(;y.getDegree()>=l.getDegree()&&!y.isZero();){const T=y.getDegree()-l.getDegree(),M=d.multiply(y.getCoefficient(y.getDegree()),E),k=l.multiplyByMonomial(T,M),$=d.buildMonomial(T,M);p=p.addOrSubtract($),y=y.addOrSubtract(k)}return[p,y]}toString(){let l="";for(let d=this.getDegree();d>=0;d--){let p=this.getCoefficient(d);if(p!==0){if(p<0?(l+=" - ",p=-p):l.length>0&&(l+=" + "),d===0||p!==1){const y=this.field.log(p);y===0?l+="1":y===1?l+="a":(l+="a^",l+=y)}d!==0&&(d===1?l+="x":(l+="x^",l+=d))}}return l}}class je extends f{}je.kind="ArithmeticException";class yt extends ct{constructor(l,d,p){super(),this.primitive=l,this.size=d,this.generatorBase=p;const y=new Int32Array(d);let b=1;for(let T=0;T<d;T++)y[T]=b,b*=2,b>=d&&(b^=l,b&=d-1);this.expTable=y;const E=new Int32Array(d);for(let T=0;T<d-1;T++)E[y[T]]=T;this.logTable=E,this.zero=new rt(this,Int32Array.from([0])),this.one=new rt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,d){if(l<0)throw new v;if(d===0)return this.zero;const p=new Int32Array(l+1);return p[0]=d,new rt(this,p)}inverse(l){if(l===0)throw new je;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,d){return l===0||d===0?0:this.expTable[(this.logTable[l]+this.logTable[d])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}yt.AZTEC_DATA_12=new yt(4201,4096,1),yt.AZTEC_DATA_10=new yt(1033,1024,1),yt.AZTEC_DATA_6=new yt(67,64,1),yt.AZTEC_PARAM=new yt(19,16,1),yt.QR_CODE_FIELD_256=new yt(285,256,0),yt.DATA_MATRIX_FIELD_256=new yt(301,256,1),yt.AZTEC_DATA_8=yt.DATA_MATRIX_FIELD_256,yt.MAXICODE_FIELD_64=yt.AZTEC_DATA_6;class wt extends f{}wt.kind="ReedSolomonException";class Le extends f{}Le.kind="IllegalStateException";class he{constructor(l){this.field=l}decode(l,d){const p=this.field,y=new rt(p,l),b=new Int32Array(d);let E=!0;for(let ue=0;ue<d;ue++){const me=y.evaluateAt(p.exp(ue+p.getGeneratorBase()));b[b.length-1-ue]=me,me!==0&&(E=!1)}if(E)return;const T=new rt(p,b),M=this.runEuclideanAlgorithm(p.buildMonomial(d,1),T,d),k=M[0],$=M[1],Z=this.findErrorLocations(k),ne=this.findErrorMagnitudes($,Z);for(let ue=0;ue<Z.length;ue++){const me=l.length-1-p.log(Z[ue]);if(me<0)throw new wt("Bad error location");l[me]=yt.addOrSubtract(l[me],ne[ue])}}runEuclideanAlgorithm(l,d,p){if(l.getDegree()<d.getDegree()){const ue=l;l=d,d=ue}const y=this.field;let b=l,E=d,T=y.getZero(),M=y.getOne();for(;E.getDegree()>=(p/2|0);){let ue=b,me=T;if(b=E,T=M,b.isZero())throw new wt("r_{i-1} was zero");E=ue;let xe=y.getZero();const Ne=b.getCoefficient(b.getDegree()),qe=y.inverse(Ne);for(;E.getDegree()>=b.getDegree()&&!E.isZero();){const ft=E.getDegree()-b.getDegree(),ut=y.multiply(E.getCoefficient(E.getDegree()),qe);xe=xe.addOrSubtract(y.buildMonomial(ft,ut)),E=E.addOrSubtract(b.multiplyByMonomial(ft,ut))}if(M=xe.multiply(T).addOrSubtract(me),E.getDegree()>=b.getDegree())throw new Le("Division algorithm failed to reduce polynomial?")}const k=M.getCoefficient(0);if(k===0)throw new wt("sigmaTilde(0) was zero");const $=y.inverse(k),Z=M.multiplyScalar($),ne=E.multiplyScalar($);return[Z,ne]}findErrorLocations(l){const d=l.getDegree();if(d===1)return Int32Array.from([l.getCoefficient(1)]);const p=new Int32Array(d);let y=0;const b=this.field;for(let E=1;E<b.getSize()&&y<d;E++)l.evaluateAt(E)===0&&(p[y]=b.inverse(E),y++);if(y!==d)throw new wt("Error locator degree does not match number of roots");return p}findErrorMagnitudes(l,d){const p=d.length,y=new Int32Array(p),b=this.field;for(let E=0;E<p;E++){const T=b.inverse(d[E]);let M=1;for(let k=0;k<p;k++)if(E!==k){const $=b.multiply(d[k],T),Z=($&1)===0?$|1:$&-2;M=b.multiply(M,Z)}y[E]=b.multiply(l.evaluateAt(T),b.inverse(M)),b.getGeneratorBase()!==0&&(y[E]=b.multiply(y[E],T))}return y}}var ve;(function(J){J[J.UPPER=0]="UPPER",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.DIGIT=3]="DIGIT",J[J.PUNCT=4]="PUNCT",J[J.BINARY=5]="BINARY"})(ve||(ve={}));class $e{decode(l){this.ddata=l;let d=l.getBits(),p=this.extractBits(d),y=this.correctBits(p),b=$e.convertBoolArrayToByteArray(y),E=$e.getEncodedData(y),T=new Be(b,E,null,null);return T.setNumBits(y.length),T}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let d=l.length,p=ve.UPPER,y=ve.UPPER,b="",E=0;for(;E<d;)if(y===ve.BINARY){if(d-E<5)break;let T=$e.readCode(l,E,5);if(E+=5,T===0){if(d-E<11)break;T=$e.readCode(l,E,11)+31,E+=11}for(let M=0;M<T;M++){if(d-E<8){E=d;break}const k=$e.readCode(l,E,8);b+=X.castAsNonUtf8Char(k),E+=8}y=p}else{let T=y===ve.DIGIT?4:5;if(d-E<T)break;let M=$e.readCode(l,E,T);E+=T;let k=$e.getCharacter(y,M);k.startsWith("CTRL_")?(p=y,y=$e.getTable(k.charAt(5)),k.charAt(6)==="L"&&(p=y)):(b+=k,y=p)}return b}static getTable(l){switch(l){case"L":return ve.LOWER;case"P":return ve.PUNCT;case"M":return ve.MIXED;case"D":return ve.DIGIT;case"B":return ve.BINARY;case"U":default:return ve.UPPER}}static getCharacter(l,d){switch(l){case ve.UPPER:return $e.UPPER_TABLE[d];case ve.LOWER:return $e.LOWER_TABLE[d];case ve.MIXED:return $e.MIXED_TABLE[d];case ve.PUNCT:return $e.PUNCT_TABLE[d];case ve.DIGIT:return $e.DIGIT_TABLE[d];default:throw new Le("Bad table")}}correctBits(l){let d,p;this.ddata.getNbLayers()<=2?(p=6,d=yt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(p=8,d=yt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(p=10,d=yt.AZTEC_DATA_10):(p=12,d=yt.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),b=l.length/p;if(b<y)throw new B;let E=l.length%p,T=new Int32Array(b);for(let ne=0;ne<b;ne++,E+=p)T[ne]=$e.readCode(l,E,p);try{new he(d).decode(T,b-y)}catch(ne){throw new B(ne)}let M=(1<<p)-1,k=0;for(let ne=0;ne<y;ne++){let ue=T[ne];if(ue===0||ue===M)throw new B;(ue===1||ue===M-1)&&k++}let $=new Array(y*p-k),Z=0;for(let ne=0;ne<y;ne++){let ue=T[ne];if(ue===1||ue===M-1)$.fill(ue>1,Z,Z+p-1),Z+=p-1;else for(let me=p-1;me>=0;--me)$[Z++]=(ue&1<<me)!==0}return $}extractBits(l){let d=this.ddata.isCompact(),p=this.ddata.getNbLayers(),y=(d?11:14)+p*4,b=new Int32Array(y),E=new Array(this.totalBitsInLayer(p,d));if(d)for(let T=0;T<b.length;T++)b[T]=T;else{let T=y+1+2*F.truncDivision(F.truncDivision(y,2)-1,15),M=y/2,k=F.truncDivision(T,2);for(let $=0;$<M;$++){let Z=$+F.truncDivision($,15);b[M-$-1]=k-Z-1,b[M+$]=k+Z+1}}for(let T=0,M=0;T<p;T++){let k=(p-T)*4+(d?9:12),$=T*2,Z=y-1-$;for(let ne=0;ne<k;ne++){let ue=ne*2;for(let me=0;me<2;me++)E[M+ue+me]=l.get(b[$+me],b[$+ne]),E[M+2*k+ue+me]=l.get(b[$+ne],b[Z-me]),E[M+4*k+ue+me]=l.get(b[Z-me],b[Z-ne]),E[M+6*k+ue+me]=l.get(b[Z-ne],b[$+me])}M+=k*8}return E}static readCode(l,d,p){let y=0;for(let b=d;b<d+p;b++)y<<=1,l[b]&&(y|=1);return y}static readByte(l,d){let p=l.length-d;return p>=8?$e.readCode(l,d,8):$e.readCode(l,d,p)<<8-p}static convertBoolArrayToByteArray(l){let d=new Uint8Array((l.length+7)/8);for(let p=0;p<d.length;p++)d[p]=$e.readByte(l,8*p);return d}totalBitsInLayer(l,d){return((d?88:112)+16*l)*l}}$e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],$e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],$e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],$e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],$e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class We{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,d,p,y){const b=l-p,E=d-y;return Math.sqrt(b*b+E*E)}static sum(l){let d=0;for(let p=0,y=l.length;p!==y;p++){const b=l[p];d+=b}return d}}class ye{static floatToIntBits(l){return l}}ye.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(l,d){this.x=l,this.y=d}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof Ie){const d=l;return this.x===d.x&&this.y===d.y}return!1}hashCode(){return 31*ye.floatToIntBits(this.x)+ye.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const d=this.distance(l[0],l[1]),p=this.distance(l[1],l[2]),y=this.distance(l[0],l[2]);let b,E,T;if(p>=d&&p>=y?(E=l[0],b=l[1],T=l[2]):y>=p&&y>=d?(E=l[1],b=l[0],T=l[2]):(E=l[2],b=l[0],T=l[1]),this.crossProductZ(b,E,T)<0){const M=b;b=T,T=M}l[0]=b,l[1]=E,l[2]=T}static distance(l,d){return We.distance(l.x,l.y,d.x,d.y)}static crossProductZ(l,d,p){const y=d.x,b=d.y;return(p.x-y)*(l.y-b)-(p.y-b)*(l.x-y)}}class mt{constructor(l,d){this.bits=l,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class dt extends mt{constructor(l,d,p,y,b){super(l,d),this.compact=p,this.nbDatablocks=y,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ee{constructor(l,d,p,y){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),d==null&&(d=Ee.INIT_SIZE),p==null&&(p=l.getWidth()/2|0),y==null&&(y=l.getHeight()/2|0);const b=d/2|0;if(this.leftInit=p-b,this.rightInit=p+b,this.upInit=y-b,this.downInit=y+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let l=this.leftInit,d=this.rightInit,p=this.upInit,y=this.downInit,b=!1,E=!0,T=!1,M=!1,k=!1,$=!1,Z=!1;const ne=this.width,ue=this.height;for(;E;){E=!1;let me=!0;for(;(me||!M)&&d<ne;)me=this.containsBlackPoint(p,y,d,!1),me?(d++,E=!0,M=!0):M||d++;if(d>=ne){b=!0;break}let xe=!0;for(;(xe||!k)&&y<ue;)xe=this.containsBlackPoint(l,d,y,!0),xe?(y++,E=!0,k=!0):k||y++;if(y>=ue){b=!0;break}let Ne=!0;for(;(Ne||!$)&&l>=0;)Ne=this.containsBlackPoint(p,y,l,!1),Ne?(l--,E=!0,$=!0):$||l--;if(l<0){b=!0;break}let qe=!0;for(;(qe||!Z)&&p>=0;)qe=this.containsBlackPoint(l,d,p,!0),qe?(p--,E=!0,Z=!0):Z||p--;if(p<0){b=!0;break}E&&(T=!0)}if(!b&&T){const me=d-l;let xe=null;for(let ut=1;xe===null&&ut<me;ut++)xe=this.getBlackPointOnSegment(l,y-ut,l+ut,y);if(xe==null)throw new re;let Ne=null;for(let ut=1;Ne===null&&ut<me;ut++)Ne=this.getBlackPointOnSegment(l,p+ut,l+ut,p);if(Ne==null)throw new re;let qe=null;for(let ut=1;qe===null&&ut<me;ut++)qe=this.getBlackPointOnSegment(d,p+ut,d-ut,p);if(qe==null)throw new re;let ft=null;for(let ut=1;ft===null&&ut<me;ut++)ft=this.getBlackPointOnSegment(d,y-ut,d-ut,y);if(ft==null)throw new re;return this.centerEdges(ft,xe,qe,Ne)}else throw new re}getBlackPointOnSegment(l,d,p,y){const b=We.round(We.distance(l,d,p,y)),E=(p-l)/b,T=(y-d)/b,M=this.image;for(let k=0;k<b;k++){const $=We.round(l+k*E),Z=We.round(d+k*T);if(M.get($,Z))return new Ie($,Z)}return null}centerEdges(l,d,p,y){const b=l.getX(),E=l.getY(),T=d.getX(),M=d.getY(),k=p.getX(),$=p.getY(),Z=y.getX(),ne=y.getY(),ue=Ee.CORR;return b<this.width/2?[new Ie(Z-ue,ne+ue),new Ie(T+ue,M+ue),new Ie(k-ue,$-ue),new Ie(b+ue,E-ue)]:[new Ie(Z+ue,ne+ue),new Ie(T+ue,M-ue),new Ie(k-ue,$+ue),new Ie(b-ue,E-ue)]}containsBlackPoint(l,d,p,y){const b=this.image;if(y){for(let E=l;E<=d;E++)if(b.get(E,p))return!0}else for(let E=l;E<=d;E++)if(b.get(p,E))return!0;return!1}}Ee.INIT_SIZE=10,Ee.CORR=1;class nt{static checkAndNudgePoints(l,d){const p=l.getWidth(),y=l.getHeight();let b=!0;for(let E=0;E<d.length&&b;E+=2){const T=Math.floor(d[E]),M=Math.floor(d[E+1]);if(T<-1||T>p||M<-1||M>y)throw new re;b=!1,T===-1?(d[E]=0,b=!0):T===p&&(d[E]=p-1,b=!0),M===-1?(d[E+1]=0,b=!0):M===y&&(d[E+1]=y-1,b=!0)}b=!0;for(let E=d.length-2;E>=0&&b;E-=2){const T=Math.floor(d[E]),M=Math.floor(d[E+1]);if(T<-1||T>p||M<-1||M>y)throw new re;b=!1,T===-1?(d[E]=0,b=!0):T===p&&(d[E]=p-1,b=!0),M===-1?(d[E+1]=0,b=!0):M===y&&(d[E+1]=y-1,b=!0)}}}class st{constructor(l,d,p,y,b,E,T,M,k){this.a11=l,this.a21=d,this.a31=p,this.a12=y,this.a22=b,this.a32=E,this.a13=T,this.a23=M,this.a33=k}static quadrilateralToQuadrilateral(l,d,p,y,b,E,T,M,k,$,Z,ne,ue,me,xe,Ne){const qe=st.quadrilateralToSquare(l,d,p,y,b,E,T,M);return st.squareToQuadrilateral(k,$,Z,ne,ue,me,xe,Ne).times(qe)}transformPoints(l){const d=l.length,p=this.a11,y=this.a12,b=this.a13,E=this.a21,T=this.a22,M=this.a23,k=this.a31,$=this.a32,Z=this.a33;for(let ne=0;ne<d;ne+=2){const ue=l[ne],me=l[ne+1],xe=b*ue+M*me+Z;l[ne]=(p*ue+E*me+k)/xe,l[ne+1]=(y*ue+T*me+$)/xe}}transformPointsWithValues(l,d){const p=this.a11,y=this.a12,b=this.a13,E=this.a21,T=this.a22,M=this.a23,k=this.a31,$=this.a32,Z=this.a33,ne=l.length;for(let ue=0;ue<ne;ue++){const me=l[ue],xe=d[ue],Ne=b*me+M*xe+Z;l[ue]=(p*me+E*xe+k)/Ne,d[ue]=(y*me+T*xe+$)/Ne}}static squareToQuadrilateral(l,d,p,y,b,E,T,M){const k=l-p+b-T,$=d-y+E-M;if(k===0&&$===0)return new st(p-l,b-p,l,y-d,E-y,d,0,0,1);{const Z=p-b,ne=T-b,ue=y-E,me=M-E,xe=Z*me-ne*ue,Ne=(k*me-ne*$)/xe,qe=(Z*$-k*ue)/xe;return new st(p-l+Ne*p,T-l+qe*T,l,y-d+Ne*y,M-d+qe*M,d,Ne,qe,1)}}static quadrilateralToSquare(l,d,p,y,b,E,T,M){return st.squareToQuadrilateral(l,d,p,y,b,E,T,M).buildAdjoint()}buildAdjoint(){return new st(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new st(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class Tt extends nt{sampleGrid(l,d,p,y,b,E,T,M,k,$,Z,ne,ue,me,xe,Ne,qe,ft,ut){const at=st.quadrilateralToQuadrilateral(y,b,E,T,M,k,$,Z,ne,ue,me,xe,Ne,qe,ft,ut);return this.sampleGridWithTransform(l,d,p,at)}sampleGridWithTransform(l,d,p,y){if(d<=0||p<=0)throw new re;const b=new ge(d,p),E=new Float32Array(2*d);for(let T=0;T<p;T++){const M=E.length,k=T+.5;for(let $=0;$<M;$+=2)E[$]=$/2+.5,E[$+1]=k;y.transformPoints(E),nt.checkAndNudgePoints(l,E);try{for(let $=0;$<M;$+=2)l.get(Math.floor(E[$]),Math.floor(E[$+1]))&&b.set($/2,T)}catch{throw new re}}return b}}class Ct{static setGridSampler(l){Ct.gridSampler=l}static getInstance(){return Ct.gridSampler}}Ct.gridSampler=new Tt;class Ht{constructor(l,d){this.x=l,this.y=d}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Pr{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let d=this.getMatrixCenter(),p=this.getBullsEyeCorners(d);if(l){let E=p[0];p[0]=p[2],p[2]=E}this.extractParameters(p);let y=this.sampleGrid(this.image,p[this.shift%4],p[(this.shift+1)%4],p[(this.shift+2)%4],p[(this.shift+3)%4]),b=this.getMatrixCornerPoints(p);return new dt(y,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new re;let d=2*this.nbCenterLayers,p=new Int32Array([this.sampleLine(l[0],l[1],d),this.sampleLine(l[1],l[2],d),this.sampleLine(l[2],l[3],d),this.sampleLine(l[3],l[0],d)]);this.shift=this.getRotation(p,d);let y=0;for(let E=0;E<4;E++){let T=p[(this.shift+E)%4];this.compact?(y<<=7,y+=T>>1&127):(y<<=10,y+=(T>>2&992)+(T>>1&31))}let b=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(l,d){let p=0;l.forEach((y,b,E)=>{let T=(y>>d-2<<1)+(y&1);p=(p<<3)+T}),p=((p&1)<<11)+(p>>1);for(let y=0;y<4;y++)if(F.bitCount(p^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new re}getCorrectedParameterData(l,d){let p,y;d?(p=7,y=2):(p=10,y=4);let b=p-y,E=new Int32Array(p);for(let M=p-1;M>=0;--M)E[M]=l&15,l>>=4;try{new he(yt.AZTEC_PARAM).decode(E,b)}catch{throw new re}let T=0;for(let M=0;M<y;M++)T=(T<<4)+E[M];return T}getBullsEyeCorners(l){let d=l,p=l,y=l,b=l,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Z=this.getFirstDifferent(d,E,1,-1),ne=this.getFirstDifferent(p,E,1,1),ue=this.getFirstDifferent(y,E,-1,1),me=this.getFirstDifferent(b,E,-1,-1);if(this.nbCenterLayers>2){let xe=this.distancePoint(me,Z)*this.nbCenterLayers/(this.distancePoint(b,d)*(this.nbCenterLayers+2));if(xe<.75||xe>1.25||!this.isWhiteOrBlackRectangle(Z,ne,ue,me))break}d=Z,p=ne,y=ue,b=me,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let T=new Ie(d.getX()+.5,d.getY()-.5),M=new Ie(p.getX()+.5,p.getY()+.5),k=new Ie(y.getX()-.5,y.getY()+.5),$=new Ie(b.getX()-.5,b.getY()-.5);return this.expandSquare([T,M,k,$],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,d,p,y;try{let T=new Ee(this.image).detect();l=T[0],d=T[1],p=T[2],y=T[3]}catch{let M=this.image.getWidth()/2,k=this.image.getHeight()/2;l=this.getFirstDifferent(new Ht(M+7,k-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Ht(M+7,k+7),!1,1,1).toResultPoint(),p=this.getFirstDifferent(new Ht(M-7,k+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Ht(M-7,k-7),!1,-1,-1).toResultPoint()}let b=We.round((l.getX()+y.getX()+d.getX()+p.getX())/4),E=We.round((l.getY()+y.getY()+d.getY()+p.getY())/4);try{let T=new Ee(this.image,15,b,E).detect();l=T[0],d=T[1],p=T[2],y=T[3]}catch{l=this.getFirstDifferent(new Ht(b+7,E-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Ht(b+7,E+7),!1,1,1).toResultPoint(),p=this.getFirstDifferent(new Ht(b-7,E+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Ht(b-7,E-7),!1,-1,-1).toResultPoint()}return b=We.round((l.getX()+y.getX()+d.getX()+p.getX())/4),E=We.round((l.getY()+y.getY()+d.getY()+p.getY())/4),new Ht(b,E)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,d,p,y,b){let E=Ct.getInstance(),T=this.getDimension(),M=T/2-this.nbCenterLayers,k=T/2+this.nbCenterLayers;return E.sampleGrid(l,T,T,M,M,k,M,k,k,M,k,d.getX(),d.getY(),p.getX(),p.getY(),y.getX(),y.getY(),b.getX(),b.getY())}sampleLine(l,d,p){let y=0,b=this.distanceResultPoint(l,d),E=b/p,T=l.getX(),M=l.getY(),k=E*(d.getX()-l.getX())/b,$=E*(d.getY()-l.getY())/b;for(let Z=0;Z<p;Z++)this.image.get(We.round(T+Z*k),We.round(M+Z*$))&&(y|=1<<p-Z-1);return y}isWhiteOrBlackRectangle(l,d,p,y){let b=3;l=new Ht(l.getX()-b,l.getY()+b),d=new Ht(d.getX()-b,d.getY()-b),p=new Ht(p.getX()+b,p.getY()-b),y=new Ht(y.getX()+b,y.getY()+b);let E=this.getColor(y,l);if(E===0)return!1;let T=this.getColor(l,d);return T!==E||(T=this.getColor(d,p),T!==E)?!1:(T=this.getColor(p,y),T===E)}getColor(l,d){let p=this.distancePoint(l,d),y=(d.getX()-l.getX())/p,b=(d.getY()-l.getY())/p,E=0,T=l.getX(),M=l.getY(),k=this.image.get(l.getX(),l.getY()),$=Math.ceil(p);for(let ne=0;ne<$;ne++)T+=y,M+=b,this.image.get(We.round(T),We.round(M))!==k&&E++;let Z=E/p;return Z>.1&&Z<.9?0:Z<=.1===k?1:-1}getFirstDifferent(l,d,p,y){let b=l.getX()+p,E=l.getY()+y;for(;this.isValid(b,E)&&this.image.get(b,E)===d;)b+=p,E+=y;for(b-=p,E-=y;this.isValid(b,E)&&this.image.get(b,E)===d;)b+=p;for(b-=p;this.isValid(b,E)&&this.image.get(b,E)===d;)E+=y;return E-=y,new Ht(b,E)}expandSquare(l,d,p){let y=p/(2*d),b=l[0].getX()-l[2].getX(),E=l[0].getY()-l[2].getY(),T=(l[0].getX()+l[2].getX())/2,M=(l[0].getY()+l[2].getY())/2,k=new Ie(T+y*b,M+y*E),$=new Ie(T-y*b,M-y*E);b=l[1].getX()-l[3].getX(),E=l[1].getY()-l[3].getY(),T=(l[1].getX()+l[3].getX())/2,M=(l[1].getY()+l[3].getY())/2;let Z=new Ie(T+y*b,M+y*E),ne=new Ie(T-y*b,M-y*E);return[k,Z,$,ne]}isValid(l,d){return l>=0&&l<this.image.getWidth()&&d>0&&d<this.image.getHeight()}isValidPoint(l){let d=We.round(l.getX()),p=We.round(l.getY());return this.isValid(d,p)}distancePoint(l,d){return We.distance(l.getX(),l.getY(),d.getX(),d.getY())}distanceResultPoint(l,d){return We.distance(l.getX(),l.getY(),d.getX(),d.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class di{decode(l,d=null){let p=null,y=new Pr(l.getBlackMatrix()),b=null,E=null;try{let $=y.detectMirror(!1);b=$.getPoints(),this.reportFoundResultPoints(d,b),E=new $e().decode($)}catch($){p=$}if(E==null)try{let $=y.detectMirror(!0);b=$.getPoints(),this.reportFoundResultPoints(d,b),E=new $e().decode($)}catch($){throw p??$}let T=new He(E.getText(),E.getRawBytes(),E.getNumBits(),b,Ye.AZTEC,O.currentTimeMillis()),M=E.getByteSegments();M!=null&&T.putMetadata(et.BYTE_SEGMENTS,M);let k=E.getECLevel();return k!=null&&T.putMetadata(et.ERROR_CORRECTION_LEVEL,k),T}reportFoundResultPoints(l,d){if(l!=null){let p=l.get(G.NEED_RESULT_POINT_CALLBACK);p!=null&&d.forEach((y,b,E)=>{p.foundPossibleResultPoint(y)})}}reset(){}}class fi extends Ae{constructor(l=500){super(new di,l)}}class un{decode(l,d){try{return this.doDecode(l,d)}catch{if(d&&d.get(G.TRY_HARDER)===!0&&l.isRotateSupported()){const b=l.rotateCounterClockwise(),E=this.doDecode(b,d),T=E.getResultMetadata();let M=270;T!==null&&T.get(et.ORIENTATION)===!0&&(M=M+T.get(et.ORIENTATION)%360),E.putMetadata(et.ORIENTATION,M);const k=E.getResultPoints();if(k!==null){const $=b.getHeight();for(let Z=0;Z<k.length;Z++)k[Z]=new Ie($-k[Z].getY()-1,k[Z].getX())}return E}else throw new re}}reset(){}doDecode(l,d){const p=l.getWidth(),y=l.getHeight();let b=new q(p);const E=d&&d.get(G.TRY_HARDER)===!0,T=Math.max(1,y>>(E?8:5));let M;E?M=y:M=15;const k=Math.trunc(y/2);for(let $=0;$<M;$++){const Z=Math.trunc(($+1)/2),ne=($&1)===0,ue=k+T*(ne?Z:-Z);if(ue<0||ue>=y)break;try{b=l.getBlackRow(ue,b)}catch{continue}for(let me=0;me<2;me++){if(me===1&&(b.reverse(),d&&d.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const xe=new Map;d.forEach((Ne,qe)=>xe.set(qe,Ne)),xe.delete(G.NEED_RESULT_POINT_CALLBACK),d=xe}try{const xe=this.decodeRow(ue,b,d);if(me===1){xe.putMetadata(et.ORIENTATION,180);const Ne=xe.getResultPoints();Ne!==null&&(Ne[0]=new Ie(p-Ne[0].getX()-1,Ne[0].getY()),Ne[1]=new Ie(p-Ne[1].getX()-1,Ne[1].getY()))}return xe}catch{}}}throw new re}static recordPattern(l,d,p){const y=p.length;for(let k=0;k<y;k++)p[k]=0;const b=l.getSize();if(d>=b)throw new re;let E=!l.get(d),T=0,M=d;for(;M<b;){if(l.get(M)!==E)p[T]++;else{if(++T===y)break;p[T]=1,E=!E}M++}if(!(T===y||T===y-1&&M===b))throw new re}static recordPatternInReverse(l,d,p){let y=p.length,b=l.get(d);for(;d>0&&y>=0;)l.get(--d)!==b&&(y--,b=!b);if(y>=0)throw new re;un.recordPattern(l,d+1,p)}static patternMatchVariance(l,d,p){const y=l.length;let b=0,E=0;for(let k=0;k<y;k++)b+=l[k],E+=d[k];if(b<E)return Number.POSITIVE_INFINITY;const T=b/E;p*=T;let M=0;for(let k=0;k<y;k++){const $=l[k],Z=d[k]*T,ne=$>Z?$-Z:Z-$;if(ne>p)return Number.POSITIVE_INFINITY;M+=ne}return M/b}}class it extends un{static findStartPattern(l){const d=l.getSize(),p=l.getNextSet(0);let y=0,b=Int32Array.from([0,0,0,0,0,0]),E=p,T=!1;const M=6;for(let k=p;k<d;k++)if(l.get(k)!==T)b[y]++;else{if(y===M-1){let $=it.MAX_AVG_VARIANCE,Z=-1;for(let ne=it.CODE_START_A;ne<=it.CODE_START_C;ne++){const ue=un.patternMatchVariance(b,it.CODE_PATTERNS[ne],it.MAX_INDIVIDUAL_VARIANCE);ue<$&&($=ue,Z=ne)}if(Z>=0&&l.isRange(Math.max(0,E-(k-E)/2),E,!1))return Int32Array.from([E,k,Z]);E+=b[0]+b[1],b=b.slice(2,b.length-1),b[y-1]=0,b[y]=0,y--}else y++;b[y]=1,T=!T}throw new re}static decodeCode(l,d,p){un.recordPattern(l,p,d);let y=it.MAX_AVG_VARIANCE,b=-1;for(let E=0;E<it.CODE_PATTERNS.length;E++){const T=it.CODE_PATTERNS[E],M=this.patternMatchVariance(d,T,it.MAX_INDIVIDUAL_VARIANCE);M<y&&(y=M,b=E)}if(b>=0)return b;throw new re}decodeRow(l,d,p){const y=p&&p.get(G.ASSUME_GS1)===!0,b=it.findStartPattern(d),E=b[2];let T=0;const M=new Uint8Array(20);M[T++]=E;let k;switch(E){case it.CODE_START_A:k=it.CODE_CODE_A;break;case it.CODE_START_B:k=it.CODE_CODE_B;break;case it.CODE_START_C:k=it.CODE_CODE_C;break;default:throw new B}let $=!1,Z=!1,ne="",ue=b[0],me=b[1];const xe=Int32Array.from([0,0,0,0,0,0]);let Ne=0,qe=0,ft=E,ut=0,at=!0,fn=!1,Jt=!1;for(;!$;){const bs=Z;switch(Z=!1,Ne=qe,qe=it.decodeCode(d,xe,me),M[T++]=qe,qe!==it.CODE_STOP&&(at=!0),qe!==it.CODE_STOP&&(ut++,ft+=ut*qe),ue=me,me+=xe.reduce((e0,_f)=>e0+_f,0),qe){case it.CODE_START_A:case it.CODE_START_B:case it.CODE_START_C:throw new B}switch(k){case it.CODE_CODE_A:if(qe<64)Jt===fn?ne+=String.fromCharCode(32+qe):ne+=String.fromCharCode(32+qe+128),Jt=!1;else if(qe<96)Jt===fn?ne+=String.fromCharCode(qe-64):ne+=String.fromCharCode(qe+64),Jt=!1;else switch(qe!==it.CODE_STOP&&(at=!1),qe){case it.CODE_FNC_1:y&&(ne.length===0?ne+="]C1":ne+="");break;case it.CODE_FNC_2:case it.CODE_FNC_3:break;case it.CODE_FNC_4_A:!fn&&Jt?(fn=!0,Jt=!1):fn&&Jt?(fn=!1,Jt=!1):Jt=!0;break;case it.CODE_SHIFT:Z=!0,k=it.CODE_CODE_B;break;case it.CODE_CODE_B:k=it.CODE_CODE_B;break;case it.CODE_CODE_C:k=it.CODE_CODE_C;break;case it.CODE_STOP:$=!0;break}break;case it.CODE_CODE_B:if(qe<96)Jt===fn?ne+=String.fromCharCode(32+qe):ne+=String.fromCharCode(32+qe+128),Jt=!1;else switch(qe!==it.CODE_STOP&&(at=!1),qe){case it.CODE_FNC_1:y&&(ne.length===0?ne+="]C1":ne+="");break;case it.CODE_FNC_2:case it.CODE_FNC_3:break;case it.CODE_FNC_4_B:!fn&&Jt?(fn=!0,Jt=!1):fn&&Jt?(fn=!1,Jt=!1):Jt=!0;break;case it.CODE_SHIFT:Z=!0,k=it.CODE_CODE_A;break;case it.CODE_CODE_A:k=it.CODE_CODE_A;break;case it.CODE_CODE_C:k=it.CODE_CODE_C;break;case it.CODE_STOP:$=!0;break}break;case it.CODE_CODE_C:if(qe<100)qe<10&&(ne+="0"),ne+=qe;else switch(qe!==it.CODE_STOP&&(at=!1),qe){case it.CODE_FNC_1:y&&(ne.length===0?ne+="]C1":ne+="");break;case it.CODE_CODE_A:k=it.CODE_CODE_A;break;case it.CODE_CODE_B:k=it.CODE_CODE_B;break;case it.CODE_STOP:$=!0;break}break}bs&&(k=k===it.CODE_CODE_A?it.CODE_CODE_B:it.CODE_CODE_A)}const Hr=me-ue;if(me=d.getNextUnset(me),!d.isRange(me,Math.min(d.getSize(),me+(me-ue)/2),!1))throw new re;if(ft-=ut*Ne,ft%103!==Ne)throw new N;const Sa=ne.length;if(Sa===0)throw new re;Sa>0&&at&&(k===it.CODE_CODE_C?ne=ne.substring(0,Sa-2):ne=ne.substring(0,Sa-1));const Li=(b[1]+b[0])/2,Yn=ue+Hr/2,gi=M.length,la=new Uint8Array(gi);for(let bs=0;bs<gi;bs++)la[bs]=M[bs];const ll=[new Ie(Li,l),new Ie(Yn,l)];return new He(ne,la,0,ll,Ye.CODE_128,new Date().getTime())}}it.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],it.MAX_AVG_VARIANCE=.25,it.MAX_INDIVIDUAL_VARIANCE=.7,it.CODE_SHIFT=98,it.CODE_CODE_C=99,it.CODE_CODE_B=100,it.CODE_CODE_A=101,it.CODE_FNC_1=102,it.CODE_FNC_2=97,it.CODE_FNC_3=96,it.CODE_FNC_4_A=101,it.CODE_FNC_4_B=100,it.CODE_START_A=103,it.CODE_START_B=104,it.CODE_START_C=105,it.CODE_STOP=106;class pn extends un{constructor(l=!1,d=!1){super(),this.usingCheckDigit=l,this.extendedMode=d,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,d,p){let y=this.counters;y.fill(0),this.decodeRowResult="";let b=pn.findAsteriskPattern(d,y),E=d.getNextSet(b[1]),T=d.getSize(),M,k;do{pn.recordPattern(d,E,y);let xe=pn.toNarrowWidePattern(y);if(xe<0)throw new re;M=pn.patternToChar(xe),this.decodeRowResult+=M,k=E;for(let Ne of y)E+=Ne;E=d.getNextSet(E)}while(M!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let $=0;for(let xe of y)$+=xe;let Z=E-k-$;if(E!==T&&Z*2<$)throw new re;if(this.usingCheckDigit){let xe=this.decodeRowResult.length-1,Ne=0;for(let qe=0;qe<xe;qe++)Ne+=pn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(qe));if(this.decodeRowResult.charAt(xe)!==pn.ALPHABET_STRING.charAt(Ne%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,xe)}if(this.decodeRowResult.length===0)throw new re;let ne;this.extendedMode?ne=pn.decodeExtended(this.decodeRowResult):ne=this.decodeRowResult;let ue=(b[1]+b[0])/2,me=k+$/2;return new He(ne,null,0,[new Ie(ue,l),new Ie(me,l)],Ye.CODE_39,new Date().getTime())}static findAsteriskPattern(l,d){let p=l.getSize(),y=l.getNextSet(0),b=0,E=y,T=!1,M=d.length;for(let k=y;k<p;k++)if(l.get(k)!==T)d[b]++;else{if(b===M-1){if(this.toNarrowWidePattern(d)===pn.ASTERISK_ENCODING&&l.isRange(Math.max(0,E-Math.floor((k-E)/2)),E,!1))return[E,k];E+=d[0]+d[1],d.copyWithin(0,2,2+b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,T=!T}throw new re}static toNarrowWidePattern(l){let d=l.length,p=0,y;do{let b=2147483647;for(let M of l)M<b&&M>p&&(b=M);p=b,y=0;let E=0,T=0;for(let M=0;M<d;M++){let k=l[M];k>p&&(T|=1<<d-1-M,y++,E+=k)}if(y===3){for(let M=0;M<d&&y>0;M++){let k=l[M];if(k>p&&(y--,k*2>=E))return-1}return T}}while(y>3);return-1}static patternToChar(l){for(let d=0;d<pn.CHARACTER_ENCODINGS.length;d++)if(pn.CHARACTER_ENCODINGS[d]===l)return pn.ALPHABET_STRING.charAt(d);if(l===pn.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(l){let d=l.length,p="";for(let y=0;y<d;y++){let b=l.charAt(y);if(b==="+"||b==="$"||b==="%"||b==="/"){let E=l.charAt(y+1),T="\0";switch(b){case"+":if(E>="A"&&E<="Z")T=String.fromCharCode(E.charCodeAt(0)+32);else throw new B;break;case"$":if(E>="A"&&E<="Z")T=String.fromCharCode(E.charCodeAt(0)-64);else throw new B;break;case"%":if(E>="A"&&E<="E")T=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")T=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")T=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")T=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")T="\0";else if(E==="V")T="@";else if(E==="W")T="`";else if(E==="X"||E==="Y"||E==="Z")T="";else throw new B;break;case"/":if(E>="A"&&E<="O")T=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")T=":";else throw new B;break}p+=T,y++}else p+=b}return p}}pn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pn.ASTERISK_ENCODING=148;class Yt extends un{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,d,p){let y=this.decodeStart(d),b=this.decodeEnd(d),E=new K;Yt.decodeMiddle(d,y[1],b[0],E);let T=E.toString(),M=null;p!=null&&(M=p.get(G.ALLOWED_LENGTHS)),M==null&&(M=Yt.DEFAULT_ALLOWED_LENGTHS);let k=T.length,$=!1,Z=0;for(let me of M){if(k===me){$=!0;break}me>Z&&(Z=me)}if(!$&&k>Z&&($=!0),!$)throw new B;const ne=[new Ie(y[1],l),new Ie(b[0],l)];return new He(T,null,0,ne,Ye.ITF,new Date().getTime())}static decodeMiddle(l,d,p,y){let b=new Int32Array(10),E=new Int32Array(5),T=new Int32Array(5);for(b.fill(0),E.fill(0),T.fill(0);d<p;){un.recordPattern(l,d,b);for(let k=0;k<5;k++){let $=2*k;E[k]=b[$],T[k]=b[$+1]}let M=Yt.decodeDigit(E);y.append(M.toString()),M=this.decodeDigit(T),y.append(M.toString()),b.forEach(function(k){d+=k})}}decodeStart(l){let d=Yt.skipWhiteSpace(l),p=Yt.findGuardPattern(l,d,Yt.START_PATTERN);return this.narrowLineWidth=(p[1]-p[0])/4,this.validateQuietZone(l,p[0]),p}validateQuietZone(l,d){let p=this.narrowLineWidth*10;p=p<d?p:d;for(let y=d-1;p>0&&y>=0&&!l.get(y);y--)p--;if(p!==0)throw new re}static skipWhiteSpace(l){const d=l.getSize(),p=l.getNextSet(0);if(p===d)throw new re;return p}decodeEnd(l){l.reverse();try{let d=Yt.skipWhiteSpace(l),p;try{p=Yt.findGuardPattern(l,d,Yt.END_PATTERN_REVERSED[0])}catch(b){b instanceof re&&(p=Yt.findGuardPattern(l,d,Yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,p[0]);let y=p[0];return p[0]=l.getSize()-p[1],p[1]=l.getSize()-y,p}finally{l.reverse()}}static findGuardPattern(l,d,p){let y=p.length,b=new Int32Array(y),E=l.getSize(),T=!1,M=0,k=d;b.fill(0);for(let $=d;$<E;$++)if(l.get($)!==T)b[M]++;else{if(M===y-1){if(un.patternMatchVariance(b,p,Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return[k,$];k+=b[0]+b[1],O.arraycopy(b,2,b,0,M-1),b[M-1]=0,b[M]=0,M--}else M++;b[M]=1,T=!T}throw new re}static decodeDigit(l){let d=Yt.MAX_AVG_VARIANCE,p=-1,y=Yt.PATTERNS.length;for(let b=0;b<y;b++){let E=Yt.PATTERNS[b],T=un.patternMatchVariance(l,E,Yt.MAX_INDIVIDUAL_VARIANCE);T<d?(d=T,p=b):T===d&&(p=-1)}if(p>=0)return p%10;throw new re}}Yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Yt.MAX_AVG_VARIANCE=.38,Yt.MAX_INDIVIDUAL_VARIANCE=.5,Yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Yt.START_PATTERN=Int32Array.from([1,1,1,1]),Yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Mn extends un{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let d=!1,p,y=0,b=Int32Array.from([0,0,0]);for(;!d;){b=Int32Array.from([0,0,0]),p=Mn.findGuardPattern(l,y,!1,this.START_END_PATTERN,b);let E=p[0];y=p[1];let T=E-(y-E);T>=0&&(d=l.isRange(T,E,!1))}return p}static checkChecksum(l){return Mn.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let d=l.length;if(d===0)return!1;let p=parseInt(l.charAt(d-1),10);return Mn.getStandardUPCEANChecksum(l.substring(0,d-1))===p}static getStandardUPCEANChecksum(l){let d=l.length,p=0;for(let y=d-1;y>=0;y-=2){let b=l.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new B;p+=b}p*=3;for(let y=d-2;y>=0;y-=2){let b=l.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new B;p+=b}return(1e3-p)%10}static decodeEnd(l,d){return Mn.findGuardPattern(l,d,!1,Mn.START_END_PATTERN,new Int32Array(Mn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,d,p,y){return this.findGuardPattern(l,d,p,y,new Int32Array(y.length))}static findGuardPattern(l,d,p,y,b){let E=l.getSize();d=p?l.getNextUnset(d):l.getNextSet(d);let T=0,M=d,k=y.length,$=p;for(let Z=d;Z<E;Z++)if(l.get(Z)!==$)b[T]++;else{if(T===k-1){if(un.patternMatchVariance(b,y,Mn.MAX_INDIVIDUAL_VARIANCE)<Mn.MAX_AVG_VARIANCE)return Int32Array.from([M,Z]);M+=b[0]+b[1];let ne=b.slice(2,b.length-1);for(let ue=0;ue<T-1;ue++)b[ue]=ne[ue];b[T-1]=0,b[T]=0,T--}else T++;b[T]=1,$=!$}throw new re}static decodeDigit(l,d,p,y){this.recordPattern(l,p,d);let b=this.MAX_AVG_VARIANCE,E=-1,T=y.length;for(let M=0;M<T;M++){let k=y[M],$=un.patternMatchVariance(d,k,Mn.MAX_INDIVIDUAL_VARIANCE);$<b&&(b=$,E=M)}if(E>=0)return E;throw new re}}Mn.MAX_AVG_VARIANCE=.48,Mn.MAX_INDIVIDUAL_VARIANCE=.7,Mn.START_END_PATTERN=Int32Array.from([1,1,1]),Mn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Mn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ei{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,d,p){let y=this.decodeRowStringBuffer,b=this.decodeMiddle(d,p,y),E=y.toString(),T=Ei.parseExtensionString(E),M=[new Ie((p[0]+p[1])/2,l),new Ie(b,l)],k=new He(E,null,0,M,Ye.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&k.putAllMetadata(T),k}decodeMiddle(l,d,p){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=l.getSize(),E=d[1],T=0;for(let k=0;k<5&&E<b;k++){let $=Mn.decodeDigit(l,y,E,Mn.L_AND_G_PATTERNS);p+=String.fromCharCode(48+$%10);for(let Z of y)E+=Z;$>=10&&(T|=1<<4-k),k!==4&&(E=l.getNextSet(E),E=l.getNextUnset(E))}if(p.length!==5)throw new re;let M=this.determineCheckDigit(T);if(Ei.extensionChecksum(p.toString())!==M)throw new re;return E}static extensionChecksum(l){let d=l.length,p=0;for(let y=d-2;y>=0;y-=2)p+=l.charAt(y).charCodeAt(0)-48;p*=3;for(let y=d-1;y>=0;y-=2)p+=l.charAt(y).charCodeAt(0)-48;return p*=3,p%10}determineCheckDigit(l){for(let d=0;d<10;d++)if(l===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new re}static parseExtensionString(l){if(l.length!==5)return null;let d=Ei.parseExtension5String(l);return d==null?null:new Map([[et.SUGGESTED_PRICE,d]])}static parseExtension5String(l){let d;switch(l.charAt(0)){case"0":d="";break;case"5":d="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}d="";break;default:d="";break}let p=parseInt(l.substring(1)),y=(p/100).toString(),b=p%100,E=b<10?"0"+b:b.toString();return d+y+"."+E}}class $i{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,d,p){let y=this.decodeRowStringBuffer,b=this.decodeMiddle(d,p,y),E=y.toString(),T=$i.parseExtensionString(E),M=[new Ie((p[0]+p[1])/2,l),new Ie(b,l)],k=new He(E,null,0,M,Ye.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&k.putAllMetadata(T),k}decodeMiddle(l,d,p){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=l.getSize(),E=d[1],T=0;for(let M=0;M<2&&E<b;M++){let k=Mn.decodeDigit(l,y,E,Mn.L_AND_G_PATTERNS);p+=String.fromCharCode(48+k%10);for(let $ of y)E+=$;k>=10&&(T|=1<<1-M),M!==1&&(E=l.getNextSet(E),E=l.getNextUnset(E))}if(p.length!==2)throw new re;if(parseInt(p.toString())%4!==T)throw new re;return E}static parseExtensionString(l){return l.length!==2?null:new Map([[et.ISSUE_NUMBER,parseInt(l)]])}}class Te{static decodeRow(l,d,p){let y=Mn.findGuardPattern(d,p,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ei().decodeRow(l,d,y)}catch{return new $i().decodeRow(l,d,y)}}}Te.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class lt extends Mn{constructor(){super(),this.decodeRowStringBuffer="",lt.L_AND_G_PATTERNS=lt.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let d=lt.L_PATTERNS[l-10],p=new Int32Array(d.length);for(let y=0;y<d.length;y++)p[y]=d[d.length-y-1];lt.L_AND_G_PATTERNS[l]=p}}decodeRow(l,d,p){let y=lt.findStartGuardPattern(d),b=p==null?null:p.get(G.NEED_RESULT_POINT_CALLBACK);if(b!=null){const at=new Ie((y[0]+y[1])/2,l);b.foundPossibleResultPoint(at)}let E=this.decodeMiddle(d,y,this.decodeRowStringBuffer),T=E.rowOffset,M=E.resultString;if(b!=null){const at=new Ie(T,l);b.foundPossibleResultPoint(at)}let k=this.decodeEnd(d,T);if(b!=null){const at=new Ie((k[0]+k[1])/2,l);b.foundPossibleResultPoint(at)}let $=k[1],Z=$+($-k[0]);if(Z>=d.getSize()||!d.isRange($,Z,!1))throw new re;let ne=M.toString();if(ne.length<8)throw new B;if(!lt.checkChecksum(ne))throw new N;let ue=(y[1]+y[0])/2,me=(k[1]+k[0])/2,xe=this.getBarcodeFormat(),Ne=[new Ie(ue,l),new Ie(me,l)],qe=new He(ne,null,0,Ne,xe,new Date().getTime()),ft=0;try{let at=Te.decodeRow(l,d,k[1]);qe.putMetadata(et.UPC_EAN_EXTENSION,at.getText()),qe.putAllMetadata(at.getResultMetadata()),qe.addResultPoints(at.getResultPoints()),ft=at.getText().length}catch{}let ut=p==null?null:p.get(G.ALLOWED_EAN_EXTENSIONS);if(ut!=null){let at=!1;for(let fn in ut)if(ft.toString()===fn){at=!0;break}if(!at)throw new re}return qe}decodeEnd(l,d){return lt.findGuardPattern(l,d,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return lt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let d=l.length;if(d===0)return!1;let p=parseInt(l.charAt(d-1),10);return lt.getStandardUPCEANChecksum(l.substring(0,d-1))===p}static getStandardUPCEANChecksum(l){let d=l.length,p=0;for(let y=d-1;y>=0;y-=2){let b=l.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new B;p+=b}p*=3;for(let y=d-2;y>=0;y-=2){let b=l.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new B;p+=b}return(1e3-p)%10}}class zt extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,d,p){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=l.getSize(),E=d[1],T=0;for(let k=0;k<6&&E<b;k++){let $=lt.decodeDigit(l,y,E,lt.L_AND_G_PATTERNS);p+=String.fromCharCode(48+$%10);for(let Z of y)E+=Z;$>=10&&(T|=1<<5-k)}p=zt.determineFirstDigit(p,T),E=lt.findGuardPattern(l,E,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let k=0;k<6&&E<b;k++){let $=lt.decodeDigit(l,y,E,lt.L_PATTERNS);p+=String.fromCharCode(48+$);for(let Z of y)E+=Z}return{rowOffset:E,resultString:p}}getBarcodeFormat(){return Ye.EAN_13}static determineFirstDigit(l,d){for(let p=0;p<10;p++)if(d===this.FIRST_DIGIT_ENCODINGS[p])return l=String.fromCharCode(48+p)+l,l;throw new re}}zt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ot extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,d,p){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=l.getSize(),E=d[1];for(let M=0;M<4&&E<b;M++){let k=lt.decodeDigit(l,y,E,lt.L_PATTERNS);p+=String.fromCharCode(48+k);for(let $ of y)E+=$}E=lt.findGuardPattern(l,E,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let M=0;M<4&&E<b;M++){let k=lt.decodeDigit(l,y,E,lt.L_PATTERNS);p+=String.fromCharCode(48+k);for(let $ of y)E+=$}return{rowOffset:E,resultString:p}}getBarcodeFormat(){return Ye.EAN_8}}class wn extends lt{constructor(){super(...arguments),this.ean13Reader=new zt}getBarcodeFormat(){return Ye.UPC_A}decode(l,d){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,d,p){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,d,p))}decodeMiddle(l,d,p){return this.ean13Reader.decodeMiddle(l,d,p)}maybeReturnResult(l){let d=l.getText();if(d.charAt(0)==="0"){let p=new He(d.substring(1),null,null,l.getResultPoints(),Ye.UPC_A);return l.getResultMetadata()!=null&&p.putAllMetadata(l.getResultMetadata()),p}else throw new re}reset(){this.ean13Reader.reset()}}class an extends lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,d,p){const y=this.decodeMiddleCounters.map(k=>k);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const b=l.getSize();let E=d[1],T=0;for(let k=0;k<6&&E<b;k++){const $=an.decodeDigit(l,y,E,an.L_AND_G_PATTERNS);p+=String.fromCharCode(48+$%10);for(let Z of y)E+=Z;$>=10&&(T|=1<<5-k)}let M=an.determineNumSysAndCheckDigit(p,T);return{rowOffset:E,resultString:M}}decodeEnd(l,d){return an.findGuardPatternWithoutCounters(l,d,!0,an.MIDDLE_END_PATTERN)}checkChecksum(l){return lt.checkChecksum(an.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,d){for(let p=0;p<=1;p++)for(let y=0;y<10;y++)if(d===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[p][y]){let b=String.fromCharCode(48+p),E=String.fromCharCode(48+y);return b+l+E}throw re.getNotFoundInstance()}getBarcodeFormat(){return Ye.UPC_E}static convertUPCEtoUPCA(l){const d=l.slice(1,7).split("").map(b=>b.charCodeAt(0)),p=new K;p.append(l.charAt(0));let y=d[5];switch(y){case 0:case 1:case 2:p.appendChars(d,0,2),p.append(y),p.append("0000"),p.appendChars(d,2,3);break;case 3:p.appendChars(d,0,3),p.append("00000"),p.appendChars(d,3,2);break;case 4:p.appendChars(d,0,4),p.append("00000"),p.append(d[4]);break;default:p.appendChars(d,0,5),p.append("0000"),p.append(y);break}return l.length>=8&&p.append(l.charAt(7)),p.toString()}}an.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),an.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ir extends un{constructor(l){super();let d=l==null?null:l.get(G.POSSIBLE_FORMATS),p=[];r(d)?(p.push(new zt),p.push(new wn),p.push(new Ot),p.push(new an)):(d.indexOf(Ye.EAN_13)>-1&&p.push(new zt),d.indexOf(Ye.UPC_A)>-1&&p.push(new wn),d.indexOf(Ye.EAN_8)>-1&&p.push(new Ot),d.indexOf(Ye.UPC_E)>-1&&p.push(new an)),this.readers=p}decodeRow(l,d,p){for(let y of this.readers)try{const b=y.decodeRow(l,d,p),E=b.getBarcodeFormat()===Ye.EAN_13&&b.getText().charAt(0)==="0",T=p==null?null:p.get(G.POSSIBLE_FORMATS),M=T==null||T.includes(Ye.UPC_A);if(E&&M){const k=b.getRawBytes(),$=new He(b.getText().substring(1),k,k?k.length:null,b.getResultPoints(),Ye.UPC_A);return $.putAllMetadata(b.getResultMetadata()),$}return b}catch{}throw new re}reset(){for(let l of this.readers)l.reset()}}class En extends un{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,d){for(let p=0;p<d.length;p++)if(un.patternMatchVariance(l,d[p],En.MAX_INDIVIDUAL_VARIANCE)<En.MAX_AVG_VARIANCE)return p;throw new re}static count(l){return We.sum(new Int32Array(l))}static increment(l,d){let p=0,y=d[0];for(let b=1;b<l.length;b++)d[b]>y&&(y=d[b],p=b);l[p]++}static decrement(l,d){let p=0,y=d[0];for(let b=1;b<l.length;b++)d[b]<y&&(y=d[b],p=b);l[p]--}static isFinderPattern(l){let d=l[0]+l[1],p=d+l[2]+l[3],y=d/p;if(y>=En.MIN_FINDER_PATTERN_RATIO&&y<=En.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let T of l)T>E&&(E=T),T<b&&(b=T);return E<10*b}return!1}}En.MAX_AVG_VARIANCE=.2,En.MAX_INDIVIDUAL_VARIANCE=.45,En.MIN_FINDER_PATTERN_RATIO=9.5/12,En.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gn{constructor(l,d){this.value=l,this.checksumPortion=d}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof Gn))return!1;const d=l;return this.value===d.value&&this.checksumPortion===d.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cr{constructor(l,d,p,y,b){this.value=l,this.startEnd=d,this.value=l,this.startEnd=d,this.resultPoints=new Array,this.resultPoints.push(new Ie(p,b)),this.resultPoints.push(new Ie(y,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof Cr))return!1;const d=l;return this.value===d.value}hashCode(){return this.value}}class Bn{constructor(){}static getRSSvalue(l,d,p){let y=0;for(let M of l)y+=M;let b=0,E=0,T=l.length;for(let M=0;M<T-1;M++){let k;for(k=1,E|=1<<M;k<l[M];k++,E&=~(1<<M)){let $=Bn.combins(y-k-1,T-M-2);if(p&&E===0&&y-k-(T-M-1)>=T-M-1&&($-=Bn.combins(y-k-(T-M),T-M-2)),T-M-1>1){let Z=0;for(let ne=y-k-(T-M-2);ne>d;ne--)Z+=Bn.combins(y-k-ne-1,T-M-3);$-=Z*(T-1-M)}else y-k>d&&$--;b+=$}y-=k}return b}static combins(l,d){let p,y;l-d>d?(y=d,p=l-d):(y=l-d,p=d);let b=1,E=1;for(let T=l;T>p;T--)b*=T,E<=y&&(b/=E,E++);for(;E<=y;)b/=E,E++;return b}}class no{static buildBitArray(l){let d=l.length*2-1;l[l.length-1].getRightChar()==null&&(d-=1);let p=12*d,y=new q(p),b=0,T=l[0].getRightChar().getValue();for(let M=11;M>=0;--M)(T&1<<M)!=0&&y.set(b),b++;for(let M=1;M<l.length;++M){let k=l[M],$=k.getLeftChar().getValue();for(let Z=11;Z>=0;--Z)($&1<<Z)!=0&&y.set(b),b++;if(k.getRightChar()!=null){let Z=k.getRightChar().getValue();for(let ne=11;ne>=0;--ne)(Z&1<<ne)!=0&&y.set(b),b++}}return y}}class _i{constructor(l,d){d?this.decodedInformation=null:(this.finished=l,this.decodedInformation=d)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ia{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class Er extends ia{constructor(l,d){super(l),this.value=d}getValue(){return this.value}isFNC1(){return this.value===Er.FNC1}}Er.FNC1="$";class Yi extends ia{constructor(l,d,p){super(l),p?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=d}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ir extends ia{constructor(l,d,p){if(super(l),d<0||d>10||p<0||p>10)throw new B;this.firstDigit=d,this.secondDigit=p}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ir.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ir.FNC1}isAnyFNC1(){return this.firstDigit===Ir.FNC1||this.secondDigit===Ir.FNC1}}Ir.FNC1=10;class Et{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new re;let d=l.substring(0,2);for(let b of Et.TWO_DIGIT_DATA_LENGTH)if(b[0]===d)return b[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(2,b[2],l):Et.processFixedAI(2,b[1],l);if(l.length<3)throw new re;let p=l.substring(0,3);for(let b of Et.THREE_DIGIT_DATA_LENGTH)if(b[0]===p)return b[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(3,b[2],l):Et.processFixedAI(3,b[1],l);for(let b of Et.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===p)return b[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(4,b[2],l):Et.processFixedAI(4,b[1],l);if(l.length<4)throw new re;let y=l.substring(0,4);for(let b of Et.FOUR_DIGIT_DATA_LENGTH)if(b[0]===y)return b[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(4,b[2],l):Et.processFixedAI(4,b[1],l);throw new re}static processFixedAI(l,d,p){if(p.length<l)throw new re;let y=p.substring(0,l);if(p.length<l+d)throw new re;let b=p.substring(l,l+d),E=p.substring(l+d),T="("+y+")"+b,M=Et.parseFieldsInGeneralPurpose(E);return M==null?T:T+M}static processVariableAI(l,d,p){let y=p.substring(0,l),b;p.length<l+d?b=p.length:b=l+d;let E=p.substring(l,b),T=p.substring(b),M="("+y+")"+E,k=Et.parseFieldsInGeneralPurpose(T);return k==null?M:M+k}}Et.VARIABLE_LENGTH=[],Et.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Et.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Et.VARIABLE_LENGTH,20],["22",Et.VARIABLE_LENGTH,29],["30",Et.VARIABLE_LENGTH,8],["37",Et.VARIABLE_LENGTH,8],["90",Et.VARIABLE_LENGTH,30],["91",Et.VARIABLE_LENGTH,30],["92",Et.VARIABLE_LENGTH,30],["93",Et.VARIABLE_LENGTH,30],["94",Et.VARIABLE_LENGTH,30],["95",Et.VARIABLE_LENGTH,30],["96",Et.VARIABLE_LENGTH,30],["97",Et.VARIABLE_LENGTH,3],["98",Et.VARIABLE_LENGTH,30],["99",Et.VARIABLE_LENGTH,30]],Et.THREE_DIGIT_DATA_LENGTH=[["240",Et.VARIABLE_LENGTH,30],["241",Et.VARIABLE_LENGTH,30],["242",Et.VARIABLE_LENGTH,6],["250",Et.VARIABLE_LENGTH,30],["251",Et.VARIABLE_LENGTH,30],["253",Et.VARIABLE_LENGTH,17],["254",Et.VARIABLE_LENGTH,20],["400",Et.VARIABLE_LENGTH,30],["401",Et.VARIABLE_LENGTH,30],["402",17],["403",Et.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Et.VARIABLE_LENGTH,20],["421",Et.VARIABLE_LENGTH,15],["422",3],["423",Et.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Et.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Et.VARIABLE_LENGTH,15],["391",Et.VARIABLE_LENGTH,18],["392",Et.VARIABLE_LENGTH,15],["393",Et.VARIABLE_LENGTH,18],["703",Et.VARIABLE_LENGTH,30]],Et.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Et.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Et.VARIABLE_LENGTH,20],["8003",Et.VARIABLE_LENGTH,30],["8004",Et.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Et.VARIABLE_LENGTH,30],["8008",Et.VARIABLE_LENGTH,12],["8018",18],["8020",Et.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Et.VARIABLE_LENGTH,70],["8200",Et.VARIABLE_LENGTH,70]];class ni{constructor(l){this.buffer=new K,this.information=l}decodeAllCodes(l,d){let p=d,y=null;do{let b=this.decodeGeneralPurposeField(p,y),E=Et.parseFieldsInGeneralPurpose(b.getNewString());if(E!=null&&l.append(E),b.isRemaining()?y=""+b.getRemainingValue():y=null,p===b.getNewPosition())break;p=b.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let d=l;d<l+3;++d)if(this.information.get(d))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(l,4);return b===0?new Ir(this.information.getSize(),Ir.FNC1,Ir.FNC1):new Ir(this.information.getSize(),b-1,Ir.FNC1)}let d=this.extractNumericValueFromBitArray(l,7),p=(d-8)/11,y=(d-8)%11;return new Ir(l+7,p,y)}extractNumericValueFromBitArray(l,d){return ni.extractNumericValueFromBitArray(this.information,l,d)}static extractNumericValueFromBitArray(l,d,p){let y=0;for(let b=0;b<p;++b)l.get(d+b)&&(y|=1<<p-b-1);return y}decodeGeneralPurposeField(l,d){this.buffer.setLengthToZero(),d!=null&&this.buffer.append(d),this.current.setPosition(l);let p=this.parseBlocks();return p!=null&&p.isRemaining()?new Yi(this.current.getPosition(),this.buffer.toString(),p.getRemainingValue()):new Yi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,d;do{let p=this.current.getPosition();if(this.current.isAlpha()?(d=this.parseAlphaBlock(),l=d.isFinished()):this.current.isIsoIec646()?(d=this.parseIsoIec646Block(),l=d.isFinished()):(d=this.parseNumericBlock(),l=d.isFinished()),!(p!==this.current.getPosition())&&!l)break}while(!l);return d.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let d;return l.isSecondDigitFNC1()?d=new Yi(this.current.getPosition(),this.buffer.toString()):d=new Yi(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new _i(!0,d)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let d=new Yi(this.current.getPosition(),this.buffer.toString());return new _i(!0,d)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _i(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let d=new Yi(this.current.getPosition(),this.buffer.toString());return new _i(!0,d)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _i(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let d=new Yi(this.current.getPosition(),this.buffer.toString());return new _i(!0,d)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _i(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(l,5);if(d>=5&&d<16)return!0;if(l+7>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(l,7);if(p>=64&&p<116)return!0;if(l+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(l,8);return y>=232&&y<253}decodeIsoIec646(l){let d=this.extractNumericValueFromBitArray(l,5);if(d===15)return new Er(l+5,Er.FNC1);if(d>=5&&d<15)return new Er(l+5,"0"+(d-5));let p=this.extractNumericValueFromBitArray(l,7);if(p>=64&&p<90)return new Er(l+7,""+(p+1));if(p>=90&&p<116)return new Er(l+7,""+(p+7));let y=this.extractNumericValueFromBitArray(l,8),b;switch(y){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new B}return new Er(l+8,b)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(l,5);if(d>=5&&d<16)return!0;if(l+6>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(l,6);return p>=16&&p<63}decodeAlphanumeric(l){let d=this.extractNumericValueFromBitArray(l,5);if(d===15)return new Er(l+5,Er.FNC1);if(d>=5&&d<15)return new Er(l+5,"0"+(d-5));let p=this.extractNumericValueFromBitArray(l,6);if(p>=32&&p<58)return new Er(l+6,""+(p+33));let y;switch(p){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new Le("Decoding invalid alphanumeric value: "+p)}return new Er(l+6,y)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let d=0;d<5&&d+l<this.information.getSize();++d)if(d===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+d))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let d=l;d<l+3;++d)if(this.information.get(d))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let d=0;d<4&&d+l<this.information.getSize();++d)if(this.information.get(l+d))return!1;return!0}}class ar{constructor(l){this.information=l,this.generalDecoder=new ni(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Dn extends ar{constructor(l){super(l)}encodeCompressedGtin(l,d){l.append("(01)");let p=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,d,p)}encodeCompressedGtinWithoutAI(l,d,p){for(let y=0;y<4;++y){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(d+10*y,10);b/100===0&&l.append("0"),b/10===0&&l.append("0"),l.append(b)}Dn.appendCheckDigit(l,p)}static appendCheckDigit(l,d){let p=0;for(let y=0;y<13;y++){let b=l.charAt(y+d).charCodeAt(0)-48;p+=(y&1)===0?3*b:b}p=10-p%10,p===10&&(p=0),l.append(p)}}Dn.GTIN_SIZE=40;class hi extends Dn{constructor(l){super(l)}parseInformation(){let l=new K;l.append("(01)");let d=l.length(),p=this.getGeneralDecoder().extractNumericValueFromBitArray(hi.HEADER_SIZE,4);return l.append(p),this.encodeCompressedGtinWithoutAI(l,hi.HEADER_SIZE+4,d),this.getGeneralDecoder().decodeAllCodes(l,hi.HEADER_SIZE+44)}}hi.HEADER_SIZE=4;class aa extends ar{constructor(l){super(l)}parseInformation(){let l=new K;return this.getGeneralDecoder().decodeAllCodes(l,aa.HEADER_SIZE)}}aa.HEADER_SIZE=5;class Ai extends Dn{constructor(l){super(l)}encodeCompressedWeight(l,d,p){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(d,p);this.addWeightCode(l,y);let b=this.checkWeight(y),E=1e5;for(let T=0;T<5;++T)b/E===0&&l.append("0"),E/=10;l.append(b)}}class Di extends Ai{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=Di.HEADER_SIZE+Ai.GTIN_SIZE+Di.WEIGHT_SIZE)throw new re;let l=new K;return this.encodeCompressedGtin(l,Di.HEADER_SIZE),this.encodeCompressedWeight(l,Di.HEADER_SIZE+Ai.GTIN_SIZE,Di.WEIGHT_SIZE),l.toString()}}Di.HEADER_SIZE=5,Di.WEIGHT_SIZE=15;class de extends Di{constructor(l){super(l)}addWeightCode(l,d){l.append("(3103)")}checkWeight(l){return l}}class ht extends Di{constructor(l){super(l)}addWeightCode(l,d){d<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class Nt extends Dn{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Nt.HEADER_SIZE+Dn.GTIN_SIZE)throw new re;let l=new K;this.encodeCompressedGtin(l,Nt.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(Nt.HEADER_SIZE+Dn.GTIN_SIZE,Nt.LAST_DIGIT_SIZE);l.append("(392"),l.append(d),l.append(")");let p=this.getGeneralDecoder().decodeGeneralPurposeField(Nt.HEADER_SIZE+Dn.GTIN_SIZE+Nt.LAST_DIGIT_SIZE,null);return l.append(p.getNewString()),l.toString()}}Nt.HEADER_SIZE=8,Nt.LAST_DIGIT_SIZE=2;class Lt extends Dn{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Lt.HEADER_SIZE+Dn.GTIN_SIZE)throw new re;let l=new K;this.encodeCompressedGtin(l,Lt.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(Lt.HEADER_SIZE+Dn.GTIN_SIZE,Lt.LAST_DIGIT_SIZE);l.append("(393"),l.append(d),l.append(")");let p=this.getGeneralDecoder().extractNumericValueFromBitArray(Lt.HEADER_SIZE+Dn.GTIN_SIZE+Lt.LAST_DIGIT_SIZE,Lt.FIRST_THREE_DIGITS_SIZE);p/100==0&&l.append("0"),p/10==0&&l.append("0"),l.append(p);let y=this.getGeneralDecoder().decodeGeneralPurposeField(Lt.HEADER_SIZE+Dn.GTIN_SIZE+Lt.LAST_DIGIT_SIZE+Lt.FIRST_THREE_DIGITS_SIZE,null);return l.append(y.getNewString()),l.toString()}}Lt.HEADER_SIZE=8,Lt.LAST_DIGIT_SIZE=2,Lt.FIRST_THREE_DIGITS_SIZE=10;class gt extends Ai{constructor(l,d,p){super(l),this.dateCode=p,this.firstAIdigits=d}parseInformation(){if(this.getInformation().getSize()!=gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE+gt.DATE_SIZE)throw new re;let l=new K;return this.encodeCompressedGtin(l,gt.HEADER_SIZE),this.encodeCompressedWeight(l,gt.HEADER_SIZE+gt.GTIN_SIZE,gt.WEIGHT_SIZE),this.encodeCompressedDate(l,gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,d){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(d,gt.DATE_SIZE);if(p==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let y=p%32;p/=32;let b=p%12+1;p/=12;let E=p;E/10==0&&l.append("0"),l.append(E),b/10==0&&l.append("0"),l.append(b),y/10==0&&l.append("0"),l.append(y)}addWeightCode(l,d){l.append("("),l.append(this.firstAIdigits),l.append(d/1e5),l.append(")")}checkWeight(l){return l%1e5}}gt.HEADER_SIZE=8,gt.WEIGHT_SIZE=20,gt.DATE_SIZE=16;function Qn(J){try{if(J.get(1))return new hi(J);if(!J.get(2))return new aa(J);switch(ni.extractNumericValueFromBitArray(J,1,4)){case 4:return new de(J);case 5:return new ht(J)}switch(ni.extractNumericValueFromBitArray(J,1,5)){case 12:return new Nt(J);case 13:return new Lt(J)}switch(ni.extractNumericValueFromBitArray(J,1,7)){case 56:return new gt(J,"310","11");case 57:return new gt(J,"320","11");case 58:return new gt(J,"310","13");case 59:return new gt(J,"320","13");case 60:return new gt(J,"310","15");case 61:return new gt(J,"320","15");case 62:return new gt(J,"310","17");case 63:return new gt(J,"320","17")}}catch(l){throw console.log(l),new Le("unknown decoder: "+J)}}class gn{constructor(l,d,p,y){this.leftchar=l,this.rightchar=d,this.finderpattern=p,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,d){return l instanceof gn?gn.equalsOrNull(l.leftchar,d.leftchar)&&gn.equalsOrNull(l.rightchar,d.rightchar)&&gn.equalsOrNull(l.finderpattern,d.finderpattern):!1}static equalsOrNull(l,d){return l===null?d===null:gn.equals(l,d)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class mn{constructor(l,d,p){this.pairs=l,this.rowNumber=d,this.wasReversed=p}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,d){return l instanceof mn?this.checkEqualitity(l,d)&&l.wasReversed===d.wasReversed:!1}checkEqualitity(l,d){if(!l||!d)return;let p;return l.forEach((y,b)=>{d.forEach(E=>{y.getLeftChar().getValue()===E.getLeftChar().getValue()&&y.getRightChar().getValue()===E.getRightChar().getValue()&&y.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(p=!0)})}),p}}class Ve extends En{constructor(l){super(...arguments),this.pairs=new Array(Ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,d,p){this.pairs.length=0,this.startFromEven=!1;try{return Ve.constructResult(this.decodeRow2pairs(l,d))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Ve.constructResult(this.decodeRow2pairs(l,d))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,d){let p=!1;for(;!p;)try{this.pairs.push(this.retrieveNextPair(d,this.pairs,l))}catch(b){if(b instanceof re){if(!this.pairs.length)throw new re;p=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(l,!1),y){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new re}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let d=null;try{d=this.checkRows(new Array,0)}catch(p){this.verbose&&console.log(p)}return l&&(this.rows=this.rows.reverse()),d}checkRows(l,d){for(let p=d;p<this.rows.length;p++){let y=this.rows[p];this.pairs.length=0;for(let E of l)this.pairs.push(E.getPairs());if(this.pairs.push(y.getPairs()),!Ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(l);b.push(y);try{return this.checkRows(b,p+1)}catch(E){this.verbose&&console.log(E)}}throw new re}static isValidSequence(l){for(let d of Ve.FINDER_PATTERN_SEQUENCES){if(l.length>d.length)continue;let p=!0;for(let y=0;y<l.length;y++)if(l[y].getFinderPattern().getValue()!=d[y]){p=!1;break}if(p)return!0}return!1}storeRow(l,d){let p=0,y=!1,b=!1;for(;p<this.rows.length;){let E=this.rows[p];if(E.getRowNumber()>l){b=E.isEquivalent(this.pairs);break}y=E.isEquivalent(this.pairs),p++}b||y||Ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(p,new mn(this.pairs,l,d)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,d){for(let p of d)if(p.getPairs().length!==l.length){for(let y of p.getPairs())for(let b of l)if(gn.equals(y,b))break}}static isPartialRow(l,d){for(let p of d){let y=!0;for(let b of l){let E=!1;for(let T of p.getPairs())if(b.equals(T)){E=!0;break}if(!E){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(l){let d=no.buildBitArray(l),y=Qn(d).parseInformation(),b=l[0].getFinderPattern().getResultPoints(),E=l[l.length-1].getFinderPattern().getResultPoints(),T=[b[0],b[1],E[0],E[1]];return new He(y,null,null,T,Ye.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),d=l.getLeftChar(),p=l.getRightChar();if(p==null)return!1;let y=p.getChecksumPortion(),b=2;for(let T=1;T<this.pairs.size();++T){let M=this.pairs.get(T);y+=M.getLeftChar().getChecksumPortion(),b++;let k=M.getRightChar();k!=null&&(y+=k.getChecksumPortion(),b++)}return y%=211,211*(b-4)+y==d.getValue()}static getNextSecondBar(l,d){let p;return l.get(d)?(p=l.getNextUnset(d),p=l.getNextSet(p)):(p=l.getNextSet(d),p=l.getNextUnset(p)),p}retrieveNextPair(l,d,p){let y=d.length%2==0;this.startFromEven&&(y=!y);let b,E=!0,T=-1;do this.findNextPair(l,d,T),b=this.parseFoundFinderPattern(l,p,y),b==null?T=Ve.getNextSecondBar(l,this.startEnd[0]):E=!1;while(E);let M=this.decodeDataCharacter(l,b,y,!0);if(!this.isEmptyPair(d)&&d[d.length-1].mustBeLast())throw new re;let k;try{k=this.decodeDataCharacter(l,b,y,!1)}catch($){k=null,this.verbose&&console.log($)}return new gn(M,k,b,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,d,p){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=l.getSize(),E;p>=0?E=p:this.isEmptyPair(d)?E=0:E=d[d.length-1].getFinderPattern().getStartEnd()[1];let T=d.length%2!=0;this.startFromEven&&(T=!T);let M=!1;for(;E<b&&(M=!l.get(E),!!M);)E++;let k=0,$=E;for(let Z=E;Z<b;Z++)if(l.get(Z)!=M)y[k]++;else{if(k==3){if(T&&Ve.reverseCounters(y),Ve.isFinderPattern(y)){this.startEnd[0]=$,this.startEnd[1]=Z;return}T&&Ve.reverseCounters(y),$+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,k--}else k++;y[k]=1,M=!M}throw new re}static reverseCounters(l){let d=l.length;for(let p=0;p<d/2;++p){let y=l[p];l[p]=l[d-p-1],l[d-p-1]=y}}parseFoundFinderPattern(l,d,p){let y,b,E;if(p){let k=this.startEnd[0]-1;for(;k>=0&&!l.get(k);)k--;k++,y=this.startEnd[0]-k,b=k,E=this.startEnd[1]}else b=this.startEnd[0],E=l.getNextUnset(this.startEnd[1]+1),y=E-this.startEnd[1];let T=this.getDecodeFinderCounters();O.arraycopy(T,0,T,1,T.length-1),T[0]=y;let M;try{M=this.parseFinderValue(T,Ve.FINDER_PATTERNS)}catch{return null}return new Cr(M,[b,E],b,E,d)}decodeDataCharacter(l,d,p,y){let b=this.getDataCharacterCounters();for(let Yn=0;Yn<b.length;Yn++)b[Yn]=0;if(y)Ve.recordPatternInReverse(l,d.getStartEnd()[0],b);else{Ve.recordPattern(l,d.getStartEnd()[1],b);for(let Yn=0,gi=b.length-1;Yn<gi;Yn++,gi--){let la=b[Yn];b[Yn]=b[gi],b[gi]=la}}let E=17,T=We.sum(new Int32Array(b))/E,M=(d.getStartEnd()[1]-d.getStartEnd()[0])/15;if(Math.abs(T-M)/M>.3)throw new re;let k=this.getOddCounts(),$=this.getEvenCounts(),Z=this.getOddRoundingErrors(),ne=this.getEvenRoundingErrors();for(let Yn=0;Yn<b.length;Yn++){let gi=1*b[Yn]/T,la=gi+.5;if(la<1){if(gi<.3)throw new re;la=1}else if(la>8){if(gi>8.7)throw new re;la=8}let ll=Yn/2;(Yn&1)==0?(k[ll]=la,Z[ll]=gi-la):($[ll]=la,ne[ll]=gi-la)}this.adjustOddEvenCounts(E);let ue=4*d.getValue()+(p?0:2)+(y?0:1)-1,me=0,xe=0;for(let Yn=k.length-1;Yn>=0;Yn--){if(Ve.isNotA1left(d,p,y)){let gi=Ve.WEIGHTS[ue][2*Yn];xe+=k[Yn]*gi}me+=k[Yn]}let Ne=0;for(let Yn=$.length-1;Yn>=0;Yn--)if(Ve.isNotA1left(d,p,y)){let gi=Ve.WEIGHTS[ue][2*Yn+1];Ne+=$[Yn]*gi}let qe=xe+Ne;if((me&1)!=0||me>13||me<4)throw new re;let ft=(13-me)/2,ut=Ve.SYMBOL_WIDEST[ft],at=9-ut,fn=Bn.getRSSvalue(k,ut,!0),Jt=Bn.getRSSvalue($,at,!1),Hr=Ve.EVEN_TOTAL_SUBSET[ft],Sa=Ve.GSUM[ft],Li=fn*Hr+Jt+Sa;return new Gn(Li,qe)}static isNotA1left(l,d,p){return!(l.getValue()==0&&d&&p)}adjustOddEvenCounts(l){let d=We.sum(new Int32Array(this.getOddCounts())),p=We.sum(new Int32Array(this.getEvenCounts())),y=!1,b=!1;d>13?b=!0:d<4&&(y=!0);let E=!1,T=!1;p>13?T=!0:p<4&&(E=!0);let M=d+p-l,k=(d&1)==1,$=(p&1)==0;if(M==1)if(k){if($)throw new re;b=!0}else{if(!$)throw new re;T=!0}else if(M==-1)if(k){if($)throw new re;y=!0}else{if(!$)throw new re;E=!0}else if(M==0){if(k){if(!$)throw new re;d<p?(y=!0,T=!0):(b=!0,E=!0)}else if($)throw new re}else throw new re;if(y){if(b)throw new re;Ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(T)throw new re;Ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ve.SYMBOL_WIDEST=[7,5,4,3,1],Ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ve.GSUM=[0,348,1388,2948,3988],Ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ve.FINDER_PAT_A=0,Ve.FINDER_PAT_B=1,Ve.FINDER_PAT_C=2,Ve.FINDER_PAT_D=3,Ve.FINDER_PAT_E=4,Ve.FINDER_PAT_F=5,Ve.FINDER_PATTERN_SEQUENCES=[[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_C,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_C],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_E],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F]],Ve.MAX_PAIRS=11;class kr extends Gn{constructor(l,d,p){super(l,d),this.count=0,this.finderPattern=p}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Qt extends En{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,d,p){const y=this.decodePair(d,!1,l,p);Qt.addOrTally(this.possibleLeftPairs,y),d.reverse();let b=this.decodePair(d,!0,l,p);Qt.addOrTally(this.possibleRightPairs,b),d.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let T of this.possibleRightPairs)if(T.getCount()>1&&Qt.checkChecksum(E,T))return Qt.constructResult(E,T)}throw new re}static addOrTally(l,d){if(d==null)return;let p=!1;for(let y of l)if(y.getValue()===d.getValue()){y.incrementCount(),p=!0;break}p||l.push(d)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,d){let p=4537077*l.getValue()+d.getValue(),y=new String(p).toString(),b=new K;for(let k=13-y.length;k>0;k--)b.append("0");b.append(y);let E=0;for(let k=0;k<13;k++){let $=b.charAt(k).charCodeAt(0)-48;E+=(k&1)===0?3*$:$}E=10-E%10,E===10&&(E=0),b.append(E.toString());let T=l.getFinderPattern().getResultPoints(),M=d.getFinderPattern().getResultPoints();return new He(b.toString(),null,0,[T[0],T[1],M[0],M[1]],Ye.RSS_14,new Date().getTime())}static checkChecksum(l,d){let p=(l.getChecksumPortion()+16*d.getChecksumPortion())%79,y=9*l.getFinderPattern().getValue()+d.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,p===y}decodePair(l,d,p,y){try{let b=this.findFinderPattern(l,d),E=this.parseFoundFinderPattern(l,p,d,b),T=y==null?null:y.get(G.NEED_RESULT_POINT_CALLBACK);if(T!=null){let $=(b[0]+b[1])/2;d&&($=l.getSize()-1-$),T.foundPossibleResultPoint(new Ie($,p))}let M=this.decodeDataCharacter(l,E,!0),k=this.decodeDataCharacter(l,E,!1);return new kr(1597*M.getValue()+k.getValue(),M.getChecksumPortion()+4*k.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(l,d,p){let y=this.getDataCharacterCounters();for(let Ne=0;Ne<y.length;Ne++)y[Ne]=0;if(p)un.recordPatternInReverse(l,d.getStartEnd()[0],y);else{un.recordPattern(l,d.getStartEnd()[1]+1,y);for(let Ne=0,qe=y.length-1;Ne<qe;Ne++,qe--){let ft=y[Ne];y[Ne]=y[qe],y[qe]=ft}}let b=p?16:15,E=We.sum(new Int32Array(y))/b,T=this.getOddCounts(),M=this.getEvenCounts(),k=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let Ne=0;Ne<y.length;Ne++){let qe=y[Ne]/E,ft=Math.floor(qe+.5);ft<1?ft=1:ft>8&&(ft=8);let ut=Math.floor(Ne/2);(Ne&1)===0?(T[ut]=ft,k[ut]=qe-ft):(M[ut]=ft,$[ut]=qe-ft)}this.adjustOddEvenCounts(p,b);let Z=0,ne=0;for(let Ne=T.length-1;Ne>=0;Ne--)ne*=9,ne+=T[Ne],Z+=T[Ne];let ue=0,me=0;for(let Ne=M.length-1;Ne>=0;Ne--)ue*=9,ue+=M[Ne],me+=M[Ne];let xe=ne+3*ue;if(p){if((Z&1)!==0||Z>12||Z<4)throw new re;let Ne=(12-Z)/2,qe=Qt.OUTSIDE_ODD_WIDEST[Ne],ft=9-qe,ut=Bn.getRSSvalue(T,qe,!1),at=Bn.getRSSvalue(M,ft,!0),fn=Qt.OUTSIDE_EVEN_TOTAL_SUBSET[Ne],Jt=Qt.OUTSIDE_GSUM[Ne];return new Gn(ut*fn+at+Jt,xe)}else{if((me&1)!==0||me>10||me<4)throw new re;let Ne=(10-me)/2,qe=Qt.INSIDE_ODD_WIDEST[Ne],ft=9-qe,ut=Bn.getRSSvalue(T,qe,!0),at=Bn.getRSSvalue(M,ft,!1),fn=Qt.INSIDE_ODD_TOTAL_SUBSET[Ne],Jt=Qt.INSIDE_GSUM[Ne];return new Gn(at*fn+ut+Jt,xe)}}findFinderPattern(l,d){let p=this.getDecodeFinderCounters();p[0]=0,p[1]=0,p[2]=0,p[3]=0;let y=l.getSize(),b=!1,E=0;for(;E<y&&(b=!l.get(E),d!==b);)E++;let T=0,M=E;for(let k=E;k<y;k++)if(l.get(k)!==b)p[T]++;else{if(T===3){if(En.isFinderPattern(p))return[M,k];M+=p[0]+p[1],p[0]=p[2],p[1]=p[3],p[2]=0,p[3]=0,T--}else T++;p[T]=1,b=!b}throw new re}parseFoundFinderPattern(l,d,p,y){let b=l.get(y[0]),E=y[0]-1;for(;E>=0&&b!==l.get(E);)E--;E++;const T=y[0]-E,M=this.getDecodeFinderCounters(),k=new Int32Array(M.length);O.arraycopy(M,0,k,1,M.length-1),k[0]=T;const $=this.parseFinderValue(k,Qt.FINDER_PATTERNS);let Z=E,ne=y[1];return p&&(Z=l.getSize()-1-Z,ne=l.getSize()-1-ne),new Cr($,[E,y[1]],Z,ne,d)}adjustOddEvenCounts(l,d){let p=We.sum(new Int32Array(this.getOddCounts())),y=We.sum(new Int32Array(this.getEvenCounts())),b=!1,E=!1,T=!1,M=!1;l?(p>12?E=!0:p<4&&(b=!0),y>12?M=!0:y<4&&(T=!0)):(p>11?E=!0:p<5&&(b=!0),y>10?M=!0:y<4&&(T=!0));let k=p+y-d,$=(p&1)===(l?1:0),Z=(y&1)===1;if(k===1)if($){if(Z)throw new re;E=!0}else{if(!Z)throw new re;M=!0}else if(k===-1)if($){if(Z)throw new re;b=!0}else{if(!Z)throw new re;T=!0}else if(k===0){if($){if(!Z)throw new re;p<y?(b=!0,M=!0):(E=!0,T=!0)}else if(Z)throw new re}else throw new re;if(b){if(E)throw new re;En.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&En.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(M)throw new re;En.increment(this.getEvenCounts(),this.getOddRoundingErrors())}M&&En.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Qt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Qt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Qt.OUTSIDE_GSUM=[0,161,961,2015,2715],Qt.INSIDE_GSUM=[0,336,1036,1516],Qt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Qt.INSIDE_ODD_WIDEST=[2,4,6,8],Qt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class pi extends un{constructor(l,d){super(),this.readers=[],this.verbose=d===!0;const p=l?l.get(G.POSSIBLE_FORMATS):null,y=l&&l.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;p?((p.includes(Ye.EAN_13)||p.includes(Ye.UPC_A)||p.includes(Ye.EAN_8)||p.includes(Ye.UPC_E))&&this.readers.push(new ir(l)),p.includes(Ye.CODE_39)&&this.readers.push(new pn(y)),p.includes(Ye.CODE_128)&&this.readers.push(new it),p.includes(Ye.ITF)&&this.readers.push(new Yt),p.includes(Ye.RSS_14)&&this.readers.push(new Qt),p.includes(Ye.RSS_EXPANDED)&&this.readers.push(new Ve(this.verbose))):(this.readers.push(new ir(l)),this.readers.push(new pn),this.readers.push(new ir(l)),this.readers.push(new it),this.readers.push(new Yt),this.readers.push(new Qt),this.readers.push(new Ve(this.verbose)))}decodeRow(l,d,p){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(l,d,p)}catch{}throw new re}reset(){this.readers.forEach(l=>l.reset())}}class bf extends Ae{constructor(l=500,d){super(new pi(d),l,d)}}class _n{constructor(l,d,p){this.ecCodewords=l,this.ecBlocks=[d],p&&this.ecBlocks.push(p)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class yn{constructor(l,d){this.count=l,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dn{constructor(l,d,p,y,b,E){this.versionNumber=l,this.symbolSizeRows=d,this.symbolSizeColumns=p,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=b,this.ecBlocks=E;let T=0;const M=E.getECCodewords(),k=E.getECBlocks();for(let $ of k)T+=$.getCount()*($.getDataCodewords()+M);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,d){if((l&1)!==0||(d&1)!==0)throw new B;for(let p of dn.VERSIONS)if(p.symbolSizeRows===l&&p.symbolSizeColumns===d)return p;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new dn(1,10,10,8,8,new _n(5,new yn(1,3))),new dn(2,12,12,10,10,new _n(7,new yn(1,5))),new dn(3,14,14,12,12,new _n(10,new yn(1,8))),new dn(4,16,16,14,14,new _n(12,new yn(1,12))),new dn(5,18,18,16,16,new _n(14,new yn(1,18))),new dn(6,20,20,18,18,new _n(18,new yn(1,22))),new dn(7,22,22,20,20,new _n(20,new yn(1,30))),new dn(8,24,24,22,22,new _n(24,new yn(1,36))),new dn(9,26,26,24,24,new _n(28,new yn(1,44))),new dn(10,32,32,14,14,new _n(36,new yn(1,62))),new dn(11,36,36,16,16,new _n(42,new yn(1,86))),new dn(12,40,40,18,18,new _n(48,new yn(1,114))),new dn(13,44,44,20,20,new _n(56,new yn(1,144))),new dn(14,48,48,22,22,new _n(68,new yn(1,174))),new dn(15,52,52,24,24,new _n(42,new yn(2,102))),new dn(16,64,64,14,14,new _n(56,new yn(2,140))),new dn(17,72,72,16,16,new _n(36,new yn(4,92))),new dn(18,80,80,18,18,new _n(48,new yn(4,114))),new dn(19,88,88,20,20,new _n(56,new yn(4,144))),new dn(20,96,96,22,22,new _n(68,new yn(4,174))),new dn(21,104,104,24,24,new _n(56,new yn(6,136))),new dn(22,120,120,18,18,new _n(68,new yn(6,175))),new dn(23,132,132,20,20,new _n(62,new yn(8,163))),new dn(24,144,144,22,22,new _n(62,new yn(8,156),new yn(2,155))),new dn(25,8,18,6,16,new _n(7,new yn(1,5))),new dn(26,8,32,6,14,new _n(11,new yn(1,10))),new dn(27,12,26,10,24,new _n(14,new yn(1,16))),new dn(28,12,36,10,16,new _n(18,new yn(1,22))),new dn(29,16,36,14,16,new _n(24,new yn(1,32))),new dn(30,16,48,14,22,new _n(28,new yn(1,49)))]}}dn.VERSIONS=dn.buildVersions();class ro{constructor(l){const d=l.getHeight();if(d<8||d>144||(d&1)!==0)throw new B;this.version=ro.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new ge(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const d=l.getHeight(),p=l.getWidth();return dn.getVersionForDimensions(d,p)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let d=0,p=4,y=0;const b=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let T=!1,M=!1,k=!1,$=!1;do if(p===b&&y===0&&!T)l[d++]=this.readCorner1(b,E)&255,p-=2,y+=2,T=!0;else if(p===b-2&&y===0&&(E&3)!==0&&!M)l[d++]=this.readCorner2(b,E)&255,p-=2,y+=2,M=!0;else if(p===b+4&&y===2&&(E&7)===0&&!k)l[d++]=this.readCorner3(b,E)&255,p-=2,y+=2,k=!0;else if(p===b-2&&y===0&&(E&7)===4&&!$)l[d++]=this.readCorner4(b,E)&255,p-=2,y+=2,$=!0;else{do p<b&&y>=0&&!this.readMappingMatrix.get(y,p)&&(l[d++]=this.readUtah(p,y,b,E)&255),p-=2,y+=2;while(p>=0&&y<E);p+=1,y+=3;do p>=0&&y<E&&!this.readMappingMatrix.get(y,p)&&(l[d++]=this.readUtah(p,y,b,E)&255),p+=2,y-=2;while(p<b&&y>=0);p+=3,y+=1}while(p<b||y<E);if(d!==this.version.getTotalCodewords())throw new B;return l}readModule(l,d,p,y){return l<0&&(l+=p,d+=4-(p+4&7)),d<0&&(d+=y,l+=4-(y+4&7)),this.readMappingMatrix.set(d,l),this.mappingBitMatrix.get(d,l)}readUtah(l,d,p,y){let b=0;return this.readModule(l-2,d-2,p,y)&&(b|=1),b<<=1,this.readModule(l-2,d-1,p,y)&&(b|=1),b<<=1,this.readModule(l-1,d-2,p,y)&&(b|=1),b<<=1,this.readModule(l-1,d-1,p,y)&&(b|=1),b<<=1,this.readModule(l-1,d,p,y)&&(b|=1),b<<=1,this.readModule(l,d-2,p,y)&&(b|=1),b<<=1,this.readModule(l,d-1,p,y)&&(b|=1),b<<=1,this.readModule(l,d,p,y)&&(b|=1),b}readCorner1(l,d){let p=0;return this.readModule(l-1,0,l,d)&&(p|=1),p<<=1,this.readModule(l-1,1,l,d)&&(p|=1),p<<=1,this.readModule(l-1,2,l,d)&&(p|=1),p<<=1,this.readModule(0,d-2,l,d)&&(p|=1),p<<=1,this.readModule(0,d-1,l,d)&&(p|=1),p<<=1,this.readModule(1,d-1,l,d)&&(p|=1),p<<=1,this.readModule(2,d-1,l,d)&&(p|=1),p<<=1,this.readModule(3,d-1,l,d)&&(p|=1),p}readCorner2(l,d){let p=0;return this.readModule(l-3,0,l,d)&&(p|=1),p<<=1,this.readModule(l-2,0,l,d)&&(p|=1),p<<=1,this.readModule(l-1,0,l,d)&&(p|=1),p<<=1,this.readModule(0,d-4,l,d)&&(p|=1),p<<=1,this.readModule(0,d-3,l,d)&&(p|=1),p<<=1,this.readModule(0,d-2,l,d)&&(p|=1),p<<=1,this.readModule(0,d-1,l,d)&&(p|=1),p<<=1,this.readModule(1,d-1,l,d)&&(p|=1),p}readCorner3(l,d){let p=0;return this.readModule(l-1,0,l,d)&&(p|=1),p<<=1,this.readModule(l-1,d-1,l,d)&&(p|=1),p<<=1,this.readModule(0,d-3,l,d)&&(p|=1),p<<=1,this.readModule(0,d-2,l,d)&&(p|=1),p<<=1,this.readModule(0,d-1,l,d)&&(p|=1),p<<=1,this.readModule(1,d-3,l,d)&&(p|=1),p<<=1,this.readModule(1,d-2,l,d)&&(p|=1),p<<=1,this.readModule(1,d-1,l,d)&&(p|=1),p}readCorner4(l,d){let p=0;return this.readModule(l-3,0,l,d)&&(p|=1),p<<=1,this.readModule(l-2,0,l,d)&&(p|=1),p<<=1,this.readModule(l-1,0,l,d)&&(p|=1),p<<=1,this.readModule(0,d-2,l,d)&&(p|=1),p<<=1,this.readModule(0,d-1,l,d)&&(p|=1),p<<=1,this.readModule(1,d-1,l,d)&&(p|=1),p<<=1,this.readModule(2,d-1,l,d)&&(p|=1),p<<=1,this.readModule(3,d-1,l,d)&&(p|=1),p}extractDataRegion(l){const d=this.version.getSymbolSizeRows(),p=this.version.getSymbolSizeColumns();if(l.getHeight()!==d)throw new v("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),E=d/y|0,T=p/b|0,M=E*y,k=T*b,$=new ge(k,M);for(let Z=0;Z<E;++Z){const ne=Z*y;for(let ue=0;ue<T;++ue){const me=ue*b;for(let xe=0;xe<y;++xe){const Ne=Z*(y+2)+1+xe,qe=ne+xe;for(let ft=0;ft<b;++ft){const ut=ue*(b+2)+1+ft;if(l.get(ut,Ne)){const at=me+ft;$.set(at,qe)}}}}}return $}}class io{constructor(l,d){this.numDataCodewords=l,this.codewords=d}static getDataBlocks(l,d){const p=d.getECBlocks();let y=0;const b=p.getECBlocks();for(let xe of b)y+=xe.getCount();const E=new Array(y);let T=0;for(let xe of b)for(let Ne=0;Ne<xe.getCount();Ne++){const qe=xe.getDataCodewords(),ft=p.getECCodewords()+qe;E[T++]=new io(qe,new Uint8Array(ft))}const k=E[0].codewords.length-p.getECCodewords(),$=k-1;let Z=0;for(let xe=0;xe<$;xe++)for(let Ne=0;Ne<T;Ne++)E[Ne].codewords[xe]=l[Z++];const ne=d.getVersionNumber()===24,ue=ne?8:T;for(let xe=0;xe<ue;xe++)E[xe].codewords[k-1]=l[Z++];const me=E[0].codewords.length;for(let xe=k;xe<me;xe++)for(let Ne=0;Ne<T;Ne++){const qe=ne?(Ne+8)%T:Ne,ft=ne&&qe>7?xe-1:xe;E[qe].codewords[ft]=l[Z++]}if(Z!==l.length)throw new v;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ki{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new v(""+l);let d=0,p=this.bitOffset,y=this.byteOffset;const b=this.bytes;if(p>0){const E=8-p,T=l<E?l:E,M=E-T,k=255>>8-T<<M;d=(b[y]&k)>>M,l-=T,p+=T,p===8&&(p=0,y++)}if(l>0){for(;l>=8;)d=d<<8|b[y]&255,y++,l-=8;if(l>0){const E=8-l,T=255>>E<<E;d=d<<l|(b[y]&T)>>E,p+=l}}return this.bitOffset=p,this.byteOffset=y,d}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var In;(function(J){J[J.PAD_ENCODE=0]="PAD_ENCODE",J[J.ASCII_ENCODE=1]="ASCII_ENCODE",J[J.C40_ENCODE=2]="C40_ENCODE",J[J.TEXT_ENCODE=3]="TEXT_ENCODE",J[J.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",J[J.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",J[J.BASE256_ENCODE=6]="BASE256_ENCODE"})(In||(In={}));class Ba{static decode(l){const d=new Ki(l),p=new K,y=new K,b=new Array;let E=In.ASCII_ENCODE;do if(E===In.ASCII_ENCODE)E=this.decodeAsciiSegment(d,p,y);else{switch(E){case In.C40_ENCODE:this.decodeC40Segment(d,p);break;case In.TEXT_ENCODE:this.decodeTextSegment(d,p);break;case In.ANSIX12_ENCODE:this.decodeAnsiX12Segment(d,p);break;case In.EDIFACT_ENCODE:this.decodeEdifactSegment(d,p);break;case In.BASE256_ENCODE:this.decodeBase256Segment(d,p,b);break;default:throw new B}E=In.ASCII_ENCODE}while(E!==In.PAD_ENCODE&&d.available()>0);return y.length()>0&&p.append(y.toString()),new Be(l,p.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(l,d,p){let y=!1;do{let b=l.readBits(8);if(b===0)throw new B;if(b<=128)return y&&(b+=128),d.append(String.fromCharCode(b-1)),In.ASCII_ENCODE;if(b===129)return In.PAD_ENCODE;if(b<=229){const E=b-130;E<10&&d.append("0"),d.append(""+E)}else switch(b){case 230:return In.C40_ENCODE;case 231:return In.BASE256_ENCODE;case 232:d.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:d.append("[)>05"),p.insert(0,"");break;case 237:d.append("[)>06"),p.insert(0,"");break;case 238:return In.ANSIX12_ENCODE;case 239:return In.TEXT_ENCODE;case 240:return In.EDIFACT_ENCODE;case 241:break;default:if(b!==254||l.available()!==0)throw new B;break}}while(l.available()>0);return In.ASCII_ENCODE}static decodeC40Segment(l,d){let p=!1;const y=[];let b=0;do{if(l.available()===8)return;const E=l.readBits(8);if(E===254)return;this.parseTwoBytes(E,l.readBits(8),y);for(let T=0;T<3;T++){const M=y[T];switch(b){case 0:if(M<3)b=M+1;else if(M<this.C40_BASIC_SET_CHARS.length){const k=this.C40_BASIC_SET_CHARS[M];p?(d.append(String.fromCharCode(k.charCodeAt(0)+128)),p=!1):d.append(k)}else throw new B;break;case 1:p?(d.append(String.fromCharCode(M+128)),p=!1):d.append(String.fromCharCode(M)),b=0;break;case 2:if(M<this.C40_SHIFT2_SET_CHARS.length){const k=this.C40_SHIFT2_SET_CHARS[M];p?(d.append(String.fromCharCode(k.charCodeAt(0)+128)),p=!1):d.append(k)}else switch(M){case 27:d.append("");break;case 30:p=!0;break;default:throw new B}b=0;break;case 3:p?(d.append(String.fromCharCode(M+224)),p=!1):d.append(String.fromCharCode(M+96)),b=0;break;default:throw new B}}}while(l.available()>0)}static decodeTextSegment(l,d){let p=!1,y=[],b=0;do{if(l.available()===8)return;const E=l.readBits(8);if(E===254)return;this.parseTwoBytes(E,l.readBits(8),y);for(let T=0;T<3;T++){const M=y[T];switch(b){case 0:if(M<3)b=M+1;else if(M<this.TEXT_BASIC_SET_CHARS.length){const k=this.TEXT_BASIC_SET_CHARS[M];p?(d.append(String.fromCharCode(k.charCodeAt(0)+128)),p=!1):d.append(k)}else throw new B;break;case 1:p?(d.append(String.fromCharCode(M+128)),p=!1):d.append(String.fromCharCode(M)),b=0;break;case 2:if(M<this.TEXT_SHIFT2_SET_CHARS.length){const k=this.TEXT_SHIFT2_SET_CHARS[M];p?(d.append(String.fromCharCode(k.charCodeAt(0)+128)),p=!1):d.append(k)}else switch(M){case 27:d.append("");break;case 30:p=!0;break;default:throw new B}b=0;break;case 3:if(M<this.TEXT_SHIFT3_SET_CHARS.length){const k=this.TEXT_SHIFT3_SET_CHARS[M];p?(d.append(String.fromCharCode(k.charCodeAt(0)+128)),p=!1):d.append(k),b=0}else throw new B;break;default:throw new B}}}while(l.available()>0)}static decodeAnsiX12Segment(l,d){const p=[];do{if(l.available()===8)return;const y=l.readBits(8);if(y===254)return;this.parseTwoBytes(y,l.readBits(8),p);for(let b=0;b<3;b++){const E=p[b];switch(E){case 0:d.append("\r");break;case 1:d.append("*");break;case 2:d.append(">");break;case 3:d.append(" ");break;default:if(E<14)d.append(String.fromCharCode(E+44));else if(E<40)d.append(String.fromCharCode(E+51));else throw new B;break}}}while(l.available()>0)}static parseTwoBytes(l,d,p){let y=(l<<8)+d-1,b=Math.floor(y/1600);p[0]=b,y-=b*1600,b=Math.floor(y/40),p[1]=b,p[2]=y-b*40}static decodeEdifactSegment(l,d){do{if(l.available()<=16)return;for(let p=0;p<4;p++){let y=l.readBits(6);if(y===31){const b=8-l.getBitOffset();b!==8&&l.readBits(b);return}(y&32)===0&&(y|=64),d.append(String.fromCharCode(y))}}while(l.available()>0)}static decodeBase256Segment(l,d,p){let y=1+l.getByteOffset();const b=this.unrandomize255State(l.readBits(8),y++);let E;if(b===0?E=l.available()/8|0:b<250?E=b:E=250*(b-249)+this.unrandomize255State(l.readBits(8),y++),E<0)throw new B;const T=new Uint8Array(E);for(let M=0;M<E;M++){if(l.available()<8)throw new B;T[M]=this.unrandomize255State(l.readBits(8),y++)}p.push(T);try{d.append(Q.decode(T,X.ISO88591))}catch(M){throw new Le("Platform does not support required encoding: "+M.message)}}static unrandomize255State(l,d){const p=149*d%255+1,y=l-p;return y>=0?y:y+256}}Ba.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ba.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ba.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ba.TEXT_SHIFT2_SET_CHARS=Ba.C40_SHIFT2_SET_CHARS,Ba.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class wf{constructor(){this.rsDecoder=new he(yt.DATA_MATRIX_FIELD_256)}decode(l){const d=new ro(l),p=d.getVersion(),y=d.readCodewords(),b=io.getDataBlocks(y,p);let E=0;for(let k of b)E+=k.getNumDataCodewords();const T=new Uint8Array(E),M=b.length;for(let k=0;k<M;k++){const $=b[k],Z=$.getCodewords(),ne=$.getNumDataCodewords();this.correctErrors(Z,ne);for(let ue=0;ue<ne;ue++)T[ue*M+k]=Z[ue]}return Ba.decode(T)}correctErrors(l,d){const p=new Int32Array(l);try{this.rsDecoder.decode(p,l.length-d)}catch{throw new N}for(let y=0;y<d;y++)l[y]=p[y]}}class or{constructor(l){this.image=l,this.rectangleDetector=new Ee(this.image)}detect(){const l=this.rectangleDetector.detect();let d=this.detectSolid1(l);if(d=this.detectSolid2(d),d[3]=this.correctTopRight(d),!d[3])throw new re;d=this.shiftToModuleCenter(d);const p=d[0],y=d[1],b=d[2],E=d[3];let T=this.transitionsBetween(p,E)+1,M=this.transitionsBetween(b,E)+1;(T&1)===1&&(T+=1),(M&1)===1&&(M+=1),4*T<7*M&&4*M<7*T&&(T=M=Math.max(T,M));let k=or.sampleGrid(this.image,p,y,b,E,T,M);return new mt(k,[p,y,b,E])}static shiftPoint(l,d,p){let y=(d.getX()-l.getX())/(p+1),b=(d.getY()-l.getY())/(p+1);return new Ie(l.getX()+y,l.getY()+b)}static moveAway(l,d,p){let y=l.getX(),b=l.getY();return y<d?y-=1:y+=1,b<p?b-=1:b+=1,new Ie(y,b)}detectSolid1(l){let d=l[0],p=l[1],y=l[3],b=l[2],E=this.transitionsBetween(d,p),T=this.transitionsBetween(p,y),M=this.transitionsBetween(y,b),k=this.transitionsBetween(b,d),$=E,Z=[b,d,p,y];return $>T&&($=T,Z[0]=d,Z[1]=p,Z[2]=y,Z[3]=b),$>M&&($=M,Z[0]=p,Z[1]=y,Z[2]=b,Z[3]=d),$>k&&(Z[0]=y,Z[1]=b,Z[2]=d,Z[3]=p),Z}detectSolid2(l){let d=l[0],p=l[1],y=l[2],b=l[3],E=this.transitionsBetween(d,b),T=or.shiftPoint(p,y,(E+1)*4),M=or.shiftPoint(y,p,(E+1)*4),k=this.transitionsBetween(T,d),$=this.transitionsBetween(M,b);return k<$?(l[0]=d,l[1]=p,l[2]=y,l[3]=b):(l[0]=p,l[1]=y,l[2]=b,l[3]=d),l}correctTopRight(l){let d=l[0],p=l[1],y=l[2],b=l[3],E=this.transitionsBetween(d,b),T=this.transitionsBetween(p,b),M=or.shiftPoint(d,p,(T+1)*4),k=or.shiftPoint(y,p,(E+1)*4);E=this.transitionsBetween(M,b),T=this.transitionsBetween(k,b);let $=new Ie(b.getX()+(y.getX()-p.getX())/(E+1),b.getY()+(y.getY()-p.getY())/(E+1)),Z=new Ie(b.getX()+(d.getX()-p.getX())/(T+1),b.getY()+(d.getY()-p.getY())/(T+1));if(!this.isValid($))return this.isValid(Z)?Z:null;if(!this.isValid(Z))return $;let ne=this.transitionsBetween(M,$)+this.transitionsBetween(k,$),ue=this.transitionsBetween(M,Z)+this.transitionsBetween(k,Z);return ne>ue?$:Z}shiftToModuleCenter(l){let d=l[0],p=l[1],y=l[2],b=l[3],E=this.transitionsBetween(d,b)+1,T=this.transitionsBetween(y,b)+1,M=or.shiftPoint(d,p,T*4),k=or.shiftPoint(y,p,E*4);E=this.transitionsBetween(M,b)+1,T=this.transitionsBetween(k,b)+1,(E&1)===1&&(E+=1),(T&1)===1&&(T+=1);let $=(d.getX()+p.getX()+y.getX()+b.getX())/4,Z=(d.getY()+p.getY()+y.getY()+b.getY())/4;d=or.moveAway(d,$,Z),p=or.moveAway(p,$,Z),y=or.moveAway(y,$,Z),b=or.moveAway(b,$,Z);let ne,ue;return M=or.shiftPoint(d,p,T*4),M=or.shiftPoint(M,b,E*4),ne=or.shiftPoint(p,d,T*4),ne=or.shiftPoint(ne,y,E*4),k=or.shiftPoint(y,b,T*4),k=or.shiftPoint(k,p,E*4),ue=or.shiftPoint(b,y,T*4),ue=or.shiftPoint(ue,d,E*4),[M,ne,k,ue]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,d,p,y,b,E,T){return Ct.getInstance().sampleGrid(l,E,T,.5,.5,E-.5,.5,E-.5,T-.5,.5,T-.5,d.getX(),d.getY(),b.getX(),b.getY(),y.getX(),y.getY(),p.getX(),p.getY())}transitionsBetween(l,d){let p=Math.trunc(l.getX()),y=Math.trunc(l.getY()),b=Math.trunc(d.getX()),E=Math.trunc(d.getY()),T=Math.abs(E-y)>Math.abs(b-p);if(T){let xe=p;p=y,y=xe,xe=b,b=E,E=xe}let M=Math.abs(b-p),k=Math.abs(E-y),$=-M/2,Z=y<E?1:-1,ne=p<b?1:-1,ue=0,me=this.image.get(T?y:p,T?p:y);for(let xe=p,Ne=y;xe!==b;xe+=ne){let qe=this.image.get(T?Ne:xe,T?xe:Ne);if(qe!==me&&(ue++,me=qe),$+=k,$>0){if(Ne===E)break;Ne+=Z,$-=M}}return ue}}class ya{constructor(){this.decoder=new wf}decode(l,d=null){let p,y;if(d!=null&&d.has(G.PURE_BARCODE)){const k=ya.extractPureBits(l.getBlackMatrix());p=this.decoder.decode(k),y=ya.NO_POINTS}else{const k=new or(l.getBlackMatrix()).detect();p=this.decoder.decode(k.getBits()),y=k.getPoints()}const b=p.getRawBytes(),E=new He(p.getText(),b,8*b.length,y,Ye.DATA_MATRIX,O.currentTimeMillis()),T=p.getByteSegments();T!=null&&E.putMetadata(et.BYTE_SEGMENTS,T);const M=p.getECLevel();return M!=null&&E.putMetadata(et.ERROR_CORRECTION_LEVEL,M),E}reset(){}static extractPureBits(l){const d=l.getTopLeftOnBit(),p=l.getBottomRightOnBit();if(d==null||p==null)throw new re;const y=this.moduleSize(d,l);let b=d[1];const E=p[1];let T=d[0];const k=(p[0]-T+1)/y,$=(E-b+1)/y;if(k<=0||$<=0)throw new re;const Z=y/2;b+=Z,T+=Z;const ne=new ge(k,$);for(let ue=0;ue<$;ue++){const me=b+ue*y;for(let xe=0;xe<k;xe++)l.get(T+xe*y,me)&&ne.set(xe,ue)}return ne}static moduleSize(l,d){const p=d.getWidth();let y=l[0];const b=l[1];for(;y<p&&d.get(y,b);)y++;if(y===p)throw new re;const E=y-l[0];if(E===0)throw new re;return E}}ya.NO_POINTS=[];class al extends Ae{constructor(l=500){super(new ya,l)}}var Wi;(function(J){J[J.L=0]="L",J[J.M=1]="M",J[J.Q=2]="Q",J[J.H=3]="H"})(Wi||(Wi={}));class Wt{constructor(l,d,p){this.value=l,this.stringValue=d,this.bits=p,Wt.FOR_BITS.set(p,this),Wt.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return Wt.L;case"M":return Wt.M;case"Q":return Wt.Q;case"H":return Wt.H;default:throw new g(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof Wt))return!1;const d=l;return this.value===d.value}static forBits(l){if(l<0||l>=Wt.FOR_BITS.size)throw new v;return Wt.FOR_BITS.get(l)}}Wt.FOR_BITS=new Map,Wt.FOR_VALUE=new Map,Wt.L=new Wt(Wi.L,"L",1),Wt.M=new Wt(Wi.M,"M",0),Wt.Q=new Wt(Wi.Q,"Q",3),Wt.H=new Wt(Wi.H,"H",2);class _r{constructor(l){this.errorCorrectionLevel=Wt.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,d){return F.bitCount(l^d)}static decodeFormatInformation(l,d){const p=_r.doDecodeFormatInformation(l,d);return p!==null?p:_r.doDecodeFormatInformation(l^_r.FORMAT_INFO_MASK_QR,d^_r.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,d){let p=Number.MAX_SAFE_INTEGER,y=0;for(const b of _r.FORMAT_INFO_DECODE_LOOKUP){const E=b[0];if(E===l||E===d)return new _r(b[1]);let T=_r.numBitsDiffering(l,E);T<p&&(y=b[1],p=T),l!==d&&(T=_r.numBitsDiffering(d,E),T<p&&(y=b[1],p=T))}return p<=3?new _r(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof _r))return!1;const d=l;return this.errorCorrectionLevel===d.errorCorrectionLevel&&this.dataMask===d.dataMask}}_r.FORMAT_INFO_MASK_QR=21522,_r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Me{constructor(l,...d){this.ecCodewordsPerBlock=l,this.ecBlocks=d}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const d=this.ecBlocks;for(const p of d)l+=p.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class oe{constructor(l,d){this.count=l,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xt{constructor(l,d,...p){this.versionNumber=l,this.alignmentPatternCenters=d,this.ecBlocks=p;let y=0;const b=p[0].getECCodewordsPerBlock(),E=p[0].getECBlocks();for(const T of E)y+=T.getCount()*(T.getDataCodewords()+b);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new B;try{return this.getVersionForNumber((l-17)/4)}catch{throw new B}}static getVersionForNumber(l){if(l<1||l>40)throw new v;return xt.VERSIONS[l-1]}static decodeVersionInformation(l){let d=Number.MAX_SAFE_INTEGER,p=0;for(let y=0;y<xt.VERSION_DECODE_INFO.length;y++){const b=xt.VERSION_DECODE_INFO[y];if(b===l)return xt.getVersionForNumber(y+7);const E=_r.numBitsDiffering(l,b);E<d&&(p=y+7,d=E)}return d<=3?xt.getVersionForNumber(p):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),d=new ge(l);d.setRegion(0,0,9,9),d.setRegion(l-8,0,8,9),d.setRegion(0,l-8,9,8);const p=this.alignmentPatternCenters.length;for(let y=0;y<p;y++){const b=this.alignmentPatternCenters[y]-2;for(let E=0;E<p;E++)y===0&&(E===0||E===p-1)||y===p-1&&E===0||d.setRegion(this.alignmentPatternCenters[E]-2,b,5,5)}return d.setRegion(6,9,1,l-17),d.setRegion(9,6,l-17,1),this.versionNumber>6&&(d.setRegion(l-11,0,3,6),d.setRegion(0,l-11,6,3)),d}toString(){return""+this.versionNumber}}xt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),xt.VERSIONS=[new xt(1,new Int32Array(0),new Me(7,new oe(1,19)),new Me(10,new oe(1,16)),new Me(13,new oe(1,13)),new Me(17,new oe(1,9))),new xt(2,Int32Array.from([6,18]),new Me(10,new oe(1,34)),new Me(16,new oe(1,28)),new Me(22,new oe(1,22)),new Me(28,new oe(1,16))),new xt(3,Int32Array.from([6,22]),new Me(15,new oe(1,55)),new Me(26,new oe(1,44)),new Me(18,new oe(2,17)),new Me(22,new oe(2,13))),new xt(4,Int32Array.from([6,26]),new Me(20,new oe(1,80)),new Me(18,new oe(2,32)),new Me(26,new oe(2,24)),new Me(16,new oe(4,9))),new xt(5,Int32Array.from([6,30]),new Me(26,new oe(1,108)),new Me(24,new oe(2,43)),new Me(18,new oe(2,15),new oe(2,16)),new Me(22,new oe(2,11),new oe(2,12))),new xt(6,Int32Array.from([6,34]),new Me(18,new oe(2,68)),new Me(16,new oe(4,27)),new Me(24,new oe(4,19)),new Me(28,new oe(4,15))),new xt(7,Int32Array.from([6,22,38]),new Me(20,new oe(2,78)),new Me(18,new oe(4,31)),new Me(18,new oe(2,14),new oe(4,15)),new Me(26,new oe(4,13),new oe(1,14))),new xt(8,Int32Array.from([6,24,42]),new Me(24,new oe(2,97)),new Me(22,new oe(2,38),new oe(2,39)),new Me(22,new oe(4,18),new oe(2,19)),new Me(26,new oe(4,14),new oe(2,15))),new xt(9,Int32Array.from([6,26,46]),new Me(30,new oe(2,116)),new Me(22,new oe(3,36),new oe(2,37)),new Me(20,new oe(4,16),new oe(4,17)),new Me(24,new oe(4,12),new oe(4,13))),new xt(10,Int32Array.from([6,28,50]),new Me(18,new oe(2,68),new oe(2,69)),new Me(26,new oe(4,43),new oe(1,44)),new Me(24,new oe(6,19),new oe(2,20)),new Me(28,new oe(6,15),new oe(2,16))),new xt(11,Int32Array.from([6,30,54]),new Me(20,new oe(4,81)),new Me(30,new oe(1,50),new oe(4,51)),new Me(28,new oe(4,22),new oe(4,23)),new Me(24,new oe(3,12),new oe(8,13))),new xt(12,Int32Array.from([6,32,58]),new Me(24,new oe(2,92),new oe(2,93)),new Me(22,new oe(6,36),new oe(2,37)),new Me(26,new oe(4,20),new oe(6,21)),new Me(28,new oe(7,14),new oe(4,15))),new xt(13,Int32Array.from([6,34,62]),new Me(26,new oe(4,107)),new Me(22,new oe(8,37),new oe(1,38)),new Me(24,new oe(8,20),new oe(4,21)),new Me(22,new oe(12,11),new oe(4,12))),new xt(14,Int32Array.from([6,26,46,66]),new Me(30,new oe(3,115),new oe(1,116)),new Me(24,new oe(4,40),new oe(5,41)),new Me(20,new oe(11,16),new oe(5,17)),new Me(24,new oe(11,12),new oe(5,13))),new xt(15,Int32Array.from([6,26,48,70]),new Me(22,new oe(5,87),new oe(1,88)),new Me(24,new oe(5,41),new oe(5,42)),new Me(30,new oe(5,24),new oe(7,25)),new Me(24,new oe(11,12),new oe(7,13))),new xt(16,Int32Array.from([6,26,50,74]),new Me(24,new oe(5,98),new oe(1,99)),new Me(28,new oe(7,45),new oe(3,46)),new Me(24,new oe(15,19),new oe(2,20)),new Me(30,new oe(3,15),new oe(13,16))),new xt(17,Int32Array.from([6,30,54,78]),new Me(28,new oe(1,107),new oe(5,108)),new Me(28,new oe(10,46),new oe(1,47)),new Me(28,new oe(1,22),new oe(15,23)),new Me(28,new oe(2,14),new oe(17,15))),new xt(18,Int32Array.from([6,30,56,82]),new Me(30,new oe(5,120),new oe(1,121)),new Me(26,new oe(9,43),new oe(4,44)),new Me(28,new oe(17,22),new oe(1,23)),new Me(28,new oe(2,14),new oe(19,15))),new xt(19,Int32Array.from([6,30,58,86]),new Me(28,new oe(3,113),new oe(4,114)),new Me(26,new oe(3,44),new oe(11,45)),new Me(26,new oe(17,21),new oe(4,22)),new Me(26,new oe(9,13),new oe(16,14))),new xt(20,Int32Array.from([6,34,62,90]),new Me(28,new oe(3,107),new oe(5,108)),new Me(26,new oe(3,41),new oe(13,42)),new Me(30,new oe(15,24),new oe(5,25)),new Me(28,new oe(15,15),new oe(10,16))),new xt(21,Int32Array.from([6,28,50,72,94]),new Me(28,new oe(4,116),new oe(4,117)),new Me(26,new oe(17,42)),new Me(28,new oe(17,22),new oe(6,23)),new Me(30,new oe(19,16),new oe(6,17))),new xt(22,Int32Array.from([6,26,50,74,98]),new Me(28,new oe(2,111),new oe(7,112)),new Me(28,new oe(17,46)),new Me(30,new oe(7,24),new oe(16,25)),new Me(24,new oe(34,13))),new xt(23,Int32Array.from([6,30,54,78,102]),new Me(30,new oe(4,121),new oe(5,122)),new Me(28,new oe(4,47),new oe(14,48)),new Me(30,new oe(11,24),new oe(14,25)),new Me(30,new oe(16,15),new oe(14,16))),new xt(24,Int32Array.from([6,28,54,80,106]),new Me(30,new oe(6,117),new oe(4,118)),new Me(28,new oe(6,45),new oe(14,46)),new Me(30,new oe(11,24),new oe(16,25)),new Me(30,new oe(30,16),new oe(2,17))),new xt(25,Int32Array.from([6,32,58,84,110]),new Me(26,new oe(8,106),new oe(4,107)),new Me(28,new oe(8,47),new oe(13,48)),new Me(30,new oe(7,24),new oe(22,25)),new Me(30,new oe(22,15),new oe(13,16))),new xt(26,Int32Array.from([6,30,58,86,114]),new Me(28,new oe(10,114),new oe(2,115)),new Me(28,new oe(19,46),new oe(4,47)),new Me(28,new oe(28,22),new oe(6,23)),new Me(30,new oe(33,16),new oe(4,17))),new xt(27,Int32Array.from([6,34,62,90,118]),new Me(30,new oe(8,122),new oe(4,123)),new Me(28,new oe(22,45),new oe(3,46)),new Me(30,new oe(8,23),new oe(26,24)),new Me(30,new oe(12,15),new oe(28,16))),new xt(28,Int32Array.from([6,26,50,74,98,122]),new Me(30,new oe(3,117),new oe(10,118)),new Me(28,new oe(3,45),new oe(23,46)),new Me(30,new oe(4,24),new oe(31,25)),new Me(30,new oe(11,15),new oe(31,16))),new xt(29,Int32Array.from([6,30,54,78,102,126]),new Me(30,new oe(7,116),new oe(7,117)),new Me(28,new oe(21,45),new oe(7,46)),new Me(30,new oe(1,23),new oe(37,24)),new Me(30,new oe(19,15),new oe(26,16))),new xt(30,Int32Array.from([6,26,52,78,104,130]),new Me(30,new oe(5,115),new oe(10,116)),new Me(28,new oe(19,47),new oe(10,48)),new Me(30,new oe(15,24),new oe(25,25)),new Me(30,new oe(23,15),new oe(25,16))),new xt(31,Int32Array.from([6,30,56,82,108,134]),new Me(30,new oe(13,115),new oe(3,116)),new Me(28,new oe(2,46),new oe(29,47)),new Me(30,new oe(42,24),new oe(1,25)),new Me(30,new oe(23,15),new oe(28,16))),new xt(32,Int32Array.from([6,34,60,86,112,138]),new Me(30,new oe(17,115)),new Me(28,new oe(10,46),new oe(23,47)),new Me(30,new oe(10,24),new oe(35,25)),new Me(30,new oe(19,15),new oe(35,16))),new xt(33,Int32Array.from([6,30,58,86,114,142]),new Me(30,new oe(17,115),new oe(1,116)),new Me(28,new oe(14,46),new oe(21,47)),new Me(30,new oe(29,24),new oe(19,25)),new Me(30,new oe(11,15),new oe(46,16))),new xt(34,Int32Array.from([6,34,62,90,118,146]),new Me(30,new oe(13,115),new oe(6,116)),new Me(28,new oe(14,46),new oe(23,47)),new Me(30,new oe(44,24),new oe(7,25)),new Me(30,new oe(59,16),new oe(1,17))),new xt(35,Int32Array.from([6,30,54,78,102,126,150]),new Me(30,new oe(12,121),new oe(7,122)),new Me(28,new oe(12,47),new oe(26,48)),new Me(30,new oe(39,24),new oe(14,25)),new Me(30,new oe(22,15),new oe(41,16))),new xt(36,Int32Array.from([6,24,50,76,102,128,154]),new Me(30,new oe(6,121),new oe(14,122)),new Me(28,new oe(6,47),new oe(34,48)),new Me(30,new oe(46,24),new oe(10,25)),new Me(30,new oe(2,15),new oe(64,16))),new xt(37,Int32Array.from([6,28,54,80,106,132,158]),new Me(30,new oe(17,122),new oe(4,123)),new Me(28,new oe(29,46),new oe(14,47)),new Me(30,new oe(49,24),new oe(10,25)),new Me(30,new oe(24,15),new oe(46,16))),new xt(38,Int32Array.from([6,32,58,84,110,136,162]),new Me(30,new oe(4,122),new oe(18,123)),new Me(28,new oe(13,46),new oe(32,47)),new Me(30,new oe(48,24),new oe(14,25)),new Me(30,new oe(42,15),new oe(32,16))),new xt(39,Int32Array.from([6,26,54,82,110,138,166]),new Me(30,new oe(20,117),new oe(4,118)),new Me(28,new oe(40,47),new oe(7,48)),new Me(30,new oe(43,24),new oe(22,25)),new Me(30,new oe(10,15),new oe(67,16))),new xt(40,Int32Array.from([6,30,58,86,114,142,170]),new Me(30,new oe(19,118),new oe(6,119)),new Me(28,new oe(18,47),new oe(31,48)),new Me(30,new oe(34,24),new oe(34,25)),new Me(30,new oe(20,15),new oe(61,16)))];var vr;(function(J){J[J.DATA_MASK_000=0]="DATA_MASK_000",J[J.DATA_MASK_001=1]="DATA_MASK_001",J[J.DATA_MASK_010=2]="DATA_MASK_010",J[J.DATA_MASK_011=3]="DATA_MASK_011",J[J.DATA_MASK_100=4]="DATA_MASK_100",J[J.DATA_MASK_101=5]="DATA_MASK_101",J[J.DATA_MASK_110=6]="DATA_MASK_110",J[J.DATA_MASK_111=7]="DATA_MASK_111"})(vr||(vr={}));class Qr{constructor(l,d){this.value=l,this.isMasked=d}unmaskBitMatrix(l,d){for(let p=0;p<d;p++)for(let y=0;y<d;y++)this.isMasked(p,y)&&l.flip(y,p)}}Qr.values=new Map([[vr.DATA_MASK_000,new Qr(vr.DATA_MASK_000,(J,l)=>(J+l&1)===0)],[vr.DATA_MASK_001,new Qr(vr.DATA_MASK_001,(J,l)=>(J&1)===0)],[vr.DATA_MASK_010,new Qr(vr.DATA_MASK_010,(J,l)=>l%3===0)],[vr.DATA_MASK_011,new Qr(vr.DATA_MASK_011,(J,l)=>(J+l)%3===0)],[vr.DATA_MASK_100,new Qr(vr.DATA_MASK_100,(J,l)=>(Math.floor(J/2)+Math.floor(l/3)&1)===0)],[vr.DATA_MASK_101,new Qr(vr.DATA_MASK_101,(J,l)=>J*l%6===0)],[vr.DATA_MASK_110,new Qr(vr.DATA_MASK_110,(J,l)=>J*l%6<3)],[vr.DATA_MASK_111,new Qr(vr.DATA_MASK_111,(J,l)=>(J+l+J*l%3&1)===0)]]);class xa{constructor(l){const d=l.getHeight();if(d<21||(d&3)!==1)throw new B;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let b=0;b<6;b++)l=this.copyBit(b,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let b=5;b>=0;b--)l=this.copyBit(8,b,l);const d=this.bitMatrix.getHeight();let p=0;const y=d-7;for(let b=d-1;b>=y;b--)p=this.copyBit(8,b,p);for(let b=d-8;b<d;b++)p=this.copyBit(b,8,p);if(this.parsedFormatInfo=_r.decodeFormatInformation(l,p),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),d=Math.floor((l-17)/4);if(d<=6)return xt.getVersionForNumber(d);let p=0;const y=l-11;for(let E=5;E>=0;E--)for(let T=l-9;T>=y;T--)p=this.copyBit(T,E,p);let b=xt.decodeVersionInformation(p);if(b!==null&&b.getDimensionForVersion()===l)return this.parsedVersion=b,b;p=0;for(let E=5;E>=0;E--)for(let T=l-9;T>=y;T--)p=this.copyBit(E,T,p);if(b=xt.decodeVersionInformation(p),b!==null&&b.getDimensionForVersion()===l)return this.parsedVersion=b,b;throw new B}copyBit(l,d,p){return(this.isMirror?this.bitMatrix.get(d,l):this.bitMatrix.get(l,d))?p<<1|1:p<<1}readCodewords(){const l=this.readFormatInformation(),d=this.readVersion(),p=Qr.values.get(l.getDataMask()),y=this.bitMatrix.getHeight();p.unmaskBitMatrix(this.bitMatrix,y);const b=d.buildFunctionPattern();let E=!0;const T=new Uint8Array(d.getTotalCodewords());let M=0,k=0,$=0;for(let Z=y-1;Z>0;Z-=2){Z===6&&Z--;for(let ne=0;ne<y;ne++){const ue=E?y-1-ne:ne;for(let me=0;me<2;me++)b.get(Z-me,ue)||($++,k<<=1,this.bitMatrix.get(Z-me,ue)&&(k|=1),$===8&&(T[M++]=k,$=0,k=0))}E=!E}if(M!==d.getTotalCodewords())throw new B;return T}remask(){if(this.parsedFormatInfo===null)return;const l=Qr.values[this.parsedFormatInfo.getDataMask()],d=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,d)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let d=0,p=l.getWidth();d<p;d++)for(let y=d+1,b=l.getHeight();y<b;y++)l.get(d,y)!==l.get(y,d)&&(l.flip(y,d),l.flip(d,y))}}class cc{constructor(l,d){this.numDataCodewords=l,this.codewords=d}static getDataBlocks(l,d,p){if(l.length!==d.getTotalCodewords())throw new v;const y=d.getECBlocksForLevel(p);let b=0;const E=y.getECBlocks();for(const me of E)b+=me.getCount();const T=new Array(b);let M=0;for(const me of E)for(let xe=0;xe<me.getCount();xe++){const Ne=me.getDataCodewords(),qe=y.getECCodewordsPerBlock()+Ne;T[M++]=new cc(Ne,new Uint8Array(qe))}const k=T[0].codewords.length;let $=T.length-1;for(;$>=0&&T[$].codewords.length!==k;)$--;$++;const Z=k-y.getECCodewordsPerBlock();let ne=0;for(let me=0;me<Z;me++)for(let xe=0;xe<M;xe++)T[xe].codewords[me]=l[ne++];for(let me=$;me<M;me++)T[me].codewords[Z]=l[ne++];const ue=T[0].codewords.length;for(let me=Z;me<ue;me++)for(let xe=0;xe<M;xe++){const Ne=xe<$?me:me+1;T[xe].codewords[Ne]=l[ne++]}return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ti;(function(J){J[J.TERMINATOR=0]="TERMINATOR",J[J.NUMERIC=1]="NUMERIC",J[J.ALPHANUMERIC=2]="ALPHANUMERIC",J[J.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",J[J.BYTE=4]="BYTE",J[J.ECI=5]="ECI",J[J.KANJI=6]="KANJI",J[J.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",J[J.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",J[J.HANZI=9]="HANZI"})(Ti||(Ti={}));class Bt{constructor(l,d,p,y){this.value=l,this.stringValue=d,this.characterCountBitsForVersions=p,this.bits=y,Bt.FOR_BITS.set(y,this),Bt.FOR_VALUE.set(l,this)}static forBits(l){const d=Bt.FOR_BITS.get(l);if(d===void 0)throw new v;return d}getCharacterCountBits(l){const d=l.getVersionNumber();let p;return d<=9?p=0:d<=26?p=1:p=2,this.characterCountBitsForVersions[p]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof Bt))return!1;const d=l;return this.value===d.value}toString(){return this.stringValue}}Bt.FOR_BITS=new Map,Bt.FOR_VALUE=new Map,Bt.TERMINATOR=new Bt(Ti.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Bt.NUMERIC=new Bt(Ti.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Bt.ALPHANUMERIC=new Bt(Ti.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Bt.STRUCTURED_APPEND=new Bt(Ti.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Bt.BYTE=new Bt(Ti.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Bt.ECI=new Bt(Ti.ECI,"ECI",Int32Array.from([0,0,0]),7),Bt.KANJI=new Bt(Ti.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Bt.FNC1_FIRST_POSITION=new Bt(Ti.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Bt.FNC1_SECOND_POSITION=new Bt(Ti.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Bt.HANZI=new Bt(Ti.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Jn{static decode(l,d,p,y){const b=new Ki(l);let E=new K;const T=new Array;let M=-1,k=-1;try{let $=null,Z=!1,ne;do{if(b.available()<4)ne=Bt.TERMINATOR;else{const ue=b.readBits(4);ne=Bt.forBits(ue)}switch(ne){case Bt.TERMINATOR:break;case Bt.FNC1_FIRST_POSITION:case Bt.FNC1_SECOND_POSITION:Z=!0;break;case Bt.STRUCTURED_APPEND:if(b.available()<16)throw new B;M=b.readBits(8),k=b.readBits(8);break;case Bt.ECI:const ue=Jn.parseECIValue(b);if($=V.getCharacterSetECIByValue(ue),$===null)throw new B;break;case Bt.HANZI:const me=b.readBits(4),xe=b.readBits(ne.getCharacterCountBits(d));me===Jn.GB2312_SUBSET&&Jn.decodeHanziSegment(b,E,xe);break;default:const Ne=b.readBits(ne.getCharacterCountBits(d));switch(ne){case Bt.NUMERIC:Jn.decodeNumericSegment(b,E,Ne);break;case Bt.ALPHANUMERIC:Jn.decodeAlphanumericSegment(b,E,Ne,Z);break;case Bt.BYTE:Jn.decodeByteSegment(b,E,Ne,$,T,y);break;case Bt.KANJI:Jn.decodeKanjiSegment(b,E,Ne);break;default:throw new B}break}}while(ne!==Bt.TERMINATOR)}catch{throw new B}return new Be(l,E.toString(),T.length===0?null:T,p===null?null:p.toString(),M,k)}static decodeHanziSegment(l,d,p){if(p*13>l.available())throw new B;const y=new Uint8Array(2*p);let b=0;for(;p>0;){const E=l.readBits(13);let T=E/96<<8&4294967295|E%96;T<959?T+=41377:T+=42657,y[b]=T>>8&255,y[b+1]=T&255,b+=2,p--}try{d.append(Q.decode(y,X.GB2312))}catch(E){throw new B(E)}}static decodeKanjiSegment(l,d,p){if(p*13>l.available())throw new B;const y=new Uint8Array(2*p);let b=0;for(;p>0;){const E=l.readBits(13);let T=E/192<<8&4294967295|E%192;T<7936?T+=33088:T+=49472,y[b]=T>>8,y[b+1]=T,b+=2,p--}try{d.append(Q.decode(y,X.SHIFT_JIS))}catch(E){throw new B(E)}}static decodeByteSegment(l,d,p,y,b,E){if(8*p>l.available())throw new B;const T=new Uint8Array(p);for(let k=0;k<p;k++)T[k]=l.readBits(8);let M;y===null?M=X.guessEncoding(T,E):M=y.getName();try{d.append(Q.decode(T,M))}catch(k){throw new B(k)}b.push(T)}static toAlphaNumericChar(l){if(l>=Jn.ALPHANUMERIC_CHARS.length)throw new B;return Jn.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,d,p,y){const b=d.length();for(;p>1;){if(l.available()<11)throw new B;const E=l.readBits(11);d.append(Jn.toAlphaNumericChar(Math.floor(E/45))),d.append(Jn.toAlphaNumericChar(E%45)),p-=2}if(p===1){if(l.available()<6)throw new B;d.append(Jn.toAlphaNumericChar(l.readBits(6)))}if(y)for(let E=b;E<d.length();E++)d.charAt(E)==="%"&&(E<d.length()-1&&d.charAt(E+1)==="%"?d.deleteCharAt(E+1):d.setCharAt(E,""))}static decodeNumericSegment(l,d,p){for(;p>=3;){if(l.available()<10)throw new B;const y=l.readBits(10);if(y>=1e3)throw new B;d.append(Jn.toAlphaNumericChar(Math.floor(y/100))),d.append(Jn.toAlphaNumericChar(Math.floor(y/10)%10)),d.append(Jn.toAlphaNumericChar(y%10)),p-=3}if(p===2){if(l.available()<7)throw new B;const y=l.readBits(7);if(y>=100)throw new B;d.append(Jn.toAlphaNumericChar(Math.floor(y/10))),d.append(Jn.toAlphaNumericChar(y%10))}else if(p===1){if(l.available()<4)throw new B;const y=l.readBits(4);if(y>=10)throw new B;d.append(Jn.toAlphaNumericChar(y))}}static parseECIValue(l){const d=l.readBits(8);if((d&128)===0)return d&127;if((d&192)===128){const p=l.readBits(8);return(d&63)<<8&4294967295|p}if((d&224)===192){const p=l.readBits(16);return(d&31)<<16&4294967295|p}throw new B}}Jn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Jn.GB2312_SUBSET=1;class vu{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const d=l[0];l[0]=l[2],l[2]=d}}class Ef{constructor(){this.rsDecoder=new he(yt.QR_CODE_FIELD_256)}decodeBooleanArray(l,d){return this.decodeBitMatrix(ge.parseFromBooleanArray(l),d)}decodeBitMatrix(l,d){const p=new xa(l);let y=null;try{return this.decodeBitMatrixParser(p,d)}catch(b){y=b}try{p.remask(),p.setMirror(!0),p.readVersion(),p.readFormatInformation(),p.mirror();const b=this.decodeBitMatrixParser(p,d);return b.setOther(new vu(!0)),b}catch(b){throw y!==null?y:b}}decodeBitMatrixParser(l,d){const p=l.readVersion(),y=l.readFormatInformation().getErrorCorrectionLevel(),b=l.readCodewords(),E=cc.getDataBlocks(b,p,y);let T=0;for(const $ of E)T+=$.getNumDataCodewords();const M=new Uint8Array(T);let k=0;for(const $ of E){const Z=$.getCodewords(),ne=$.getNumDataCodewords();this.correctErrors(Z,ne);for(let ue=0;ue<ne;ue++)M[k++]=Z[ue]}return Jn.decode(M,p,y,d)}correctErrors(l,d){const p=new Int32Array(l);try{this.rsDecoder.decode(p,l.length-d)}catch{throw new N}for(let y=0;y<d;y++)l[y]=p[y]}}class va extends Ie{constructor(l,d,p){super(l,d),this.estimatedModuleSize=p}aboutEquals(l,d,p){if(Math.abs(d-this.getY())<=l&&Math.abs(p-this.getX())<=l){const y=Math.abs(l-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(l,d,p){const y=(this.getX()+d)/2,b=(this.getY()+l)/2,E=(this.estimatedModuleSize+p)/2;return new va(y,b,E)}}class Lr{constructor(l,d,p,y,b,E,T){this.image=l,this.startX=d,this.startY=p,this.width=y,this.height=b,this.moduleSize=E,this.resultPointCallback=T,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,d=this.height,p=this.width,y=l+p,b=this.startY+d/2,E=new Int32Array(3),T=this.image;for(let M=0;M<d;M++){const k=b+((M&1)===0?Math.floor((M+1)/2):-Math.floor((M+1)/2));E[0]=0,E[1]=0,E[2]=0;let $=l;for(;$<y&&!T.get($,k);)$++;let Z=0;for(;$<y;){if(T.get($,k))if(Z===1)E[1]++;else if(Z===2){if(this.foundPatternCross(E)){const ne=this.handlePossibleCenter(E,k,$);if(ne!==null)return ne}E[0]=E[2],E[1]=1,E[2]=0,Z=1}else E[++Z]++;else Z===1&&Z++,E[Z]++;$++}if(this.foundPatternCross(E)){const ne=this.handlePossibleCenter(E,k,y);if(ne!==null)return ne}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(l,d){return d-l[2]-l[1]/2}foundPatternCross(l){const d=this.moduleSize,p=d/2;for(let y=0;y<3;y++)if(Math.abs(d-l[y])>=p)return!1;return!0}crossCheckVertical(l,d,p,y){const b=this.image,E=b.getHeight(),T=this.crossCheckStateCount;T[0]=0,T[1]=0,T[2]=0;let M=l;for(;M>=0&&b.get(d,M)&&T[1]<=p;)T[1]++,M--;if(M<0||T[1]>p)return NaN;for(;M>=0&&!b.get(d,M)&&T[0]<=p;)T[0]++,M--;if(T[0]>p)return NaN;for(M=l+1;M<E&&b.get(d,M)&&T[1]<=p;)T[1]++,M++;if(M===E||T[1]>p)return NaN;for(;M<E&&!b.get(d,M)&&T[2]<=p;)T[2]++,M++;if(T[2]>p)return NaN;const k=T[0]+T[1]+T[2];return 5*Math.abs(k-y)>=2*y?NaN:this.foundPatternCross(T)?Lr.centerFromEnd(T,M):NaN}handlePossibleCenter(l,d,p){const y=l[0]+l[1]+l[2],b=Lr.centerFromEnd(l,p),E=this.crossCheckVertical(d,b,2*l[1],y);if(!isNaN(E)){const T=(l[0]+l[1]+l[2])/3;for(const k of this.possibleCenters)if(k.aboutEquals(T,E,b))return k.combineEstimate(E,b,T);const M=new va(b,E,T);this.possibleCenters.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return null}}class Ko extends Ie{constructor(l,d,p,y){super(l,d),this.estimatedModuleSize=p,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,d,p){if(Math.abs(d-this.getY())<=l&&Math.abs(p-this.getX())<=l){const y=Math.abs(l-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(l,d,p){const y=this.count+1,b=(this.count*this.getX()+d)/y,E=(this.count*this.getY()+l)/y,T=(this.count*this.estimatedModuleSize+p)/y;return new Ko(b,E,T,y)}}class ol{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sr{constructor(l,d){this.image=l,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=d}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const d=l!=null&&l.get(G.TRY_HARDER)!==void 0,p=l!=null&&l.get(G.PURE_BARCODE)!==void 0,y=this.image,b=y.getHeight(),E=y.getWidth();let T=Math.floor(3*b/(4*sr.MAX_MODULES));(T<sr.MIN_SKIP||d)&&(T=sr.MIN_SKIP);let M=!1;const k=new Int32Array(5);for(let Z=T-1;Z<b&&!M;Z+=T){k[0]=0,k[1]=0,k[2]=0,k[3]=0,k[4]=0;let ne=0;for(let ue=0;ue<E;ue++)if(y.get(ue,Z))(ne&1)===1&&ne++,k[ne]++;else if((ne&1)===0)if(ne===4)if(sr.foundPatternCross(k)){if(this.handlePossibleCenter(k,Z,ue,p)===!0)if(T=2,this.hasSkipped===!0)M=this.haveMultiplyConfirmedCenters();else{const xe=this.findRowSkip();xe>k[2]&&(Z+=xe-k[2]-T,ue=E-1)}else{k[0]=k[2],k[1]=k[3],k[2]=k[4],k[3]=1,k[4]=0,ne=3;continue}ne=0,k[0]=0,k[1]=0,k[2]=0,k[3]=0,k[4]=0}else k[0]=k[2],k[1]=k[3],k[2]=k[4],k[3]=1,k[4]=0,ne=3;else k[++ne]++;else k[ne]++;sr.foundPatternCross(k)&&this.handlePossibleCenter(k,Z,E,p)===!0&&(T=k[0],this.hasSkipped&&(M=this.haveMultiplyConfirmedCenters()))}const $=this.selectBestPatterns();return Ie.orderBestPatterns($),new ol($)}static centerFromEnd(l,d){return d-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let d=0;for(let b=0;b<5;b++){const E=l[b];if(E===0)return!1;d+=E}if(d<7)return!1;const p=d/7,y=p/2;return Math.abs(p-l[0])<y&&Math.abs(p-l[1])<y&&Math.abs(3*p-l[2])<3*y&&Math.abs(p-l[3])<y&&Math.abs(p-l[4])<y}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,d,p,y){const b=this.getCrossCheckStateCount();let E=0;const T=this.image;for(;l>=E&&d>=E&&T.get(d-E,l-E);)b[2]++,E++;if(l<E||d<E)return!1;for(;l>=E&&d>=E&&!T.get(d-E,l-E)&&b[1]<=p;)b[1]++,E++;if(l<E||d<E||b[1]>p)return!1;for(;l>=E&&d>=E&&T.get(d-E,l-E)&&b[0]<=p;)b[0]++,E++;if(b[0]>p)return!1;const M=T.getHeight(),k=T.getWidth();for(E=1;l+E<M&&d+E<k&&T.get(d+E,l+E);)b[2]++,E++;if(l+E>=M||d+E>=k)return!1;for(;l+E<M&&d+E<k&&!T.get(d+E,l+E)&&b[3]<p;)b[3]++,E++;if(l+E>=M||d+E>=k||b[3]>=p)return!1;for(;l+E<M&&d+E<k&&T.get(d+E,l+E)&&b[4]<p;)b[4]++,E++;if(b[4]>=p)return!1;const $=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs($-y)<2*y&&sr.foundPatternCross(b)}crossCheckVertical(l,d,p,y){const b=this.image,E=b.getHeight(),T=this.getCrossCheckStateCount();let M=l;for(;M>=0&&b.get(d,M);)T[2]++,M--;if(M<0)return NaN;for(;M>=0&&!b.get(d,M)&&T[1]<=p;)T[1]++,M--;if(M<0||T[1]>p)return NaN;for(;M>=0&&b.get(d,M)&&T[0]<=p;)T[0]++,M--;if(T[0]>p)return NaN;for(M=l+1;M<E&&b.get(d,M);)T[2]++,M++;if(M===E)return NaN;for(;M<E&&!b.get(d,M)&&T[3]<p;)T[3]++,M++;if(M===E||T[3]>=p)return NaN;for(;M<E&&b.get(d,M)&&T[4]<p;)T[4]++,M++;if(T[4]>=p)return NaN;const k=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(k-y)>=2*y?NaN:sr.foundPatternCross(T)?sr.centerFromEnd(T,M):NaN}crossCheckHorizontal(l,d,p,y){const b=this.image,E=b.getWidth(),T=this.getCrossCheckStateCount();let M=l;for(;M>=0&&b.get(M,d);)T[2]++,M--;if(M<0)return NaN;for(;M>=0&&!b.get(M,d)&&T[1]<=p;)T[1]++,M--;if(M<0||T[1]>p)return NaN;for(;M>=0&&b.get(M,d)&&T[0]<=p;)T[0]++,M--;if(T[0]>p)return NaN;for(M=l+1;M<E&&b.get(M,d);)T[2]++,M++;if(M===E)return NaN;for(;M<E&&!b.get(M,d)&&T[3]<p;)T[3]++,M++;if(M===E||T[3]>=p)return NaN;for(;M<E&&b.get(M,d)&&T[4]<p;)T[4]++,M++;if(T[4]>=p)return NaN;const k=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(k-y)>=y?NaN:sr.foundPatternCross(T)?sr.centerFromEnd(T,M):NaN}handlePossibleCenter(l,d,p,y){const b=l[0]+l[1]+l[2]+l[3]+l[4];let E=sr.centerFromEnd(l,p),T=this.crossCheckVertical(d,Math.floor(E),l[2],b);if(!isNaN(T)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(T),l[2],b),!isNaN(E)&&(!y||this.crossCheckDiagonal(Math.floor(T),Math.floor(E),l[2],b)))){const M=b/7;let k=!1;const $=this.possibleCenters;for(let Z=0,ne=$.length;Z<ne;Z++){const ue=$[Z];if(ue.aboutEquals(M,T,E)){$[Z]=ue.combineEstimate(T,E,M),k=!0;break}}if(!k){const Z=new Ko(E,T,M);$.push(Z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let d=null;for(const p of this.possibleCenters)if(p.getCount()>=sr.CENTER_QUORUM)if(d==null)d=p;else return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-p.getX())-Math.abs(d.getY()-p.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,d=0;const p=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=sr.CENTER_QUORUM&&(l++,d+=E.getEstimatedModuleSize());if(l<3)return!1;const y=d/p;let b=0;for(const E of this.possibleCenters)b+=Math.abs(E.getEstimatedModuleSize()-y);return b<=.05*d}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new re;const d=this.possibleCenters;let p;if(l>3){let y=0,b=0;for(const M of this.possibleCenters){const k=M.getEstimatedModuleSize();y+=k,b+=k*k}p=y/l;let E=Math.sqrt(b/l-p*p);d.sort((M,k)=>{const $=Math.abs(k.getEstimatedModuleSize()-p),Z=Math.abs(M.getEstimatedModuleSize()-p);return $<Z?-1:$>Z?1:0});const T=Math.max(.2*p,E);for(let M=0;M<d.length&&d.length>3;M++){const k=d[M];Math.abs(k.getEstimatedModuleSize()-p)>T&&(d.splice(M,1),M--)}}if(d.length>3){let y=0;for(const b of d)y+=b.getEstimatedModuleSize();p=y/d.length,d.sort((b,E)=>{if(E.getCount()===b.getCount()){const T=Math.abs(E.getEstimatedModuleSize()-p),M=Math.abs(b.getEstimatedModuleSize()-p);return T<M?1:T>M?-1:0}else return E.getCount()-b.getCount()}),d.splice(3)}return[d[0],d[1],d[2]]}}sr.CENTER_QUORUM=2,sr.MIN_SKIP=3,sr.MAX_MODULES=57;class mi{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get(G.NEED_RESULT_POINT_CALLBACK);const p=new sr(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(p)}processFinderPatternInfo(l){const d=l.getTopLeft(),p=l.getTopRight(),y=l.getBottomLeft(),b=this.calculateModuleSize(d,p,y);if(b<1)throw new re("No pattern found in proccess finder.");const E=mi.computeDimension(d,p,y,b),T=xt.getProvisionalVersionForDimension(E),M=T.getDimensionForVersion()-7;let k=null;if(T.getAlignmentPatternCenters().length>0){const ue=p.getX()-d.getX()+y.getX(),me=p.getY()-d.getY()+y.getY(),xe=1-3/M,Ne=Math.floor(d.getX()+xe*(ue-d.getX())),qe=Math.floor(d.getY()+xe*(me-d.getY()));for(let ft=4;ft<=16;ft<<=1)try{k=this.findAlignmentInRegion(b,Ne,qe,ft);break}catch(ut){if(!(ut instanceof re))throw ut}}const $=mi.createTransform(d,p,y,k,E),Z=mi.sampleGrid(this.image,$,E);let ne;return k===null?ne=[y,d,p]:ne=[y,d,p,k],new mt(Z,ne)}static createTransform(l,d,p,y,b){const E=b-3.5;let T,M,k,$;return y!==null?(T=y.getX(),M=y.getY(),k=E-3,$=k):(T=d.getX()-l.getX()+p.getX(),M=d.getY()-l.getY()+p.getY(),k=E,$=E),st.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,k,$,3.5,E,l.getX(),l.getY(),d.getX(),d.getY(),T,M,p.getX(),p.getY())}static sampleGrid(l,d,p){return Ct.getInstance().sampleGridWithTransform(l,p,p,d)}static computeDimension(l,d,p,y){const b=We.round(Ie.distance(l,d)/y),E=We.round(Ie.distance(l,p)/y);let T=Math.floor((b+E)/2)+7;switch(T&3){case 0:T++;break;case 2:T--;break;case 3:throw new re("Dimensions could be not found.")}return T}calculateModuleSize(l,d,p){return(this.calculateModuleSizeOneWay(l,d)+this.calculateModuleSizeOneWay(l,p))/2}calculateModuleSizeOneWay(l,d){const p=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(d.getX()),Math.floor(d.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(p)?y/7:isNaN(y)?p/7:(p+y)/14}sizeOfBlackWhiteBlackRunBothWays(l,d,p,y){let b=this.sizeOfBlackWhiteBlackRun(l,d,p,y),E=1,T=l-(p-l);T<0?(E=l/(l-T),T=0):T>=this.image.getWidth()&&(E=(this.image.getWidth()-1-l)/(T-l),T=this.image.getWidth()-1);let M=Math.floor(d-(y-d)*E);return E=1,M<0?(E=d/(d-M),M=0):M>=this.image.getHeight()&&(E=(this.image.getHeight()-1-d)/(M-d),M=this.image.getHeight()-1),T=Math.floor(l+(T-l)*E),b+=this.sizeOfBlackWhiteBlackRun(l,d,T,M),b-1}sizeOfBlackWhiteBlackRun(l,d,p,y){const b=Math.abs(y-d)>Math.abs(p-l);if(b){let ue=l;l=d,d=ue,ue=p,p=y,y=ue}const E=Math.abs(p-l),T=Math.abs(y-d);let M=-E/2;const k=l<p?1:-1,$=d<y?1:-1;let Z=0;const ne=p+k;for(let ue=l,me=d;ue!==ne;ue+=k){const xe=b?me:ue,Ne=b?ue:me;if(Z===1===this.image.get(xe,Ne)){if(Z===2)return We.distance(ue,me,l,d);Z++}if(M+=T,M>0){if(me===y)break;me+=$,M-=E}}return Z===2?We.distance(p+k,y,l,d):NaN}findAlignmentInRegion(l,d,p,y){const b=Math.floor(y*l),E=Math.max(0,d-b),T=Math.min(this.image.getWidth()-1,d+b);if(T-E<l*3)throw new re("Alignment top exceeds estimated module size.");const M=Math.max(0,p-b),k=Math.min(this.image.getHeight()-1,p+b);if(k-M<l*3)throw new re("Alignment bottom exceeds estimated module size.");return new Lr(this.image,E,M,T-E,k-M,l,this.resultPointCallback).find()}}class ja{constructor(){this.decoder=new Ef}getDecoder(){return this.decoder}decode(l,d){let p,y;if(d!=null&&d.get(G.PURE_BARCODE)!==void 0){const M=ja.extractPureBits(l.getBlackMatrix());p=this.decoder.decodeBitMatrix(M,d),y=ja.NO_POINTS}else{const M=new mi(l.getBlackMatrix()).detect(d);p=this.decoder.decodeBitMatrix(M.getBits(),d),y=M.getPoints()}p.getOther()instanceof vu&&p.getOther().applyMirroredCorrection(y);const b=new He(p.getText(),p.getRawBytes(),void 0,y,Ye.QR_CODE,void 0),E=p.getByteSegments();E!==null&&b.putMetadata(et.BYTE_SEGMENTS,E);const T=p.getECLevel();return T!==null&&b.putMetadata(et.ERROR_CORRECTION_LEVEL,T),p.hasStructuredAppend()&&(b.putMetadata(et.STRUCTURED_APPEND_SEQUENCE,p.getStructuredAppendSequenceNumber()),b.putMetadata(et.STRUCTURED_APPEND_PARITY,p.getStructuredAppendParity())),b}reset(){}static extractPureBits(l){const d=l.getTopLeftOnBit(),p=l.getBottomRightOnBit();if(d===null||p===null)throw new re;const y=this.moduleSize(d,l);let b=d[1],E=p[1],T=d[0],M=p[0];if(T>=M||b>=E)throw new re;if(E-b!==M-T&&(M=T+(E-b),M>=l.getWidth()))throw new re;const k=Math.round((M-T+1)/y),$=Math.round((E-b+1)/y);if(k<=0||$<=0)throw new re;if($!==k)throw new re;const Z=Math.floor(y/2);b+=Z,T+=Z;const ne=T+Math.floor((k-1)*y)-M;if(ne>0){if(ne>Z)throw new re;T-=ne}const ue=b+Math.floor(($-1)*y)-E;if(ue>0){if(ue>Z)throw new re;b-=ue}const me=new ge(k,$);for(let xe=0;xe<$;xe++){const Ne=b+Math.floor(xe*y);for(let qe=0;qe<k;qe++)l.get(T+Math.floor(qe*y),Ne)&&me.set(qe,xe)}return me}static moduleSize(l,d){const p=d.getHeight(),y=d.getWidth();let b=l[0],E=l[1],T=!0,M=0;for(;b<y&&E<p;){if(T!==d.get(b,E)){if(++M===5)break;T=!T}b++,E++}if(b===y||E===p)throw new re;return(b-l[0])/7}}ja.NO_POINTS=new Array;class Vt{PDF417Common(){}static getBitCountSum(l){return We.sum(l)}static toIntArray(l){if(l==null||!l.length)return Vt.EMPTY_INT_ARRAY;const d=new Int32Array(l.length);let p=0;for(const y of l)d[p++]=y;return d}static getCodeword(l){const d=U.binarySearch(Vt.SYMBOL_TABLE,l&262143);return d<0?-1:(Vt.CODEWORD_TABLE[d]-1)%Vt.NUMBER_OF_CODEWORDS}}Vt.NUMBER_OF_CODEWORDS=929,Vt.MAX_CODEWORDS_IN_BARCODE=Vt.NUMBER_OF_CODEWORDS-1,Vt.MIN_ROWS_IN_BARCODE=3,Vt.MAX_ROWS_IN_BARCODE=90,Vt.MODULES_IN_CODEWORD=17,Vt.MODULES_IN_STOP_PATTERN=18,Vt.BARS_IN_MODULE=8,Vt.EMPTY_INT_ARRAY=new Int32Array([]),Vt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Vt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class bu{constructor(l,d){this.bits=l,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class Ft{static detectMultiple(l,d,p){let y=l.getBlackMatrix(),b=Ft.detect(p,y);return b.length||(y=y.clone(),y.rotate180(),b=Ft.detect(p,y)),new bu(y,b)}static detect(l,d){const p=new Array;let y=0,b=0,E=!1;for(;y<d.getHeight();){const T=Ft.findVertices(d,y,b);if(T[0]==null&&T[3]==null){if(!E)break;E=!1,b=0;for(const M of p)M[1]!=null&&(y=Math.trunc(Math.max(y,M[1].getY()))),M[3]!=null&&(y=Math.max(y,Math.trunc(M[3].getY())));y+=Ft.ROW_STEP;continue}if(E=!0,p.push(T),!l)break;T[2]!=null?(b=Math.trunc(T[2].getX()),y=Math.trunc(T[2].getY())):(b=Math.trunc(T[4].getX()),y=Math.trunc(T[4].getY()))}return p}static findVertices(l,d,p){const y=l.getHeight(),b=l.getWidth(),E=new Array(8);return Ft.copyToResult(E,Ft.findRowsWithPattern(l,y,b,d,p,Ft.START_PATTERN),Ft.INDEXES_START_PATTERN),E[4]!=null&&(p=Math.trunc(E[4].getX()),d=Math.trunc(E[4].getY())),Ft.copyToResult(E,Ft.findRowsWithPattern(l,y,b,d,p,Ft.STOP_PATTERN),Ft.INDEXES_STOP_PATTERN),E}static copyToResult(l,d,p){for(let y=0;y<p.length;y++)l[p[y]]=d[y]}static findRowsWithPattern(l,d,p,y,b,E){const T=new Array(4);let M=!1;const k=new Int32Array(E.length);for(;y<d;y+=Ft.ROW_STEP){let Z=Ft.findGuardPattern(l,b,y,p,!1,E,k);if(Z!=null){for(;y>0;){const ne=Ft.findGuardPattern(l,b,--y,p,!1,E,k);if(ne!=null)Z=ne;else{y++;break}}T[0]=new Ie(Z[0],y),T[1]=new Ie(Z[1],y),M=!0;break}}let $=y+1;if(M){let Z=0,ne=Int32Array.from([Math.trunc(T[0].getX()),Math.trunc(T[1].getX())]);for(;$<d;$++){const ue=Ft.findGuardPattern(l,ne[0],$,p,!1,E,k);if(ue!=null&&Math.abs(ne[0]-ue[0])<Ft.MAX_PATTERN_DRIFT&&Math.abs(ne[1]-ue[1])<Ft.MAX_PATTERN_DRIFT)ne=ue,Z=0;else{if(Z>Ft.SKIPPED_ROW_COUNT_MAX)break;Z++}}$-=Z+1,T[2]=new Ie(ne[0],$),T[3]=new Ie(ne[1],$)}return $-y<Ft.BARCODE_MIN_HEIGHT&&U.fill(T,null),T}static findGuardPattern(l,d,p,y,b,E,T){U.fillWithin(T,0,T.length,0);let M=d,k=0;for(;l.get(M,p)&&M>0&&k++<Ft.MAX_PIXEL_DRIFT;)M--;let $=M,Z=0,ne=E.length;for(let ue=b;$<y;$++)if(l.get($,p)!==ue)T[Z]++;else{if(Z===ne-1){if(Ft.patternMatchVariance(T,E,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE)return new Int32Array([M,$]);M+=T[0]+T[1],O.arraycopy(T,2,T,0,Z-1),T[Z-1]=0,T[Z]=0,Z--}else Z++;T[Z]=1,ue=!ue}return Z===ne-1&&Ft.patternMatchVariance(T,E,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE?new Int32Array([M,$-1]):null}static patternMatchVariance(l,d,p){let y=l.length,b=0,E=0;for(let k=0;k<y;k++)b+=l[k],E+=d[k];if(b<E)return 1/0;let T=b/E;p*=T;let M=0;for(let k=0;k<y;k++){let $=l[k],Z=d[k]*T,ne=$>Z?$-Z:Z-$;if(ne>p)return 1/0;M+=ne}return M/b}}Ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ft.MAX_AVG_VARIANCE=.42,Ft.MAX_INDIVIDUAL_VARIANCE=.8,Ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ft.MAX_PIXEL_DRIFT=3,Ft.MAX_PATTERN_DRIFT=5,Ft.SKIPPED_ROW_COUNT_MAX=25,Ft.ROW_STEP=5,Ft.BARCODE_MIN_HEIGHT=10;class Zn{constructor(l,d){if(d.length===0)throw new v;this.field=l;let p=d.length;if(p>1&&d[0]===0){let y=1;for(;y<p&&d[y]===0;)y++;y===p?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(p-y),O.arraycopy(d,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let y=0;for(let b of this.coefficients)y=this.field.add(y,b);return y}let d=this.coefficients[0],p=this.coefficients.length;for(let y=1;y<p;y++)d=this.field.add(this.field.multiply(l,d),this.coefficients[y]);return d}add(l){if(!this.field.equals(l.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let d=this.coefficients,p=l.coefficients;if(d.length>p.length){let E=d;d=p,p=E}let y=new Int32Array(p.length),b=p.length-d.length;O.arraycopy(p,0,y,0,b);for(let E=b;E<p.length;E++)y[E]=this.field.add(d[E-b],p[E]);return new Zn(this.field,y)}subtract(l){if(!this.field.equals(l.field))throw new v("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof Zn?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new Zn(this.field,new Int32Array([0]));let d=this.coefficients,p=d.length,y=l.coefficients,b=y.length,E=new Int32Array(p+b-1);for(let T=0;T<p;T++){let M=d[T];for(let k=0;k<b;k++)E[T+k]=this.field.add(E[T+k],this.field.multiply(M,y[k]))}return new Zn(this.field,E)}negative(){let l=this.coefficients.length,d=new Int32Array(l);for(let p=0;p<l;p++)d[p]=this.field.subtract(0,this.coefficients[p]);return new Zn(this.field,d)}multiplyScalar(l){if(l===0)return new Zn(this.field,new Int32Array([0]));if(l===1)return this;let d=this.coefficients.length,p=new Int32Array(d);for(let y=0;y<d;y++)p[y]=this.field.multiply(this.coefficients[y],l);return new Zn(this.field,p)}multiplyByMonomial(l,d){if(l<0)throw new v;if(d===0)return new Zn(this.field,new Int32Array([0]));let p=this.coefficients.length,y=new Int32Array(p+l);for(let b=0;b<p;b++)y[b]=this.field.multiply(this.coefficients[b],d);return new Zn(this.field,y)}toString(){let l=new K;for(let d=this.getDegree();d>=0;d--){let p=this.getCoefficient(d);p!==0&&(p<0?(l.append(" - "),p=-p):l.length()>0&&l.append(" + "),(d===0||p!==1)&&l.append(p),d!==0&&(d===1?l.append("x"):(l.append("x^"),l.append(d))))}return l.toString()}}class uc{add(l,d){return(l+d)%this.modulus}subtract(l,d){return(this.modulus+l-d)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new v;return this.logTable[l]}inverse(l){if(l===0)throw new je;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,d){return l===0||d===0?0:this.expTable[(this.logTable[l]+this.logTable[d])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class ba extends uc{constructor(l,d){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let p=1;for(let y=0;y<l;y++)this.expTable[y]=p,p=p*d%l;for(let y=0;y<l-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new Zn(this,new Int32Array([0])),this.one=new Zn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,d){if(l<0)throw new v;if(d===0)return this.zero;let p=new Int32Array(l+1);return p[0]=d,new Zn(this,p)}}ba.PDF417_GF=new ba(Vt.NUMBER_OF_CODEWORDS,3);class Xi{constructor(){this.field=ba.PDF417_GF}decode(l,d,p){let y=new Zn(this.field,l),b=new Int32Array(d),E=!1;for(let me=d;me>0;me--){let xe=y.evaluateAt(this.field.exp(me));b[d-me]=xe,xe!==0&&(E=!0)}if(!E)return 0;let T=this.field.getOne();if(p!=null)for(const me of p){let xe=this.field.exp(l.length-1-me),Ne=new Zn(this.field,new Int32Array([this.field.subtract(0,xe),1]));T=T.multiply(Ne)}let M=new Zn(this.field,b),k=this.runEuclideanAlgorithm(this.field.buildMonomial(d,1),M,d),$=k[0],Z=k[1],ne=this.findErrorLocations($),ue=this.findErrorMagnitudes(Z,$,ne);for(let me=0;me<ne.length;me++){let xe=l.length-1-this.field.log(ne[me]);if(xe<0)throw N.getChecksumInstance();l[xe]=this.field.subtract(l[xe],ue[me])}return ne.length}runEuclideanAlgorithm(l,d,p){if(l.getDegree()<d.getDegree()){let ne=l;l=d,d=ne}let y=l,b=d,E=this.field.getZero(),T=this.field.getOne();for(;b.getDegree()>=Math.round(p/2);){let ne=y,ue=E;if(y=b,E=T,y.isZero())throw N.getChecksumInstance();b=ne;let me=this.field.getZero(),xe=y.getCoefficient(y.getDegree()),Ne=this.field.inverse(xe);for(;b.getDegree()>=y.getDegree()&&!b.isZero();){let qe=b.getDegree()-y.getDegree(),ft=this.field.multiply(b.getCoefficient(b.getDegree()),Ne);me=me.add(this.field.buildMonomial(qe,ft)),b=b.subtract(y.multiplyByMonomial(qe,ft))}T=me.multiply(E).subtract(ue).negative()}let M=T.getCoefficient(0);if(M===0)throw N.getChecksumInstance();let k=this.field.inverse(M),$=T.multiply(k),Z=b.multiply(k);return[$,Z]}findErrorLocations(l){let d=l.getDegree(),p=new Int32Array(d),y=0;for(let b=1;b<this.field.getSize()&&y<d;b++)l.evaluateAt(b)===0&&(p[y]=this.field.inverse(b),y++);if(y!==d)throw N.getChecksumInstance();return p}findErrorMagnitudes(l,d,p){let y=d.getDegree(),b=new Int32Array(y);for(let k=1;k<=y;k++)b[y-k]=this.field.multiply(k,d.getCoefficient(k));let E=new Zn(this.field,b),T=p.length,M=new Int32Array(T);for(let k=0;k<T;k++){let $=this.field.inverse(p[k]),Z=this.field.subtract(0,l.evaluateAt($)),ne=this.field.inverse(E.evaluateAt($));M[k]=this.field.multiply(Z,ne)}return M}}class wa{constructor(l,d,p,y,b){l instanceof wa?this.constructor_2(l):this.constructor_1(l,d,p,y,b)}constructor_1(l,d,p,y,b){const E=d==null||p==null,T=y==null||b==null;if(E&&T)throw new re;E?(d=new Ie(0,y.getY()),p=new Ie(0,b.getY())):T&&(y=new Ie(l.getWidth()-1,d.getY()),b=new Ie(l.getWidth()-1,p.getY())),this.image=l,this.topLeft=d,this.bottomLeft=p,this.topRight=y,this.bottomRight=b,this.minX=Math.trunc(Math.min(d.getX(),p.getX())),this.maxX=Math.trunc(Math.max(y.getX(),b.getX())),this.minY=Math.trunc(Math.min(d.getY(),y.getY())),this.maxY=Math.trunc(Math.max(p.getY(),b.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,d){return l==null?d:d==null?l:new wa(l.image,l.topLeft,l.bottomLeft,d.topRight,d.bottomRight)}addMissingRows(l,d,p){let y=this.topLeft,b=this.bottomLeft,E=this.topRight,T=this.bottomRight;if(l>0){let M=p?this.topLeft:this.topRight,k=Math.trunc(M.getY()-l);k<0&&(k=0);let $=new Ie(M.getX(),k);p?y=$:E=$}if(d>0){let M=p?this.bottomLeft:this.bottomRight,k=Math.trunc(M.getY()+d);k>=this.image.getHeight()&&(k=this.image.getHeight()-1);let $=new Ie(M.getX(),k);p?b=$:T=$}return new wa(this.image,y,b,E,T)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ao{constructor(l,d,p,y){this.columnCount=l,this.errorCorrectionLevel=y,this.rowCountUpperPart=d,this.rowCountLowerPart=p,this.rowCount=d+p}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ea{constructor(){this.buffer=""}static form(l,d){let p=-1;function y(E,T,M,k,$,Z){if(E==="%%")return"%";if(d[++p]===void 0)return;E=k?parseInt(k.substr(1)):void 0;let ne=$?parseInt($.substr(1)):void 0,ue;switch(Z){case"s":ue=d[p];break;case"c":ue=d[p][0];break;case"f":ue=parseFloat(d[p]).toFixed(E);break;case"p":ue=parseFloat(d[p]).toPrecision(E);break;case"e":ue=parseFloat(d[p]).toExponential(E);break;case"x":ue=parseInt(d[p]).toString(ne||16);break;case"d":ue=parseFloat(parseInt(d[p],ne||10).toPrecision(E)).toFixed(0);break}ue=typeof ue=="object"?JSON.stringify(ue):(+ue).toString(ne);let me=parseInt(M),xe=M&&M[0]+""=="0"?"0":" ";for(;ue.length<me;)ue=T!==void 0?ue+xe:xe+ue;return ue}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(b,y)}format(l,...d){this.buffer+=Ea.form(l,d)}toString(){return this.buffer}}class Ua{constructor(l){this.boundingBox=new wa(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let d=this.getCodeword(l);if(d!=null)return d;for(let p=1;p<Ua.MAX_NEARBY_DISTANCE;p++){let y=this.imageRowToCodewordIndex(l)-p;if(y>=0&&(d=this.codewords[y],d!=null)||(y=this.imageRowToCodewordIndex(l)+p,y<this.codewords.length&&(d=this.codewords[y],d!=null)))return d}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,d){this.codewords[this.imageRowToCodewordIndex(l)]=d}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new Ea;let d=0;for(const p of this.codewords){if(p==null){l.format("%3d:    |   %n",d++);continue}l.format("%3d: %3d|%3d%n",d++,p.getRowNumber(),p.getValue())}return l.toString()}}Ua.MAX_NEARBY_DISTANCE=5;class _a{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let d=this.values.get(l);d==null&&(d=0),d++,this.values.set(l,d)}getValue(){let l=-1,d=new Array;for(const[p,y]of this.values.entries()){const b={getKey:()=>p,getValue:()=>y};b.getValue()>l?(l=b.getValue(),d=[],d.push(b.getKey())):b.getValue()===l&&d.push(b.getKey())}return Vt.toIntArray(d)}getConfidence(l){return this.values.get(l)}}class lr extends Ua{constructor(l,d){super(l),this._isLeft=d}setRowNumbers(){for(let l of this.getCodewords())l!=null&&l.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let d=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(d,l);let p=this.getBoundingBox(),y=this._isLeft?p.getTopLeft():p.getTopRight(),b=this._isLeft?p.getBottomLeft():p.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=this.imageRowToCodewordIndex(Math.trunc(b.getY())),M=-1,k=1,$=0;for(let Z=E;Z<T;Z++){if(d[Z]==null)continue;let ne=d[Z],ue=ne.getRowNumber()-M;if(ue===0)$++;else if(ue===1)k=Math.max(k,$),$=1,M=ne.getRowNumber();else if(ue<0||ne.getRowNumber()>=l.getRowCount()||ue>Z)d[Z]=null;else{let me;k>2?me=(k-2)*ue:me=ue;let xe=me>=Z;for(let Ne=1;Ne<=me&&!xe;Ne++)xe=d[Z-Ne]!=null;xe?d[Z]=null:(M=ne.getRowNumber(),$=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let d=new Int32Array(l.getRowCount());for(let p of this.getCodewords())if(p!=null){let y=p.getRowNumber();if(y>=d.length)continue;d[y]++}return d}adjustIncompleteIndicatorColumnRowNumbers(l){let d=this.getBoundingBox(),p=this._isLeft?d.getTopLeft():d.getTopRight(),y=this._isLeft?d.getBottomLeft():d.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(p.getY())),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=this.getCodewords(),M=-1;for(let k=b;k<E;k++){if(T[k]==null)continue;let $=T[k];$.setRowNumberAsRowIndicatorColumn();let Z=$.getRowNumber()-M;Z===0||(Z===1?M=$.getRowNumber():$.getRowNumber()>=l.getRowCount()?T[k]=null:M=$.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),d=new _a,p=new _a,y=new _a,b=new _a;for(let T of l){if(T==null)continue;T.setRowNumberAsRowIndicatorColumn();let M=T.getValue()%30,k=T.getRowNumber();switch(this._isLeft||(k+=2),k%3){case 0:p.setValue(M*3+1);break;case 1:b.setValue(M/3),y.setValue(M%3);break;case 2:d.setValue(M+1);break}}if(d.getValue().length===0||p.getValue().length===0||y.getValue().length===0||b.getValue().length===0||d.getValue()[0]<1||p.getValue()[0]+y.getValue()[0]<Vt.MIN_ROWS_IN_BARCODE||p.getValue()[0]+y.getValue()[0]>Vt.MAX_ROWS_IN_BARCODE)return null;let E=new ao(d.getValue()[0],p.getValue()[0],y.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(l,E),E}removeIncorrectCodewords(l,d){for(let p=0;p<l.length;p++){let y=l[p];if(l[p]==null)continue;let b=y.getValue()%30,E=y.getRowNumber();if(E>d.getRowCount()){l[p]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:b*3+1!==d.getRowCountUpperPart()&&(l[p]=null);break;case 1:(Math.trunc(b/3)!==d.getErrorCorrectionLevel()||b%3!==d.getRowCountLowerPart())&&(l[p]=null);break;case 2:b+1!==d.getColumnCount()&&(l[p]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qr{constructor(l,d){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=d,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=Vt.MAX_CODEWORDS_IN_BARCODE,d;do d=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<d);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l!=null&&l.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let d=1;d<this.barcodeColumnCount+1;d++){let p=this.detectionResultColumns[d].getCodewords();for(let y=0;y<p.length;y++)p[y]!=null&&(p[y].hasValidRowNumber()||this.adjustRowNumbers(d,y,p))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let p=0;p<l.length;p++)if(l[p]!=null&&d[p]!=null&&l[p].getRowNumber()===d[p].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let b=this.detectionResultColumns[y].getCodewords()[p];b!=null&&(b.setRowNumber(l[p].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[p]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let p=0;p<d.length;p++){if(d[p]==null)continue;let y=d[p].getRowNumber(),b=0;for(let E=this.barcodeColumnCount+1;E>0&&b<this.ADJUST_ROW_NUMBER_SKIP;E--){let T=this.detectionResultColumns[E].getCodewords()[p];T!=null&&(b=qr.adjustRowNumberIfValid(y,b,T),T.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,d=this.detectionResultColumns[0].getCodewords();for(let p=0;p<d.length;p++){if(d[p]==null)continue;let y=d[p].getRowNumber(),b=0;for(let E=1;E<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;E++){let T=this.detectionResultColumns[E].getCodewords()[p];T!=null&&(b=qr.adjustRowNumberIfValid(y,b,T),T.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,d,p){return p==null||p.hasValidRowNumber()||(p.isValidRowNumber(l)?(p.setRowNumber(l),d=0):++d),d}adjustRowNumbers(l,d,p){if(!this.detectionResultColumns[l-1])return;let y=p[d],b=this.detectionResultColumns[l-1].getCodewords(),E=b;this.detectionResultColumns[l+1]!=null&&(E=this.detectionResultColumns[l+1].getCodewords());let T=new Array(14);T[2]=b[d],T[3]=E[d],d>0&&(T[0]=p[d-1],T[4]=b[d-1],T[5]=E[d-1]),d>1&&(T[8]=p[d-2],T[10]=b[d-2],T[11]=E[d-2]),d<p.length-1&&(T[1]=p[d+1],T[6]=b[d+1],T[7]=E[d+1]),d<p.length-2&&(T[9]=p[d+2],T[12]=b[d+2],T[13]=E[d+2]);for(let M of T)if(qr.adjustRowNumber(y,M))return}static adjustRowNumber(l,d){return d==null?!1:d.hasValidRowNumber()&&d.getBucket()===l.getBucket()?(l.setRowNumber(d.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,d){this.detectionResultColumns[l]=d}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let d=new Ea;for(let p=0;p<l.getCodewords().length;p++){d.format("CW %3d:",p);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){d.format("    |   ");continue}let b=this.detectionResultColumns[y].getCodewords()[p];if(b==null){d.format("    |   ");continue}d.format(" %3d|%3d",b.getRowNumber(),b.getValue())}d.format("%n")}return d.toString()}}class oa{constructor(l,d,p,y){this.rowNumber=oa.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(d),this.bucket=Math.trunc(p),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==oa.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}oa.BARCODE_ROW_UNKNOWN=-1;class zr{static initialize(){for(let l=0;l<Vt.SYMBOL_TABLE.length;l++){let d=Vt.SYMBOL_TABLE[l],p=d&1;for(let y=0;y<Vt.BARS_IN_MODULE;y++){let b=0;for(;(d&1)===p;)b+=1,d>>=1;p=d&1,zr.RATIOS_TABLE[l]||(zr.RATIOS_TABLE[l]=new Array(Vt.BARS_IN_MODULE)),zr.RATIOS_TABLE[l][Vt.BARS_IN_MODULE-y-1]=Math.fround(b/Vt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let d=zr.getDecodedCodewordValue(zr.sampleBitCounts(l));return d!==-1?d:zr.getClosestDecodedValue(l)}static sampleBitCounts(l){let d=We.sum(l),p=new Int32Array(Vt.BARS_IN_MODULE),y=0,b=0;for(let E=0;E<Vt.MODULES_IN_CODEWORD;E++){let T=d/(2*Vt.MODULES_IN_CODEWORD)+E*d/Vt.MODULES_IN_CODEWORD;b+l[y]<=T&&(b+=l[y],y++),p[y]++}return p}static getDecodedCodewordValue(l){let d=zr.getBitValue(l);return Vt.getCodeword(d)===-1?-1:d}static getBitValue(l){let d=0;for(let p=0;p<l.length;p++)for(let y=0;y<l[p];y++)d=d<<1|(p%2===0?1:0);return Math.trunc(d)}static getClosestDecodedValue(l){let d=We.sum(l),p=new Array(Vt.BARS_IN_MODULE);if(d>1)for(let E=0;E<p.length;E++)p[E]=Math.fround(l[E]/d);let y=ye.MAX_VALUE,b=-1;this.bSymbolTableReady||zr.initialize();for(let E=0;E<zr.RATIOS_TABLE.length;E++){let T=0,M=zr.RATIOS_TABLE[E];for(let k=0;k<Vt.BARS_IN_MODULE;k++){let $=Math.fround(M[k]-p[k]);if(T+=Math.fround($*$),T>=y)break}T<y&&(y=T,b=Vt.SYMBOL_TABLE[E])}return b}}zr.bSymbolTableReady=!1,zr.RATIOS_TABLE=new Array(Vt.SYMBOL_TABLE.length).map(J=>new Array(Vt.BARS_IN_MODULE));class No{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class dc{static parseLong(l,d=void 0){return parseInt(l,d)}}class Ro extends f{}Ro.kind="NullPointerException";class sl{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,d,p){if(l==null)throw new Ro;if(d<0||d>l.length||p<0||d+p>l.length||d+p<0)throw new R;if(p===0)return;for(let y=0;y<p;y++)this.write(l[d+y])}flush(){}close(){}}class Oi extends f{}class hs extends sl{constructor(l=32){if(super(),this.count=0,l<0)throw new v("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let p=this.buf.length<<1;if(p-l<0&&(p=l),p<0){if(l<0)throw new Oi;p=F.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,p)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,d,p){if(d<0||d>l.length||p<0||d+p-l.length>0)throw new R;this.ensureCapacity(this.count+p),O.arraycopy(l,d,this.buf,this.count,p),this.count+=p}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var kn;(function(J){J[J.ALPHA=0]="ALPHA",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.PUNCT=3]="PUNCT",J[J.ALPHA_SHIFT=4]="ALPHA_SHIFT",J[J.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(kn||(kn={}));function Wo(){if(typeof window<"u")return window.BigInt||null;if(typeof jl<"u")return jl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ps;function Aa(J){if(typeof ps>"u"&&(ps=Wo()),ps===null)throw new Error("BigInt is not supported!");return ps(J)}function Xo(){let J=[];J[0]=Aa(1);let l=Aa(900);J[1]=l;for(let d=2;d<16;d++)J[d]=J[d-1]*l;return J}class Fe{static decode(l,d){let p=new K(""),y=V.ISO8859_1;p.enableDecoding(y);let b=1,E=l[b++],T=new No;for(;b<l[0];){switch(E){case Fe.TEXT_COMPACTION_MODE_LATCH:b=Fe.textCompaction(l,b,p);break;case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:b=Fe.byteCompaction(E,l,y,b,p);break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(l[b++]);break;case Fe.NUMERIC_COMPACTION_MODE_LATCH:b=Fe.numericCompaction(l,b,p);break;case Fe.ECI_CHARSET:V.getCharacterSetECIByValue(l[b++]);break;case Fe.ECI_GENERAL_PURPOSE:b+=2;break;case Fe.ECI_USER_DEFINED:b++;break;case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=Fe.decodeMacroBlock(l,b,T);break;case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:throw new B;default:b--,b=Fe.textCompaction(l,b,p);break}if(b<l.length)E=l[b++];else throw B.getFormatInstance()}if(p.length()===0)throw B.getFormatInstance();let M=new Be(null,p.toString(),null,d);return M.setOther(T),M}static decodeMacroBlock(l,d,p){if(d+Fe.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw B.getFormatInstance();let y=new Int32Array(Fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let T=0;T<Fe.NUMBER_OF_SEQUENCE_CODEWORDS;T++,d++)y[T]=l[d];p.setSegmentIndex(F.parseInt(Fe.decodeBase900toBase10(y,Fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new K;d=Fe.textCompaction(l,d,b),p.setFileId(b.toString());let E=-1;for(l[d]===Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=d+1);d<l[0];)switch(l[d]){case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(d++,l[d]){case Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let T=new K;d=Fe.textCompaction(l,d+1,T),p.setFileName(T.toString());break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let M=new K;d=Fe.textCompaction(l,d+1,M),p.setSender(M.toString());break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let k=new K;d=Fe.textCompaction(l,d+1,k),p.setAddressee(k.toString());break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let $=new K;d=Fe.numericCompaction(l,d+1,$),p.setSegmentCount(F.parseInt($.toString()));break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Z=new K;d=Fe.numericCompaction(l,d+1,Z),p.setTimestamp(dc.parseLong(Z.toString()));break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ne=new K;d=Fe.numericCompaction(l,d+1,ne),p.setChecksum(F.parseInt(ne.toString()));break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ue=new K;d=Fe.numericCompaction(l,d+1,ue),p.setFileSize(dc.parseLong(ue.toString()));break;default:throw B.getFormatInstance()}break;case Fe.MACRO_PDF417_TERMINATOR:d++,p.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(E!==-1){let T=d-E;p.isLastSegment()&&T--,p.setOptionalData(U.copyOfRange(l,E,E+T))}return d}static textCompaction(l,d,p){let y=new Int32Array((l[0]-d)*2),b=new Int32Array((l[0]-d)*2),E=0,T=!1;for(;d<l[0]&&!T;){let M=l[d++];if(M<Fe.TEXT_COMPACTION_MODE_LATCH)y[E]=M/30,y[E+1]=M%30,E+=2;else switch(M){case Fe.TEXT_COMPACTION_MODE_LATCH:y[E++]=Fe.TEXT_COMPACTION_MODE_LATCH;break;case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.NUMERIC_COMPACTION_MODE_LATCH:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:d--,T=!0;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[E]=Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,M=l[d++],b[E]=M,E++;break}}return Fe.decodeTextCompaction(y,b,E,p),d}static decodeTextCompaction(l,d,p,y){let b=kn.ALPHA,E=kn.ALPHA,T=0;for(;T<p;){let M=l[T],k="";switch(b){case kn.ALPHA:if(M<26)k=String.fromCharCode(65+M);else switch(M){case 26:k=" ";break;case Fe.LL:b=kn.LOWER;break;case Fe.ML:b=kn.MIXED;break;case Fe.PS:E=b,b=kn.PUNCT_SHIFT;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[T]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:b=kn.ALPHA;break}break;case kn.LOWER:if(M<26)k=String.fromCharCode(97+M);else switch(M){case 26:k=" ";break;case Fe.AS:E=b,b=kn.ALPHA_SHIFT;break;case Fe.ML:b=kn.MIXED;break;case Fe.PS:E=b,b=kn.PUNCT_SHIFT;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[T]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:b=kn.ALPHA;break}break;case kn.MIXED:if(M<Fe.PL)k=Fe.MIXED_CHARS[M];else switch(M){case Fe.PL:b=kn.PUNCT;break;case 26:k=" ";break;case Fe.LL:b=kn.LOWER;break;case Fe.AL:b=kn.ALPHA;break;case Fe.PS:E=b,b=kn.PUNCT_SHIFT;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[T]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:b=kn.ALPHA;break}break;case kn.PUNCT:if(M<Fe.PAL)k=Fe.PUNCT_CHARS[M];else switch(M){case Fe.PAL:b=kn.ALPHA;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[T]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:b=kn.ALPHA;break}break;case kn.ALPHA_SHIFT:if(b=E,M<26)k=String.fromCharCode(65+M);else switch(M){case 26:k=" ";break;case Fe.TEXT_COMPACTION_MODE_LATCH:b=kn.ALPHA;break}break;case kn.PUNCT_SHIFT:if(b=E,M<Fe.PAL)k=Fe.PUNCT_CHARS[M];else switch(M){case Fe.PAL:b=kn.ALPHA;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[T]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:b=kn.ALPHA;break}break}k!==""&&y.append(k),T++}}static byteCompaction(l,d,p,y,b){let E=new hs,T=0,M=0,k=!1;switch(l){case Fe.BYTE_COMPACTION_MODE_LATCH:let $=new Int32Array(6),Z=d[y++];for(;y<d[0]&&!k;)switch($[T++]=Z,M=900*M+Z,Z=d[y++],Z){case Fe.TEXT_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.NUMERIC_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:y--,k=!0;break;default:if(T%5===0&&T>0){for(let ne=0;ne<6;++ne)E.write(Number(Aa(M)>>Aa(8*(5-ne))));M=0,T=0}break}y===d[0]&&Z<Fe.TEXT_COMPACTION_MODE_LATCH&&($[T++]=Z);for(let ne=0;ne<T;ne++)E.write($[ne]);break;case Fe.BYTE_COMPACTION_MODE_LATCH_6:for(;y<d[0]&&!k;){let ne=d[y++];if(ne<Fe.TEXT_COMPACTION_MODE_LATCH)T++,M=900*M+ne;else switch(ne){case Fe.TEXT_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.NUMERIC_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:y--,k=!0;break}if(T%5===0&&T>0){for(let ue=0;ue<6;++ue)E.write(Number(Aa(M)>>Aa(8*(5-ue))));M=0,T=0}}break}return b.append(Q.decode(E.toByteArray(),p)),y}static numericCompaction(l,d,p){let y=0,b=!1,E=new Int32Array(Fe.MAX_NUMERIC_CODEWORDS);for(;d<l[0]&&!b;){let T=l[d++];if(d===l[0]&&(b=!0),T<Fe.TEXT_COMPACTION_MODE_LATCH)E[y]=T,y++;else switch(T){case Fe.TEXT_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:d--,b=!0;break}(y%Fe.MAX_NUMERIC_CODEWORDS===0||T===Fe.NUMERIC_COMPACTION_MODE_LATCH||b)&&y>0&&(p.append(Fe.decodeBase900toBase10(E,y)),y=0)}return d}static decodeBase900toBase10(l,d){let p=Aa(0);for(let b=0;b<d;b++)p+=Fe.EXP900[d-b-1]*Aa(l[b]);let y=p.toString();if(y.charAt(0)!=="1")throw new B;return y.substring(1)}}Fe.TEXT_COMPACTION_MODE_LATCH=900,Fe.BYTE_COMPACTION_MODE_LATCH=901,Fe.NUMERIC_COMPACTION_MODE_LATCH=902,Fe.BYTE_COMPACTION_MODE_LATCH_6=924,Fe.ECI_USER_DEFINED=925,Fe.ECI_GENERAL_PURPOSE=926,Fe.ECI_CHARSET=927,Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Fe.MACRO_PDF417_TERMINATOR=922,Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Fe.MAX_NUMERIC_CODEWORDS=15,Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Fe.PL=25,Fe.LL=27,Fe.AS=27,Fe.ML=28,Fe.AL=28,Fe.PS=29,Fe.PAL=29,Fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Fe.EXP900=Wo()?Xo():[],Fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Xt{constructor(){}static decode(l,d,p,y,b,E,T){let M=new wa(l,d,p,y,b),k=null,$=null,Z;for(let me=!0;;me=!1){if(d!=null&&(k=Xt.getRowIndicatorColumn(l,M,d,!0,E,T)),y!=null&&($=Xt.getRowIndicatorColumn(l,M,y,!1,E,T)),Z=Xt.merge(k,$),Z==null)throw re.getNotFoundInstance();let xe=Z.getBoundingBox();if(me&&xe!=null&&(xe.getMinY()<M.getMinY()||xe.getMaxY()>M.getMaxY()))M=xe;else break}Z.setBoundingBox(M);let ne=Z.getBarcodeColumnCount()+1;Z.setDetectionResultColumn(0,k),Z.setDetectionResultColumn(ne,$);let ue=k!=null;for(let me=1;me<=ne;me++){let xe=ue?me:ne-me;if(Z.getDetectionResultColumn(xe)!==void 0)continue;let Ne;xe===0||xe===ne?Ne=new lr(M,xe===0):Ne=new Ua(M),Z.setDetectionResultColumn(xe,Ne);let qe=-1,ft=qe;for(let ut=M.getMinY();ut<=M.getMaxY();ut++){if(qe=Xt.getStartColumn(Z,xe,ut,ue),qe<0||qe>M.getMaxX()){if(ft===-1)continue;qe=ft}let at=Xt.detectCodeword(l,M.getMinX(),M.getMaxX(),ue,qe,ut,E,T);at!=null&&(Ne.setCodeword(ut,at),ft=qe,E=Math.min(E,at.getWidth()),T=Math.max(T,at.getWidth()))}}return Xt.createDecoderResult(Z)}static merge(l,d){if(l==null&&d==null)return null;let p=Xt.getBarcodeMetadata(l,d);if(p==null)return null;let y=wa.merge(Xt.adjustBoundingBox(l),Xt.adjustBoundingBox(d));return new qr(p,y)}static adjustBoundingBox(l){if(l==null)return null;let d=l.getRowHeights();if(d==null)return null;let p=Xt.getMax(d),y=0;for(let T of d)if(y+=p-T,T>0)break;let b=l.getCodewords();for(let T=0;y>0&&b[T]==null;T++)y--;let E=0;for(let T=d.length-1;T>=0&&(E+=p-d[T],!(d[T]>0));T--);for(let T=b.length-1;E>0&&b[T]==null;T--)E--;return l.getBoundingBox().addMissingRows(y,E,l.isLeft())}static getMax(l){let d=-1;for(let p of l)d=Math.max(d,p);return d}static getBarcodeMetadata(l,d){let p;if(l==null||(p=l.getBarcodeMetadata())==null)return d==null?null:d.getBarcodeMetadata();let y;return d==null||(y=d.getBarcodeMetadata())==null?p:p.getColumnCount()!==y.getColumnCount()&&p.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&p.getRowCount()!==y.getRowCount()?null:p}static getRowIndicatorColumn(l,d,p,y,b,E){let T=new lr(d,y);for(let M=0;M<2;M++){let k=M===0?1:-1,$=Math.trunc(Math.trunc(p.getX()));for(let Z=Math.trunc(Math.trunc(p.getY()));Z<=d.getMaxY()&&Z>=d.getMinY();Z+=k){let ne=Xt.detectCodeword(l,0,l.getWidth(),y,$,Z,b,E);ne!=null&&(T.setCodeword(Z,ne),y?$=ne.getStartX():$=ne.getEndX())}}return T}static adjustCodewordCount(l,d){let p=d[0][1],y=p.getValue(),b=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-Xt.getNumberOfECCodeWords(l.getBarcodeECLevel());if(y.length===0){if(b<1||b>Vt.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();p.setValue(b)}else y[0]!==b&&p.setValue(b)}static createDecoderResult(l){let d=Xt.createBarcodeMatrix(l);Xt.adjustCodewordCount(l,d);let p=new Array,y=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),b=[],E=new Array;for(let M=0;M<l.getBarcodeRowCount();M++)for(let k=0;k<l.getBarcodeColumnCount();k++){let $=d[M][k+1].getValue(),Z=M*l.getBarcodeColumnCount()+k;$.length===0?p.push(Z):$.length===1?y[Z]=$[0]:(E.push(Z),b.push($))}let T=new Array(b.length);for(let M=0;M<T.length;M++)T[M]=b[M];return Xt.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),y,Vt.toIntArray(p),Vt.toIntArray(E),T)}static createDecoderResultFromAmbiguousValues(l,d,p,y,b){let E=new Int32Array(y.length),T=100;for(;T-- >0;){for(let M=0;M<E.length;M++)d[y[M]]=b[M][E[M]];try{return Xt.decodeCodewords(d,l,p)}catch(M){if(!(M instanceof N))throw M}if(E.length===0)throw N.getChecksumInstance();for(let M=0;M<E.length;M++)if(E[M]<b[M].length-1){E[M]++;break}else if(E[M]=0,M===E.length-1)throw N.getChecksumInstance()}throw N.getChecksumInstance()}static createBarcodeMatrix(l){let d=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let y=0;y<d.length;y++)for(let b=0;b<d[y].length;b++)d[y][b]=new _a;let p=0;for(let y of l.getDetectionResultColumns()){if(y!=null){for(let b of y.getCodewords())if(b!=null){let E=b.getRowNumber();if(E>=0){if(E>=d.length)continue;d[E][p].setValue(b.getValue())}}}p++}return d}static isValidBarcodeColumn(l,d){return d>=0&&d<=l.getBarcodeColumnCount()+1}static getStartColumn(l,d,p,y){let b=y?1:-1,E=null;if(Xt.isValidBarcodeColumn(l,d-b)&&(E=l.getDetectionResultColumn(d-b).getCodeword(p)),E!=null)return y?E.getEndX():E.getStartX();if(E=l.getDetectionResultColumn(d).getCodewordNearby(p),E!=null)return y?E.getStartX():E.getEndX();if(Xt.isValidBarcodeColumn(l,d-b)&&(E=l.getDetectionResultColumn(d-b).getCodewordNearby(p)),E!=null)return y?E.getEndX():E.getStartX();let T=0;for(;Xt.isValidBarcodeColumn(l,d-b);){d-=b;for(let M of l.getDetectionResultColumn(d).getCodewords())if(M!=null)return(y?M.getEndX():M.getStartX())+b*T*(M.getEndX()-M.getStartX());T++}return y?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,d,p,y,b,E,T,M){b=Xt.adjustCodewordStartColumn(l,d,p,y,b,E);let k=Xt.getModuleBitCount(l,d,p,y,b,E);if(k==null)return null;let $,Z=We.sum(k);if(y)$=b+Z;else{for(let me=0;me<k.length/2;me++){let xe=k[me];k[me]=k[k.length-1-me],k[k.length-1-me]=xe}$=b,b=$-Z}if(!Xt.checkCodewordSkew(Z,T,M))return null;let ne=zr.getDecodedValue(k),ue=Vt.getCodeword(ne);return ue===-1?null:new oa(b,$,Xt.getCodewordBucketNumber(ne),ue)}static getModuleBitCount(l,d,p,y,b,E){let T=b,M=new Int32Array(8),k=0,$=y?1:-1,Z=y;for(;(y?T<p:T>=d)&&k<M.length;)l.get(T,E)===Z?(M[k]++,T+=$):(k++,Z=!Z);return k===M.length||T===(y?p:d)&&k===M.length-1?M:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,d,p,y,b,E){let T=b,M=y?-1:1;for(let k=0;k<2;k++){for(;(y?T>=d:T<p)&&y===l.get(T,E);){if(Math.abs(b-T)>Xt.CODEWORD_SKEW_SIZE)return b;T+=M}M=-M,y=!y}return T}static checkCodewordSkew(l,d,p){return d-Xt.CODEWORD_SKEW_SIZE<=l&&l<=p+Xt.CODEWORD_SKEW_SIZE}static decodeCodewords(l,d,p){if(l.length===0)throw B.getFormatInstance();let y=1<<d+1,b=Xt.correctErrors(l,p,y);Xt.verifyCodewordCount(l,y);let E=Fe.decode(l,""+d);return E.setErrorsCorrected(b),E.setErasures(p.length),E}static correctErrors(l,d,p){if(d!=null&&d.length>p/2+Xt.MAX_ERRORS||p<0||p>Xt.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return Xt.errorCorrection.decode(l,p,d)}static verifyCodewordCount(l,d){if(l.length<4)throw B.getFormatInstance();let p=l[0];if(p>l.length)throw B.getFormatInstance();if(p===0)if(d<l.length)l[0]=l.length-d;else throw B.getFormatInstance()}static getBitCountForCodeword(l){let d=new Int32Array(8),p=0,y=d.length-1;for(;!((l&1)!==p&&(p=l&1,y--,y<0));)d[y]++,l>>=1;return d}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return Xt.getCodewordBucketNumber(Xt.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let d=new Ea;for(let p=0;p<l.length;p++){d.format("Row %2d: ",p);for(let y=0;y<l[p].length;y++){let b=l[p][y];b.getValue().length===0?d.format("        ",null):d.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}d.format("%n")}return d.toString()}}Xt.CODEWORD_SKEW_SIZE=2,Xt.MAX_ERRORS=3,Xt.MAX_EC_CODEWORDS=512,Xt.errorCorrection=new Xi;class Jr{decode(l,d=null){let p=Jr.decode(l,d,!1);if(p==null||p.length===0||p[0]==null)throw re.getNotFoundInstance();return p[0]}decodeMultiple(l,d=null){try{return Jr.decode(l,d,!0)}catch(p){throw p instanceof B||p instanceof N?re.getNotFoundInstance():p}}static decode(l,d,p){const y=new Array,b=Ft.detectMultiple(l,d,p);for(const E of b.getPoints()){const T=Xt.decode(b.getBits(),E[4],E[5],E[6],E[7],Jr.getMinCodewordWidth(E),Jr.getMaxCodewordWidth(E)),M=new He(T.getText(),T.getRawBytes(),void 0,E,Ye.PDF_417);M.putMetadata(et.ERROR_CORRECTION_LEVEL,T.getECLevel());const k=T.getOther();k!=null&&M.putMetadata(et.PDF417_EXTRA_METADATA,k),y.push(M)}return y.map(E=>E)}static getMaxWidth(l,d){return l==null||d==null?0:Math.trunc(Math.abs(l.getX()-d.getX()))}static getMinWidth(l,d){return l==null||d==null?F.MAX_VALUE:Math.trunc(Math.abs(l.getX()-d.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(Jr.getMaxWidth(l[0],l[4]),Jr.getMaxWidth(l[6],l[2])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN),Math.max(Jr.getMaxWidth(l[1],l[5]),Jr.getMaxWidth(l[7],l[3])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(Jr.getMinWidth(l[0],l[4]),Jr.getMinWidth(l[6],l[2])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN),Math.min(Jr.getMinWidth(l[1],l[5]),Jr.getMinWidth(l[7],l[3])*Vt.MODULES_IN_CODEWORD/Vt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ms extends f{}ms.kind="ReaderException";class Qo{constructor(l,d){this.verbose=l===!0,d&&this.setHints(d)}decode(l,d){return d&&this.setHints(d),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const d=!r(l)&&l.get(G.TRY_HARDER)===!0,p=r(l)?null:l.get(G.POSSIBLE_FORMATS),y=new Array;if(!r(p)){const b=p.some(E=>E===Ye.UPC_A||E===Ye.UPC_E||E===Ye.EAN_13||E===Ye.EAN_8||E===Ye.CODABAR||E===Ye.CODE_39||E===Ye.CODE_93||E===Ye.CODE_128||E===Ye.ITF||E===Ye.RSS_14||E===Ye.RSS_EXPANDED);b&&!d&&y.push(new pi(l,this.verbose)),p.includes(Ye.QR_CODE)&&y.push(new ja),p.includes(Ye.DATA_MATRIX)&&y.push(new ya),p.includes(Ye.AZTEC)&&y.push(new di),p.includes(Ye.PDF_417)&&y.push(new Jr),b&&d&&y.push(new pi(l,this.verbose))}y.length===0&&(d||y.push(new pi(l,this.verbose)),y.push(new ja),y.push(new ya),y.push(new di),y.push(new Jr),d&&y.push(new pi(l,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new ms("No readers where selected, nothing can be read.");for(const d of this.readers)try{return d.decode(l,this.hints)}catch(p){if(p instanceof ms)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class fc extends Ae{constructor(l=null,d=500){const p=new Qo;p.setHints(l),super(p,d)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class wu extends Ae{constructor(l=500){super(new Jr,l)}}class hc extends Ae{constructor(l=500){super(new ja,l)}}var gs;(function(J){J[J.ERROR_CORRECTION=0]="ERROR_CORRECTION",J[J.CHARACTER_SET=1]="CHARACTER_SET",J[J.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",J[J.MIN_SIZE=3]="MIN_SIZE",J[J.MAX_SIZE=4]="MAX_SIZE",J[J.MARGIN=5]="MARGIN",J[J.PDF417_COMPACT=6]="PDF417_COMPACT",J[J.PDF417_COMPACTION=7]="PDF417_COMPACTION",J[J.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",J[J.AZTEC_LAYERS=9]="AZTEC_LAYERS",J[J.QR_VERSION=10]="QR_VERSION"})(gs||(gs={}));var Nr=gs;class oo{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new rt(l,Int32Array.from([1])))}buildGenerator(l){const d=this.cachedGenerators;if(l>=d.length){let p=d[d.length-1];const y=this.field;for(let b=d.length;b<=l;b++){const E=p.multiply(new rt(y,Int32Array.from([1,y.exp(b-1+y.getGeneratorBase())])));d.push(E),p=E}}return d[l]}encode(l,d){if(d===0)throw new v("No error correction bytes");const p=l.length-d;if(p<=0)throw new v("No data bytes provided");const y=this.buildGenerator(d),b=new Int32Array(p);O.arraycopy(l,0,b,0,p);let E=new rt(this.field,b);E=E.multiplyByMonomial(d,1);const M=E.divide(y)[1].getCoefficients(),k=d-M.length;for(let $=0;$<k;$++)l[p+$]=0;O.arraycopy(M,0,l,p+k,M.length)}}class mr{constructor(){}static applyMaskPenaltyRule1(l){return mr.applyMaskPenaltyRule1Internal(l,!0)+mr.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let d=0;const p=l.getArray(),y=l.getWidth(),b=l.getHeight();for(let E=0;E<b-1;E++){const T=p[E];for(let M=0;M<y-1;M++){const k=T[M];k===T[M+1]&&k===p[E+1][M]&&k===p[E+1][M+1]&&d++}}return mr.N2*d}static applyMaskPenaltyRule3(l){let d=0;const p=l.getArray(),y=l.getWidth(),b=l.getHeight();for(let E=0;E<b;E++)for(let T=0;T<y;T++){const M=p[E];T+6<y&&M[T]===1&&M[T+1]===0&&M[T+2]===1&&M[T+3]===1&&M[T+4]===1&&M[T+5]===0&&M[T+6]===1&&(mr.isWhiteHorizontal(M,T-4,T)||mr.isWhiteHorizontal(M,T+7,T+11))&&d++,E+6<b&&p[E][T]===1&&p[E+1][T]===0&&p[E+2][T]===1&&p[E+3][T]===1&&p[E+4][T]===1&&p[E+5][T]===0&&p[E+6][T]===1&&(mr.isWhiteVertical(p,T,E-4,E)||mr.isWhiteVertical(p,T,E+7,E+11))&&d++}return d*mr.N3}static isWhiteHorizontal(l,d,p){d=Math.max(d,0),p=Math.min(p,l.length);for(let y=d;y<p;y++)if(l[y]===1)return!1;return!0}static isWhiteVertical(l,d,p,y){p=Math.max(p,0),y=Math.min(y,l.length);for(let b=p;b<y;b++)if(l[b][d]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let d=0;const p=l.getArray(),y=l.getWidth(),b=l.getHeight();for(let M=0;M<b;M++){const k=p[M];for(let $=0;$<y;$++)k[$]===1&&d++}const E=l.getHeight()*l.getWidth();return Math.floor(Math.abs(d*2-E)*10/E)*mr.N4}static getDataMaskBit(l,d,p){let y,b;switch(l){case 0:y=p+d&1;break;case 1:y=p&1;break;case 2:y=d%3;break;case 3:y=(p+d)%3;break;case 4:y=Math.floor(p/2)+Math.floor(d/3)&1;break;case 5:b=p*d,y=(b&1)+b%3;break;case 6:b=p*d,y=(b&1)+b%3&1;break;case 7:b=p*d,y=b%3+(p+d&1)&1;break;default:throw new v("Invalid mask pattern: "+l)}return y===0}static applyMaskPenaltyRule1Internal(l,d){let p=0;const y=d?l.getHeight():l.getWidth(),b=d?l.getWidth():l.getHeight(),E=l.getArray();for(let T=0;T<y;T++){let M=0,k=-1;for(let $=0;$<b;$++){const Z=d?E[T][$]:E[$][T];Z===k?M++:(M>=5&&(p+=mr.N1+(M-5)),M=1,k=Z)}M>=5&&(p+=mr.N1+(M-5))}return p}}mr.N1=3,mr.N2=3,mr.N3=40,mr.N4=10;class ys{constructor(l,d){this.width=l,this.height=d;const p=new Array(d);for(let y=0;y!==d;y++)p[y]=new Uint8Array(l);this.bytes=p}getHeight(){return this.height}getWidth(){return this.width}get(l,d){return this.bytes[d][l]}getArray(){return this.bytes}setNumber(l,d,p){this.bytes[d][l]=p}setBoolean(l,d,p){this.bytes[d][l]=p?1:0}clear(l){for(const d of this.bytes)U.fill(d,l)}equals(l){if(!(l instanceof ys))return!1;const d=l;if(this.width!==d.width||this.height!==d.height)return!1;for(let p=0,y=this.height;p<y;++p){const b=this.bytes[p],E=d.bytes[p];for(let T=0,M=this.width;T<M;++T)if(b[T]!==E[T])return!1}return!0}toString(){const l=new K;for(let d=0,p=this.height;d<p;++d){const y=this.bytes[d];for(let b=0,E=this.width;b<E;++b)switch(y[b]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class Pi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new K;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<Pi.NUM_MASK_PATTERNS}}Pi.NUM_MASK_PATTERNS=8;class Ln extends f{}Ln.kind="WriterException";class Ut{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,d,p,y,b){Ut.clearMatrix(b),Ut.embedBasicPatterns(p,b),Ut.embedTypeInfo(d,y,b),Ut.maybeEmbedVersionInfo(p,b),Ut.embedDataBits(l,y,b)}static embedBasicPatterns(l,d){Ut.embedPositionDetectionPatternsAndSeparators(d),Ut.embedDarkDotAtLeftBottomCorner(d),Ut.maybeEmbedPositionAdjustmentPatterns(l,d),Ut.embedTimingPatterns(d)}static embedTypeInfo(l,d,p){const y=new q;Ut.makeTypeInfoBits(l,d,y);for(let b=0,E=y.getSize();b<E;++b){const T=y.get(y.getSize()-1-b),M=Ut.TYPE_INFO_COORDINATES[b],k=M[0],$=M[1];if(p.setBoolean(k,$,T),b<8){const Z=p.getWidth()-b-1;p.setBoolean(Z,8,T)}else{const ne=p.getHeight()-7+(b-8);p.setBoolean(8,ne,T)}}}static maybeEmbedVersionInfo(l,d){if(l.getVersionNumber()<7)return;const p=new q;Ut.makeVersionInfoBits(l,p);let y=17;for(let b=0;b<6;++b)for(let E=0;E<3;++E){const T=p.get(y);y--,d.setBoolean(b,d.getHeight()-11+E,T),d.setBoolean(d.getHeight()-11+E,b,T)}}static embedDataBits(l,d,p){let y=0,b=-1,E=p.getWidth()-1,T=p.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);T>=0&&T<p.getHeight();){for(let M=0;M<2;++M){const k=E-M;if(!Ut.isEmpty(p.get(k,T)))continue;let $;y<l.getSize()?($=l.get(y),++y):$=!1,d!==255&&mr.getDataMaskBit(d,k,T)&&($=!$),p.setBoolean(k,T,$)}T+=b}b=-b,T+=b,E-=2}if(y!==l.getSize())throw new Ln("Not all bits consumed: "+y+"/"+l.getSize())}static findMSBSet(l){return 32-F.numberOfLeadingZeros(l)}static calculateBCHCode(l,d){if(d===0)throw new v("0 polynomial");const p=Ut.findMSBSet(d);for(l<<=p-1;Ut.findMSBSet(l)>=p;)l^=d<<Ut.findMSBSet(l)-p;return l}static makeTypeInfoBits(l,d,p){if(!Pi.isValidMaskPattern(d))throw new Ln("Invalid mask pattern");const y=l.getBits()<<3|d;p.appendBits(y,5);const b=Ut.calculateBCHCode(y,Ut.TYPE_INFO_POLY);p.appendBits(b,10);const E=new q;if(E.appendBits(Ut.TYPE_INFO_MASK_PATTERN,15),p.xor(E),p.getSize()!==15)throw new Ln("should not happen but we got: "+p.getSize())}static makeVersionInfoBits(l,d){d.appendBits(l.getVersionNumber(),6);const p=Ut.calculateBCHCode(l.getVersionNumber(),Ut.VERSION_INFO_POLY);if(d.appendBits(p,12),d.getSize()!==18)throw new Ln("should not happen but we got: "+d.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let d=8;d<l.getWidth()-8;++d){const p=(d+1)%2;Ut.isEmpty(l.get(d,6))&&l.setNumber(d,6,p),Ut.isEmpty(l.get(6,d))&&l.setNumber(6,d,p)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new Ln;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,d,p){for(let y=0;y<8;++y){if(!Ut.isEmpty(p.get(l+y,d)))throw new Ln;p.setNumber(l+y,d,0)}}static embedVerticalSeparationPattern(l,d,p){for(let y=0;y<7;++y){if(!Ut.isEmpty(p.get(l,d+y)))throw new Ln;p.setNumber(l,d+y,0)}}static embedPositionAdjustmentPattern(l,d,p){for(let y=0;y<5;++y){const b=Ut.POSITION_ADJUSTMENT_PATTERN[y];for(let E=0;E<5;++E)p.setNumber(l+E,d+y,b[E])}}static embedPositionDetectionPattern(l,d,p){for(let y=0;y<7;++y){const b=Ut.POSITION_DETECTION_PATTERN[y];for(let E=0;E<7;++E)p.setNumber(l+E,d+y,b[E])}}static embedPositionDetectionPatternsAndSeparators(l){const d=Ut.POSITION_DETECTION_PATTERN[0].length;Ut.embedPositionDetectionPattern(0,0,l),Ut.embedPositionDetectionPattern(l.getWidth()-d,0,l),Ut.embedPositionDetectionPattern(0,l.getWidth()-d,l);const p=8;Ut.embedHorizontalSeparationPattern(0,p-1,l),Ut.embedHorizontalSeparationPattern(l.getWidth()-p,p-1,l),Ut.embedHorizontalSeparationPattern(0,l.getWidth()-p,l);const y=7;Ut.embedVerticalSeparationPattern(y,0,l),Ut.embedVerticalSeparationPattern(l.getHeight()-y-1,0,l),Ut.embedVerticalSeparationPattern(y,l.getHeight()-y,l)}static maybeEmbedPositionAdjustmentPatterns(l,d){if(l.getVersionNumber()<2)return;const p=l.getVersionNumber()-1,y=Ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[p];for(let b=0,E=y.length;b!==E;b++){const T=y[b];if(T>=0)for(let M=0;M!==E;M++){const k=y[M];k>=0&&Ut.isEmpty(d.get(k,T))&&Ut.embedPositionAdjustmentPattern(k-2,T-2,d)}}}}Ut.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ut.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ut.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ut.VERSION_INFO_POLY=7973,Ut.TYPE_INFO_POLY=1335,Ut.TYPE_INFO_MASK_PATTERN=21522;class Eu{constructor(l,d){this.dataBytes=l,this.errorCorrectionBytes=d}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $n{constructor(){}static calculateMaskPenalty(l){return mr.applyMaskPenaltyRule1(l)+mr.applyMaskPenaltyRule2(l)+mr.applyMaskPenaltyRule3(l)+mr.applyMaskPenaltyRule4(l)}static encode(l,d,p=null){let y=$n.DEFAULT_BYTE_MODE_ENCODING;const b=p!==null&&p.get(Nr.CHARACTER_SET)!==void 0;b&&(y=p.get(Nr.CHARACTER_SET).toString());const E=this.chooseMode(l,y),T=new q;if(E===Bt.BYTE&&(b||$n.DEFAULT_BYTE_MODE_ENCODING!==y)){const ut=V.getCharacterSetECIByName(y);ut!==void 0&&this.appendECI(ut,T)}this.appendModeInfo(E,T);const M=new q;this.appendBytes(l,E,M,y);let k;if(p!==null&&p.get(Nr.QR_VERSION)!==void 0){const ut=Number.parseInt(p.get(Nr.QR_VERSION).toString(),10);k=xt.getVersionForNumber(ut);const at=this.calculateBitsNeeded(E,T,M,k);if(!this.willFit(at,k,d))throw new Ln("Data too big for requested version")}else k=this.recommendVersion(d,E,T,M);const $=new q;$.appendBitArray(T);const Z=E===Bt.BYTE?M.getSizeInBytes():l.length;this.appendLengthInfo(Z,k,E,$),$.appendBitArray(M);const ne=k.getECBlocksForLevel(d),ue=k.getTotalCodewords()-ne.getTotalECCodewords();this.terminateBits(ue,$);const me=this.interleaveWithECBytes($,k.getTotalCodewords(),ue,ne.getNumBlocks()),xe=new Pi;xe.setECLevel(d),xe.setMode(E),xe.setVersion(k);const Ne=k.getDimensionForVersion(),qe=new ys(Ne,Ne),ft=this.chooseMaskPattern(me,d,k,qe);return xe.setMaskPattern(ft),Ut.buildMatrix(me,d,k,ft,qe),xe.setMatrix(qe),xe}static recommendVersion(l,d,p,y){const b=this.calculateBitsNeeded(d,p,y,xt.getVersionForNumber(1)),E=this.chooseVersion(b,l),T=this.calculateBitsNeeded(d,p,y,E);return this.chooseVersion(T,l)}static calculateBitsNeeded(l,d,p,y){return d.getSize()+l.getCharacterCountBits(y)+p.getSize()}static getAlphanumericCode(l){return l<$n.ALPHANUMERIC_TABLE.length?$n.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,d=null){if(V.SJIS.getName()===d&&this.isOnlyDoubleByteKanji(l))return Bt.KANJI;let p=!1,y=!1;for(let b=0,E=l.length;b<E;++b){const T=l.charAt(b);if($n.isDigit(T))p=!0;else if(this.getAlphanumericCode(T.charCodeAt(0))!==-1)y=!0;else return Bt.BYTE}return y?Bt.ALPHANUMERIC:p?Bt.NUMERIC:Bt.BYTE}static isOnlyDoubleByteKanji(l){let d;try{d=Q.encode(l,V.SJIS)}catch{return!1}const p=d.length;if(p%2!==0)return!1;for(let y=0;y<p;y+=2){const b=d[y]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(l,d,p,y){let b=Number.MAX_SAFE_INTEGER,E=-1;for(let T=0;T<Pi.NUM_MASK_PATTERNS;T++){Ut.buildMatrix(l,d,p,T,y);let M=this.calculateMaskPenalty(y);M<b&&(b=M,E=T)}return E}static chooseVersion(l,d){for(let p=1;p<=40;p++){const y=xt.getVersionForNumber(p);if($n.willFit(l,y,d))return y}throw new Ln("Data too big")}static willFit(l,d,p){const y=d.getTotalCodewords(),E=d.getECBlocksForLevel(p).getTotalECCodewords(),T=y-E,M=(l+7)/8;return T>=M}static terminateBits(l,d){const p=l*8;if(d.getSize()>p)throw new Ln("data bits cannot fit in the QR Code"+d.getSize()+" > "+p);for(let E=0;E<4&&d.getSize()<p;++E)d.appendBit(!1);const y=d.getSize()&7;if(y>0)for(let E=y;E<8;E++)d.appendBit(!1);const b=l-d.getSizeInBytes();for(let E=0;E<b;++E)d.appendBits((E&1)===0?236:17,8);if(d.getSize()!==p)throw new Ln("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,d,p,y,b,E){if(y>=p)throw new Ln("Block ID too large");const T=l%p,M=p-T,k=Math.floor(l/p),$=k+1,Z=Math.floor(d/p),ne=Z+1,ue=k-Z,me=$-ne;if(ue!==me)throw new Ln("EC bytes mismatch");if(p!==M+T)throw new Ln("RS blocks mismatch");if(l!==(Z+ue)*M+(ne+me)*T)throw new Ln("Total bytes mismatch");y<M?(b[0]=Z,E[0]=ue):(b[0]=ne,E[0]=me)}static interleaveWithECBytes(l,d,p,y){if(l.getSizeInBytes()!==p)throw new Ln("Number of bits and data bytes does not match");let b=0,E=0,T=0;const M=new Array;for(let $=0;$<y;++$){const Z=new Int32Array(1),ne=new Int32Array(1);$n.getNumDataBytesAndNumECBytesForBlockID(d,p,y,$,Z,ne);const ue=Z[0],me=new Uint8Array(ue);l.toBytes(8*b,me,0,ue);const xe=$n.generateECBytes(me,ne[0]);M.push(new Eu(me,xe)),E=Math.max(E,ue),T=Math.max(T,xe.length),b+=Z[0]}if(p!==b)throw new Ln("Data bytes does not match offset");const k=new q;for(let $=0;$<E;++$)for(const Z of M){const ne=Z.getDataBytes();$<ne.length&&k.appendBits(ne[$],8)}for(let $=0;$<T;++$)for(const Z of M){const ne=Z.getErrorCorrectionBytes();$<ne.length&&k.appendBits(ne[$],8)}if(d!==k.getSizeInBytes())throw new Ln("Interleaving error: "+d+" and "+k.getSizeInBytes()+" differ.");return k}static generateECBytes(l,d){const p=l.length,y=new Int32Array(p+d);for(let E=0;E<p;E++)y[E]=l[E]&255;new oo(yt.QR_CODE_FIELD_256).encode(y,d);const b=new Uint8Array(d);for(let E=0;E<d;E++)b[E]=y[p+E];return b}static appendModeInfo(l,d){d.appendBits(l.getBits(),4)}static appendLengthInfo(l,d,p,y){const b=p.getCharacterCountBits(d);if(l>=1<<b)throw new Ln(l+" is bigger than "+((1<<b)-1));y.appendBits(l,b)}static appendBytes(l,d,p,y){switch(d){case Bt.NUMERIC:$n.appendNumericBytes(l,p);break;case Bt.ALPHANUMERIC:$n.appendAlphanumericBytes(l,p);break;case Bt.BYTE:$n.append8BitBytes(l,p,y);break;case Bt.KANJI:$n.appendKanjiBytes(l,p);break;default:throw new Ln("Invalid mode: "+d)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const d=$n.getDigit(l);return d>=0&&d<=9}static appendNumericBytes(l,d){const p=l.length;let y=0;for(;y<p;){const b=$n.getDigit(l.charAt(y));if(y+2<p){const E=$n.getDigit(l.charAt(y+1)),T=$n.getDigit(l.charAt(y+2));d.appendBits(b*100+E*10+T,10),y+=3}else if(y+1<p){const E=$n.getDigit(l.charAt(y+1));d.appendBits(b*10+E,7),y+=2}else d.appendBits(b,4),y++}}static appendAlphanumericBytes(l,d){const p=l.length;let y=0;for(;y<p;){const b=$n.getAlphanumericCode(l.charCodeAt(y));if(b===-1)throw new Ln;if(y+1<p){const E=$n.getAlphanumericCode(l.charCodeAt(y+1));if(E===-1)throw new Ln;d.appendBits(b*45+E,11),y+=2}else d.appendBits(b,6),y++}}static append8BitBytes(l,d,p){let y;try{y=Q.encode(l,p)}catch(b){throw new Ln(b)}for(let b=0,E=y.length;b!==E;b++){const T=y[b];d.appendBits(T,8)}}static appendKanjiBytes(l,d){let p;try{p=Q.encode(l,V.SJIS)}catch(b){throw new Ln(b)}const y=p.length;for(let b=0;b<y;b+=2){const E=p[b]&255,T=p[b+1]&255,M=E<<8&4294967295|T;let k=-1;if(M>=33088&&M<=40956?k=M-33088:M>=57408&&M<=60351&&(k=M-49472),k===-1)throw new Ln("Invalid byte sequence");const $=(k>>8)*192+(k&255);d.appendBits($,13)}}static appendECI(l,d){d.appendBits(Bt.ECI.getBits(),4),d.appendBits(l.getValue(),8)}}$n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$n.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class Ta{write(l,d,p,y=null){if(l.length===0)throw new v("Found empty contents");if(d<0||p<0)throw new v("Requested dimensions are too small: "+d+"x"+p);let b=Wt.L,E=Ta.QUIET_ZONE_SIZE;y!==null&&(y.get(Nr.ERROR_CORRECTION)!==void 0&&(b=Wt.fromString(y.get(Nr.ERROR_CORRECTION).toString())),y.get(Nr.MARGIN)!==void 0&&(E=Number.parseInt(y.get(Nr.MARGIN).toString(),10)));const T=$n.encode(l,b,y);return this.renderResult(T,d,p,E)}writeToDom(l,d,p,y,b=null){typeof l=="string"&&(l=document.querySelector(l));const E=this.write(d,p,y,b);l&&l.appendChild(E)}renderResult(l,d,p,y){const b=l.getMatrix();if(b===null)throw new Le;const E=b.getWidth(),T=b.getHeight(),M=E+y*2,k=T+y*2,$=Math.max(d,M),Z=Math.max(p,k),ne=Math.min(Math.floor($/M),Math.floor(Z/k)),ue=Math.floor(($-E*ne)/2),me=Math.floor((Z-T*ne)/2),xe=this.createSVGElement($,Z);for(let Ne=0,qe=me;Ne<T;Ne++,qe+=ne)for(let ft=0,ut=ue;ft<E;ft++,ut+=ne)if(b.get(ft,Ne)===1){const at=this.createSvgRectElement(ut,qe,ne,ne);xe.appendChild(at)}return xe}createSVGElement(l,d){const p=document.createElementNS(Ta.SVG_NS,"svg");return p.setAttributeNS(null,"height",l.toString()),p.setAttributeNS(null,"width",d.toString()),p}createSvgRectElement(l,d,p,y){const b=document.createElementNS(Ta.SVG_NS,"rect");return b.setAttributeNS(null,"x",l.toString()),b.setAttributeNS(null,"y",d.toString()),b.setAttributeNS(null,"height",p.toString()),b.setAttributeNS(null,"width",y.toString()),b.setAttributeNS(null,"fill","#000000"),b}}Ta.QUIET_ZONE_SIZE=4,Ta.SVG_NS="http://www.w3.org/2000/svg";class Gr{encode(l,d,p,y,b){if(l.length===0)throw new v("Found empty contents");if(d!==Ye.QR_CODE)throw new v("Can only encode QR_CODE, but got "+d);if(p<0||y<0)throw new v(`Requested dimensions are too small: ${p}x${y}`);let E=Wt.L,T=Gr.QUIET_ZONE_SIZE;b!==null&&(b.get(Nr.ERROR_CORRECTION)!==void 0&&(E=Wt.fromString(b.get(Nr.ERROR_CORRECTION).toString())),b.get(Nr.MARGIN)!==void 0&&(T=Number.parseInt(b.get(Nr.MARGIN).toString(),10)));const M=$n.encode(l,E,b);return Gr.renderResult(M,p,y,T)}static renderResult(l,d,p,y){const b=l.getMatrix();if(b===null)throw new Le;const E=b.getWidth(),T=b.getHeight(),M=E+y*2,k=T+y*2,$=Math.max(d,M),Z=Math.max(p,k),ne=Math.min(Math.floor($/M),Math.floor(Z/k)),ue=Math.floor(($-E*ne)/2),me=Math.floor((Z-T*ne)/2),xe=new ge($,Z);for(let Ne=0,qe=me;Ne<T;Ne++,qe+=ne)for(let ft=0,ut=ue;ft<E;ft++,ut+=ne)b.get(ft,Ne)===1&&xe.setRegion(ut,qe,ne,ne);return xe}}Gr.QUIET_ZONE_SIZE=4;class _u{encode(l,d,p,y,b){let E;switch(d){case Ye.QR_CODE:E=new Gr;break;default:throw new v("No encoder available for format "+d)}return E.encode(l,d,p,y,b)}}class sa extends _e{constructor(l,d,p,y,b,E,T,M){if(super(E,T),this.yuvData=l,this.dataWidth=d,this.dataHeight=p,this.left=y,this.top=b,y+E>d||b+T>p)throw new v("Crop rectangle does not fit within image data.");M&&this.reverseHorizontal(E,T)}getRow(l,d){if(l<0||l>=this.getHeight())throw new v("Requested row is outside the image: "+l);const p=this.getWidth();(d==null||d.length<p)&&(d=new Uint8ClampedArray(p));const y=(l+this.top)*this.dataWidth+this.left;return O.arraycopy(this.yuvData,y,d,0,p),d}getMatrix(){const l=this.getWidth(),d=this.getHeight();if(l===this.dataWidth&&d===this.dataHeight)return this.yuvData;const p=l*d,y=new Uint8ClampedArray(p);let b=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return O.arraycopy(this.yuvData,b,y,0,p),y;for(let E=0;E<d;E++){const T=E*l;O.arraycopy(this.yuvData,b,y,T,l),b+=this.dataWidth}return y}isCropSupported(){return!0}crop(l,d,p,y){return new sa(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+d,p,y,!1)}renderThumbnail(){const l=this.getWidth()/sa.THUMBNAIL_SCALE_FACTOR,d=this.getHeight()/sa.THUMBNAIL_SCALE_FACTOR,p=new Int32Array(l*d),y=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let E=0;E<d;E++){const T=E*l;for(let M=0;M<l;M++){const k=y[b+M*sa.THUMBNAIL_SCALE_FACTOR]&255;p[T+M]=4278190080|k*65793}b+=this.dataWidth*sa.THUMBNAIL_SCALE_FACTOR}return p}getThumbnailWidth(){return this.getWidth()/sa.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/sa.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,d){const p=this.yuvData;for(let y=0,b=this.top*this.dataWidth+this.left;y<d;y++,b+=this.dataWidth){const E=b+l/2;for(let T=b,M=b+l-1;T<E;T++,M--){const k=p[T];p[T]=p[M],p[M]=k}}}invert(){return new ke(this)}}sa.THUMBNAIL_SCALE_FACTOR=2;class so extends _e{constructor(l,d,p,y,b,E,T){if(super(d,p),this.dataWidth=y,this.dataHeight=b,this.left=E,this.top=T,l.BYTES_PER_ELEMENT===4){const M=d*p,k=new Uint8ClampedArray(M);for(let $=0;$<M;$++){const Z=l[$],ne=Z>>16&255,ue=Z>>7&510,me=Z&255;k[$]=(ne+ue+me)/4&255}this.luminances=k}else this.luminances=l;if(y===void 0&&(this.dataWidth=d),b===void 0&&(this.dataHeight=p),E===void 0&&(this.left=0),T===void 0&&(this.top=0),this.left+d>this.dataWidth||this.top+p>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(l,d){if(l<0||l>=this.getHeight())throw new v("Requested row is outside the image: "+l);const p=this.getWidth();(d==null||d.length<p)&&(d=new Uint8ClampedArray(p));const y=(l+this.top)*this.dataWidth+this.left;return O.arraycopy(this.luminances,y,d,0,p),d}getMatrix(){const l=this.getWidth(),d=this.getHeight();if(l===this.dataWidth&&d===this.dataHeight)return this.luminances;const p=l*d,y=new Uint8ClampedArray(p);let b=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return O.arraycopy(this.luminances,b,y,0,p),y;for(let E=0;E<d;E++){const T=E*l;O.arraycopy(this.luminances,b,y,T,l),b+=this.dataWidth}return y}isCropSupported(){return!0}crop(l,d,p,y){return new so(this.luminances,p,y,this.dataWidth,this.dataHeight,this.left+l,this.top+d)}invert(){return new ke(this)}}class S extends V{static forName(l){return this.getCharacterSetECIByName(l)}}class j{}j.ISO_8859_1=V.ISO8859_1;class W{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class ae{static singletonList(l){return[l]}static min(l,d){return l.sort(d)[0]}}class Re{constructor(l){this.previous=l}getPrevious(){return this.previous}}class ze extends Re{constructor(l,d,p){super(l),this.value=d,this.bitCount=p}appendTo(l,d){l.appendBits(this.value,this.bitCount)}add(l,d){return new ze(this,l,d)}addBinaryShift(l,d){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ze(this,l,d)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+F.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class vt extends ze{constructor(l,d,p){super(l,0,0),this.binaryShiftStart=d,this.binaryShiftByteCount=p}appendTo(l,d){for(let p=0;p<this.binaryShiftByteCount;p++)(p===0||p===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):p===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(d[this.binaryShiftStart+p],8)}addBinaryShift(l,d){return new vt(this,l,d)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jn(J,l,d){return new vt(J,l,d)}function br(J,l,d){return new ze(J,l,d)}const sn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gr=0,Br=1,Zr=2,ki=3,Si=4,Mo=new ze(null,0,0),xs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function s1(J){for(let l of J)U.fill(l,-1);return J[gr][Si]=0,J[Br][Si]=0,J[Br][gr]=28,J[ki][Si]=0,J[Zr][Si]=0,J[Zr][gr]=15,J}const pc=s1(U.createInt32Array(6,6));class Va{constructor(l,d,p,y){this.token=l,this.mode=d,this.binaryShiftByteCount=p,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,d){let p=this.bitCount,y=this.token;if(l!==this.mode){let E=xs[this.mode][l];y=br(y,E&65535,E>>16),p+=E>>16}let b=l===Zr?4:5;return y=br(y,d,b),new Va(y,l,0,p+b)}shiftAndAppend(l,d){let p=this.token,y=this.mode===Zr?4:5;return p=br(p,pc[this.mode][l],y),p=br(p,d,5),new Va(p,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(l){let d=this.token,p=this.mode,y=this.bitCount;if(this.mode===Si||this.mode===Zr){let T=xs[p][gr];d=br(d,T&65535,T>>16),y+=T>>16,p=gr}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new Va(d,p,this.binaryShiftByteCount+1,y+b);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(l+1)),E}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let d=this.token;return d=jn(d,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new Va(d,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let d=this.bitCount+(xs[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?d+=Va.calculateBinaryShiftCost(l)-Va.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(d+=10),d<=l.bitCount}toBitArray(l){let d=[];for(let y=this.endBinaryShift(l.length).token;y!==null;y=y.getPrevious())d.unshift(y);let p=new q;for(const y of d)y.appendTo(p,l);return p}toString(){return X.format("%s bits=%d bytes=%d",sn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}Va.INITIAL_STATE=new Va(Mo,gr,0,0);function Zp(J){const l=X.getCharCode(" "),d=X.getCharCode("."),p=X.getCharCode(",");J[gr][l]=1;const y=X.getCharCode("Z"),b=X.getCharCode("A");for(let ne=b;ne<=y;ne++)J[gr][ne]=ne-b+2;J[Br][l]=1;const E=X.getCharCode("z"),T=X.getCharCode("a");for(let ne=T;ne<=E;ne++)J[Br][ne]=ne-T+2;J[Zr][l]=1;const M=X.getCharCode("9"),k=X.getCharCode("0");for(let ne=k;ne<=M;ne++)J[Zr][ne]=ne-k+2;J[Zr][p]=12,J[Zr][d]=13;const $=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ne=0;ne<$.length;ne++)J[ki][X.getCharCode($[ne])]=ne;const Z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ne=0;ne<Z.length;ne++)X.getCharCode(Z[ne])>0&&(J[Si][X.getCharCode(Z[ne])]=ne);return J}const mc=Zp(U.createInt32Array(5,256));class vs{constructor(l){this.text=l}encode(){const l=X.getCharCode(" "),d=X.getCharCode(`
`);let p=ae.singletonList(Va.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let E,T=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case X.getCharCode("\r"):E=T===d?2:0;break;case X.getCharCode("."):E=T===l?3:0;break;case X.getCharCode(","):E=T===l?4:0;break;case X.getCharCode(":"):E=T===l?5:0;break;default:E=0}E>0?(p=vs.updateStateListForPair(p,b,E),b++):p=this.updateStateListForChar(p,b)}return ae.min(p,(b,E)=>b.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,d){const p=[];for(let y of l)this.updateStateForChar(y,d,p);return vs.simplifyStates(p)}updateStateForChar(l,d,p){let y=this.text[d]&255,b=mc[l.getMode()][y]>0,E=null;for(let T=0;T<=Si;T++){let M=mc[T][y];if(M>0){if(E==null&&(E=l.endBinaryShift(d)),!b||T===l.getMode()||T===Zr){const k=E.latchAndAppend(T,M);p.push(k)}if(!b&&pc[l.getMode()][T]>=0){const k=E.shiftAndAppend(T,M);p.push(k)}}}if(l.getBinaryShiftByteCount()>0||mc[l.getMode()][y]===0){let T=l.addBinaryShiftChar(d);p.push(T)}}static updateStateListForPair(l,d,p){const y=[];for(let b of l)this.updateStateForPair(b,d,p,y);return this.simplifyStates(y)}static updateStateForPair(l,d,p,y){let b=l.endBinaryShift(d);if(y.push(b.latchAndAppend(Si,p)),l.getMode()!==Si&&y.push(b.shiftAndAppend(Si,p)),p===3||p===4){let E=b.latchAndAppend(Zr,16-p).latchAndAppend(Zr,1);y.push(E)}if(l.getBinaryShiftByteCount()>0){let E=l.addBinaryShiftChar(d).addBinaryShiftChar(d+1);y.push(E)}}static simplifyStates(l){let d=[];for(const p of l){let y=!0;for(const b of d){if(b.isBetterThanOrEqualTo(p)){y=!1;break}p.isBetterThanOrEqualTo(b)&&(d=d.filter(E=>E!==b))}y&&d.push(p)}return d}}class An{constructor(){}static encodeBytes(l){return An.encode(l,An.DEFAULT_EC_PERCENT,An.DEFAULT_AZTEC_LAYERS)}static encode(l,d,p){let y=new vs(l).encode(),b=F.truncDivision(y.getSize()*d,100)+11,E=y.getSize()+b,T,M,k,$,Z;if(p!==An.DEFAULT_AZTEC_LAYERS){if(T=p<0,M=Math.abs(p),M>(T?An.MAX_NB_BITS_COMPACT:An.MAX_NB_BITS))throw new v(X.format("Illegal value %s for layers",p));k=An.totalBitsInLayer(M,T),$=An.WORD_SIZE[M];let at=k-k%$;if(Z=An.stuffBits(y,$),Z.getSize()+b>at)throw new v("Data to large for user specified layer");if(T&&Z.getSize()>$*64)throw new v("Data to large for user specified layer")}else{$=0,Z=null;for(let at=0;;at++){if(at>An.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(T=at<=3,M=T?at+1:at,k=An.totalBitsInLayer(M,T),E>k)continue;(Z==null||$!==An.WORD_SIZE[M])&&($=An.WORD_SIZE[M],Z=An.stuffBits(y,$));let fn=k-k%$;if(!(T&&Z.getSize()>$*64)&&Z.getSize()+b<=fn)break}}let ne=An.generateCheckWords(Z,k,$),ue=Z.getSize()/$,me=An.generateModeMessage(T,M,ue),xe=(T?11:14)+M*4,Ne=new Int32Array(xe),qe;if(T){qe=xe;for(let at=0;at<Ne.length;at++)Ne[at]=at}else{qe=xe+1+2*F.truncDivision(F.truncDivision(xe,2)-1,15);let at=F.truncDivision(xe,2),fn=F.truncDivision(qe,2);for(let Jt=0;Jt<at;Jt++){let Hr=Jt+F.truncDivision(Jt,15);Ne[at-Jt-1]=fn-Hr-1,Ne[at+Jt]=fn+Hr+1}}let ft=new ge(qe);for(let at=0,fn=0;at<M;at++){let Jt=(M-at)*4+(T?9:12);for(let Hr=0;Hr<Jt;Hr++){let Sa=Hr*2;for(let Li=0;Li<2;Li++)ne.get(fn+Sa+Li)&&ft.set(Ne[at*2+Li],Ne[at*2+Hr]),ne.get(fn+Jt*2+Sa+Li)&&ft.set(Ne[at*2+Hr],Ne[xe-1-at*2-Li]),ne.get(fn+Jt*4+Sa+Li)&&ft.set(Ne[xe-1-at*2-Li],Ne[xe-1-at*2-Hr]),ne.get(fn+Jt*6+Sa+Li)&&ft.set(Ne[xe-1-at*2-Hr],Ne[at*2+Li])}fn+=Jt*8}if(An.drawModeMessage(ft,T,qe,me),T)An.drawBullsEye(ft,F.truncDivision(qe,2),5);else{An.drawBullsEye(ft,F.truncDivision(qe,2),7);for(let at=0,fn=0;at<F.truncDivision(xe,2)-1;at+=15,fn+=16)for(let Jt=F.truncDivision(qe,2)&1;Jt<qe;Jt+=2)ft.set(F.truncDivision(qe,2)-fn,Jt),ft.set(F.truncDivision(qe,2)+fn,Jt),ft.set(Jt,F.truncDivision(qe,2)-fn),ft.set(Jt,F.truncDivision(qe,2)+fn)}let ut=new W;return ut.setCompact(T),ut.setSize(qe),ut.setLayers(M),ut.setCodeWords(ue),ut.setMatrix(ft),ut}static drawBullsEye(l,d,p){for(let y=0;y<p;y+=2)for(let b=d-y;b<=d+y;b++)l.set(b,d-y),l.set(b,d+y),l.set(d-y,b),l.set(d+y,b);l.set(d-p,d-p),l.set(d-p+1,d-p),l.set(d-p,d-p+1),l.set(d+p,d-p),l.set(d+p,d-p+1),l.set(d+p,d+p-1)}static generateModeMessage(l,d,p){let y=new q;return l?(y.appendBits(d-1,2),y.appendBits(p-1,6),y=An.generateCheckWords(y,28,4)):(y.appendBits(d-1,5),y.appendBits(p-1,11),y=An.generateCheckWords(y,40,4)),y}static drawModeMessage(l,d,p,y){let b=F.truncDivision(p,2);if(d)for(let E=0;E<7;E++){let T=b-3+E;y.get(E)&&l.set(T,b-5),y.get(E+7)&&l.set(b+5,T),y.get(20-E)&&l.set(T,b+5),y.get(27-E)&&l.set(b-5,T)}else for(let E=0;E<10;E++){let T=b-5+E+F.truncDivision(E,5);y.get(E)&&l.set(T,b-7),y.get(E+10)&&l.set(b+7,T),y.get(29-E)&&l.set(T,b+7),y.get(39-E)&&l.set(b-7,T)}}static generateCheckWords(l,d,p){let y=l.getSize()/p,b=new oo(An.getGF(p)),E=F.truncDivision(d,p),T=An.bitsToWords(l,p,E);b.encode(T,E-y);let M=d%p,k=new q;k.appendBits(0,M);for(const $ of Array.from(T))k.appendBits($,p);return k}static bitsToWords(l,d,p){let y=new Int32Array(p),b,E;for(b=0,E=l.getSize()/d;b<E;b++){let T=0;for(let M=0;M<d;M++)T|=l.get(b*d+M)?1<<d-M-1:0;y[b]=T}return y}static getGF(l){switch(l){case 4:return yt.AZTEC_PARAM;case 6:return yt.AZTEC_DATA_6;case 8:return yt.AZTEC_DATA_8;case 10:return yt.AZTEC_DATA_10;case 12:return yt.AZTEC_DATA_12;default:throw new v("Unsupported word size "+l)}}static stuffBits(l,d){let p=new q,y=l.getSize(),b=(1<<d)-2;for(let E=0;E<y;E+=d){let T=0;for(let M=0;M<d;M++)(E+M>=y||l.get(E+M))&&(T|=1<<d-1-M);(T&b)===b?(p.appendBits(T&b,d),E--):(T&b)===0?(p.appendBits(T|1,d),E--):p.appendBits(T,d)}return p}static totalBitsInLayer(l,d){return((d?88:112)+16*l)*l}}An.DEFAULT_EC_PERCENT=33,An.DEFAULT_AZTEC_LAYERS=0,An.MAX_NB_BITS=32,An.MAX_NB_BITS_COMPACT=4,An.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class gc{encode(l,d,p,y){return this.encodeWithHints(l,d,p,y,null)}encodeWithHints(l,d,p,y,b){let E=j.ISO_8859_1,T=An.DEFAULT_EC_PERCENT,M=An.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(Nr.CHARACTER_SET)&&(E=S.forName(b.get(Nr.CHARACTER_SET).toString())),b.has(Nr.ERROR_CORRECTION)&&(T=F.parseInt(b.get(Nr.ERROR_CORRECTION).toString())),b.has(Nr.AZTEC_LAYERS)&&(M=F.parseInt(b.get(Nr.AZTEC_LAYERS).toString()))),gc.encodeLayers(l,d,p,y,E,T,M)}static encodeLayers(l,d,p,y,b,E,T){if(d!==Ye.AZTEC)throw new v("Can only encode AZTEC, but got "+d);let M=An.encode(X.getBytes(l,b),E,T);return gc.renderResult(M,p,y)}static renderResult(l,d,p){let y=l.getMatrix();if(y==null)throw new Le;let b=y.getWidth(),E=y.getHeight(),T=Math.max(d,b),M=Math.max(p,E),k=Math.min(T/b,M/E),$=(T-b*k)/2,Z=(M-E*k)/2,ne=new ge(T,M);for(let ue=0,me=Z;ue<E;ue++,me+=k)for(let xe=0,Ne=$;xe<b;xe++,Ne+=k)y.get(xe,ue)&&ne.setRegion(Ne,me,k,k);return ne}}n.AbstractExpandedDecoder=ar,n.ArgumentException=g,n.ArithmeticException=je,n.AztecCode=W,n.AztecCodeReader=di,n.AztecCodeWriter=gc,n.AztecDecoder=$e,n.AztecDetector=Pr,n.AztecDetectorResult=dt,n.AztecEncoder=An,n.AztecHighLevelEncoder=vs,n.AztecPoint=Ht,n.BarcodeFormat=Ye,n.Binarizer=P,n.BinaryBitmap=A,n.BitArray=q,n.BitMatrix=ge,n.BitSource=Ki,n.BrowserAztecCodeReader=fi,n.BrowserBarcodeReader=bf,n.BrowserCodeReader=Ae,n.BrowserDatamatrixCodeReader=al,n.BrowserMultiFormatReader=fc,n.BrowserPDF417Reader=wu,n.BrowserQRCodeReader=hc,n.BrowserQRCodeSvgWriter=Ta,n.CharacterSetECI=V,n.ChecksumException=N,n.Code128Reader=it,n.Code39Reader=pn,n.DataMatrixDecodedBitStreamParser=Ba,n.DataMatrixReader=ya,n.DecodeHintType=G,n.DecoderResult=Be,n.DefaultGridSampler=Tt,n.DetectorResult=mt,n.EAN13Reader=zt,n.EncodeHintType=Nr,n.Exception=f,n.FormatException=B,n.GenericGF=yt,n.GenericGFPoly=rt,n.GlobalHistogramBinarizer=te,n.GridSampler=nt,n.GridSamplerInstance=Ct,n.HTMLCanvasElementLuminanceSource=Ke,n.HybridBinarizer=se,n.ITFReader=Yt,n.IllegalArgumentException=v,n.IllegalStateException=Le,n.InvertedLuminanceSource=ke,n.LuminanceSource=_e,n.MathUtils=We,n.MultiFormatOneDReader=pi,n.MultiFormatReader=Qo,n.MultiFormatWriter=_u,n.NotFoundException=re,n.OneDReader=un,n.PDF417DecodedBitStreamParser=Fe,n.PDF417DecoderErrorCorrection=Xi,n.PDF417Reader=Jr,n.PDF417ResultMetadata=No,n.PerspectiveTransform=st,n.PlanarYUVLuminanceSource=sa,n.QRCodeByteMatrix=ys,n.QRCodeDataMask=Qr,n.QRCodeDecodedBitStreamParser=Jn,n.QRCodeDecoderErrorCorrectionLevel=Wt,n.QRCodeDecoderFormatInformation=_r,n.QRCodeEncoder=$n,n.QRCodeEncoderQRCode=Pi,n.QRCodeMaskUtil=mr,n.QRCodeMatrixUtil=Ut,n.QRCodeMode=Bt,n.QRCodeReader=ja,n.QRCodeVersion=xt,n.QRCodeWriter=Gr,n.RGBLuminanceSource=so,n.RSS14Reader=Qt,n.RSSExpandedReader=Ve,n.ReaderException=ms,n.ReedSolomonDecoder=he,n.ReedSolomonEncoder=oo,n.ReedSolomonException=wt,n.Result=He,n.ResultMetadataType=et,n.ResultPoint=Ie,n.StringUtils=X,n.UnsupportedOperationException=ee,n.VideoInputDevice=ce,n.WhiteRectangleDetector=Ee,n.WriterException=Ln,n.ZXingArrays=U,n.ZXingCharset=S,n.ZXingInteger=F,n.ZXingStandardCharsets=j,n.ZXingStringBuilder=K,n.ZXingStringEncoding=Q,n.ZXingSystem=O,n.createAbstractExpandedDecoder=Qn,Object.defineProperty(n,"__esModule",{value:!0})}))})(Nh,Nh.exports)),Nh.exports}var jr=Dle();const Ole=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Fk=(function(){function t(e,n,r){if(this.formatMap=new Map([[Rt.QR_CODE,jr.BarcodeFormat.QR_CODE],[Rt.AZTEC,jr.BarcodeFormat.AZTEC],[Rt.CODABAR,jr.BarcodeFormat.CODABAR],[Rt.CODE_39,jr.BarcodeFormat.CODE_39],[Rt.CODE_93,jr.BarcodeFormat.CODE_93],[Rt.CODE_128,jr.BarcodeFormat.CODE_128],[Rt.DATA_MATRIX,jr.BarcodeFormat.DATA_MATRIX],[Rt.MAXICODE,jr.BarcodeFormat.MAXICODE],[Rt.ITF,jr.BarcodeFormat.ITF],[Rt.EAN_13,jr.BarcodeFormat.EAN_13],[Rt.EAN_8,jr.BarcodeFormat.EAN_8],[Rt.PDF_417,jr.BarcodeFormat.PDF_417],[Rt.RSS_14,jr.BarcodeFormat.RSS_14],[Rt.RSS_EXPANDED,jr.BarcodeFormat.RSS_EXPANDED],[Rt.UPC_A,jr.BarcodeFormat.UPC_A],[Rt.UPC_E,jr.BarcodeFormat.UPC_E],[Rt.UPC_EAN_EXTENSION,jr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ole)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),a=new Map;a.set(jr.DecodeHintType.POSSIBLE_FORMATS,i),a.set(jr.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(a){i(a)}})},t.prototype.decode=function(e){var n=new jr.MultiFormatReader(this.verbose,this.hints),r=new jr.HTMLCanvasElementLuminanceSource(e),i=new jr.BinaryBitmap(new jr.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:eU.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),Ple=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},kle=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},qk=(function(){function t(e,n,r){if(this.formatMap=new Map([[Rt.QR_CODE,"qr_code"],[Rt.AZTEC,"aztec"],[Rt.CODABAR,"codabar"],[Rt.CODE_39,"code_39"],[Rt.CODE_93,"code_93"],[Rt.CODE_128,"code_128"],[Rt.DATA_MATRIX,"data_matrix"],[Rt.ITF,"itf"],[Rt.EAN_13,"ean_13"],[Rt.EAN_8,"ean_8"],[Rt.PDF_417,"pdf417"],[Rt.UPC_A,"upc_a"],[Rt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Ple(this,void 0,void 0,function(){var n,r;return kle(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:eU.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,a=e;i<a.length;i++){var o=a[i],u=o.boundingBox.width*o.boundingBox.height;u>r&&(r=u,n=o)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),zk=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},Gk=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Lle=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&qk.isSupported()?(this.primaryDecoder=new qk(e,r,i),this.secondaryDecoder=new Fk(e,r,i)):this.primaryDecoder=new Fk(e,r,i)}return t.prototype.decodeAsync=function(e){return zk(this,void 0,void 0,function(){var n;return Gk(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return zk(this,void 0,void 0,function(){var n,r;return Gk(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),c2=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Jg=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},Zg=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},iU=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),Ble=(function(t){c2(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(iU),jle=(function(t){c2(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(Ble),Ule=(function(t){c2(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(iU),Vle=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new jle(this.track)},t.prototype.torchFeature=function(){return new Ule(this.track)},t})(),Fle=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return Jg(this,void 0,void 0,function(){var a,o;return Zg(this,function(u){switch(u.label){case 0:return a=new t(e,n,i),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:u.sent(),u.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Jg(this,void 0,void 0,function(){return Zg(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),a=i.length,o=0;e.mediaStream.getVideoTracks().forEach(function(u){e.mediaStream.removeTrack(u),u.stop(),++o,o>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Vle(this.getFirstTrackOrFail())},t})(),qle=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return Jg(this,void 0,void 0,function(){return Zg(this,function(i){return[2,Fle.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return Jg(this,void 0,void 0,function(){var n,r;return Zg(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),Hk=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},$k=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},zle=(function(){function t(){}return t.failIfNotSupported=function(){return Hk(this,void 0,void 0,function(){return $k(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Hk(this,void 0,void 0,function(){return $k(this,function(n){return[2,qle.create(e)]})})},t})(),Gle=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},Hle=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},$le=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=fd.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=fd.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Gle(this,void 0,void 0,function(){var e,n,r,i,a,o,u;return Hle(this,function(h){switch(h.label){case 0:return e=function(f){for(var g=f.getVideoTracks(),v=0,A=g;v<A.length;v++){var N=A[v];N.enabled=!1,N.stop(),f.removeTrack(N)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=h.sent(),i=[],a=0,o=r;a<o.length;a++)u=o[a],u.kind==="videoinput"&&i.push({id:u.deviceId,label:u.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var o=[],u=0,h=a;u<h.length;u++){var f=h[u];f.kind==="video"&&o.push({id:f.id,label:f.label})}e(o)},i=MediaStreamTrack;i.getSources(r)})},t})(),Kr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Kr||(Kr={}));var Yle=(function(){function t(){this.state=Kr.NOT_STARTED,this.onGoingTransactionNewState=Kr.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Kr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Kr.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Kr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Kr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Kr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Kr.UNKNOWN:throw"Transition from unknown is not allowed";case Kr.NOT_STARTED:this.failIfNewStateIs(e,[Kr.PAUSED]);break;case Kr.SCANNING:break;case Kr.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),Kle=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Kr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Kr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Kr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Kr.PAUSED},t})(),Wle=(function(){function t(){}return t.create=function(){return new Kle(new Yle)},t})(),Xle=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ya=(function(t){Xle(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(Uo),Qle=(function(){function t(e,n){this.logger=n,this.fps=Ya.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ya.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?rU.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!rs(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),Yk=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new nU(this.verbose),this.qrcode=new Lle(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Wle.create()}return t.prototype.start=function(e,n,r,i){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;i?o=i:o=this.verbose?this.logger.log:function(){};var u=Qle.create(n,this.logger);this.clearElement();var h=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=h,g=document.getElementById(this.elementId);g.clientWidth?g.clientWidth:Ya.DEFAULT_WIDTH,g.style.position="relative",this.shouldScan=!0,this.element=g;var v=this,A=this.stateManagerProxy.startTransition(Kr.SCANNING);return new Promise(function(N,P){var O=f?u.videoConstraints:v.createVideoConstraints(e);if(!O){A.cancel(),P("videoConstraints should be defined");return}var R={};(!f||u.aspectRatio)&&(R.aspectRatio=u.aspectRatio);var L={onRenderSurfaceReady:function(U,F){v.setupUi(U,F,u),v.isScanning=!0,v.foreverScan(u,r,o)}};zle.failIfNotSupported().then(function(U){U.create(O).then(function(F){return F.render(a.element,R,L).then(function(q){v.renderedCamera=q,A.execute(),N(null)}).catch(function(q){A.cancel(),P(q)})}).catch(function(F){A.cancel(),P(fd.errorGettingUserMedia(F))})}).catch(function(U){A.cancel(),P(fd.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Kr.PAUSED),this.showPausedState(),(rs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Kr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Kr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(Ya.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(rs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var u=o.width,h=o.height,f=document.getElementById(r.elementId),g=f.clientWidth?f.clientWidth:Ya.DEFAULT_WIDTH,v=Math.max(f.clientHeight?f.clientHeight:h,Ya.FILE_SCAN_MIN_HEIGHT),A=r.computeCanvasDrawConfig(u,h,g,v);if(n){var N=r.createCanvasElement(g,v,"qr-canvas-visible");N.style.display="inline-block",f.appendChild(N);var P=N.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=g,P.canvas.height=v,P.drawImage(o,0,0,u,h,A.x,A.y,A.width,A.height)}var O=Ya.FILE_SCAN_HIDDEN_CANVAS_PADDING,R=Math.max(o.width,A.width),L=Math.max(o.height,A.height),U=R+2*O,F=L+2*O,q=r.createCanvasElement(U,F);f.appendChild(q);var H=q.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=U,H.canvas.height=F,H.drawImage(o,0,0,u,h,O,O,R,L);try{r.qrcode.decodeRobustlyAsync(q).then(function(G){i(jk.createFromQrcodeResult(G))}).catch(a)}catch(G){a("QR code parse error, error = ".concat(G))}},o.onerror=a,o.onabort=a,o.onstalled=a,o.onsuspend=a,o.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return $le.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!rU.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Rt.QR_CODE,Rt.AZTEC,Rt.CODABAR,Rt.CODE_39,Rt.CODE_93,Rt.CODE_128,Rt.DATA_MATRIX,Rt.MAXICODE,Rt.ITF,Rt.EAN_13,Rt.EAN_8,Rt.PDF_417,Rt.RSS_14,Rt.RSS_EXPANDED,Rt.UPC_A,Rt.UPC_E,Rt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=e.formatsToSupport;i<a.length;i++){var o=a[i];Nle(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(rs(e))return!0;if(!rs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(rs(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return rs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(e,n,a),u=function(f){if(f<Ya.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ya.MIN_QR_BOX_SIZE,"px.")},h=function(f){return f>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=e),f};u(o.width),u(o.height),o.width=h(o.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=rs(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&a.height<=n,u={x:0,y:0,width:e,height:n},h=o?this.getShadedRegionBounds(e,n,a):u,f=this.createCanvasElement(h.width,h.height),g={willReadFrequently:!0},v=f.getContext("2d",g);v.canvas.width=h.width,v.canvas.height=h.height,this.element.append(f),o&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=v,this.canvasElement=f},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=fd.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,jk.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=fd.codeParseError(i);return n(a,tU.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),o=a.videoWidth/a.clientWidth,u=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*o,f=this.qrRegion.height*u,g=this.qrRegion.x*o,v=this.qrRegion.y*u;this.context.drawImage(a,g,v,h,f,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(N){!N&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){A()})):A()}).catch(function(N){i.logger.logError("Error happend while scanning context",N),A()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",o=function(P){if(P in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},u=Object.keys(e);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var h=Object.keys(e)[0];if(h!==n&&h!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(h===n){var f=e.facingMode;if(typeof f=="string"){if(o(f))return{facingMode:f}}else if(typeof f=="object")if(a in f){if(o(f["".concat(a)]))return{facingMode:{exact:f["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var g=typeof f;throw"Invalid type of 'facingMode' = ".concat(g)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(a in v)return{deviceId:{exact:v["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var A=typeof v;throw"Invalid type of 'deviceId' = ".concat(A)}}}var N=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(N)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var a=(r-e)/2,o=(i-n)/2;return{x:a,y:o,width:e,height:n}}else{var u=e,h=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(h)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ya.BORDER_SHADER_MATCH_COLOR:Ya.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,a=n,o=document.createElement("canvas");return o.style.width="".concat(i,"px"),o.style.height="".concat(a,"px"),o.style.display="none",o.id=rs(r)?"qr-canvas":r,o},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var o=(n-i.width)/2,u=(r-i.height)/2;if(a.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Ya.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var h=5,f=40;this.insertShaderBorders(a,f,h,-h,null,0,!0),this.insertShaderBorders(a,f,h,-h,null,0,!1),this.insertShaderBorders(a,f,h,null,-h,0,!0),this.insertShaderBorders(a,f,h,null,-h,0,!1),this.insertShaderBorders(a,h,f+h,-h,null,-h,!0),this.insertShaderBorders(a,h,f+h,null,-h,-h,!0),this.insertShaderBorders(a,h,f+h,-h,null,-h,!1),this.insertShaderBorders(a,h,f+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,i,a,o,u){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Ya.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(n,"px"),h.style.height="".concat(r,"px"),i!==null&&(h.style.top="".concat(i,"px")),a!==null&&(h.style.bottom="".concat(a,"px")),u?h.style.left="".concat(o,"px"):h.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),u2="data:image/svg+xml;base64,",Jle=u2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Zle=u2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Kk=u2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ece="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Wk=(function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t})(),tce=(function(){function t(){this.data=Wk.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Wk.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t})(),nce=(function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Uk.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var a=document.createElement("a");a.innerText=Uk.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t})(),rce=(function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Kk,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ece,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Kk,this.infoIcon.style.opacity="0.6")},t})(),ice=(function(){function t(){var e=this;this.infoDiv=new nce,this.infoIcon=new rce(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t})(),ace=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},oce=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Xk=(function(){function t(){}return t.hasPermissions=function(){return ace(this,void 0,void 0,function(){var e,n,r,i;return oce(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),n=0,r=e;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},t})(),Ol=(function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Zl.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Zl.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Uo.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Uo.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=e;r<i.length;r++){var a=i[r];if(!Uo.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return e},t})(),Ja=(function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t})(),Fs=(function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(Ja.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t})(),aU=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(g){try{f(r.next(g))}catch(v){o(v)}}function h(g){try{f(r.throw(g))}catch(v){o(v)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})},oU=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Qk=(function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return aU(this,void 0,void 0,function(){var e,n;return oU(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?nr.torchOffButton():nr.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?nr.torchOnFailedMessage():nr.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t})(),sce=(function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Fs.createElement("button",Ja.TORCH_BUTTON_ID),this.torchController=new Qk(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=nr.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(a){return aU(r,void 0,void 0,function(){return oU(this,function(o){switch(o.label){case 0:return[4,i.torchController.flipState()];case 1:return o.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Ja.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Ja.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Ja.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Ja.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Qk(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=nr.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,i){var a=new t(n,i);return a.render(e,r),a},t})(),lce=(function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=Fs.createElement("button",Ja.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(u){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=Fs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(u){if(!(u==null||u.target==null)){var h=u.target;if(!(h.files&&h.files.length===0)){var f=h.files,g=f[0],v=g.name;a.setImageNameToButton(v),r(g)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(u){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(u){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(u){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(u){u.stopPropagation(),u.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var h=u.dataTransfer;if(h){var f=h.files;if(!f||f.length===0)return;for(var g=!1,v=0;v<f.length;++v){var A=f.item(v);if(A){var N=/image.*/;if(A.type.match(N)){g=!0;var P=A.name;a.setImageNameToButton(P),r(A),o.innerText=nr.dragAndDropMessage();break}}}g||(o.innerText=nr.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=nr.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),i=e.length,a=e.substring(i-8,i);e="".concat(r,"....").concat(a)}var o=nr.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=o},t.prototype.setInitialValueToButton=function(){var e=nr.fileSelectionChooseImage()+" - "+nr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var i=new t(e,n,r);return i},t})(),cce=(function(){function t(e){this.selectElement=Fs.createElement("select",Ja.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=nr.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var a=1,o=0,u=this.cameras;o<u.length;o++){var h=u[o],f=h.id,g=h.label==null?f:h.label;(!g||g==="")&&(g=[nr.anonymousCameraPrefix(),a++].join(" "));var v=document.createElement("option");v.value=f,v.innerText=g,this.options.push(v),this.selectElement.appendChild(v)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t})(),uce=(function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Fs.createElement("input",Ja.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=nr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=nr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,i){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t})(),Ka;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ka||(Ka={}));function dce(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function fce(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var hce=(function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ol(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new nU(this.verbose),this.persistedDataManager=new tce,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,o){if(e)e(a,o);else{if(r.lastMatchFound===a)return;r.lastMatchFound=a,r.setHeaderMessage(nr.lastMatch(a),Ka.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,o){n&&n(a,o)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Yk(this.getScanRegionId(),fce(this.config,this.verbose))},t.prototype.pause=function(e){(rs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(a){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(a){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",a),i(a)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Uo.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Uo.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Uo.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Uo.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Uo.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Uo.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Uo.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Ol.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),a=this.getDashboardId();i.id=a,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new ice;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(nr.cameraPermissionRequesting());var a=function(){r||i.createPermissionButton(e,n)};Yk.getCameras().then(function(o){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),o&&o.length>0?(e.removeChild(n),i.renderCameraSelection(o)):(i.setHeaderMessage(nr.noCameraFound(),Ka.STATUS_WARNING),a())}).catch(function(o){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:a(),i.setHeaderMessage(o,Ka.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,i=Fs.createElement("button",this.getCameraPermissionButtonId());i.innerText=nr.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(e,n,i)}),n.appendChild(i)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Ol.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Xk.hasPermissions().then(function(i){i?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ol.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Ol.isFileScanType(this.currentScanType),r=this,i=function(a){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ol.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(nr.loadingImage()),r.html5Qrcode.scanFileV2(a,!0).then(function(o){r.resetHeaderMessage(),r.qrCodeSuccessCallback(o.decodedText,o)}).catch(function(o){r.setHeaderMessage(o,Ka.STATUS_WARNING),r.qrCodeErrorCallback(o,tU.createFrom(o))}))};this.fileSelectionUi=lce.create(e,n,i)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var a=uce.create(i,!1),o=function(O){var R=O.zoomFeature();if(R.isSupported()){a.setOnCameraZoomValueChangeCallback(function(U){R.apply(U)});var L=1;n.config.defaultZoomValueIfSupported&&(L=n.config.defaultZoomValueIfSupported),L=Rle(L,R.min(),R.max()),a.setValues(R.min(),R.max(),L,R.step()),a.show()}},u=cce.create(i,e),h=document.createElement("span"),f=Fs.createElement("button",Ja.CAMERA_START_BUTTON_ID);f.innerText=nr.scanButtonStartScanningText(),h.appendChild(f);var g=Fs.createElement("button",Ja.CAMERA_STOP_BUTTON_ID);g.innerText=nr.scanButtonStopScanningText(),g.style.display="none",g.disabled=!0,h.appendChild(g);var v,A=function(O){if(!O.torchFeature().isSupported()){v&&v.hide();return}v?v.updateTorchCapability(O.torchFeature()):v=sce.create(h,O.torchFeature(),{display:"none",marginLeft:"5px"},function(R){r.setHeaderMessage(R,Ka.STATUS_WARNING)}),v.show()};i.appendChild(h);var N=function(O){O||(f.style.display="none"),f.innerText=nr.scanButtonStartScanningText(),f.style.opacity="1",f.disabled=!1,O&&(f.style.display="inline-block")};if(f.addEventListener("click",function(O){f.innerText=nr.scanButtonScanningStarting(),u.disable(),f.disabled=!0,f.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var R=u.getValue();r.persistedDataManager.setLastUsedCameraId(R),r.html5Qrcode.start(R,dce(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(L){g.disabled=!1,g.style.display="inline-block",N(!1);var U=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&A(U),n.config.showZoomSliderIfSupported===!0&&o(U)}).catch(function(L){r.showHideScanTypeSwapLink(!0),u.enable(),N(!0),r.setHeaderMessage(L,Ka.STATUS_WARNING)})}),u.hasSingleItem()&&f.click(),g.addEventListener("click",function(O){if(!r.html5Qrcode)throw"html5Qrcode not defined";g.disabled=!0,r.html5Qrcode.stop().then(function(R){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),u.enable(),f.disabled=!1,g.style.display="none",f.style.display="inline-block",v&&(v.reset(),v.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(R){g.disabled=!1,r.setHeaderMessage(R,Ka.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var P=r.persistedDataManager.getLastUsedCameraId();u.hasValue(P)?(u.setValue(P),f.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=nr.textIfCameraScanSelected(),r=nr.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var o=Fs.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=Ol.isCameraScanType(this.currentScanType)?n:r,o.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ol.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=r,e.currentScanType=Zl.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=n,e.currentScanType=Zl.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),a.appendChild(o),i.appendChild(a)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Xk.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Ka.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case Ka.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Ka.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Ka.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Jle,this.cameraScanImage.alt=nr.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Zle,this.fileScanImage.alt=nr.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Ja.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Ja.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t})();const pce=({products:t=[],customers:e=[],categories:n=[],accounts:r=[],transactions:i=[],userProfile:a,activeSession:o,onUpsertCustomer:u,onUpdateProduct:h,onCompleteSale:f,onQuickOpenDay:g,posSession:v,setPosSession:A,onGoToFinance:N})=>{const{cart:P=[],discount:O=0,discountPercent:R=0,globalDiscountType:L="AMT",paymentMethod:U="CASH",accountId:F="cash",search:q="",categoryId:H="All",chequeNumber:G="",chequeDate:B="",isAdvance:z=!1,advanceAmount:V=0}=v,[ee,Q]=le.useState(null),[X,K]=le.useState(!1),[ge,re]=le.useState(!1),[te,se]=le.useState(!1),[_e,ke]=le.useState(!1),[Ke,ce]=le.useState(!1),[fe,Ae]=le.useState(null),[He,ot]=le.useState(null),[Ye,Ce]=le.useState(""),[et,Be]=le.useState(""),[ct,rt]=le.useState(!1),[je,yt]=le.useState(""),[wt,Le]=le.useState(""),[he,ve]=le.useState("50000"),$e=le.useRef(null),We=le.useRef(null),ye=le.useRef(null),Ie=le.useMemo(()=>t.filter(Te=>{const lt=!q.trim()||(Te.name||"").toLowerCase().includes(q.toLowerCase())||(Te.sku||"").toLowerCase().includes(q.toLowerCase()),zt=!H||H==="All"||Te.categoryId===H;return lt&&zt}).sort((Te,lt)=>(Te.name||"").localeCompare(lt.name||"")),[q,H,t]),mt=le.useMemo(()=>e.filter(Te=>Te&&Te.name&&(Te.name.toLowerCase().includes(Ye.toLowerCase())||Te.phone&&Te.phone.includes(Ye))),[e,Ye]),dt=()=>{const Te=new Date;return Te.getFullYear()+"-"+String(Te.getMonth()+1).padStart(2,"0")+"-"+String(Te.getDate()).padStart(2,"0")},Ee=dt(),nt=le.useMemo(()=>{const Te=(i||[]).filter(Ot=>Ot.date.split("T")[0]===Ee),lt=Te.filter(Ot=>Ot.type==="SALE"&&Ot.paymentMethod!=="CREDIT"||Ot.type==="CREDIT_PAYMENT").reduce((Ot,wn)=>Ot+Number(wn.amount||0),0),zt=Te.filter(Ot=>Ot.type==="SALE"&&Ot.paymentMethod==="CREDIT").reduce((Ot,wn)=>Ot+Number(wn.amount||0),0);return{realizedInflow:lt,dueAmount:zt}},[i,Ee]),st=le.useMemo(()=>{let Te=0,lt=0;P.forEach(ir=>{const En=ir.qty*ir.price;let Gn=0;ir.discountType==="PCT"?Gn=En*ir.discount/100:Gn=ir.discount,Te+=En,lt+=Gn});const zt=Te-lt,Ot=L==="PCT"?zt*R/100:O,wn=Math.max(0,zt-Ot),an=z?Math.max(0,wn-V):0;return{gross:Te,lineSavings:lt,subtotal:zt,globalDiscountAmt:Ot,finalTotal:wn,remainingDue:an}},[P,O,R,L,z,V]),Tt=Math.max(0,(parseFloat(et)||0)-(z?V:st.finalTotal)),Ct=(o==null?void 0:o.status)==="OPEN",Ht=Te=>{Te(),Pr(),$e.current=window.setTimeout(()=>{We.current=window.setInterval(Te,80)},400)},Pr=()=>{$e.current&&window.clearTimeout($e.current),We.current&&window.clearInterval(We.current),$e.current=null,We.current=null},di=Te=>{!Ct||Te.stock<=0||A(lt=>lt.cart.find(Ot=>Ot.product.id===Te.id)?{...lt,cart:lt.cart.map(Ot=>Ot.product.id===Te.id?{...Ot,qty:Math.min(Ot.qty+1,Te.stock)}:Ot)}:{...lt,cart:[{product:Te,qty:1,price:Te.price,discount:0,discountType:"AMT"},...lt.cart]})},fi=(Te,lt)=>{A(zt=>lt<=0?{...zt,cart:zt.cart.filter(Ot=>Ot.product.id!==Te)}:{...zt,cart:zt.cart.map(Ot=>Ot.product.id===Te?{...Ot,qty:Math.min(lt,Ot.product.stock)}:Ot)})},un=(Te,lt)=>{A(zt=>({...zt,cart:zt.cart.map(Ot=>Ot.product.id===Te?{...Ot,price:lt}:Ot)}))},it=(Te,lt,zt)=>{A(Ot=>({...Ot,cart:Ot.cart.map(wn=>wn.product.id===Te?{...wn,discount:lt,discountType:zt}:wn)}))},pn=(Te,lt)=>{A(zt=>({...zt,discount:lt==="AMT"?Te:0,discountPercent:lt==="PCT"?Te:0,globalDiscountType:lt}))},Yt=Te=>{const lt=t.find(zt=>zt.sku===Te||zt.id===Te);lt&&(di(lt),ke(!1))};le.useEffect(()=>{if(_e&&!ye.current){const Te=new hce("reader",{fps:10,qrbox:{width:250,height:250}},!1);Te.render(Yt,lt=>console.debug(lt)),ye.current=Te}return()=>{ye.current&&(ye.current.clear().catch(Te=>console.error("Failed to clear scanner",Te)),ye.current=null)}},[_e]);const Mn=Te=>{K(!0);const lt=`TX-${Date.now()}-${Math.random().toString(36).substr(2,5).toUpperCase()}`,zt=z?V:U==="CREDIT"?0:st.finalTotal,Ot=z?st.finalTotal-(V||0):U==="CREDIT"?st.finalTotal:0,wn={id:lt,type:"SALE",amount:st.finalTotal,paidAmount:zt,balanceDue:Ot,discount:st.lineSavings+st.globalDiscountAmt,paymentMethod:U,accountId:U==="BANK"||U==="CARD"||U==="CHEQUE"?F:"cash",customerId:Te,description:z?`Advance Sale: Rs. ${zt} Paid`:`Sale: ${P.length} SKUs`,date:dt()+"T"+new Date().toTimeString().split(" ")[0],chequeNumber:U==="CHEQUE"?G:void 0,chequeDate:U==="CHEQUE"?B:void 0,items:P.map(an=>{const ir=an.qty*an.price,En=an.discountType==="PCT"?ir*an.discount/100:an.discount;return{productId:an.product.id,quantity:an.qty,price:an.price,discount:En}})};f(wn),Q({...wn,subtotal:st.gross,total:st.finalTotal,globalDiscount:st.globalDiscountAmt}),A({cart:[],discount:0,discountPercent:0,globalDiscountType:"AMT",paymentMethod:"CASH",accountId:"cash",search:"",categoryId:"All",chequeNumber:"",chequeDate:dt(),isAdvance:!1,advanceAmount:0}),re(!1),se(!1),ce(!1),Be(""),K(!1)},Ei=()=>{if(!je.trim())return;const Te={id:`CUS-${Date.now()}`,name:je.toUpperCase(),phone:wt,email:"",address:"",totalCredit:0,creditLimit:parseFloat(he)||5e4};u(Te),Mn(Te.id),rt(!1),yt(""),Le("")},$i=Te=>{var En;const lt=window.open("","_blank");if(!lt)return;const zt=a.logo?`<div style="text-align: center; margin-bottom: 5px; width: 100%;">
           <img src="${a.logo}" style="max-height: 55px; max-width: 100%; filter: grayscale(100%);" />
         </div>`:"",Ot=(En=Te.items)==null?void 0:En.map(Gn=>{const Cr=t.find(no=>no.id===Gn.productId),Bn=Gn.quantity*Gn.price-(Gn.discount||0);return`
        <tr>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 30%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${(Cr==null?void 0:Cr.name)||"Item"}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 8%; text-align: center;">${Gn.quantity}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 20%; text-align: right;">${Number(Gn.price).toLocaleString()}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 20%; text-align: right;">-${(Gn.discount||0).toLocaleString()}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 22%; text-align: right;">${Bn.toLocaleString()}</td>
        </tr>
      `}).join(""),wn=new Date(Te.date).toLocaleDateString(),an=new Date(Te.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ir=Number(Te.amount)+Number(Te.discount);lt.document.write(`
      <html>
        <head>
          <title>RECEIPT - ${Te.id}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap');
            @page { margin: 0; }
            body { 
                font-family: 'JetBrains Mono', monospace; 
                padding: 0; 
                margin: 0; 
                color: #000; 
                width: 72mm; 
                background: #fff; 
                line-height: 1.1; 
                font-size: 9px;
            }
            .receipt-content { padding: 4px; box-sizing: border-box; width: 72mm; }
            .center { text-align: center; }
            .hr { border-top: 1px dashed #000; margin: 4px 0; }
            .biz-name { font-size: 13px; font-weight: 800; text-transform: uppercase; margin: 1px 0; }
            .biz-sub { font-size: 8px; font-weight: 700; text-transform: uppercase; }
            .meta { font-size: 8px; margin: 4px 0; font-weight: 700; }
            table { width: 100%; border-collapse: collapse; table-layout: fixed; }
            th { border-bottom: 0.5px solid #000; padding-bottom: 2px; }
            .summary-row { display: flex; justify-content: space-between; font-weight: 800; margin: 1px 0; font-size: 9px; }
            .total-row { display: flex; justify-content: space-between; font-size: 14px; font-weight: 800; border-top: 1px solid #000; padding-top: 2px; margin-top: 2px; }
            .footer { text-align: center; font-size: 8px; font-weight: 800; margin-top: 10px; border-top: 0.5px dashed #000; padding-top: 4px; }
          </style>
        </head>
        <body onload="window.print(); window.close();">
          <div class="receipt-content">
            <div class="center">
              ${zt}
              <div class="biz-name">${a.name}</div>
              <div class="biz-sub">${a.branch}</div>
              ${a.phone?`<div class="biz-sub">PH: ${a.phone}</div>`:""}
            </div>
            <div class="hr"></div>
            <div class="meta">
              REF: ${Te.id}<br/>
              DATE: ${wn} | TIME: ${an}
            </div>
            <div class="hr"></div>
            <table>
              <thead>
                <tr>
                  <th style="text-align: left; width: 30%;">ITEM</th>
                  <th style="text-align: center; width: 8%;">QTY</th>
                  <th style="text-align: right; width: 20%;">RATE</th>
                  <th style="text-align: right; width: 20%;">DISC</th>
                  <th style="text-align: right; width: 22%;">AMT</th>
                </tr>
              </thead>
              <tbody>
                ${Ot}
              </tbody>
            </table>
            <div class="hr"></div>
            <div class="summary-row">
              <span>SUBTOTAL:</span>
              <span>${ir.toLocaleString(void 0,{minimumFractionDigits:2})}</span>
            </div>
            ${Te.discount>0?`
            <div class="summary-row">
              <span>TOTAL DISC:</span>
              <span>-${Te.discount.toLocaleString(void 0,{minimumFractionDigits:2})}</span>
            </div>`:""}
            <div class="total-row">
              <span>NET TOTAL:</span>
              <span>${Te.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}</span>
            </div>
            ${(Te.balanceDue||0)>0?`
            <div class="summary-row" style="margin-top: 5px;">
              <span>AMOUNT PAID:</span>
              <span>${Number(Te.paidAmount).toLocaleString(void 0,{minimumFractionDigits:2})}</span>
            </div>
            <div class="summary-row" style="color: #000; border-bottom: 0.5px solid #000; padding-bottom: 2px;">
              <span>BALANCE DUE:</span>
              <span>${Number(Te.balanceDue).toLocaleString(void 0,{minimumFractionDigits:2})}</span>
            </div>`:""}
            <div class="hr"></div>
            <div style="font-size: 8px; text-align: right; font-weight: 800;">PAID BY: ${Te.paymentMethod}</div>
            <div class="footer">
                THANK YOU - VISIT AGAIN<br/>
                PRASAMA ERP SOLUTIONS
            </div>
          </div>
        </body>
      </html>
    `),lt.document.close()};return Ct?ee?x.jsx("div",{className:"h-full flex items-center justify-center",children:x.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-slate-200 w-full max-md p-12 text-center space-y-8 animate-in zoom-in duration-300",children:[x.jsx("div",{className:"w-16 h-16 bg-emerald-50 text-emerald-600 rounded-full flex items-center justify-center text-3xl mx-auto",children:""}),x.jsx("h2",{className:"text-2xl font-bold text-slate-900 uppercase tracking-tighter",children:"Checkout Successful"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsx("button",{onClick:()=>Q(null),className:"bg-slate-900 text-white py-4 rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-lg hover:bg-black transition-all",children:"New Transaction"}),x.jsx("button",{onClick:()=>$i(ee),className:"bg-indigo-600 text-white py-4 rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-lg hover:bg-indigo-700 transition-all",children:"Print Receipt"})]})]})}):x.jsxs("div",{className:"h-[calc(100vh-10rem)] flex flex-col gap-6",children:[x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[x.jsxs("div",{className:"flex gap-4 flex-1 max-w-4xl",children:[x.jsxs("div",{className:"relative flex-[2]",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-2",children:"Product Lookup & Search"}),x.jsx("input",{type:"text",placeholder:"Scan barcode or search name/SKU...",className:"w-full pl-12 pr-6 py-4 rounded-2xl border border-slate-200 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none font-semibold text-sm bg-white",value:q,onChange:Te=>A(lt=>({...lt,search:Te.target.value}))}),x.jsx("span",{className:"absolute left-4 top-10 text-slate-400",children:""})]}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-2",children:"Asset Type (Filter)"}),x.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl border border-indigo-400 focus:ring-4 focus:ring-indigo-500/10 outline-none bg-white text-xs font-black uppercase shadow-sm cursor-pointer",value:H,onChange:Te=>A(lt=>({...lt,categoryId:Te.target.value})),children:[x.jsx("option",{value:"All",children:"All Categories"}),n.map(Te=>x.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),x.jsx("div",{className:"flex items-end mb-0.5",children:x.jsx("button",{onClick:()=>ke(!0),className:"px-6 py-4 bg-slate-100 rounded-2xl border border-slate-200 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-black text-[10px] uppercase tracking-widest",children:" Scan"})})]}),x.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-slate-100 shadow-sm flex gap-8 items-center",children:[x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Realized Inflow (Cash+Bank)"}),x.jsxs("p",{className:"text-base font-black font-mono text-emerald-600",children:["Rs. ",nt.realizedInflow.toLocaleString()]})]}),x.jsx("div",{className:"w-px h-8 bg-slate-100"}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"New Unsettled Credit"}),x.jsxs("p",{className:"text-base font-black font-mono text-rose-600",children:["Rs. ",nt.dueAmount.toLocaleString()]})]})]})]}),x.jsxs("div",{className:"flex-1 flex gap-8 min-h-0",children:[x.jsx("div",{className:"flex-1 overflow-x-auto bg-white rounded-[2rem] border border-slate-200 shadow-sm",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse table-fixed",children:[x.jsx("thead",{className:"bg-slate-50/80 sticky top-0 backdrop-blur-md z-10",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest w-auto",children:"Asset Details"}),x.jsx("th",{className:"px-2 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right w-[100px]",children:"Base Price"}),x.jsx("th",{className:"px-2 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-center w-[80px]",children:"Stock"}),x.jsx("th",{className:"px-2 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-center w-[60px]",children:"Action"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-100",children:[Ie.map(Te=>{const lt=(Te.stock||0)<=(Te.lowStockThreshold||0);return x.jsxs("tr",{className:"hover:bg-slate-50 transition-all group",children:[x.jsx("td",{className:"px-6 py-0.5 overflow-hidden",children:x.jsxs("div",{className:"flex items-center gap-2 overflow-hidden max-w-full",children:[x.jsx("p",{className:"font-black text-slate-900 text-[12px] uppercase truncate shrink leading-none",children:Te.name}),x.jsx("span",{className:"text-slate-300 shrink-0",children:""}),x.jsx("p",{className:"text-[9px] font-mono font-black text-indigo-500 uppercase truncate opacity-70 shrink-0 leading-none",children:Te.sku})]})}),x.jsx("td",{className:"px-2 py-0.5 text-right whitespace-nowrap",children:x.jsxs("span",{className:"font-black text-slate-900 text-[11px] font-mono leading-none",children:["Rs. ",(Number(Te.price)||0).toLocaleString()]})}),x.jsx("td",{className:"px-2 py-0.5 text-center",children:x.jsxs("div",{className:`inline-flex flex-col items-center justify-center min-w-[50px] py-0 rounded-lg border ${lt?"bg-rose-50 border-rose-100 text-rose-600":"bg-emerald-50 border-emerald-100 text-emerald-600"}`,children:[x.jsx("span",{className:"text-[11px] font-black font-mono leading-tight",children:Te.stock}),x.jsx("span",{className:"text-[6px] font-black uppercase tracking-tight leading-none",children:"Units"})]})}),x.jsx("td",{className:"px-2 py-0.5 text-center",children:x.jsx("button",{onClick:zt=>{zt.stopPropagation(),di(Te)},disabled:Te.stock<=0,className:"w-7 h-7 rounded-lg bg-slate-900 text-white flex items-center justify-center font-black text-lg hover:bg-black hover:scale-105 active:scale-95 transition-all shadow-lg shadow-slate-200 disabled:bg-slate-100 disabled:text-slate-300 disabled:shadow-none",children:"+"})})]},Te.id)}),Ie.length===0&&x.jsx("tr",{children:x.jsxs("td",{colSpan:4,className:"py-20 text-center opacity-30",children:[x.jsx("div",{className:"text-4xl mb-2",children:""}),x.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"No matching assets found in catalog"})]})})]})]})}),x.jsxs("div",{className:"w-[420px] flex flex-col bg-white rounded-[2rem] border border-slate-200 shadow-xl overflow-hidden shrink-0",children:[x.jsxs("div",{className:"px-6 py-3 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[x.jsx("h3",{className:"font-black text-slate-900 uppercase tracking-tight text-xs",children:"Checkout Terminal"}),x.jsxs("span",{className:"bg-indigo-600 text-white px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[P.length," SKUs"]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-0.5",children:P.map(Te=>{const lt=fe===Te.product.id,zt=He===Te.product.id,Ot=Te.price*Te.qty,wn=Te.discountType==="PCT"?Ot*Te.discount/100:Te.discount,an=Ot-wn;return x.jsxs("div",{className:"rounded-lg bg-white border border-slate-100 hover:border-indigo-100 transition-all",children:[x.jsxs("div",{className:"flex items-center justify-between p-1.5 gap-2",children:[x.jsxs("div",{className:"min-w-0 flex-1",children:[x.jsx("p",{className:"text-[10px] font-black text-slate-800 truncate uppercase leading-none",children:Te.product.name}),x.jsx("p",{className:"text-[8px] font-mono font-bold text-slate-400 mt-0.5",children:Te.price!==Te.product.price?`Rs. ${Te.price.toLocaleString()}`:`Rs. ${Te.product.price.toLocaleString()}`})]}),x.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 rounded-md p-0.5 border border-slate-100 shrink-0",children:[x.jsx("button",{onClick:()=>Ht(()=>fi(Te.product.id,Te.qty-1)),className:"w-5 h-5 rounded bg-white flex items-center justify-center font-black text-slate-500 text-[10px]",children:"-"}),x.jsx("span",{className:"text-[10px] font-black w-4 text-center text-slate-700",children:Te.qty}),x.jsx("button",{onClick:()=>Ht(()=>fi(Te.product.id,Te.qty+1)),className:"w-5 h-5 rounded bg-white flex items-center justify-center font-black text-slate-500 text-[10px]",children:"+"})]}),x.jsx("div",{className:"w-20 text-right shrink-0",children:x.jsxs("p",{className:"text-[11px] font-black font-mono text-slate-900 leading-none",children:["Rs. ",an.toLocaleString()]})}),x.jsxs("div",{className:"flex gap-0.5 shrink-0",children:[x.jsx("button",{onClick:()=>{ot(zt?null:Te.product.id),Ae(null)},className:`w-5 h-5 rounded flex items-center justify-center text-[10px] transition-all ${zt?"bg-indigo-600 text-white":"bg-slate-50 text-slate-300 hover:text-indigo-500"}`,children:""}),x.jsx("button",{onClick:()=>{Ae(lt?null:Te.product.id),ot(null)},className:`w-5 h-5 rounded flex items-center justify-center text-[10px] transition-all ${Te.discount>0?"bg-emerald-50 text-emerald-600":"bg-slate-50 text-slate-300 hover:text-emerald-500"}`,children:""})]})]}),zt&&x.jsx("div",{className:"p-2 bg-slate-900 mx-1 mb-1 rounded-md border border-slate-800 space-y-2 animate-in slide-in-from-top-2",children:x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsxs("div",{className:"space-y-0.5",children:[x.jsx("label",{className:"text-[7px] font-black text-slate-500 uppercase tracking-widest",children:"Price"}),x.jsx("input",{type:"number",className:"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-[9px] font-black font-mono text-white outline-none focus:border-indigo-500",value:Te.price,onChange:ir=>un(Te.product.id,parseFloat(ir.target.value)||0)})]}),x.jsxs("div",{className:"space-y-0.5",children:[x.jsx("label",{className:"text-[7px] font-black text-slate-500 uppercase tracking-widest",children:"Qty"}),x.jsx("input",{type:"number",className:"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-[9px] font-black font-mono text-white outline-none focus:border-indigo-500",value:Te.qty,onChange:ir=>fi(Te.product.id,parseInt(ir.target.value)||0)})]})]})}),lt&&x.jsxs("div",{className:"p-1.5 bg-slate-50 mx-1 mb-1 rounded-md border border-slate-200 flex items-center gap-1.5 animate-in slide-in-from-top-2",children:[x.jsxs("div",{className:"flex bg-white rounded border border-slate-200 overflow-hidden shadow-inner",children:[x.jsx("button",{onClick:()=>it(Te.product.id,Te.discount,"AMT"),className:`px-1.5 py-0.5 text-[7px] font-black uppercase ${Te.discountType==="AMT"?"bg-slate-900 text-white":"text-slate-400"}`,children:"Rs"}),x.jsx("button",{onClick:()=>it(Te.product.id,Te.discount,"PCT"),className:`px-1.5 py-0.5 text-[7px] font-black uppercase ${Te.discountType==="PCT"?"bg-slate-900 text-white":"text-slate-400"}`,children:"%"})]}),x.jsx("input",{type:"number",className:"flex-1 bg-white border border-slate-200 rounded px-1.5 py-0.5 text-[9px] font-black font-mono text-indigo-600 outline-none",value:Te.discount||"",placeholder:"0",onChange:ir=>it(Te.product.id,parseFloat(ir.target.value)||0,Te.discountType),autoFocus:!0}),x.jsx("button",{onClick:()=>Ae(null),className:"text-[8px] font-black text-slate-400 hover:text-slate-900",children:"OK"})]})]},Te.product.id)})}),x.jsxs("div",{className:"p-4 space-y-3 bg-slate-50 border-t border-slate-100",children:[x.jsxs("div",{className:"space-y-1 pb-2 border-b border-slate-200/50",children:[x.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:[x.jsx("span",{children:"Subtotal"}),x.jsxs("span",{className:"font-mono text-slate-700",children:["Rs. ",st.subtotal.toLocaleString()]})]}),x.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-slate-500",children:"Invoice Disc."}),x.jsx("button",{onClick:()=>ce(!Ke),className:"w-5 h-5 rounded-md bg-white border border-slate-200 flex items-center justify-center text-[8px] hover:border-indigo-300 transition-all shadow-sm",children:""})]}),x.jsxs("span",{className:"font-mono text-rose-600",children:[st.globalDiscountAmt>0?"-":""," Rs. ",st.globalDiscountAmt.toLocaleString()]})]}),Ke&&x.jsxs("div",{className:"p-2 bg-indigo-900 rounded-xl border border-indigo-800 flex items-center gap-2 animate-in slide-in-from-top-2 my-2",children:[x.jsxs("div",{className:"flex bg-slate-800 rounded-lg border border-slate-700 overflow-hidden shadow-inner",children:[x.jsx("button",{onClick:()=>A(Te=>({...Te,globalDiscountType:"AMT"})),className:`px-2 py-1 text-[8px] font-black uppercase transition-colors ${L==="AMT"?"bg-white text-indigo-900":"text-slate-400"}`,children:"Rs"}),x.jsx("button",{onClick:()=>A(Te=>({...Te,globalDiscountType:"PCT"})),className:`px-2 py-1 text-[8px] font-black uppercase transition-colors ${L==="PCT"?"bg-white text-indigo-900":"text-slate-400"}`,children:"%"})]}),x.jsx("input",{type:"number",className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-2 py-1.5 text-[10px] font-black font-mono text-white outline-none focus:border-indigo-400",value:L==="PCT"?R||"":O||"",placeholder:"0",onChange:Te=>pn(parseFloat(Te.target.value)||0,L),autoFocus:!0}),x.jsx("button",{onClick:()=>ce(!1),className:"text-[10px] font-black text-indigo-300 hover:text-white px-1",children:"Done"})]})]}),x.jsx("div",{className:"grid grid-cols-5 gap-1",children:["CASH","BANK","CARD","CREDIT","CHEQUE"].map(Te=>x.jsx("button",{disabled:z&&Te==="CREDIT",onClick:()=>A(lt=>({...lt,paymentMethod:Te})),className:`py-1.5 rounded-lg text-[7px] font-black uppercase transition-all border ${U===Te?"bg-slate-900 border-slate-900 text-white shadow-md":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"} disabled:opacity-20`,children:Te},Te))}),x.jsxs("div",{className:"py-2 border-t border-slate-100/50 mt-1",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("button",{onClick:()=>A(Te=>({...Te,isAdvance:!Te.isAdvance})),className:`flex items-center gap-2 px-3 py-1 rounded-full text-[8px] font-black uppercase transition-all ${z?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:z?" Advance Active":" Record Advance"}),z&&x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[7px] font-black text-slate-400 uppercase tracking-widest mb-0.5",children:"Remaining Due"}),x.jsxs("p",{className:"text-[10px] font-black font-mono text-rose-500",children:["Rs. ",st.remainingDue.toLocaleString()]})]})]}),z&&x.jsxs("div",{className:"flex items-center gap-2 p-2 bg-indigo-50 border border-indigo-100 rounded-xl animate-in slide-in-from-bottom-1",children:[x.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase shrink-0",children:"Paid Now (Rs):"}),x.jsx("input",{type:"number",className:"flex-1 bg-white border border-indigo-200 rounded-lg px-3 py-1 text-[11px] font-black font-mono text-indigo-600 outline-none",value:V||"",onChange:Te=>A(lt=>({...lt,advanceAmount:parseFloat(Te.target.value)||0})),placeholder:"Enter amount...",autoFocus:!0})]})]}),x.jsxs("div",{className:"pt-2 flex justify-between items-end text-xl font-black text-slate-900 tracking-tighter border-t border-slate-100/50",children:[x.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] mb-1",children:"Net Pay"}),x.jsxs("span",{className:"font-mono",children:["Rs. ",st.finalTotal.toLocaleString()]})]}),x.jsx("button",{onClick:()=>{U==="CREDIT"||z?re(!0):U==="CASH"?se(!0):Mn()},disabled:P.length===0||X||z&&((V||0)<=0||(V||0)>=st.finalTotal),className:"w-full bg-indigo-600 text-white py-3 rounded-2xl font-black uppercase text-[10px] shadow-xl shadow-indigo-600/20 active:scale-[0.98] disabled:bg-slate-200 transition-all tracking-[0.1em]",children:z?"Authorize Partial Pay":"Authorize Full Payment"})]})]})]}),_e&&x.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Camera Scanner"}),x.jsx("p",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest mt-1",children:"Ready for QR / Barcode identification"})]}),x.jsx("button",{onClick:()=>ke(!1),className:"text-slate-300 hover:text-slate-900 text-4xl leading-none",children:""})]}),x.jsxs("div",{className:"p-8",children:[x.jsx("div",{id:"reader",className:"w-full overflow-hidden rounded-3xl border-4 border-slate-900 shadow-inner bg-black min-h-[300px]"}),x.jsx("button",{onClick:()=>ke(!1),className:"w-full mt-8 bg-slate-900 text-white font-black py-4 rounded-2xl uppercase text-[11px] tracking-widest shadow-xl hover:bg-black transition-all",children:"Discard & Return"})]})]})}),te&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-xl cursor-pointer",onClick:Te=>{Te.target===Te.currentTarget&&(se(!1),Be(""))},children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-lg overflow-hidden animate-in zoom-in duration-300 cursor-default",children:[x.jsxs("div",{className:"p-10 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Cash Tender"}),x.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mt-1",children:"Authorizing Local Flow"})]}),x.jsx("button",{type:"button",onClick:()=>{se(!1),Be("")},className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-900 text-white hover:bg-rose-600 transition-all text-4xl leading-none shadow-xl active:scale-90","aria-label":"Close window",children:""})]}),x.jsxs("form",{onSubmit:Te=>{Te.preventDefault();const lt=z?V||0:st.finalTotal;!X&&(parseFloat(et)||0)>=lt&&Mn()},className:"p-10 space-y-8",children:[x.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2rem] border border-slate-100 flex justify-between items-center",children:[x.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:z?"Advance Payable":"Total Payable"}),x.jsxs("span",{className:"text-2xl font-black text-slate-900 font-mono",children:["Rs. ",(z?V||0:st.finalTotal).toLocaleString()]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Amount Given"}),x.jsx("input",{autoFocus:!0,type:"number",className:"w-full px-8 py-5 rounded-3xl border-2 border-slate-100 text-4xl font-black font-mono text-center text-indigo-600 outline-none",placeholder:"0.00",value:et,onChange:Te=>Be(Te.target.value)})]}),parseFloat(et)>(z?V||0:st.finalTotal)&&x.jsxs("div",{className:"p-6 rounded-3xl bg-indigo-50 border border-indigo-100 flex justify-between items-center animate-in fade-in slide-in-from-top-1",children:[x.jsx("span",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Change to Return"}),x.jsxs("span",{className:"text-2xl font-black text-indigo-600 font-mono",children:["Rs. ",Tt.toLocaleString()]})]}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{type:"button",onClick:()=>{se(!1),Be("")},className:"flex-1 bg-slate-100 text-slate-900 font-black py-5 rounded-[1.5rem] uppercase tracking-widest text-xs hover:bg-slate-200 transition-all",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:X||(parseFloat(et)||0)<(z?V||0:st.finalTotal),className:"flex-[2] bg-slate-900 text-white font-black py-5 rounded-[1.5rem] uppercase tracking-widest text-xs shadow-2xl hover:bg-black transition-all",children:"Finalize Sale"})]})]})]})}),ge&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-xl cursor-pointer",onClick:Te=>{Te.target===Te.currentTarget&&re(!1)},children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in duration-300 cursor-default",children:[x.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:z?"Client Binding (Debt Auto-Gen)":"Charge Credit Account"}),x.jsx("button",{onClick:()=>re(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-slate-900 text-white hover:bg-rose-600 transition-all text-3xl shadow-lg",children:""})]}),x.jsx("div",{className:"p-8 space-y-6",children:ct?x.jsxs("div",{className:"space-y-4",children:[x.jsx("input",{value:je,onChange:Te=>yt(Te.target.value),placeholder:"CLIENT NAME",className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-bold uppercase"}),x.jsx("input",{value:wt,onChange:Te=>Le(Te.target.value),placeholder:"PHONE",className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-mono"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>rt(!1),className:"flex-1 py-3 text-slate-400 font-black uppercase text-[10px]",children:"Back"}),x.jsx("button",{onClick:Ei,className:"flex-[2] bg-indigo-600 text-white py-3 rounded-xl font-black uppercase text-[10px]",children:"Complete & Charge"})]})]}):x.jsxs(x.Fragment,{children:[x.jsx("input",{type:"text",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none",placeholder:"Search Client...",value:Ye,onChange:Te=>Ce(Te.target.value)}),x.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:mt.map(Te=>x.jsxs("button",{onClick:()=>{U==="CASH"?se(!0):Mn(Te.id)},className:"w-full flex justify-between items-center p-4 bg-slate-50 rounded-xl hover:bg-indigo-50 transition-all border border-slate-100 text-left",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-black text-xs uppercase block",children:Te.name}),x.jsx("span",{className:"text-[10px] font-mono text-slate-400 tracking-tighter",children:Te.phone})]}),z&&x.jsxs("div",{className:"text-right",children:[x.jsx("span",{className:"text-[8px] font-black text-rose-500 uppercase block",children:"Pending Due"}),x.jsxs("span",{className:"text-[10px] font-black font-mono",children:["Rs. ",st.remainingDue.toLocaleString()]})]})]},Te.id))}),x.jsx("button",{onClick:()=>rt(!0),className:"w-full py-4 text-indigo-600 font-black uppercase text-[10px] tracking-widest border-2 border-dashed border-indigo-100 rounded-xl hover:bg-indigo-50 transition-all",children:"+ New Client Account"})]})})]})})]}):x.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center bg-white rounded-3xl border border-slate-200 shadow-sm text-center",children:[x.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center text-2xl mb-6",children:""}),x.jsx("h2",{className:"text-xl font-bold text-slate-900 uppercase tracking-tight",children:"Terminal Offline"}),x.jsx("p",{className:"text-slate-400 text-sm mt-1 mb-8",children:"Daily cash balance must be initialized before processing sales."}),x.jsx("button",{onClick:()=>{const Te=prompt("Opening Float (Rs.):","0");Te!==null&&g(parseFloat(Te)||0)},className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg hover:bg-indigo-700 transition-all",children:"Initialize Float"})]})},mce=({products:t,categories:e,vendors:n,userProfile:r,onAddCategory:i,onUpsertCategory:a,onDeleteCategory:o,onUpsertProduct:u,onBulkUpsertProducts:h,onDeleteProduct:f})=>{const[g,v]=le.useState("All"),[A,N]=le.useState(""),[P,O]=le.useState(""),[R,L]=le.useState(!1),[U,F]=le.useState(null),[q,H]=le.useState(null),[G,B]=le.useState("ITEMS"),[z,V]=le.useState("IDLE"),[ee,Q]=le.useState(0),[X,K]=le.useState(0),[ge,re]=le.useState(!1),[te,se]=le.useState(null),[_e,ke]=le.useState(""),[Ke,ce]=le.useState(""),fe=le.useRef(null);le.useEffect(()=>{q?(ce(q.categoryId||""),Q(q.cost||0),K(q.price||0)):(Q(0),K(0),e.length>0&&!Ke&&ce(e[0].id))},[q,e]);const Ae=Le=>{Q(Le)},He=Le=>{K(Le)},ot=()=>{const Le=t.map(ve=>parseInt(ve.sku)).filter(ve=>!isNaN(ve));return((Le.length>0?Math.max(...Le):1e3)+1).toString()},Ye=Le=>{var he;return((he=e.find(ve=>ve.id===Le))==null?void 0:he.name)||"Uncategorized"},Ce=()=>{const Le=["Name","SKU","Cost","Price","Stock","Category","Alert Threshold"],he=[["EXAMPLE ITEM A","1001","125.00","250.00","100","GENERAL","10"],["EXAMPLE ITEM B","1002","50.00","90.00","50","STATIONERY","5"]],ve=[Le.join(","),...he.map(Ie=>Ie.join(","))].join(`
`),$e=new Blob([ve],{type:"text/csv;charset=utf-8;"}),We=URL.createObjectURL($e),ye=document.createElement("a");ye.href=We,ye.download="prasama_inventory_template.csv",ye.click()},et=()=>{if(t.length===0)return alert("Catalog is empty.");const Le=["Name","SKU","Cost","Price","Stock","Category","Alert Threshold"],he=t.map(Ie=>[Ie.name.replace(/,/g,""),Ie.sku,Ie.cost,Ie.price,Ie.stock,Ye(Ie.categoryId).replace(/,/g,""),Ie.lowStockThreshold]),ve=[Le.join(","),...he.map(Ie=>Ie.join(","))].join(`
`),$e=new Blob([ve],{type:"text/csv;charset=utf-8;"}),We=URL.createObjectURL($e),ye=document.createElement("a");ye.href=We,ye.download=`prasama_catalog_${new Date().toISOString().split("T")[0]}.csv`,ye.click()},Be=le.useMemo(()=>t.filter(Le=>{const he=g==="All"||Le.categoryId===g,ve=(Le.name||"").toLowerCase().includes(A.toLowerCase())||(Le.sku||"").toLowerCase().includes(A.toLowerCase());return he&&ve}).sort((Le,he)=>(Le.name||"").localeCompare(he.name||"")),[t,g,A]),ct=le.useMemo(()=>e.filter(Le=>Le.name.toLowerCase().includes(P.toLowerCase())).sort((Le,he)=>Le.name.localeCompare(he.name)),[e,P]),rt=async Le=>{Le.preventDefault(),V("SAVING");const he=new FormData(Le.currentTarget),ve=q?q.sku:ot(),$e={...(q==null?void 0:q.branchStocks)||{}};$e[r.branch]=parseInt(he.get("stock"))||0;const We={id:(q==null?void 0:q.id)||`P-${Date.now()}`,name:he.get("name").toUpperCase(),sku:ve.toUpperCase(),categoryId:Ke,vendorId:he.get("vendorId")||"",cost:ee,price:X,branchStocks:$e,stock:Object.values($e).reduce((ye,Ie)=>ye+Ie,0),lowStockThreshold:parseInt(he.get("lowStockThreshold"))||5,internalNotes:he.get("internalNotes")||""};try{await u(We),V("SUCCESS"),setTimeout(()=>{L(!1),H(null),V("IDLE")},800)}catch(ye){console.error(ye),V("IDLE")}},je=async Le=>{var $e;const he=($e=Le.target.files)==null?void 0:$e[0];if(!he)return;V("SAVING");const ve=new FileReader;ve.onload=async We=>{var ye;try{const Ie=(ye=We.target)==null?void 0:ye.result;let mt=[];if(he.name.endsWith(".json"))mt=JSON.parse(Ie);else if(he.name.endsWith(".csv")){const nt=Ie.split(`
`),st=nt[0].split(",").map(Tt=>Tt.trim().toLowerCase());mt=nt.slice(1).filter(Tt=>Tt.trim()).map(Tt=>{const Ct=Tt.split(",").map(Pr=>Pr.trim()),Ht={};return st.forEach((Pr,di)=>Ht[Pr]=Ct[di]),Ht})}const dt=r.branch,Ee=mt.map((nt,st)=>{var di,fi;let Tt=nt.category_id||nt.category;const Ct=e.find(un=>un.name.toUpperCase()===String(Tt||"").toUpperCase()||un.id===Tt);!Ct&&Tt?Tt=((di=e[0])==null?void 0:di.id)||"uncategorized":Tt=(Ct==null?void 0:Ct.id)||((fi=e[0])==null?void 0:fi.id)||"uncategorized";const Ht=t.find(un=>un.sku===nt.sku),Pr=Ht!=null&&Ht.branchStocks?{...Ht.branchStocks}:{};return Pr[dt]=parseFloat(nt.stock)||0,{id:(Ht==null?void 0:Ht.id)||`P-IMP-${Date.now()}-${st}`,name:String(nt.name||nt.item||"IMPORTED ASSET").toUpperCase(),sku:String(nt.sku||`SKU-${Date.now()}-${st}`).toUpperCase(),price:parseFloat(nt.price||nt.selling_price)||0,cost:parseFloat(nt.cost||nt.unit_cost)||0,branchStocks:Pr,stock:Object.values(Pr).reduce((un,it)=>un+it,0),categoryId:Tt,vendorId:nt.vendor_id||"",lowStockThreshold:parseInt(nt.alert_threshold||nt.threshold)||5,internalNotes:`Imported: ${new Date().toLocaleDateString()}`}});await h(Ee),V("SUCCESS"),setTimeout(()=>V("IDLE"),2e3)}catch(Ie){console.error("IMPORT_ERROR:",Ie),alert("Manifest Import Failed: Verify file format (CSV/JSON)."),V("IDLE")}},ve.readAsText(he),fe.current&&(fe.current.value="")},yt=Le=>{Le.preventDefault(),_e.trim()&&(te?a({...te,name:_e.trim().toUpperCase()}):i(_e.trim()),ke(""),re(!1),se(null),L(!1))},wt=()=>{L(!1),H(null),re(!1),se(null),ke(""),V("IDLE")};return x.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[x.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Inventory Control"}),x.jsxs("div",{className:"flex gap-4 mt-2",children:[x.jsx("button",{onClick:()=>B("ITEMS"),className:`text-[10px] font-black uppercase tracking-widest px-6 py-2 rounded-xl border transition-all ${G==="ITEMS"?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"text-slate-400 bg-white border-slate-100 hover:border-slate-300"}`,children:"Product Catalog"}),x.jsx("button",{onClick:()=>B("CATEGORIES"),className:`text-[10px] font-black uppercase tracking-widest px-6 py-2 rounded-xl border transition-all ${G==="CATEGORIES"?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"text-slate-400 bg-white border-slate-100 hover:border-slate-300"}`,children:"Category Vault"})]})]}),x.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.jsx("button",{onClick:Ce,className:"px-6 py-4 rounded-[1.8rem] border border-slate-200 text-slate-500 font-black uppercase tracking-widest text-[10px] hover:bg-slate-50 transition-all active:scale-95",children:" Sample Template"}),x.jsx("button",{onClick:et,className:"px-6 py-4 rounded-[1.8rem] border border-slate-200 text-slate-500 font-black uppercase tracking-widest text-[10px] hover:bg-slate-50 transition-all active:scale-95",children:" Export Catalog"}),x.jsx("input",{type:"file",ref:fe,onChange:je,accept:".csv,.json",className:"hidden"}),x.jsx("button",{onClick:()=>{var Le;return(Le=fe.current)==null?void 0:Le.click()},disabled:z==="SAVING",className:"px-8 py-4 rounded-[1.8rem] border-2 border-indigo-600 text-indigo-600 font-black uppercase tracking-widest text-[11px] hover:bg-indigo-50 transition-all active:scale-95 disabled:opacity-50",children:z==="SAVING"?"Processing...":z==="SUCCESS"?" Imported":"Bulk Import"}),x.jsx("button",{onClick:()=>{H(null),L(!0)},className:"bg-slate-900 text-white px-10 py-4 rounded-[1.8rem] font-black uppercase tracking-widest text-[11px] shadow-2xl hover:bg-black transition-all active:scale-95",children:"+ Global Asset Intake"})]})]}),G==="ITEMS"?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-white p-6 rounded-[3rem] border border-slate-100 shadow-sm",children:[x.jsxs("div",{className:"relative flex-1 w-full",children:[x.jsx("input",{type:"text",placeholder:"Search Master Catalog (Name, SKU)...",className:"w-full pl-12 pr-6 py-4 rounded-[2rem] border border-slate-200 outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all font-black text-slate-800 uppercase text-xs",value:A,onChange:Le=>N(Le.target.value)}),x.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:""})]}),x.jsxs("select",{value:g,onChange:Le=>v(Le.target.value),className:"px-8 py-4 rounded-[2rem] border border-slate-200 text-xs font-black uppercase bg-white cursor-pointer focus:border-indigo-500 transition-all",children:[x.jsx("option",{value:"All",children:"All Categories"}),e.map(Le=>x.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]}),x.jsx("div",{className:"bg-white rounded-[3.5rem] shadow-sm border border-slate-100 overflow-hidden",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[x.jsx("thead",{className:"bg-slate-50/50 text-slate-400 uppercase tracking-widest text-[10px] font-black",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-10 py-6",children:"Identity / SKU"}),x.jsx("th",{className:"px-10 py-6",children:"Classification"}),x.jsx("th",{className:"px-10 py-6 text-right",children:"LKR Value"}),x.jsxs("th",{className:"px-10 py-6 text-center",children:["Branch Stock (",r.branch,")"]}),x.jsx("th",{className:"px-10 py-6 text-center",children:"Action"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-50",children:[Be.map(Le=>x.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-all group",children:[x.jsxs("td",{className:"px-10 py-4",children:[x.jsx("p",{className:"font-black text-slate-900 text-[13px] uppercase mb-1 tracking-tight leading-none",children:Le.name}),x.jsx("p",{className:"font-mono text-[10px] font-black text-indigo-500 tracking-tighter opacity-80",children:Le.sku})]}),x.jsx("td",{className:"px-10 py-4",children:x.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-50 px-3 py-1 rounded-lg border border-slate-100",children:Ye(Le.categoryId)})}),x.jsxs("td",{className:"px-10 py-4 text-right font-black text-slate-900 font-mono text-[13px]",children:["Rs. ",Number(Le.price).toLocaleString()]}),x.jsx("td",{className:"px-10 py-4 text-center",children:x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsxs("span",{className:`px-4 py-1.5 rounded-xl text-[11px] font-black tracking-tight ${Le.stock<=Le.lowStockThreshold?"bg-rose-50 text-rose-600 animate-pulse border border-rose-100":"bg-slate-50 text-slate-900 border border-slate-100"}`,children:[Le.stock," ",x.jsx("span",{className:"opacity-40 ml-1 text-[9px] uppercase",children:"Units"})]}),x.jsxs("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mt-1",children:["Total: ",Le.branchStocks?Object.values(Le.branchStocks).reduce((he,ve)=>he+ve,0):Le.stock," Units"]})]})}),x.jsx("td",{className:"px-10 py-4 text-center",children:x.jsxs("div",{className:"flex justify-center gap-2",children:[x.jsx("button",{onClick:()=>{H(Le),L(!0)},className:"w-9 h-9 rounded-xl bg-white border border-slate-200 flex items-center justify-center hover:text-indigo-600 hover:border-indigo-600 transition-all shadow-sm",children:""}),x.jsx("button",{onClick:()=>F(Le.id),className:"w-9 h-9 rounded-xl bg-white border border-slate-200 flex items-center justify-center hover:text-rose-600 hover:border-rose-600 transition-all shadow-sm",children:""})]})})]},Le.id)),Be.length===0&&x.jsx("tr",{children:x.jsx("td",{colSpan:5,className:"py-40 text-center opacity-30 text-xs font-black uppercase tracking-[0.4em] italic",children:"No Assets matched search criteria"})})]})]})})]}):x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-white p-6 rounded-[3rem] border border-slate-100 shadow-sm",children:[x.jsxs("div",{className:"relative flex-1 w-full",children:[x.jsx("input",{type:"text",placeholder:"Filter Categories by Name...",className:"w-full pl-12 pr-6 py-4 rounded-[2rem] border border-slate-200 outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all font-black text-slate-800 uppercase text-xs",value:P,onChange:Le=>O(Le.target.value)}),x.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:""})]}),x.jsx("button",{onClick:()=>{re(!0),L(!0)},className:"bg-indigo-600 text-white px-8 py-4 rounded-[2rem] font-black uppercase tracking-widest text-[10px] shadow-xl shadow-indigo-100 transition-all active:scale-95",children:"+ New Category"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[ct.map(Le=>x.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm flex justify-between items-center group hover:border-indigo-500 hover:shadow-2xl hover:shadow-indigo-500/5 transition-all duration-500",children:[x.jsxs("div",{className:"min-w-0 flex-1 pr-4",children:[x.jsx("h3",{className:"font-black text-slate-900 uppercase tracking-tighter text-lg leading-none truncate mb-2",children:Le.name}),x.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] opacity-80",children:[t.filter(he=>he.categoryId===Le.id).length," Products Linked"]})]}),x.jsxs("div",{className:"flex gap-2 shrink-0",children:[x.jsx("button",{onClick:()=>{se(Le),ke(Le.name),re(!0),L(!0)},className:"w-10 h-10 rounded-[1rem] bg-slate-50 text-slate-300 flex items-center justify-center hover:bg-indigo-600 hover:text-white transition-all shadow-inner border border-slate-100",children:""}),x.jsx("button",{onClick:()=>F(`CAT-${Le.id}`),className:"w-10 h-10 rounded-[1rem] bg-slate-50 text-slate-300 flex items-center justify-center hover:bg-rose-600 hover:text-white transition-all shadow-inner border border-slate-100",children:""})]})]},Le.id)),ct.length===0&&x.jsxs("div",{className:"col-span-full py-40 text-center text-slate-200",children:[x.jsx("div",{className:"text-8xl mb-4 grayscale opacity-10",children:""}),x.jsx("p",{className:"text-xs font-black uppercase tracking-[0.5em]",children:"Category Vault is Empty"})]})]})]}),R&&x.jsx("div",{className:"fixed inset-0 z-[100] flex justify-center items-center p-4 bg-slate-950/95 backdrop-blur-xl overflow-y-auto",children:x.jsxs("div",{className:"bg-white rounded-[3.5rem] shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in duration-300 my-8",children:[x.jsxs("div",{className:"p-10 border-b border-slate-50 flex justify-between items-start bg-slate-50/50",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-black text-2xl text-slate-900 uppercase tracking-tighter",children:ge?te?"Modify Taxonomy":"Global Classification":q?"Update Manifest":"Global Asset Intake"}),x.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-[0.4em] mt-2",children:"Enterprise Master Synchronization"})]}),x.jsx("button",{onClick:wt,className:"w-12 h-12 flex items-center justify-center rounded-full bg-[#0f172a] text-white hover:bg-rose-600 transition-all text-xl shadow-xl active:scale-90",children:""})]}),ge?x.jsxs("form",{onSubmit:yt,className:"p-10 space-y-8",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Classification Identity"}),x.jsx("input",{autoFocus:!0,placeholder:"E.G. OFFICE STATIONERY",value:_e,onChange:Le=>ke(Le.target.value.toUpperCase()),required:!0,className:"w-full px-8 py-5 rounded-3xl border-2 border-slate-100 font-black outline-none bg-white text-slate-800 uppercase text-[15px] focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/5 transition-all shadow-sm"})]}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{type:"button",onClick:wt,className:"flex-1 bg-slate-100 text-slate-900 font-black py-5 rounded-3xl transition-all uppercase tracking-widest text-xs",children:"Cancel"}),x.jsx("button",{type:"submit",className:"flex-[2] bg-[#0f172a] text-white font-black py-5 rounded-3xl shadow-2xl transition-all uppercase tracking-widest text-xs hover:bg-black",children:te?"Update Classification":"Commit Category"})]})]}):x.jsxs("form",{onSubmit:rt,className:"p-10 space-y-6",children:[x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Asset Nomenclature"}),x.jsx("input",{name:"name",placeholder:"E.G. A4 DOUBLE A 80GSM",defaultValue:q==null?void 0:q.name,required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black outline-none bg-white text-slate-800 uppercase text-[13px] focus:border-indigo-500 transition-all shadow-sm"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Universal SKU (Read-Only)"}),x.jsx("input",{name:"sku",placeholder:q?q.sku:"SYSTEM ASSIGNED",defaultValue:q==null?void 0:q.sku,readOnly:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-100 font-mono font-black outline-none uppercase text-[12px] bg-slate-50 text-slate-400 cursor-not-allowed"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Classification"}),x.jsx("button",{type:"button",onClick:()=>re(!0),className:"text-[9px] font-black text-indigo-600 uppercase tracking-widest hover:underline",children:"+ Manage"})]}),x.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black bg-white outline-none cursor-pointer uppercase text-[12px] focus:border-indigo-500 transition-all",value:Ke,onChange:Le=>ce(Le.target.value),children:[x.jsx("option",{value:"",children:"UNCATEGORIZED"}),e.map(Le=>x.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Unit Cost"}),x.jsx("input",{type:"number",step:"0.01",value:ee,onChange:Le=>Ae(parseFloat(Le.target.value)||0),required:!0,className:"w-full px-4 py-4 rounded-2xl border border-slate-200 font-black font-mono text-[14px] outline-none text-slate-800 bg-white"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-right",children:"Selling Price"}),x.jsx("input",{type:"number",step:"0.01",value:X,onChange:Le=>He(parseFloat(Le.target.value)||0),required:!0,className:"w-full px-4 py-4 rounded-2xl border border-indigo-200 font-black font-mono text-[14px] text-indigo-700 outline-none text-right bg-white"})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:["Initial Stock (",r.branch,")"]}),x.jsx("input",{name:"stock",type:"number",defaultValue:(q==null?void 0:q.stock)||0,required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-[14px] outline-none bg-white"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Alert Threshold"}),x.jsx("input",{name:"lowStockThreshold",type:"number",defaultValue:(q==null?void 0:q.lowStockThreshold)||5,required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-[14px] outline-none bg-white"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Primary Vendor"}),x.jsxs("select",{name:"vendorId",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black bg-white outline-none cursor-pointer uppercase text-[12px] focus:border-indigo-500",defaultValue:q==null?void 0:q.vendorId,children:[x.jsx("option",{value:"",children:"INTERNAL POOL / LOCAL SOURCE"}),n.map(Le=>x.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]})]}),x.jsxs("div",{className:"pt-8 border-t border-slate-100 flex gap-4",children:[x.jsx("button",{type:"button",onClick:wt,className:"flex-1 bg-slate-100 text-slate-900 font-black py-5 rounded-3xl transition-all uppercase tracking-widest text-xs",children:"Discard"}),x.jsx("button",{type:"submit",disabled:z!=="IDLE",className:`flex-[2] font-black py-5 rounded-3xl shadow-2xl transition-all uppercase tracking-widest text-xs text-white ${z==="SUCCESS"?"bg-emerald-600":"bg-slate-950 hover:bg-black"}`,children:z==="SAVING"?"Synchronizing Ledger...":z==="SUCCESS"?" Master Record Committed":q?"Synchronize Updates":"Commit New Asset"})]})]})]})}),U&&x.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3.5rem] shadow-2xl w-full max-sm p-12 text-center space-y-10 animate-in zoom-in duration-300",children:[x.jsx("div",{className:"w-24 h-24 bg-rose-50 text-rose-500 rounded-full flex items-center justify-center text-4xl mx-auto shadow-inner border border-rose-100",children:""}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Authorize Purge"}),x.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest mt-3 leading-relaxed px-6",children:"This will permanently remove the record from the global database. All linked metrics will be recalculated."})]}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{onClick:()=>F(null),className:"flex-1 py-5 font-black text-slate-400 uppercase tracking-widest text-xs",children:"Cancel"}),x.jsx("button",{onClick:()=>{U.startsWith("CAT-")?o(U.replace("CAT-","")):f(U),F(null)},className:"flex-[2] bg-rose-600 text-white py-5 rounded-3xl font-black uppercase text-xs tracking-widest shadow-xl shadow-rose-200 hover:bg-rose-700 transition-all active:scale-95",children:"Delete Record"})]})]})})]})},gce=({products:t=[],purchaseOrders:e=[],vendors:n=[],accounts:r=[],transactions:i=[],categories:a=[],userProfile:o,onUpsertPO:u,onReceivePO:h,onUpsertVendor:f,onPayVendor:g,onUpdateTransaction:v,onDeleteTransaction:A,jumpTarget:N,clearJump:P})=>{const[O,R]=le.useState("POS"),[L,U]=le.useState(!1),[F,q]=le.useState(!1),[H,G]=le.useState(!1),[B,z]=le.useState(!1),[V,ee]=le.useState(!1),[Q,X]=le.useState(null),[K,ge]=le.useState(null),[re,te]=le.useState(null),[se,_e]=le.useState(null),[ke,Ke]=le.useState(""),[ce,fe]=le.useState("cash"),[Ae,He]=le.useState("BANK"),[ot,Ye]=le.useState(""),[Ce,et]=le.useState(new Date().toISOString().split("T")[0]),[Be,ct]=le.useState(new Date().toISOString().split("T")[0]),[rt,je]=le.useState([]),[yt,wt]=le.useState(""),[Le,he]=le.useState("All"),[ve,$e]=le.useState(""),[We,ye]=le.useState("cash"),[Ie,mt]=le.useState(new Date().toISOString().split("T")[0]),[dt,Ee]=le.useState([]),[nt,st]=le.useState(""),[Tt,Ct]=le.useState(""),[Ht,Pr]=le.useState(""),[di,fi]=le.useState(""),[un,it]=le.useState(""),[pn,Yt]=le.useState(""),[Mn,Ei]=le.useState("IDLE"),[$i,Te]=le.useState(null),lt=le.useRef(null);le.useEffect(()=>{if(N){if(N.type==="PO"){const de=e.find(ht=>ht.id===N.id);de&&(R("POS"),Er(de))}else if(N.type==="VENDOR"){const de=n.find(ht=>ht.id===N.id);de&&(R("VENDORS"),X(de.id))}P==null||P()}},[N,e,n,P]);const zt=le.useMemo(()=>[...t].sort((de,ht)=>de.name.localeCompare(ht.name)),[t]),Ot=le.useMemo(()=>[...e].sort((de,ht)=>ht.date.localeCompare(de.date)),[e]),wn=le.useMemo(()=>zt.filter(de=>{const ht=de.name.toLowerCase().includes(yt.toLowerCase())||de.sku.toLowerCase().includes(yt.toLowerCase()),Nt=Le==="All"||de.categoryId===Le;return ht&&Nt}),[zt,yt,Le]),an=le.useMemo(()=>rt.reduce((de,ht)=>de+ht.quantity*(ht.cost||0),0),[rt]);le.useEffect(()=>{if(!(!L||!$i||rt.length===0))return Ei("SAVING"),lt.current&&clearTimeout(lt.current),lt.current=window.setTimeout(()=>{const de=(K==null?void 0:K.status)||"DRAFT";u({id:$i,date:new Date(Be).toISOString(),vendorId:ke,items:rt,status:de,totalAmount:an,paymentMethod:Ae,accountId:Ae==="BANK"||Ae==="CHEQUE"||Ae==="CARD"?ce:"cash",chequeNumber:Ae==="CHEQUE"?ot:void 0,chequeDate:Ae==="CHEQUE"?Ce:void 0}),Ei("SYNCED")},1200),()=>{lt.current&&clearTimeout(lt.current)}},[rt,ke,Be,Ae,ce,ot,Ce,L,$i,K]);const ir=de=>{if(!de)return"UNKNOWN VENDOR";const ht=n.find(Nt=>Nt.id.trim().toUpperCase()===de.trim().toUpperCase());return ht?ht.name:"UNKNOWN VENDOR"},En=le.useMemo(()=>{const de={},ht=new Date;n.forEach(gt=>{if(Number(gt.totalBalance||0)>0){de[gt.id]={vendorName:gt.name,balance:Number(gt.totalBalance),buckets:[0,0,0,0]};const Qn=i.filter(mn=>mn.vendorId===gt.id&&mn.type==="PURCHASE"&&mn.paymentMethod==="CREDIT").sort((mn,Ve)=>Ve.date.localeCompare(mn.date));let gn=Number(gt.totalBalance);Qn.forEach(mn=>{if(gn<=0)return;const Ve=Math.min(gn,Number(mn.amount)),kr=Math.floor((ht.getTime()-new Date(mn.date).getTime())/(1e3*3600*24));kr<=30?de[gt.id].buckets[0]+=Ve:kr<=60?de[gt.id].buckets[1]+=Ve:kr<=90?de[gt.id].buckets[2]+=Ve:de[gt.id].buckets[3]+=Ve,gn-=Ve}),gn>0&&(de[gt.id].buckets[3]+=gn)}});const Nt=Object.values(de),Lt=[{name:"0-30 Days",value:Nt.reduce((gt,Qn)=>gt+Qn.buckets[0],0),color:"#6366f1"},{name:"31-60 Days",value:Nt.reduce((gt,Qn)=>gt+Qn.buckets[1],0),color:"#f59e0b"},{name:"61-90 Days",value:Nt.reduce((gt,Qn)=>gt+Qn.buckets[2],0),color:"#f97316"},{name:"90+ Days",value:Nt.reduce((gt,Qn)=>gt+Qn.buckets[3],0),color:"#ef4444"}];return{list:Nt,summary:Lt}},[n,i]),Gn=le.useMemo(()=>re?e.filter(de=>{if(de.vendorId!==re.id)return!1;const Nt=i.filter(Lt=>{var gt;return Lt.vendorId===de.vendorId&&(((gt=Lt.description)==null?void 0:gt.includes(de.id))||Lt.id.includes(de.id))}).filter(Lt=>Lt.type==="CREDIT_PAYMENT"||Lt.type==="PURCHASE"&&Lt.paymentMethod!=="CREDIT").reduce((Lt,gt)=>Lt+Number(gt.amount||0),0);return Number(de.totalAmount)-Nt>.01}):[],[re,e,i]),Cr=le.useMemo(()=>{if(!Q)return null;const de=n.find(gt=>gt.id===Q);if(!de)return null;const ht=e.filter(gt=>gt.vendorId===Q),Nt=i.filter(gt=>gt.vendorId===Q&&(gt.type==="CREDIT_PAYMENT"||gt.type==="PURCHASE"&&!gt.id.startsWith("PU-"))),Lt=[...ht.map(gt=>({...gt,ledgerType:"PO"})),...Nt.map(gt=>({...gt,ledgerType:"TX"}))].sort((gt,Qn)=>gt.date.localeCompare(Qn.date));return{vendor:de,stream:Lt}},[Q,n,e,i]),Bn=de=>{const ht=rt.find(Nt=>Nt.productId===de.id);je(ht?rt.map(Nt=>Nt.productId===de.id?{...Nt,quantity:Nt.quantity+1}:Nt):[{productId:de.id,quantity:1,cost:de.cost},...rt])},no=(de,ht,Nt)=>{const Lt=[...rt];Lt[de]={...Lt[de],[ht]:Number(Nt)},je(Lt)},_i=de=>je(rt.filter((ht,Nt)=>Nt!==de)),ia=(de="PENDING")=>{if(!ke||rt.length===0){alert("Supplier and Manifest items required.");return}lt.current&&clearTimeout(lt.current),u({id:$i||`PO-${Date.now()}`,date:new Date(Be).toISOString(),vendorId:ke,items:rt,status:de,totalAmount:an,paymentMethod:Ae,accountId:Ae==="BANK"||Ae==="CHEQUE"||Ae==="CARD"?ce:"cash",chequeNumber:Ae==="CHEQUE"?ot:void 0,chequeDate:Ae==="CHEQUE"?Ce:void 0}),Yi()},Er=de=>{var Nt;const ht=(de==null?void 0:de.id)||`PO-${Date.now()}`;Te(ht),Ei("IDLE"),de?(ge(de),Ke(de.vendorId),He(de.paymentMethod),fe(de.accountId||"cash"),Ye(de.chequeNumber||""),et(de.chequeDate||new Date().toISOString().split("T")[0]),ct(de.date.split("T")[0]),je(de.items),Yt("")):(ge(null),Ke(""),He("BANK"),fe(((Nt=r.find(Lt=>Lt.id!=="cash"))==null?void 0:Nt.id)||"cash"),Ye(""),et(new Date().toISOString().split("T")[0]),ct(new Date().toISOString().split("T")[0]),je([]),Yt("")),U(!0)},Yi=()=>{U(!1),ge(null),Te(null),Ei("IDLE"),wt(""),he("All")},Ir=de=>{if(de.preventDefault(),!nt)return;const ht=(re==null?void 0:re.id)||`VEN-${Date.now()}`;f({id:ht,name:nt.toUpperCase(),contactPerson:Tt,email:Ht,phone:di,address:un,totalBalance:(re==null?void 0:re.totalBalance)||0}),L&&Ke(ht),ni()},Et=de=>{de?(te(de),st(de.name),Ct(de.contactPerson),Pr(de.email),fi(de.phone),it(de.address)):(te(null),st(""),Ct(""),Pr(""),fi(""),it("")),q(!0)},ni=()=>{q(!1),te(null)},ar=(de,ht)=>{Ee(Nt=>{const gt=Nt.includes(de)?Nt.filter(gn=>gn!==de):[...Nt,de],Qn=gt.reduce((gn,mn)=>{const Ve=e.find(kr=>kr.id===mn);return gn+((Ve==null?void 0:Ve.totalAmount)||0)},0);return $e(Qn.toString()),gt})},Dn=de=>{if(de.preventDefault(),!re||!ve)return;const ht=dt.length>0?`SETTLEMENT FOR: ${dt.join(", ")}`:`GENERAL SETTLEMENT FOR ${re.name}`;g({type:"CREDIT_PAYMENT",amount:parseFloat(ve),paymentMethod:We==="cash"?"CASH":"BANK",accountId:We,vendorId:re.id,description:ht,date:new Date(Ie).toISOString()}),z(!1),te(null),$e(""),Ee([])},hi=de=>{if(de.preventDefault(),!se||!v)return;const ht=new FormData(de.currentTarget),Nt={...se,amount:parseFloat(ht.get("amount")),date:new Date(ht.get("date")).toISOString(),accountId:ht.get("accountId"),description:ht.get("description").toUpperCase()};v(Nt),ee(!1),_e(null)},aa=()=>{var de;!K||!pn||(g({type:"CREDIT_PAYMENT",amount:parseFloat(pn),paymentMethod:"BANK",accountId:((de=r.find(ht=>ht.id!=="cash"))==null?void 0:de.id)||"cash",vendorId:K.vendorId,description:`DIRECT SETTLEMENT FOR PO: ${K.id}`,date:new Date().toISOString()}),Yt(""))},Ai=de=>{const ht=window.open("","_blank");if(!ht)return;const Nt=n.find(Ve=>Ve.id===de.vendorId),Lt=i.filter(Ve=>{var kr;return Ve.vendorId===de.vendorId&&(((kr=Ve.description)==null?void 0:kr.includes(de.id))||Ve.id.includes(de.id))}).filter(Ve=>Ve.type==="CREDIT_PAYMENT"||Ve.type==="PURCHASE"&&Ve.paymentMethod!=="CREDIT"),gt=Lt.reduce((Ve,kr)=>Ve+Number(kr.amount||0),0),Qn=Math.max(0,Number(de.totalAmount)-gt),gn=de.items.map((Ve,kr)=>{const Qt=t.find(pi=>pi.id===Ve.productId);return`
        <tr>
          <td style="text-align: center; border: none; padding: 12px 14px;">${kr+1}</td>
          <td style="text-transform: uppercase; font-weight: 800; font-size: 11px; border: none; padding: 12px 14px;">${(Qt==null?void 0:Qt.name)||"Item"}</td>
          <td style="font-family: monospace; font-size: 11px; color: #4f46e5; border: none; padding: 12px 14px;">${(Qt==null?void 0:Qt.sku)||"N/A"}</td>
          <td style="text-align: center; border: none; padding: 12px 14px;">${Ve.quantity}</td>
          <td style="text-align: right; border: none; padding: 12px 14px;">${Number(Ve.cost).toLocaleString()}</td>
          <td style="text-align: right; font-weight: 800; border: none; padding: 12px 14px;">${(Ve.quantity*Ve.cost).toLocaleString()}</td>
        </tr>
      `}).join(""),mn=Lt.length>0?Lt.map(Ve=>`
      <div style="display: flex; justify-content: space-between; font-size: 9px; color: #1e293b; font-weight: 700; padding: 3px 0; border-bottom: 0.5px solid #f1f5f9;">
        <span>${new Date(Ve.date).toLocaleDateString()} - ${Ve.paymentMethod} [${Ve.id}]</span>
        <span style="font-family: 'JetBrains Mono', monospace;">Rs. ${Number(Ve.amount).toLocaleString()}</span>
      </div>
    `).join(""):'<div style="font-size: 9px; color: #94a3b8; font-style: italic; padding: 5px 0;">No direct payments recorded for this manifest.</div>';ht.document.write(`
      <html>
        <head>
          <title>PURCHASE MANIFEST - ${de.id}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700;800&display=swap');
            body { font-family: 'Inter', sans-serif; padding: 30px; color: #1e293b; max-width: 900px; margin: 0 auto; line-height: 1.4; background: #fff; }
            .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 50px; }
            .title { font-size: 42px; font-weight: 900; color: #1e293b; text-transform: uppercase; margin: 0; letter-spacing: -2px; }
            .biz-head { text-align: right; }
            .biz-head h2 { font-size: 20px; font-weight: 900; margin: 0; color: #0f172a; text-transform: uppercase; }
            .biz-head p { font-size: 11px; color: #64748b; margin: 2px 0; font-weight: 700; }
            
            .meta-bar { display: flex; flex-direction: column; gap: 5px; margin-top: 15px; }
            .meta-bar h4 { font-size: 16px; font-weight: 800; margin: 0; }
            .meta-bar p { font-size: 11px; font-weight: 800; color: #64748b; text-transform: uppercase; margin: 0; }

            .supplier-pipeline { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 50px; border-top: 1px solid #f1f5f9; padding-top: 25px; }
            .box h5 { font-size: 10px; font-weight: 800; text-transform: uppercase; color: #94a3b8; margin: 0 0 8px 0; letter-spacing: 0.5px; }
            .box h3 { font-size: 18px; font-weight: 900; color: #0f172a; margin: 0; text-transform: uppercase; }
            .box p { font-size: 12px; color: #64748b; margin: 4px 0; font-weight: 700; }
            
            table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }
            th { text-align: left; padding: 16px 14px; background: #fff; font-size: 10px; font-weight: 900; text-transform: uppercase; color: #1e293b; letter-spacing: 1px; border-bottom: 1.5px solid #e2e8f0; }
            tr:nth-child(even) { background: #fcfcfd; }
            
            .summary-container { display: flex; justify-content: flex-end; margin-top: 20px; }
            .summary { width: 420px; }
            .summary-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; font-size: 14px; font-weight: 800; color: #1e293b; }
            .summary-row.sub { padding: 4px 0; font-weight: 700; color: #64748b; }
            
            .breakdown-block { margin: 15px 0; padding: 18px; background: #f8fafc; border-radius: 14px; border: 1.5px solid #f1f5f9; }
            .breakdown-block h6 { font-size: 9px; font-weight: 900; text-transform: uppercase; color: #94a3b8; margin: 0 0 10px 0; border-bottom: 1px solid #e2e8f0; padding-bottom: 6px; letter-spacing: 1px; }
            
            .payable-row { display: flex; justify-content: space-between; align-items: baseline; padding: 25px 0; border-top: 2.5px solid #0f172a; margin-top: 15px; }
            .payable-row span:first-child { font-size: 20px; font-weight: 900; color: #0f172a; text-transform: uppercase; letter-spacing: -0.5px; }
            .payable-row span:last-child { font-size: 28px; font-weight: 900; color: #4f46e5; font-family: 'JetBrains Mono', monospace; letter-spacing: -1px; }
            
            .footer { margin-top: 100px; text-align: center; font-size: 11px; color: #94a3b8; border-top: 1px solid #f1f5f9; padding-top: 30px; font-weight: 800; text-transform: uppercase; letter-spacing: 2.5px; }
            @media print { body { padding: 0; } }
          </style>
        </head>
        <body onload="window.print();">
          <div class="header">
            <div>
              <h1 class="title">Purchase Manifest</h1>
              <div class="meta-bar">
                <h4>Ref: ${de.id}</h4>
                <p>STATUS: ${de.status}</p>
              </div>
            </div>
            <div class="biz-head">
              <h2>${o.name}</h2>
              <p>${o.branch}</p>
              <p>Date: ${new Date(de.date).toLocaleDateString()}</p>
            </div>
          </div>

          <div class="supplier-pipeline">
            <div class="box">
              <h5>Supplier Details</h5>
              <h3>${(Nt==null?void 0:Nt.name)||"N/A"}</h3>
              <p>PH: ${(Nt==null?void 0:Nt.phone)||"N/A"}</p>
            </div>
            <div class="box" style="text-align: right;">
              <h5>Settlement Pipeline</h5>
              <h3 style="color: #4f46e5;">${de.paymentMethod}</h3>
              ${de.chequeNumber?`<p>CHQ: ${de.chequeNumber}</p>`:""}
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th style="width: 40px; text-align: center;">#</th>
                <th>Description</th>
                <th>SKU</th>
                <th style="text-align: center; width: 60px;">Qty</th>
                <th style="text-align: right; width: 100px;">Cost</th>
                <th style="text-align: right; width: 130px;">Subtotal</th>
              </tr>
            </thead>
            <tbody>
              ${gn}
            </tbody>
          </table>

          <div class="summary-container">
            <div class="summary">
              <div class="summary-row">
                <span>Manifest Total</span>
                <span style="font-family: 'JetBrains Mono', monospace;">Rs. ${Number(de.totalAmount).toLocaleString()}</span>
              </div>
              
              <div class="summary-row sub">
                <span>Payment Paid (Aggregate)</span>
                <span style="color: #ef4444; font-family: 'JetBrains Mono', monospace;">- Rs. ${gt.toLocaleString()}</span>
              </div>

              <!-- DETAILED BREAKDOWN SECTION -->
              <div class="breakdown-block">
                <h6>Detailed Settlement Breakdown</h6>
                ${mn}
              </div>

              <div style="border-top: 1px dashed #e2e8f0; margin: 10px 0;"></div>

              <div class="summary-row">
                <span style="font-size: 12px; color: #64748b;">Net Balance Due</span>
                <span style="font-size: 16px; color: #1e293b; font-family: 'JetBrains Mono', monospace;">Rs. ${Qn.toLocaleString()}</span>
              </div>

              <div class="payable-row">
                <span>Net Payable</span>
                <span>Rs. ${Number(de.totalAmount).toLocaleString()}</span>
              </div>
            </div>
          </div>

          <div class="footer">PRASAMA ERP SOLUTIONS  INVENTORY INTELLIGENCE CORE</div>
        </body>
      </html>
    `),ht.document.close()},Di=()=>{if(!Cr)return;const de=window.open("","_blank");if(!de)return;const{vendor:ht,stream:Nt}=Cr,Lt=Nt.map(gt=>{const Qn=gt.ledgerType==="PO",gn=Qn||gt.ledgerType==="TX"&&gt.type==="PURCHASE";return`
        <tr>
          <td>${new Date(gt.date).toLocaleDateString()}</td>
          <td><span style="font-family: monospace; background: #f1f5f9; padding: 2px 4px; border-radius: 4px;">${gt.id}</span></td>
          <td style="text-transform: uppercase; font-size: 11px;">${Qn?"Purchase Commitment":gt.description}</td>
          <td style="text-align: right; color: ${gn?"#ef4444":"#64748b"};">${gn?Number(gt.totalAmount||gt.amount).toLocaleString():""}</td>
          <td style="text-align: right; color: ${gn?"#64748b":"#10b981"};">${gn?"":Number(gt.amount).toLocaleString()}</td>
        </tr>
      `}).join("");de.document.write(`
      <html>
        <head>
          <title>VENDOR STATEMENT - ${ht.name}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
            body { font-family: 'Plus Jakarta Sans', sans-serif; padding: 40px; color: #1e293b; }
            .header { display: flex; justify-content: space-between; border-bottom: 2px solid #4f46e5; padding-bottom: 20px; margin-bottom: 40px; }
            .title { font-size: 24px; font-weight: 800; text-transform: uppercase; }
            table { width: 100%; border-collapse: collapse; }
            th { text-align: left; padding: 12px; background: #f8fafc; font-size: 10px; font-weight: 800; text-transform: uppercase; }
            td { padding: 12px; border-bottom: 1px solid #f1f5f9; font-size: 12px; }
            .summary { background: #f8fafc; padding: 20px; border-radius: 12px; margin-top: 40px; text-align: right; }
          </style>
        </head>
        <body onload="window.print();">
          <div class="header">
            <div><h1 class="title">Supplier Statement</h1><p style="font-weight: 800; text-transform: uppercase;">${ht.name}</p></div>
            <div style="text-align: right;"><p style="font-weight: 800;">${o.name}</p><p style="font-size: 12px;">As of ${new Date().toLocaleDateString()}</p></div>
          </div>
          <table>
            <thead><tr><th>Date</th><th>Reference</th><th>Narrative</th><th style="text-align: right;">Payable (In)</th><th style="text-align: right;">Settled (Out)</th></tr></thead>
            <tbody>${Lt}</tbody>
          </table>
          <div class="summary">
            <p style="font-size: 10px; font-weight: 800; text-transform: uppercase; color: #94a3b8; margin: 0;">Outstanding Balance</p>
            <p style="font-size: 24px; font-weight: 800; color: #ef4444; margin: 5px 0;">Rs. ${Number(ht.totalBalance).toLocaleString()}</p>
          </div>
        </body>
      </html>
    `),de.document.close()};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter uppercase",children:"Supplier Ecosystem"}),x.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px]",children:"Accounts Payable & Intake Management"})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("div",{className:"bg-slate-100 p-1.5 rounded-[1.2rem] flex shadow-inner border border-slate-200 overflow-x-auto",children:["POS","VENDORS","SETTLEMENTS","AGING","PERFORMANCE","ANALYTICS"].map(de=>x.jsx("button",{onClick:()=>R(de),className:`px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${O===de?"bg-white text-indigo-600 shadow-sm border border-slate-100":"text-slate-400"}`,children:de},de))}),(O==="POS"||O==="VENDORS")&&x.jsx("button",{onClick:()=>O==="POS"?Er():Et(),className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-indigo-600/20 hover:bg-indigo-700 transition-all active:scale-95 whitespace-nowrap",children:"+ New Entry"})]})]}),x.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden min-h-[500px] flex flex-col",children:[O==="POS"&&x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-slate-50 text-slate-400",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px]",children:"PO Reference"}),x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px]",children:"Vendor"}),x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px] text-right",children:"Value (Rs.)"}),x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px]",children:"Method"}),x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px]",children:"Status"}),x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px] text-center",children:"Action"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-100 font-medium",children:[(Ot||[]).map(de=>x.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[x.jsxs("td",{className:"px-8 py-5",children:[x.jsx("p",{className:"font-black text-slate-900 text-[10px] opacity-40 uppercase tracking-tighter mb-1",children:de.date.split("T")[0]}),x.jsx("p",{className:"font-mono font-black text-indigo-600 underline cursor-pointer",onClick:()=>Er(de),children:de.id})]}),x.jsx("td",{className:"px-8 py-5",children:x.jsx("button",{onClick:()=>X(de.vendorId),className:"font-bold text-slate-900 uppercase hover:text-indigo-600 transition-colors underline decoration-slate-200 underline-offset-4",children:ir(de.vendorId)})}),x.jsx("td",{className:"px-8 py-5 text-right font-black text-slate-900 font-mono",children:Number(de.totalAmount||0).toLocaleString()}),x.jsx("td",{className:"px-8 py-5",children:x.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400",children:de.paymentMethod})}),x.jsx("td",{className:"px-8 py-5",children:x.jsx("span",{className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest ${de.status==="RECEIVED"?"bg-emerald-100 text-emerald-700":de.status==="DRAFT"?"bg-slate-100 text-slate-500":"bg-amber-100 text-amber-700"}`,children:de.status})}),x.jsx("td",{className:"px-8 py-5 text-center",children:x.jsxs("div",{className:"flex justify-center gap-2",children:[(de.status==="PENDING"||de.status==="DRAFT")&&x.jsx("button",{onClick:()=>{ge(de),G(!0)},className:"px-4 py-2 bg-emerald-600 text-white rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-emerald-700 shadow-md",children:"Receive"}),x.jsx("button",{onClick:()=>Ai(de),className:"p-2 border border-slate-200 rounded-lg hover:bg-white transition-all shadow-sm",children:""})]})})]},de.id)),(!Ot||Ot.length===0)&&x.jsx("tr",{children:x.jsx("td",{colSpan:6,className:"px-8 py-20 text-center text-slate-300 font-black uppercase tracking-[0.4em] text-[10px] italic",children:"No Purchase Orders Found"})})]})]})}),O==="VENDORS"&&x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-slate-50 text-slate-400",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px]",children:"Supplier Name"}),x.jsx("th",{className:"px-8 py-5 font-black uppercase tracking-widest text-[10px] text-right",children:"Balance Due"}),x.jsx("th",{className:"px-8 py-5 text-center font-black uppercase tracking-widest text-[10px]",children:"Action"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-100",children:Array.isArray(n)&&n.length>0?n.map(de=>x.jsxs("tr",{className:"hover:bg-slate-50 transition-colors font-medium group",children:[x.jsx("td",{className:"px-8 py-5",children:x.jsx("button",{onClick:()=>X(de.id),className:"font-black text-slate-900 uppercase hover:text-indigo-600 transition-colors underline decoration-slate-100 underline-offset-8",children:de.name})}),x.jsxs("td",{className:"px-8 py-5 text-right font-black text-slate-900 font-mono",children:["Rs. ",Number(de.totalBalance||0).toLocaleString()]}),x.jsx("td",{className:"px-8 py-5",children:x.jsxs("div",{className:"flex justify-center gap-3",children:[x.jsx("button",{onClick:()=>{te(de),Ee([]),$e(""),z(!0)},className:"px-4 py-2 bg-emerald-600 text-white rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-emerald-700 shadow-lg shadow-emerald-600/10 transition-all",children:"Authorize Settlement"}),x.jsx("button",{onClick:()=>Et(de),className:"p-2 border border-slate-200 rounded-lg hover:bg-white transition-all shadow-sm",children:""})]})})]},de.id)):x.jsx("tr",{children:x.jsx("td",{colSpan:3,className:"px-8 py-20 text-center text-slate-300 font-black uppercase tracking-[0.4em] text-[10px] italic",children:"No Suppliers Registered"})})})]})}),O==="AGING"&&x.jsxs("div",{className:"p-10 space-y-12",children:[x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10 items-center",children:[x.jsx("div",{className:"lg:col-span-1 h-[300px]",children:x.jsx(H9,{width:"100%",height:"100%",children:x.jsxs(Sle,{data:En.summary,children:[x.jsx(l2,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),x.jsx(mf,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:9,fontWeights:900,fill:"#94a3b8"}}),x.jsx(gf,{axisLine:!1,tickLine:!1,tick:{fontSize:9,fontWeights:900,fill:"#94a3b8"}}),x.jsx(Bo,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)",fontSize:"10px",fontWeights:800},cursor:{fill:"#f8fafc"}}),x.jsx(yu,{dataKey:"value",radius:[6,6,0,0],children:En.summary.map((de,ht)=>x.jsx(TS,{fill:de.color},`cell-${ht}`))})]})})}),x.jsx("div",{className:"lg:col-span-2 grid grid-cols-2 md:grid-cols-4 gap-4",children:En.summary.map((de,ht)=>x.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100",children:[x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:de.name}),x.jsxs("p",{className:"text-xl font-black font-mono",style:{color:de.color},children:["Rs. ",de.value.toLocaleString()]})]},ht))})]}),x.jsx("div",{className:"bg-slate-50 rounded-[2.5rem] border border-slate-100 overflow-hidden",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-white border-b border-slate-100",children:x.jsxs("tr",{className:"text-[9px] font-black uppercase text-slate-400",children:[x.jsx("th",{className:"px-8 py-4",children:"Supplier Portfolio"}),x.jsx("th",{className:"px-8 py-4 text-center",children:"0-30d"}),x.jsx("th",{className:"px-8 py-4 text-center",children:"31-60d"}),x.jsx("th",{className:"px-8 py-4 text-center",children:"61-90d"}),x.jsx("th",{className:"px-8 py-4 text-center",children:"90d+"}),x.jsx("th",{className:"px-8 py-4 text-right",children:"Total Payable"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-100",children:[En.list.map((de,ht)=>x.jsxs("tr",{className:"hover:bg-white transition-all",children:[x.jsx("td",{className:"px-8 py-4 font-black uppercase text-slate-900 text-xs",children:de.vendorName}),x.jsx("td",{className:"px-8 py-4 text-center font-mono text-[11px] text-indigo-500 font-bold",children:de.buckets[0]>0?de.buckets[0].toLocaleString():""}),x.jsx("td",{className:"px-8 py-4 text-center font-mono text-[11px] text-amber-500 font-bold",children:de.buckets[1]>0?de.buckets[1].toLocaleString():""}),x.jsx("td",{className:"px-8 py-4 text-center font-mono text-[11px] text-orange-500 font-bold",children:de.buckets[2]>0?de.buckets[2].toLocaleString():""}),x.jsx("td",{className:"px-8 py-4 text-center font-mono text-[11px] text-rose-500 font-bold",children:de.buckets[3]>0?de.buckets[3].toLocaleString():""}),x.jsxs("td",{className:"px-8 py-4 text-right font-black font-mono text-slate-900",children:["Rs. ",de.balance.toLocaleString()]})]},ht)),En.list.length===0&&x.jsx("tr",{children:x.jsx("td",{colSpan:6,className:"px-8 py-20 text-center text-slate-300 font-black uppercase tracking-widest text-xs italic",children:"Clear Portfolio - No Outstanding Liabilities"})})]})]})})]})]}),Q&&Cr&&x.jsx("div",{className:"fixed inset-0 z-[180] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-6xl overflow-hidden animate-in slide-in-from-bottom-4 duration-300 flex flex-col max-h-[90vh]",children:[x.jsxs("div",{className:"p-10 flex justify-between items-center bg-slate-50 border-b border-slate-100",children:[x.jsxs("div",{className:"flex items-center gap-6",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-900 flex items-center justify-center text-3xl shadow-xl",children:""}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:Cr.vendor.name}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] mt-3",children:"Strategic Supplier Audit Ledger"})]})]}),x.jsxs("div",{className:"flex items-center gap-8",children:[x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Exposure Balance"}),x.jsxs("p",{className:"text-3xl font-black font-mono text-rose-600",children:["Rs. ",Number(Cr.vendor.totalBalance).toLocaleString()]})]}),x.jsx("button",{onClick:()=>X(null),className:"text-slate-300 hover:text-slate-900 text-6xl leading-none transition-colors",children:""})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:x.jsx("div",{className:"bg-white border border-slate-100 rounded-[2.5rem] overflow-hidden shadow-sm",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[x.jsx("thead",{className:"bg-slate-50 text-[10px] font-black uppercase tracking-widest text-slate-400",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-8 py-5",children:"Date"}),x.jsx("th",{className:"px-8 py-5",children:"Reference"}),x.jsx("th",{className:"px-8 py-5",children:"Operational Details"}),x.jsx("th",{className:"px-8 py-5 text-right",children:"Inflow (Payable)"}),x.jsx("th",{className:"px-8 py-5 text-right",children:"Outflow (Settled)"}),x.jsx("th",{className:"px-8 py-5 text-center",children:"Action"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-100 font-medium",children:Cr.stream.map((de,ht)=>x.jsxs("tr",{className:"hover:bg-indigo-50/20 transition-all group",children:[x.jsx("td",{className:"px-8 py-5",children:x.jsx("p",{className:"text-slate-900 font-black text-xs uppercase",children:de.date.split("T")[0]})}),x.jsx("td",{className:"px-8 py-5",children:x.jsx("span",{className:"font-mono text-[10px] font-black bg-slate-900 text-white px-3 py-1.5 rounded-lg tracking-widest uppercase",children:de.id})}),x.jsxs("td",{className:"px-8 py-5",children:[x.jsx("p",{className:"text-slate-500 text-[11px] font-bold uppercase italic max-w-xs truncate",children:de.ledgerType==="PO"?"Purchase Commitment":de.description}),x.jsxs("div",{className:"flex gap-2 mt-2",children:[x.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest px-2 py-0.5 rounded border ${de.ledgerType==="PO"?"bg-amber-50 text-amber-600 border-amber-100":"bg-emerald-50 text-emerald-600 border-emerald-100"}`,children:de.ledgerType==="PO"?"PO RECORDED":"Settlement Auth"}),x.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest px-2 py-0.5 bg-slate-50 border border-slate-100 rounded text-slate-400",children:de.paymentMethod})]})]}),x.jsx("td",{className:"px-8 py-5 text-right",children:de.ledgerType==="PO"||de.ledgerType==="TX"&&de.type==="PURCHASE"?x.jsxs("p",{className:"text-sm font-black font-mono text-rose-600",children:["+",Number(de.totalAmount||de.amount).toLocaleString()]}):""}),x.jsx("td",{className:"px-8 py-5 text-right",children:de.ledgerType==="TX"&&de.type==="CREDIT_PAYMENT"?x.jsxs("p",{className:"text-sm font-black font-mono text-emerald-600",children:["-",Number(de.amount).toLocaleString()]}):""}),x.jsx("td",{className:"px-8 py-5 text-center",children:x.jsxs("div",{className:"flex justify-center gap-2",children:[x.jsx("button",{onClick:()=>{de.ledgerType==="PO"?Er(de):(_e(de),ee(!0))},className:"p-2.5 rounded-xl border border-slate-200 bg-white hover:border-indigo-600 hover:text-indigo-600 transition-all shadow-sm",children:""}),de.ledgerType==="TX"&&x.jsx("button",{onClick:()=>{confirm("Delete this transaction?")&&(A==null||A(de.id))},className:"p-2.5 rounded-xl border border-slate-200 bg-white hover:bg-rose-50 hover:text-rose-600 transition-all shadow-sm",children:""})]})})]},ht))})]})})}),x.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex justify-between items-center shrink-0",children:[x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] italic",children:"Full Supplier Cycle Transparency Engine"}),x.jsx("div",{className:"flex gap-4",children:x.jsx("button",{onClick:Di,className:"px-8 py-3 bg-white border border-slate-200 rounded-xl font-black text-[10px] uppercase tracking-widest text-slate-500 hover:border-slate-400 transition-all shadow-sm",children:" PDF Statement"})})]})]})}),L&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-[95vw] h-[90vh] overflow-hidden animate-in zoom-in duration-300 flex flex-col",children:[x.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50 flex justify-between items-center shrink-0",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:"Inventory Intake Terminal"}),x.jsxs("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mt-2 italic",children:["Ref: ",(K==null?void 0:K.id)||$i||"New Acquisition"]})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[Mn==="SAVING"&&x.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 rounded-xl",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600 animate-ping"}),x.jsx("span",{className:"text-[9px] font-black text-indigo-600 uppercase tracking-widest",children:"Syncing Draft..."})]}),Mn==="SYNCED"&&x.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 rounded-xl",children:x.jsx("span",{className:"text-[9px] font-black text-emerald-600 uppercase tracking-widest",children:" Draft Persistent"})}),K&&x.jsx("button",{onClick:()=>Ai(K),className:"px-6 py-2.5 rounded-xl border border-indigo-200 text-indigo-600 font-black text-[10px] uppercase tracking-widest hover:bg-indigo-50 transition-all",children:" PDF Manifest"}),x.jsx("button",{onClick:Yi,className:"text-slate-300 hover:text-slate-900 text-5xl leading-none transition-colors",children:""})]})]}),x.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col lg:flex-row",children:[x.jsxs("div",{className:"w-full lg:w-[400px] bg-slate-50/50 border-r border-slate-100 p-8 flex flex-col gap-6 overflow-hidden",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Product Lookup & Search"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:""}),x.jsx("input",{className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 bg-white text-xs font-bold outline-none focus:border-indigo-500 shadow-sm",placeholder:"SEARCH ITEM FROM LIST...",value:yt,onChange:de=>wt(de.target.value)})]})]}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Asset Type (Filter)"}),x.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white text-xs font-black uppercase outline-none focus:border-indigo-500 shadow-sm",value:Le,onChange:de=>he(de.target.value),children:[x.jsx("option",{value:"All",children:"All Categories"}),a.map(de=>x.jsx("option",{value:de.id,children:de.name},de.id))]})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-1.5",children:wn.length>0?wn.map(de=>x.jsxs("button",{onClick:()=>Bn(de),className:"w-full text-left py-2 px-4 bg-white border border-slate-100 rounded-xl hover:border-indigo-500 hover:shadow-sm transition-all group flex justify-between items-center",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-[11px] font-black text-slate-900 uppercase truncate leading-tight",children:de.name}),x.jsxs("p",{className:"text-[8px] font-bold text-slate-400 font-mono mt-0.5",children:[de.sku," | STOCK: ",de.stock," | BUY: Rs. ",de.cost.toLocaleString()]})]}),x.jsx("span",{className:"text-lg opacity-0 group-hover:opacity-100 transition-opacity text-indigo-600",children:""})]},de.id)):x.jsx("div",{className:"py-20 text-center opacity-30",children:x.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"No assets found"})})})]}),x.jsxs("div",{className:"flex-1 flex flex-col p-8 overflow-hidden",children:[x.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6 shrink-0",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Entry Date"}),x.jsx("input",{type:"date",className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-bold bg-white text-xs outline-none focus:border-indigo-500",value:Be,onChange:de=>ct(de.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Target Supplier"}),x.jsx("button",{onClick:()=>Et(),className:"text-[9px] font-black text-indigo-600 uppercase tracking-widest hover:underline",children:"+ New Supplier"})]}),x.jsxs("select",{value:ke,onChange:de=>Ke(de.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-bold bg-white text-xs outline-none focus:border-indigo-500 uppercase",children:[x.jsx("option",{value:"",disabled:!0,children:"Select Vendor"}),n.map(de=>x.jsx("option",{value:de.id,children:de.name},de.id))]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Settlement Pipeline"}),x.jsxs("select",{value:Ae,onChange:de=>He(de.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-black bg-white text-[10px] outline-none focus:border-indigo-500 uppercase tracking-widest",children:[x.jsx("option",{value:"BANK",children:"Bank Transfer"}),x.jsx("option",{value:"CASH",children:"Cash Drawer"}),x.jsx("option",{value:"CREDIT",children:"Supplier Credit"}),x.jsx("option",{value:"CHEQUE",children:"Corporate Cheque"})]})]})]}),Ae==="CHEQUE"&&x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 animate-in slide-in-from-top-2",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Cheque No"}),x.jsx("input",{className:"w-full px-3 py-2 rounded-xl border border-slate-200 font-black font-mono text-[10px] outline-none",value:ot,onChange:de=>Ye(de.target.value.toUpperCase()),placeholder:"CHQ-0000"})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Maturity Date"}),x.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-xl border border-slate-200 font-bold text-[10px] outline-none",value:Ce,onChange:de=>et(de.target.value)})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-4 pb-4",children:x.jsx("div",{className:"space-y-1",children:rt.map((de,ht)=>{const Nt=t.find(Lt=>Lt.id===de.productId);return x.jsxs("div",{className:"flex gap-4 items-center py-2 px-4 bg-slate-50 rounded-xl border border-slate-100 animate-in slide-in-from-right-4 hover:border-indigo-100 transition-all",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[10px] font-black text-slate-900 uppercase truncate leading-none mb-1",children:(Nt==null?void 0:Nt.name)||"Asset"}),x.jsx("p",{className:"text-[8px] text-slate-400 font-mono font-bold tracking-tight",children:Nt==null?void 0:Nt.sku})]}),x.jsx("div",{className:"w-16",children:x.jsx("input",{type:"number",value:de.quantity,onChange:Lt=>no(ht,"quantity",Lt.target.value),className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 font-black font-mono text-[10px] text-center bg-white",placeholder:"QTY"})}),x.jsx("div",{className:"w-24",children:x.jsx("input",{type:"number",value:de.cost,onChange:Lt=>no(ht,"cost",Lt.target.value),className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 font-black font-mono text-[10px] text-indigo-600 text-right bg-white",placeholder:"COST"})}),x.jsx("div",{className:"w-28 text-right shrink-0",children:x.jsxs("p",{className:"text-[11px] font-black font-mono text-slate-900",children:["Rs. ",(de.quantity*de.cost).toLocaleString()]})}),x.jsx("button",{onClick:()=>_i(ht),className:"p-2 text-rose-300 hover:text-rose-600 transition-colors",children:""})]},ht)})})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-6 mt-2 border-t border-slate-100 shrink-0",children:[x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{className:"flex justify-between items-end",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Manifest Value"}),x.jsxs("p",{className:"text-3xl font-black text-slate-900 font-mono tracking-tighter leading-none",children:["Rs. ",an.toLocaleString()]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>ia("DRAFT"),className:"px-6 py-3 rounded-2xl border border-slate-200 font-black text-slate-400 uppercase tracking-widest text-[9px] hover:bg-slate-50 transition-all",children:"Draft"}),x.jsx("button",{onClick:()=>ia("PENDING"),className:"px-8 py-3 rounded-2xl bg-slate-900 text-white font-black uppercase tracking-widest text-[9px] shadow-xl hover:bg-black transition-all active:scale-95",children:"Commit PO"})]})]})}),K&&x.jsxs("div",{className:"bg-slate-900 rounded-[2rem] p-6 text-white shadow-2xl relative overflow-hidden flex flex-col h-[220px]",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10 shrink-0",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:"Financial History"}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("p",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest",children:"Balance Pending:"}),x.jsxs("p",{className:"text-[12px] font-black font-mono text-white",children:["Rs. ",Math.max(0,an-i.filter(de=>{var ht;return de.vendorId===K.vendorId&&(((ht=de.description)==null?void 0:ht.includes(K.id))||de.id.includes(K.id))}).reduce((de,ht)=>de+Number(ht.amount||0),0)).toLocaleString()]})]})]}),x.jsx("span",{className:`text-[8px] font-black px-2 py-0.5 rounded ${an-i.filter(de=>{var ht;return de.vendorId===K.vendorId&&(((ht=de.description)==null?void 0:ht.includes(K.id))||de.id.includes(K.id))}).reduce((de,ht)=>de+Number(ht.amount||0),0)<=0?"bg-emerald-50 text-white":"bg-amber-50 text-white"}`,children:an-i.filter(de=>{var ht;return de.vendorId===K.vendorId&&(((ht=de.description)==null?void 0:ht.includes(K.id))||de.id.includes(K.id))}).reduce((de,ht)=>de+Number(ht.amount||0),0)<=0?"SETTLED":"PARTIAL"})]}),x.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-2 relative z-10 my-2",children:i.filter(de=>{var ht;return de.vendorId===K.vendorId&&(((ht=de.description)==null?void 0:ht.includes(K.id))||de.id.includes(K.id))}).length>0?i.filter(de=>{var ht;return de.vendorId===K.vendorId&&(((ht=de.description)==null?void 0:ht.includes(K.id))||de.id.includes(K.id))}).map(de=>x.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5 flex justify-between items-center text-[10px] hover:bg-white/10 transition-colors",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-black text-white",children:new Date(de.date).toLocaleDateString()}),x.jsxs("p",{className:"text-[8px] text-slate-500 uppercase",children:[de.paymentMethod,"  ",de.id]})]}),x.jsxs("p",{className:"font-mono font-black text-emerald-400",children:["Rs. ",de.amount.toLocaleString()]})]},de.id)):x.jsx("div",{className:"h-full flex items-center justify-center",children:x.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest italic opacity-50",children:"No linked payments recorded"})})}),x.jsxs("div",{className:"mt-auto pt-3 border-t border-white/10 flex items-center gap-3 relative z-10 shrink-0",children:[x.jsx("input",{type:"number",className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-[10px] font-black font-mono text-emerald-400 outline-none focus:border-emerald-500",placeholder:"SETTLE AMOUNT...",value:pn,onChange:de=>Yt(de.target.value)}),x.jsx("button",{onClick:aa,className:"bg-emerald-600 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-emerald-700 active:scale-95 transition-all",children:"Apply"})]})]})]})]})]})]})}),B&&re&&x.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-10 flex justify-between items-start bg-slate-50 border-b border-slate-100",children:[x.jsxs("div",{className:"flex items-center gap-5",children:[x.jsx("div",{className:"w-14 h-14 bg-emerald-600 text-white rounded-2xl flex items-center justify-center text-2xl shadow-xl shadow-emerald-600/20",children:""}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:"Vendor Settlement"}),x.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mt-3",children:re.name})]})]}),x.jsx("button",{onClick:()=>z(!1),className:"text-slate-300 hover:text-slate-900 text-5xl leading-none",children:""})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0",children:[x.jsxs("div",{className:"p-10 bg-slate-50/50 border-r border-slate-100 flex flex-col h-full max-h-[500px]",children:[x.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"Outstanding Invoices"}),x.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:Gn.length>0?Gn.map(de=>x.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-100 hover:border-indigo-100 transition-all flex items-center gap-4 group cursor-pointer",onClick:()=>ar(de.id,de.totalAmount),children:[x.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-all ${dt.includes(de.id)?"bg-indigo-600 border-indigo-600 text-white":"border-slate-300 bg-white group-hover:border-indigo-400"}`,children:dt.includes(de.id)&&x.jsx("span",{className:"text-[10px]",children:""})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[11px] font-black uppercase text-slate-900",children:de.id}),x.jsx("p",{className:"text-[9px] font-bold text-slate-400 mt-0.5",children:de.date.split("T")[0]})]}),x.jsxs("p",{className:"text-[11px] font-black font-mono text-slate-900",children:["Rs. ",de.totalAmount.toLocaleString()]})]},de.id)):x.jsx("div",{className:"py-20 text-center text-slate-300 opacity-40",children:x.jsx("p",{className:"text-[9px] font-black uppercase italic tracking-widest",children:"No pending credit invoices"})})}),x.jsxs("div",{className:"pt-6 mt-6 border-t border-slate-100 flex justify-between items-center",children:[x.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Selected Total"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",Number(ve||0).toLocaleString()]})]})]}),x.jsxs("form",{onSubmit:Dn,className:"p-10 space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Payment Amount (Rs.)"}),x.jsx("input",{required:!0,type:"number",step:"0.01",max:re.totalBalance,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-2xl text-center text-emerald-600 outline-none focus:border-emerald-500 shadow-sm",value:ve,onChange:de=>$e(de.target.value),placeholder:"0.00",autoFocus:!0})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Settlement Date"}),x.jsx("input",{required:!0,type:"date",className:"w-full px-6 py-3 rounded-xl border border-slate-200 font-bold bg-white outline-none focus:border-indigo-500",value:Ie,onChange:de=>mt(de.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Source Account"}),x.jsx("select",{value:We,onChange:de=>ye(de.target.value),className:"w-full px-5 py-3.5 rounded-xl border border-slate-200 font-black uppercase text-[10px] bg-white outline-none focus:border-indigo-500",children:r.map(de=>x.jsxs("option",{value:de.id,children:[de.name," (Rs. ",de.balance.toLocaleString(),")"]},de.id))})]}),x.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white font-black py-5 rounded-2xl uppercase tracking-[0.2em] text-[11px] shadow-xl hover:bg-emerald-700 transition-all active:scale-95",children:"Authorize Payment"})]})]})]})}),V&&se&&x.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-md overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-8 bg-slate-50 border-b border-slate-100 flex justify-between items-center",children:[x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Correct Settlement"}),x.jsx("button",{onClick:()=>ee(!1),className:"text-slate-300 hover:text-slate-900 text-4xl leading-none",children:""})]}),x.jsxs("form",{onSubmit:hi,className:"p-8 space-y-6",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Amount (Rs.)"}),x.jsx("input",{name:"amount",type:"number",step:"0.01",required:!0,className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-black font-mono text-sm bg-white",defaultValue:se.amount})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Transaction Date"}),x.jsx("input",{name:"date",type:"date",required:!0,className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-bold text-xs",defaultValue:se.date.split("T")[0]})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Asset Node (Account)"}),x.jsx("select",{name:"accountId",className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-black uppercase text-[10px]",defaultValue:se.accountId,children:r.map(de=>x.jsx("option",{value:de.id,children:de.name},de.id))})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Audit Description"}),x.jsx("input",{name:"description",required:!0,className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-bold uppercase text-xs",defaultValue:se.description})]}),x.jsx("button",{type:"submit",className:"w-full bg-slate-900 text-white font-black py-4 rounded-xl uppercase text-[10px] tracking-widest shadow-xl",children:"Confirm Correction"})]})]})}),F&&x.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-md overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-10 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Supplier Registration"}),x.jsx("button",{onClick:ni,className:"text-slate-300 hover:text-slate-900 text-4xl leading-none",children:""})]}),x.jsxs("form",{onSubmit:Ir,className:"p-10 space-y-6",children:[x.jsx("input",{required:!0,value:nt,onChange:de=>st(de.target.value.toUpperCase()),className:"w-full px-5 py-4 rounded-2xl border border-slate-200 font-bold uppercase text-sm",placeholder:"SUPPLIER LEGAL NAME"}),x.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-black py-4 rounded-xl uppercase tracking-widest text-[10px] shadow-lg",children:"Save Profile"})]})]})}),H&&K&&x.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-lg p-12 text-center space-y-8",children:[x.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center text-3xl mx-auto border border-emerald-100",children:""}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Inventory Confirmation"}),x.jsxs("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest leading-relaxed px-4 mt-2",children:["Authorizing intake will increment warehouse stocks for ",K.items.length," assets."]})]}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-4 font-black text-slate-400 uppercase tracking-widest text-[9px]",children:"Cancel"}),x.jsx("button",{onClick:()=>{h(K.id),G(!1)},className:"flex-[2] bg-emerald-600 text-white font-black py-4 rounded-2xl shadow-xl hover:bg-emerald-700 transition-all active:scale-95 uppercase tracking-widest text-[9px]",children:"Confirm Receipt"})]})]})})]})},yce=({accounts:t=[],transactions:e=[],daySessions:n=[],products:r=[],vendors:i=[],recurringExpenses:a=[],userProfile:o,onOpenDay:u,onCloseDay:h,onAddExpense:f,onAddTransfer:g,onUpdateTransaction:v,onDeleteTransaction:A,onAddRecurring:N,onDeleteRecurring:P,onUpsertAccount:O})=>{const R=new Date().toISOString().split("T")[0],L=n.find(ye=>ye.date===R),U=e.filter(ye=>ye.date.split("T")[0]===R),[F,q]=le.useState(!1),[H,G]=le.useState(!1),[B,z]=le.useState(!1),[V,ee]=le.useState(!1),[Q,X]=le.useState(R),[K,ge]=le.useState(R),[re,te]=le.useState(!1),[se,_e]=le.useState(""),[ke,Ke]=le.useState(""),[ce,fe]=le.useState("cash"),[Ae,He]=le.useState(""),[ot,Ye]=le.useState("cash"),[Ce,et]=le.useState(""),[Be,ct]=le.useState(""),[rt,je]=le.useState(""),[yt,wt]=le.useState(""),Le=le.useMemo(()=>!re&&Q===R&&K===R?U:e.filter(ye=>{const Ie=ye.date.split("T")[0];return Ie>=Q&&Ie<=K}),[e,re,Q,K,U,R]);we.useEffect(()=>{(Q!==R||K!==R)&&!re&&te(!0)},[Q,K,R,re]);const he=le.useMemo(()=>{const ye=re?Le:U,Ie=ye.filter(Ct=>(Ct.type==="SALE"||Ct.type==="CREDIT_PAYMENT")&&Ct.paymentMethod!=="CREDIT").reduce((Ct,Ht)=>Ct+(Number(Ht.amount)||0),0),mt=ye.filter(Ct=>Ct.type==="EXPENSE"||Ct.type==="PURCHASE"||Ct.type==="TRANSFER"&&Ct.accountId).reduce((Ct,Ht)=>Ct+(Number(Ht.amount)||0),0),dt=ye.filter(Ct=>(Ct.type==="SALE"||Ct.type==="CREDIT_PAYMENT"||Ct.type==="TRANSFER"&&Ct.destinationAccountId==="cash")&&Ct.paymentMethod==="CASH").reduce((Ct,Ht)=>Ct+(Number(Ht.amount)||0),0),Ee=ye.filter(Ct=>(Ct.type==="EXPENSE"||Ct.type==="PURCHASE"||Ct.type==="TRANSFER"&&Ct.accountId==="cash")&&Ct.paymentMethod==="CASH").reduce((Ct,Ht)=>Ct+(Number(Ht.amount)||0),0),nt=ye.filter(Ct=>Ct.type==="EXPENSE").reduce((Ct,Ht)=>Ct+(Number(Ht.amount)||0),0),Tt=(Number(L==null?void 0:L.openingBalance)||0)+dt-Ee;return{cashIn:dt,cashOut:Ee,expectedCash:Tt,totalInflow:Ie,totalOutflow:mt,totalExpenses:nt}},[U,L,Le,re]),ve=ye=>{ye.preventDefault(),!(!se||!ke)&&(f({amount:parseFloat(se),description:ke.toUpperCase(),paymentMethod:ce==="cash"?"CASH":"BANK",accountId:ce,type:"EXPENSE"}),_e(""),Ke(""),q(!1))},$e=ye=>{ye.preventDefault(),!(!Ae||!Ce||ot===Ce)&&(g({amount:parseFloat(Ae),description:`INTERNAL TRANSFER: ${ot.toUpperCase()} TO ${Ce.toUpperCase()}`,accountId:ot,destinationAccountId:Ce,paymentMethod:ot==="cash"||Ce==="cash"?"CASH":"BANK",type:"TRANSFER"}),He(""),et(""),G(!1))},We=ye=>{ye.preventDefault(),Be&&(O({id:`ACC-${Date.now()}`,name:Be.toUpperCase(),accountNumber:rt,balance:parseFloat(yt)||0}),ct(""),je(""),wt(""))};return x.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500 pb-20",children:[x.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-8",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-4xl font-black text-slate-900 uppercase tracking-tighter",children:"Finance Terminal"}),x.jsxs("div",{className:"flex gap-6 mt-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),x.jsxs("p",{className:"text-slate-500 font-black uppercase tracking-widest text-[10px]",children:["IN: Rs. ",he.totalInflow.toLocaleString()]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500"}),x.jsxs("p",{className:"text-slate-500 font-black uppercase tracking-widest text-[10px]",children:["OUT: Rs. ",he.totalOutflow.toLocaleString()]})]}),re&&x.jsxs("div",{className:"flex items-center gap-2 ml-4 pl-4 border-l border-slate-300",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),x.jsxs("p",{className:"text-slate-500 font-black uppercase tracking-widest text-[10px]",children:["EXPENSES: Rs. ",he.totalExpenses.toLocaleString()]})]})]})]}),x.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[x.jsxs("div",{className:"flex gap-3 items-center",children:[x.jsx("div",{className:"relative",children:x.jsx("input",{type:"date",value:Q,onChange:ye=>X(ye.target.value),className:"px-6 py-3 rounded-2xl border border-slate-200 font-semibold text-sm text-slate-900 outline-none focus:border-slate-400 transition-all bg-white w-48 appearance-none",style:{backgroundImage:"url(data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2220%22 height=%2220%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23334155%22 stroke-width=%222%22%3E%3Crect x=%224%22 y=%222%22 width=%2216%22 height=%2216%22 rx=%222%22/%3E%3Cpath d=%22M16 2v4M8 2v4M4 10h16%22/%3E%3C/svg%3E)",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px",paddingRight:"40px"}})}),x.jsx("div",{className:"relative",children:x.jsx("input",{type:"date",value:K,onChange:ye=>ge(ye.target.value),className:"px-6 py-3 rounded-2xl border border-slate-200 font-semibold text-sm text-slate-900 outline-none focus:border-slate-400 transition-all bg-white w-48 appearance-none",style:{backgroundImage:"url(data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2220%22 height=%2220%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23334155%22 stroke-width=%222%22%3E%3Crect x=%224%22 y=%222%22 width=%2216%22 height=%2216%22 rx=%222%22/%3E%3Cpath d=%22M16 2v4M8 2v4M4 10h16%22/%3E%3C/svg%3E)",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px",paddingRight:"40px"}})}),x.jsx("button",{onClick:()=>{te(!1),X(R),ge(R)},className:"px-6 py-3 rounded-2xl border border-slate-200 text-slate-900 font-black text-[10px] uppercase tracking-widest hover:bg-slate-50 transition-all shadow-sm",children:"Reset"})]}),x.jsx("div",{className:"w-px h-10 bg-slate-200 hidden md:block"}),x.jsx("button",{onClick:()=>z(!0),className:"bg-white border border-slate-200 text-slate-900 px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-50 transition-all shadow-sm",children:"Manage Accounts"}),x.jsx("button",{onClick:()=>G(!0),className:"bg-slate-900 text-white px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all shadow-xl",children:"Internal Transfer"}),x.jsx("button",{onClick:()=>q(!0),className:"bg-rose-600 text-white px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-rose-700 transition-all shadow-xl shadow-rose-200",children:"Record Expense"}),x.jsx("div",{className:"w-px h-10 bg-slate-200 mx-2 hidden md:block"}),!L||L.status==="CLOSED"?x.jsx("button",{onClick:()=>{const ye=prompt("Enter Opening Float (Cash Drawer):","0");ye!==null&&u(parseFloat(ye)||0)},className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-700 transition-all",children:"Initialize Float"}):x.jsx("button",{onClick:()=>{const ye=prompt("Actual Closing Cash in Drawer:",he.expectedCash.toString());ye!==null&&h(parseFloat(ye)||0)},className:"bg-amber-500 text-white px-8 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl hover:bg-amber-600 transition-all",children:"Close Register"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[x.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-sm relative overflow-hidden group",children:[x.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-slate-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Opening Cash Float"}),x.jsxs("p",{className:"text-3xl font-black font-mono text-slate-900 tracking-tighter",children:["Rs. ",Number((L==null?void 0:L.openingBalance)||0).toLocaleString()]}),x.jsx("p",{className:"text-[9px] font-bold text-slate-300 mt-2 uppercase",children:"Initial Liquidity Entry"})]}),x.jsxs("div",{className:"bg-indigo-600 p-10 rounded-[3rem] shadow-2xl shadow-indigo-100 relative overflow-hidden",children:[x.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10 text-6xl font-black italic select-none",children:"CASH"}),x.jsx("p",{className:"text-[10px] font-black text-indigo-200 uppercase tracking-widest mb-3",children:"Expected Drawer Balance"}),x.jsxs("p",{className:"text-3xl font-black font-mono text-white tracking-tighter",children:["Rs. ",he.expectedCash.toLocaleString()]}),x.jsx("p",{className:"text-[9px] font-bold text-indigo-300 mt-2 uppercase",children:"Based on Real-Time Inflow/Outflow"})]}),x.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-sm relative overflow-hidden group",children:[x.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-emerald-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Combined Bank Reserves"}),x.jsxs("p",{className:"text-3xl font-black font-mono text-emerald-600 tracking-tighter",children:["Rs. ",t.filter(ye=>ye.id!=="cash").reduce((ye,Ie)=>ye+Number(Ie.balance),0).toLocaleString()]}),x.jsxs("p",{className:"text-[9px] font-bold text-slate-300 mt-2 uppercase tracking-tight",children:[t.length-1," External Nodes Linked"]})]})]}),x.jsxs("div",{className:"bg-white rounded-[3.5rem] shadow-sm border border-slate-100 overflow-hidden",children:[x.jsxs("div",{className:"p-10 border-b border-slate-50 flex justify-between items-center bg-slate-50/20",children:[x.jsx("h3",{className:"font-black text-slate-900 uppercase tracking-tighter text-xs",children:re?`Expenses: ${Q} to ${K}`:"Today's Audit Trail"}),x.jsx("div",{className:"flex gap-4",children:x.jsxs("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[Le.length," ENTRIES RECORDED"]})})]}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-slate-50 text-slate-400",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-10 py-5 font-black uppercase tracking-widest text-[9px]",children:"Operation / Entity"}),x.jsx("th",{className:"px-10 py-5 font-black uppercase tracking-widest text-[9px] text-center",children:"Protocol"}),x.jsx("th",{className:"px-10 py-5 font-black uppercase tracking-widest text-[9px]",children:"Source Node"}),x.jsx("th",{className:"px-10 py-5 font-black uppercase tracking-widest text-[9px] text-right",children:"Value (Rs.)"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-50",children:Le.length>0?Le.map(ye=>{var Ie,mt;return x.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[x.jsxs("td",{className:"px-10 py-5",children:[x.jsx("p",{className:"font-black text-slate-900 uppercase text-[12px] leading-tight tracking-tight",children:ye.description}),x.jsxs("p",{className:"text-[9px] font-mono text-slate-400 mt-1.5 uppercase tracking-tighter font-bold",children:[ye.id," | ",new Date(ye.date).toLocaleString()]})]}),x.jsx("td",{className:"px-10 py-5 text-center",children:x.jsx("span",{className:`px-4 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest shadow-sm ${ye.type==="SALE"||ye.type==="CREDIT_PAYMENT"?"bg-emerald-50 text-emerald-600":ye.type==="TRANSFER"?"bg-indigo-50 text-indigo-600":"bg-rose-50 text-rose-600"}`,children:ye.type})}),x.jsx("td",{className:"px-10 py-5",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-[12px]",children:ye.accountId==="cash"?"":""}),x.jsxs("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:[((Ie=t.find(dt=>dt.id===ye.accountId))==null?void 0:Ie.name)||"Direct",ye.destinationAccountId&&`  ${(mt=t.find(dt=>dt.id===ye.destinationAccountId))==null?void 0:mt.name}`]})]})}),x.jsx("td",{className:"px-10 py-5 text-right",children:x.jsxs("p",{className:`text-lg font-black font-mono tracking-tighter ${ye.type==="SALE"||ye.type==="CREDIT_PAYMENT"||ye.type==="TRANSFER"&&ye.destinationAccountId?"text-slate-900":"text-rose-600"}`,children:[ye.type==="SALE"||ye.type==="CREDIT_PAYMENT"?"+":ye.type==="TRANSFER"?"":"-"," Rs. ",Number(ye.amount).toLocaleString()]})})]},ye.id)}):x.jsx("tr",{children:x.jsxs("td",{colSpan:4,className:"px-10 py-32 text-center",children:[x.jsx("div",{className:"opacity-10 text-6xl mb-4 grayscale",children:""}),x.jsx("p",{className:"text-slate-300 font-black uppercase tracking-[0.4em] text-[10px]",children:"Zero commercial activity recorded for this period"})]})})})]})})]}),F&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-xl",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-10 border-b border-slate-50 bg-slate-50 flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Record Expense"}),x.jsx("p",{className:"text-[9px] font-black text-rose-500 uppercase tracking-widest mt-1",children:"Capital Expenditure Entry"})]}),x.jsx("button",{onClick:()=>q(!1),className:"text-slate-300 hover:text-slate-900 text-4xl leading-none",children:""})]}),x.jsxs("form",{onSubmit:ve,className:"p-10 space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Source Account"}),x.jsx("select",{value:ce,onChange:ye=>fe(ye.target.value),className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black uppercase text-xs bg-white outline-none focus:border-indigo-500",children:t.map(ye=>x.jsxs("option",{value:ye.id,children:[ye.name," (Rs. ",ye.balance.toLocaleString(),")"]},ye.id))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount (Rs.)"}),x.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-xl text-indigo-600 outline-none focus:border-indigo-500",placeholder:"0.00",value:se,onChange:ye=>_e(ye.target.value)})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Description / Purpose"}),x.jsx("input",{required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-bold uppercase text-xs outline-none focus:border-indigo-500",placeholder:"E.G. OFFICE RENT JUNE",value:ke,onChange:ye=>Ke(ye.target.value)})]}),x.jsx("button",{type:"submit",className:"w-full bg-rose-600 text-white font-black py-5 rounded-3xl uppercase tracking-widest text-[10px] shadow-2xl shadow-rose-200 hover:bg-rose-700 transition-all",children:"Authorize Expenditure"})]})]})}),H&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-xl",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-10 border-b border-slate-50 bg-slate-50 flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Internal Transfer"}),x.jsx("p",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest mt-1",children:"Cross-Node Asset Movement"})]}),x.jsx("button",{onClick:()=>G(!1),className:"text-slate-300 hover:text-slate-900 text-4xl leading-none",children:""})]}),x.jsxs("form",{onSubmit:$e,className:"p-10 space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"From"}),x.jsx("select",{value:ot,onChange:ye=>Ye(ye.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-black uppercase text-[10px] bg-white",children:t.map(ye=>x.jsx("option",{value:ye.id,children:ye.name},ye.id))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"To"}),x.jsxs("select",{value:Ce,onChange:ye=>et(ye.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-black uppercase text-[10px] bg-white",children:[x.jsx("option",{value:"",disabled:!0,children:"Target Node"}),t.map(ye=>x.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Transfer Amount (Rs.)"}),x.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-xl text-center text-indigo-600 outline-none",placeholder:"0.00",value:Ae,onChange:ye=>He(ye.target.value)})]}),x.jsx("button",{type:"submit",className:"w-full bg-slate-900 text-white font-black py-5 rounded-3xl uppercase tracking-widest text-[10px] shadow-2xl hover:bg-black transition-all",children:"Confirm Transfer"})]})]})}),B&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-xl",children:x.jsxs("div",{className:"bg-white rounded-[4rem] shadow-2xl w-full max-w-4xl overflow-hidden animate-in zoom-in duration-300 max-h-[90vh] flex flex-col",children:[x.jsxs("div",{className:"p-10 border-b border-slate-100 bg-slate-50 flex justify-between items-center shrink-0",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Bank Repository"}),x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Manage External Liquidity Nodes"})]}),x.jsx("button",{onClick:()=>z(!1),className:"text-slate-300 hover:text-slate-900 text-5xl leading-none",children:""})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar flex flex-col lg:flex-row gap-12",children:[x.jsxs("div",{className:"flex-1 space-y-4",children:[x.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-widest border-b border-slate-100 pb-2",children:"Active Linked Accounts"}),x.jsx("div",{className:"space-y-3",children:t.map(ye=>x.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-100 flex justify-between items-center group hover:border-indigo-200 transition-all",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-black text-slate-900 uppercase tracking-tight",children:ye.name}),x.jsx("p",{className:"text-[9px] font-bold text-slate-400 font-mono tracking-widest",children:ye.accountNumber||"INTERNAL DRAWER"})]}),x.jsxs("div",{className:"text-right",children:[x.jsxs("p",{className:"text-xl font-black font-mono text-slate-900 tracking-tighter",children:["Rs. ",ye.balance.toLocaleString()]}),x.jsx("p",{className:"text-[8px] font-black text-emerald-500 uppercase tracking-widest",children:"Liquid Reserve"})]})]},ye.id))})]}),x.jsxs("div",{className:"w-full lg:w-80 space-y-6",children:[x.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-widest border-b border-slate-100 pb-2",children:"Link New Account"}),x.jsxs("form",{onSubmit:We,className:"space-y-4",children:[x.jsx("input",{required:!0,className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-bold uppercase text-xs",placeholder:"BANK NAME",value:Be,onChange:ye=>ct(ye.target.value)}),x.jsx("input",{className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-mono text-xs",placeholder:"ACCOUNT NUMBER",value:rt,onChange:ye=>je(ye.target.value)}),x.jsx("input",{required:!0,type:"number",className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-black font-mono text-xs text-indigo-600",placeholder:"INITIAL BALANCE",value:yt,onChange:ye=>wt(ye.target.value)}),x.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-black py-4 rounded-xl uppercase tracking-widest text-[9px] shadow-lg hover:bg-indigo-700 transition-all",children:"Add To Ledger"})]}),x.jsx("div",{className:"p-4 bg-indigo-50 rounded-2xl border border-indigo-100",children:x.jsx("p",{className:"text-[9px] font-black text-indigo-600 uppercase leading-relaxed text-center",children:"Linked accounts will appear in all payment source menus across the terminal."})})]})]})]})})]})},xce=({customers:t,transactions:e,accounts:n,products:r,onUpsertCustomer:i,onReceivePayment:a,onUpdateTransaction:o,onDeleteTransaction:u,jumpTarget:h,clearJump:f})=>{const[g,v]=le.useState(!1),[A,N]=le.useState(!1),[P,O]=le.useState(!1),[R,L]=le.useState(null),[U,F]=le.useState(null),[q,H]=le.useState(null),[G,B]=le.useState(""),[z,V]=le.useState(""),[ee,Q]=le.useState("CASH"),[X,K]=le.useState("cash"),[ge,re]=le.useState(""),[te,se]=le.useState(new Date().toISOString().split("T")[0]),[_e,ke]=le.useState(""),[Ke,ce]=le.useState(!1),[fe,Ae]=le.useState(null),[He,ot]=le.useState([]),[Ye,Ce]=le.useState(0),[et,Be]=le.useState(!1),[ct,rt]=le.useState("");le.useEffect(()=>{if(h&&h.type==="CUSTOMER"){const Ee=t.find(nt=>nt.id===h.id);Ee&&(F(Ee),N(!0)),f==null||f()}},[h,t,f]);const je=Ee=>{Ee.preventDefault();const nt=new FormData(Ee.currentTarget),st={id:(R==null?void 0:R.id)||`CUS-${Date.now()}`,name:nt.get("name").toUpperCase(),phone:nt.get("phone"),email:nt.get("email"),address:nt.get("address"),creditLimit:parseFloat(nt.get("creditLimit"))||0,totalCredit:(R==null?void 0:R.totalCredit)||0};i(st),v(!1),L(null)},yt=async Ee=>{if(Ee.preventDefault(),!(!U||!z))try{const nt=parseFloat(z);if(isNaN(nt)||nt<=0){alert("Please enter a valid amount.");return}await a({type:"CREDIT_PAYMENT",amount:nt,paymentMethod:ee,accountId:X,customerId:U.id,parentTxId:G||void 0,description:`CREDIT SETTLEMENT: Rs. ${nt.toLocaleString()} RECEIVED VIA ${ee} ${G?`(INV: ${G.substring(0,8)})`:""} ${ee==="CHEQUE"?`(CHQ: ${ge})`:""}`,chequeNumber:ee==="CHEQUE"?ge:void 0,chequeDate:ee==="CHEQUE"?te:void 0}),alert("REPAYMENT RECORDED SUCCESSFULLY"),N(!1),F(null),B(""),V(""),re(""),Q("CASH"),K("cash")}catch(nt){alert("FAILED TO RECORD REPAYMENT: "+nt.message)}},wt=le.useMemo(()=>{if(!_e.trim())return t;const Ee=_e.toLowerCase();return t.filter(nt=>nt.name.toLowerCase().includes(Ee)||nt.phone.includes(_e)||nt.email.toLowerCase().includes(Ee))},[t,_e]),Le=le.useMemo(()=>{if(!q&&!U)return[];const Ee=(q==null?void 0:q.id)||(U==null?void 0:U.id);return e.filter(nt=>nt.customerId===Ee).sort((nt,st)=>new Date(st.date).getTime()-new Date(nt.date).getTime())},[e,q,U]),he=le.useMemo(()=>Le.filter(Ee=>Ee.type==="SALE"&&(Ee.balanceDue||0)>0),[Le]),ve=le.useMemo(()=>Le.reduce((Ee,nt)=>{if(nt.type==="SALE"){const st=nt.paymentMethod==="CREDIT"?Number(nt.amount):Number(nt.balanceDue)||0;return Ee-st}return nt.type==="CREDIT_PAYMENT"?Ee+(Number(nt.amount)||0):Ee},0),[Le]),$e=Ee=>Ee.reduce((nt,st)=>nt+Number(st.quantity)*Number(st.price)-(Number(st.discount)||0),0),We=Ee=>{if(Ee.preventDefault(),!fe)return;const nt=new FormData(Ee.currentTarget),st=fe.type==="SALE"?Ye:Number(nt.get("amount")),Tt=nt.get("paymentMethod");let Ct=fe.paidAmount,Ht=fe.balanceDue;fe.type==="SALE"&&(Tt==="CREDIT"?(Ct=0,Ht=st):(fe.balanceDue||0)>0&&(fe.paidAmount||0)>0?Ht=Math.max(0,st-(fe.paidAmount||0)):(Ct=st,Ht=0));const Pr={...fe,date:new Date(nt.get("date")).toISOString(),amount:st,paidAmount:Ct,balanceDue:Ht,description:nt.get("description").toUpperCase(),paymentMethod:Tt,accountId:nt.get("accountId"),items:fe.type==="SALE"?He:void 0};o(Pr),ce(!1),Ae(null)},ye=(Ee,nt,st)=>{const Tt=[...He],Ct=parseFloat(st)||0;Tt[Ee]={...Tt[Ee],[nt]:Ct},ot(Tt),Ce($e(Tt))},Ie=Ee=>{const nt=[...He,{productId:Ee.id,quantity:1,price:Ee.price,discount:0}];ot(nt),Ce($e(nt)),Be(!1),rt("")},mt=Ee=>{const nt=He.filter((st,Tt)=>Tt!==Ee);ot(nt),Ce($e(nt))},dt=le.useMemo(()=>ct.trim()?r.filter(Ee=>Ee.name.toLowerCase().includes(ct.toLowerCase())||Ee.sku.toLowerCase().includes(ct.toLowerCase())).slice(0,5):[],[r,ct]);return x.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-20",children:[x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Credit Portfolio"}),x.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:"Strategic debt management and receivable tracking"})]}),x.jsxs("button",{onClick:()=>{L(null),v(!0)},className:"bg-slate-950 text-white px-8 py-3.5 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-slate-200 hover:bg-black transition-all active:scale-95 flex items-center gap-3",children:[x.jsx("span",{children:""})," Add Client Account"]})]}),x.jsxs("div",{className:"relative group max-w-2xl",children:[x.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 text-xl transition-colors group-focus-within:text-indigo-500",children:""}),x.jsx("input",{type:"text",placeholder:"Filter clients by name, phone or email...",className:"w-full pl-16 pr-8 py-5 rounded-[2rem] border border-slate-200 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all font-black text-slate-800 bg-white shadow-sm placeholder:text-slate-300 placeholder:uppercase placeholder:tracking-widest placeholder:text-[10px]",value:_e,onChange:Ee=>ke(Ee.target.value)})]}),x.jsxs("div",{className:"space-y-4",children:[wt.map(Ee=>{const nt=Math.min(Ee.totalCredit/Ee.creditLimit*100,100),st=Ee.totalCredit>0,Tt=Ee.totalCredit>Ee.creditLimit;return x.jsx("div",{className:`bg-white p-6 rounded-[2rem] border transition-all group hover:shadow-lg ${Tt?"border-rose-300 bg-rose-50/30":"border-slate-200 hover:border-indigo-200"}`,children:x.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[x.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[x.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shrink-0 ${Tt?"bg-rose-100 text-rose-600":"bg-slate-100 text-slate-400"}`,children:""}),x.jsxs("div",{className:"min-w-0 flex-1 cursor-pointer",onClick:()=>{H(Ee),O(!0)},children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("h3",{className:`font-black text-lg uppercase tracking-tight truncate ${Tt?"text-rose-600":"text-slate-900"}`,children:Ee.name}),Tt&&x.jsx("span",{className:"bg-rose-600 text-white text-[7px] font-black px-2 py-0.5 rounded-full animate-pulse tracking-widest uppercase shrink-0",children:"Over Limit"})]}),x.jsx("p",{className:"text-[10px] font-bold text-slate-400 font-mono tracking-wide",children:Ee.phone})]})]}),x.jsxs("div",{className:"flex-1 min-w-[200px]",children:[x.jsxs("div",{className:"flex justify-between text-[9px] font-black uppercase tracking-wider mb-2",children:[x.jsx("span",{className:"text-slate-400",children:"Credit Utilization"}),x.jsxs("span",{className:Tt?"text-rose-600":"text-slate-600",children:[nt.toFixed(0),"%"]})]}),x.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:x.jsx("div",{className:`h-full rounded-full transition-all ${Tt?"bg-rose-600":nt>90?"bg-rose-500":"bg-emerald-500"}`,style:{width:`${nt}%`}})})]}),x.jsxs("div",{className:"flex items-center gap-8",children:[x.jsxs("div",{className:"text-left",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Outstanding"}),st?x.jsxs("p",{className:`text-xl font-black font-mono tracking-tight ${Tt?"text-rose-600":"text-slate-900"}`,children:["Rs. ",Number(Ee.totalCredit).toLocaleString()]}):x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),x.jsx("span",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-wide",children:"Account Settled"})]})]}),x.jsxs("div",{className:"text-right border-l border-slate-200 pl-8",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Limit"}),x.jsxs("p",{className:"text-sm font-black text-slate-500 font-mono",children:["Rs. ",Number(Ee.creditLimit).toLocaleString()]})]})]}),x.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[x.jsx("button",{onClick:()=>{F(Ee),K("cash"),N(!0)},className:`text-[10px] font-black px-6 py-3 rounded-xl transition-all active:scale-95 uppercase tracking-wider ${Tt?"bg-rose-600 text-white hover:bg-rose-700":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:"Receive Pay"}),x.jsx("button",{onClick:()=>{H(Ee),O(!0)},className:"text-indigo-600 text-[10px] font-black uppercase tracking-wide hover:text-indigo-800 transition-colors px-4",children:"View Ledger"}),x.jsx("button",{onClick:()=>{L(Ee),v(!0)},className:"text-slate-400 text-[9px] font-black uppercase tracking-wide hover:text-slate-900 transition-colors",children:"Edit Profile"})]})]})},Ee.id)}),wt.length===0&&x.jsx("div",{className:"col-span-full py-40 text-center text-slate-300",children:x.jsxs("div",{className:"flex flex-col items-center gap-6",children:[x.jsx("div",{className:"text-8xl grayscale opacity-10",children:""}),x.jsxs("p",{className:"text-sm font-black text-slate-400 uppercase tracking-[0.3em]",children:['No match found for "',_e,'"']})]})})]}),g&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in duration-300",children:[x.jsxs("div",{className:"p-10 border-b border-slate-50 bg-slate-50 flex justify-between items-center",children:[x.jsx("h3",{className:"font-black text-2xl text-slate-900 uppercase tracking-tighter",children:"Client Infrastructure"}),x.jsx("button",{onClick:()=>{v(!1),L(null)},className:"text-slate-300 hover:text-slate-900 text-4xl leading-none",children:""})]}),x.jsxs("form",{onSubmit:je,className:"p-10 space-y-8",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"md:col-span-2 space-y-2",children:[x.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Legal Entity Name"}),x.jsx("input",{name:"name",defaultValue:R==null?void 0:R.name,required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 font-black uppercase text-sm bg-slate-50/50",placeholder:"STARBUCKS NY"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Contact Node (Phone)"}),x.jsx("input",{name:"phone",defaultValue:R==null?void 0:R.phone,required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none font-mono font-black text-indigo-600 bg-slate-50/50",placeholder:"+94 ..."})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Credit Cap (Rs.)"}),x.jsx("input",{name:"creditLimit",type:"number",defaultValue:R==null?void 0:R.creditLimit,required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none font-black font-mono text-indigo-600 bg-slate-50/50",placeholder:"50000"})]}),x.jsxs("div",{className:"md:col-span-2 space-y-2",children:[x.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Email Address"}),x.jsx("input",{name:"email",type:"email",defaultValue:R==null?void 0:R.email,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none font-bold bg-slate-50/50",placeholder:"accounting@entity.com"})]}),x.jsxs("div",{className:"md:col-span-2 space-y-2",children:[x.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Billing Headquarters"}),x.jsx("textarea",{name:"address",defaultValue:R==null?void 0:R.address,rows:2,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none font-bold bg-slate-50/50",placeholder:"OFFICE NO 12, BLD 4..."})]})]}),x.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-50",children:[x.jsx("button",{type:"button",onClick:()=>{v(!1),L(null)},className:"flex-1 py-4 font-black text-slate-400 uppercase tracking-widest text-[10px]",children:"Cancel Operation"}),x.jsx("button",{type:"submit",className:"flex-[2] bg-slate-950 text-white font-black py-4 rounded-2xl shadow-xl hover:bg-black transition-all uppercase tracking-[0.2em] text-[10px]",children:"Commit Profile"})]})]})]})}),A&&U&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/85 backdrop-blur-xl",children:x.jsx("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in duration-300",children:x.jsxs("div",{className:"p-10 space-y-8 text-center",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("h3",{className:"font-black text-2xl text-slate-900 uppercase tracking-tighter",children:"Debt Settlement"}),x.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:"Authorize incoming capital inflow"})]}),x.jsxs("div",{className:`${U.totalCredit>U.creditLimit?"bg-rose-50 border-rose-100":"bg-emerald-50 border-emerald-100"} p-6 rounded-[2.5rem] border flex flex-col items-center`,children:[x.jsx("p",{className:`text-[9px] font-black uppercase tracking-widest mb-1 ${U.totalCredit>U.creditLimit?"text-rose-500":"text-emerald-500"}`,children:"Portfolio Outstanding"}),x.jsxs("p",{className:`text-3xl font-black font-mono tracking-tighter ${U.totalCredit>U.creditLimit?"text-rose-700":"text-emerald-700"}`,children:["Rs. ",Number(U.totalCredit).toLocaleString()]})]}),he.length>0&&x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest text-center",children:"Settlement Target (Select Invoice)"}),x.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl border-2 border-slate-100 outline-none font-bold text-[11px] uppercase bg-white focus:border-indigo-500 transition-all",value:G,onChange:Ee=>{const nt=Ee.target.value;B(nt);const st=he.find(Tt=>Tt.id===nt);st&&V(String(st.balanceDue))},children:[x.jsx("option",{value:"",children:"GENERAL SETTLEMENT (UNLINKED)"}),he.map(Ee=>x.jsxs("option",{value:Ee.id,children:["INV: ",Ee.id.substring(0,8)," | DUE: Rs. ",Number(Ee.balanceDue).toLocaleString()," (",new Date(Ee.date).toLocaleDateString(),")"]},Ee.id))]})]}),x.jsxs("form",{onSubmit:yt,className:"space-y-6 text-left",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest text-center",children:"Settlement Amount (Rs.)"}),x.jsx("input",{type:"number",step:"0.01",required:!0,className:"w-full px-8 py-5 rounded-3xl border-2 border-slate-100 outline-none font-black font-mono text-3xl text-center text-emerald-600 focus:border-emerald-500 transition-all",value:z,onChange:Ee=>V(Ee.target.value),autoFocus:!0,placeholder:"0.00"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest text-center",children:"Settlement Pipeline & Account"}),x.jsxs("div",{className:"flex gap-2 p-1.5 bg-slate-50 rounded-2xl border border-slate-100 mb-2",children:[x.jsx("button",{type:"button",onClick:()=>{Q("CASH"),K("cash")},className:`flex-1 py-3 rounded-xl font-black text-[9px] uppercase transition-all ${ee==="CASH"?"bg-white text-indigo-600 shadow-md":"text-slate-400"}`,children:" Cash"}),x.jsx("button",{type:"button",onClick:()=>{var Ee;Q("BANK"),X==="cash"&&n.length>0&&K(((Ee=n.find(nt=>nt.id!=="cash"))==null?void 0:Ee.id)||n[0].id)},className:`flex-1 py-3 rounded-xl font-black text-[9px] uppercase transition-all ${ee==="BANK"?"bg-white text-indigo-600 shadow-md":"text-slate-400"}`,children:" Bank"}),x.jsx("button",{type:"button",onClick:()=>{var Ee;Q("CHEQUE"),X==="cash"&&n.length>0&&K(((Ee=n.find(nt=>nt.id!=="cash"))==null?void 0:Ee.id)||n[0].id)},className:`flex-1 py-3 rounded-xl font-black text-[9px] uppercase transition-all ${ee==="CHEQUE"?"bg-white text-indigo-600 shadow-md":"text-slate-400"}`,children:" PDC"})]}),ee!=="CASH"&&x.jsx("select",{className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-bold text-[10px] uppercase outline-none focus:border-indigo-500 bg-white",value:X,onChange:Ee=>K(Ee.target.value),children:n.map(Ee=>x.jsxs("option",{value:Ee.id,children:[Ee.name," (Rs. ",Ee.balance.toLocaleString(),")"]},Ee.id))})]}),ee==="CHEQUE"&&x.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Cheque No"}),x.jsx("input",{className:"w-full px-3 py-2 rounded-xl border border-slate-200 font-black font-mono text-[11px] outline-none focus:border-indigo-500",value:ge,onChange:Ee=>re(Ee.target.value.toUpperCase()),placeholder:"CHQ-0000",required:!0})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Maturity Date"}),x.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-xl border border-slate-200 font-bold text-[11px] outline-none focus:border-indigo-500",value:te,onChange:Ee=>se(Ee.target.value),required:!0})]})]}),x.jsxs("div",{className:"flex gap-4 pt-4",children:[x.jsx("button",{type:"button",onClick:()=>{N(!1),F(null)},className:"flex-1 py-4 font-black text-slate-400 uppercase tracking-widest text-[10px]",children:"Cancel"}),x.jsx("button",{type:"submit",className:"flex-[2] bg-emerald-600 text-white font-black py-5 rounded-2xl shadow-2xl shadow-emerald-100 hover:bg-emerald-700 transition-all uppercase tracking-[0.2em] text-[11px]",children:"Authorize Settlement"})]})]})]})})}),P&&q&&x.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md",children:x.jsxs("div",{className:"bg-white rounded-[3.5rem] shadow-2xl w-full max-w-7xl overflow-hidden flex flex-col animate-in slide-in-from-bottom-8 duration-500 max-h-[95vh]",children:[x.jsxs("div",{className:"p-10 border-b border-slate-100 bg-white flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-6",children:[x.jsx("div",{className:"w-16 h-16 rounded-[1.2rem] bg-[#6366f1] text-white flex items-center justify-center text-3xl font-black shadow-lg",children:x.jsx("span",{role:"img","aria-label":"ledger",children:""})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tighter",children:"Strategic Ledger Audit"}),x.jsx("p",{className:"text-[14px] font-black text-indigo-600 uppercase tracking-[0.1em] mt-1",children:q.phone||"+94 XX XXX XXXX"})]})]}),x.jsxs("div",{className:"flex items-center gap-12",children:[x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Exposure Aggregate"}),x.jsxs("p",{className:`text-4xl font-black tracking-tighter leading-none ${ve<0?Math.abs(ve)>(q.creditLimit||0)?"text-rose-600":"text-indigo-600":ve>0?"text-emerald-600":"text-slate-400"}`,children:["Rs. ",Number(ve).toLocaleString()]})]}),Math.abs(ve+q.totalCredit)>.01&&x.jsxs("button",{onClick:()=>{const Ee={...q,totalCredit:Math.abs(ve)};i(Ee),H(Ee)},title:"Re-sync profile balance with ledger history",className:"px-5 py-3 bg-amber-50 text-amber-600 border border-amber-100 rounded-2xl font-black text-[9px] uppercase tracking-widest hover:bg-amber-100 transition-all flex items-center gap-2 animate-bounce",children:[x.jsx("span",{children:""})," SYNC BALANCE"]}),x.jsx("button",{onClick:()=>{O(!1),H(null)},className:"text-slate-200 hover:text-slate-950 text-5xl leading-none transition-colors",children:""})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-10 bg-slate-50/30 custom-scrollbar",children:x.jsx("div",{className:"bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[x.jsx("thead",{className:"bg-[#0f172a] text-slate-400 font-black uppercase tracking-widest text-[10px]",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-10 py-6",children:"Date & Chronology"}),x.jsx("th",{className:"px-10 py-6",children:"Transaction ID"}),x.jsx("th",{className:"px-10 py-6",children:"Operational Memo"}),x.jsx("th",{className:"px-10 py-6 text-right font-black text-rose-400",children:"Taken (-)"}),x.jsx("th",{className:"px-10 py-6 text-right font-black text-emerald-400",children:"Paid (+)"}),x.jsx("th",{className:"px-10 py-6 text-center",children:"Action"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-100 font-medium",children:Le.length>0?Le.map(Ee=>x.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group align-middle",children:[x.jsxs("td",{className:"px-10 py-6",children:[x.jsx("p",{className:"text-slate-900 font-black text-sm uppercase",children:new Date(Ee.date).toLocaleDateString()}),x.jsx("p",{className:"text-[9px] text-slate-400 font-mono font-bold mt-1 uppercase tracking-tighter",children:new Date(Ee.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),x.jsx("td",{className:"px-10 py-6",children:x.jsx("span",{className:"font-mono text-[11px] font-black bg-[#1e293b] text-white px-4 py-2 rounded-xl tracking-tight uppercase shadow-sm",children:Ee.id})}),x.jsxs("td",{className:"px-10 py-6 text-slate-500 text-[12px] font-bold uppercase leading-tight",children:[x.jsx("span",{className:"block mb-2 text-slate-700",children:Ee.description}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-3 py-1 border rounded-lg ${Ee.type==="SALE"?"bg-indigo-50 border-indigo-100 text-[#6366f1]":"bg-emerald-50 border-emerald-100 text-emerald-600"}`,children:Ee.type==="SALE"?"CREDIT TAKEN":"CREDIT PAID"}),x.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest px-3 py-1 bg-slate-50 border border-slate-100 rounded-lg text-slate-400",children:Ee.paymentMethod})]})]}),x.jsx("td",{className:`px-10 py-6 text-right font-black font-mono text-[15px] ${Ee.type==="SALE"?"text-rose-600":"text-slate-300"}`,children:Ee.type==="SALE"?(Ee.paymentMethod==="CREDIT"?Number(Ee.amount):Number(Ee.balanceDue)||0)>0?`- ${(Ee.paymentMethod==="CREDIT"?Number(Ee.amount):Number(Ee.balanceDue)||0).toLocaleString()}`:"0":""}),x.jsx("td",{className:`px-10 py-6 text-right font-black font-mono text-[15px] ${Ee.type==="CREDIT_PAYMENT"?"text-emerald-600":"text-slate-300"}`,children:Ee.type==="CREDIT_PAYMENT"?`+ ${Number(Ee.amount).toLocaleString()}`:""}),x.jsx("td",{className:"px-10 py-6 text-center",children:x.jsxs("div",{className:"flex justify-center gap-2",children:[x.jsx("button",{onClick:()=>{Ae(Ee),ot(Ee.items||[]),Ce(Ee.amount),ce(!0)},className:"p-2.5 rounded-xl border border-slate-200 hover:bg-white hover:text-indigo-600 transition-all shadow-sm",title:"Edit",children:""}),x.jsx("button",{onClick:()=>{confirm("Permanently delete this entry?")&&u(Ee.id)},className:"p-2.5 rounded-xl border border-slate-200 hover:bg-rose-50 text-rose-600 transition-all shadow-sm",title:"Delete",children:""})]})})]},Ee.id)):x.jsx("tr",{children:x.jsx("td",{colSpan:5,className:"px-8 py-32 text-center text-slate-300 italic",children:x.jsxs("div",{className:"flex flex-col items-center gap-6 grayscale opacity-20",children:[x.jsx("div",{className:"text-8xl",children:""}),x.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.4em]",children:"Zero Ledger Activity Recorded"})]})})})})]})})}),x.jsxs("div",{className:"p-10 bg-white border-t border-slate-100 flex justify-between items-center no-print",children:[x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{className:"px-8 py-3.5 bg-white border border-slate-200 rounded-2xl font-black text-[11px] uppercase tracking-widest text-slate-700 hover:border-slate-400 hover:shadow-lg transition-all shadow-sm",children:"Print Ledger"}),x.jsx("button",{className:"px-8 py-3.5 bg-white border border-slate-200 rounded-2xl font-black text-[11px] uppercase tracking-widest text-slate-700 hover:border-slate-400 hover:shadow-lg transition-all shadow-sm",children:"Export XML"})]}),x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.3em] italic",children:"VERIFIED OPERATIONAL AUDIT - PRASAMA ERP INTELLIGENCE"})]})]})}),Ke&&fe&&x.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md overflow-y-auto",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-4xl overflow-hidden animate-in zoom-in duration-300 my-10 flex flex-col border border-slate-100",children:[x.jsxs("div",{className:"p-10 flex justify-between items-start bg-[#f8fafc]/50",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tighter mb-1 uppercase",children:"Modify Transaction"}),x.jsxs("p",{className:"text-[11px] font-black text-indigo-500 uppercase tracking-widest",children:["Reference Node: ",fe.id]})]}),x.jsx("button",{onClick:()=>{ce(!1),Ae(null),Be(!1)},className:"text-slate-300 hover:text-slate-900 text-5xl transition-colors leading-none",children:""})]}),x.jsxs("form",{onSubmit:We,className:"p-10 space-y-8 flex-1 overflow-y-auto",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Entry Date"}),x.jsx("input",{name:"date",type:"date",required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-bold text-sm bg-white outline-none focus:border-indigo-500",defaultValue:fe.date.split("T")[0]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Transaction Value (Rs.)"}),x.jsx("input",{name:"amount",type:"number",step:"0.01",required:fe.type!=="SALE",readOnly:fe.type==="SALE",className:`w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-lg text-indigo-600 outline-none focus:border-indigo-500 ${fe.type==="SALE"?"bg-slate-50":"bg-white"}`,value:fe.type==="SALE"?Ye:void 0,defaultValue:fe.type!=="SALE"?fe.amount:void 0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Audit Memo / Description"}),x.jsx("input",{name:"description",required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-bold uppercase text-sm bg-white outline-none focus:border-indigo-500",defaultValue:fe.description})]}),fe.type==="SALE"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center border-b border-slate-50 pb-2",children:[x.jsx("h4",{className:"text-[11px] font-black text-slate-900 uppercase tracking-widest",children:"Itemized Manifest"}),x.jsx("button",{type:"button",onClick:()=>Be(!et),className:"text-[9px] font-black text-indigo-600 uppercase hover:underline",children:"+ Quick Add Asset"})]}),et&&x.jsxs("div",{className:"p-6 bg-slate-900 rounded-[2rem] border border-slate-800 space-y-4 animate-in slide-in-from-top-2",children:[x.jsx("input",{autoFocus:!0,className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-5 py-3 text-xs font-bold text-white outline-none focus:border-indigo-500",placeholder:"SEARCH CATALOG...",value:ct,onChange:Ee=>rt(Ee.target.value)}),x.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:dt.map(Ee=>x.jsxs("button",{type:"button",onClick:()=>Ie(Ee),className:"flex justify-between items-center p-3 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-700 transition-all text-left",children:[x.jsx("span",{className:"text-[10px] font-black text-white uppercase",children:Ee.name}),x.jsxs("span",{className:"text-[9px] font-black text-indigo-400",children:["Rs. ",Ee.price.toLocaleString()]})]},Ee.id))})]}),x.jsx("div",{className:"space-y-2",children:He.map((Ee,nt)=>{const st=r.find(Tt=>Tt.id===Ee.productId);return x.jsxs("div",{className:"flex gap-4 items-center p-4 bg-slate-50 rounded-2xl border border-slate-100 group transition-all hover:bg-white hover:border-indigo-100",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[11px] font-black text-slate-900 uppercase truncate leading-tight",children:(st==null?void 0:st.name)||"Asset"}),x.jsx("p",{className:"text-[9px] font-bold text-slate-400 font-mono font-bold mt-0.5 tracking-tight",children:(st==null?void 0:st.sku)||"ID-GEN"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-16",children:x.jsx("input",{type:"number",className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 font-black font-mono text-[10px] text-center bg-white",value:Ee.quantity,onChange:Tt=>ye(nt,"quantity",Tt.target.value)})}),x.jsx("div",{className:"w-24",children:x.jsx("input",{type:"number",className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 font-black font-mono text-[10px] text-indigo-600 text-right bg-white",value:Ee.price,onChange:Tt=>ye(nt,"price",Tt.target.value)})}),x.jsx("div",{className:"text-right min-w-[80px]",children:x.jsxs("p",{className:"text-[11px] font-black font-mono text-slate-900",children:["Rs. ",(Ee.quantity*Ee.price-(Ee.discount||0)).toLocaleString()]})}),x.jsx("button",{type:"button",onClick:()=>mt(nt),className:"p-2 text-rose-300 hover:text-rose-600 transition-colors",children:""})]})]},nt)})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Settlement Pipeline"}),x.jsx("select",{name:"paymentMethod",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black uppercase text-xs bg-white outline-none cursor-pointer focus:border-indigo-500",defaultValue:fe.paymentMethod,children:["CASH","BANK","CARD","CREDIT","CHEQUE"].map(Ee=>x.jsx("option",{value:Ee,children:Ee},Ee))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Asset Node (Account)"}),x.jsx("select",{name:"accountId",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black uppercase text-xs bg-white outline-none cursor-pointer focus:border-indigo-500",defaultValue:fe.accountId,children:n.map(Ee=>x.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))})]})]}),x.jsx("div",{className:"pt-6",children:x.jsx("button",{type:"submit",className:"w-full bg-[#0f172a] text-white font-black py-5 rounded-2xl uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all active:scale-[0.98]",children:"Update Commercial Ledger"})})]})]})})]})},vce=()=>{const[t,e]=le.useState({date:new Date().toISOString().split("T")[0],payee:"",amount:"",amountInWords:"",memo:"",chequeNumber:"",isAccountPayee:!0}),[n,r]=le.useState({top:50,left:120}),i=g=>{if(isNaN(g)||g===0)return"";const v=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],A=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],N=L=>L<20?v[L]:L<100?A[Math.floor(L/10)]+(L%10!==0?" "+v[L%10]:""):L<1e3?v[Math.floor(L/100)]+" Hundred"+(L%100!==0?" and "+N(L%100):""):L<1e6?N(Math.floor(L/1e3))+" Thousand"+(L%1e3!==0?" "+N(L%1e3):""):L<1e9?N(Math.floor(L/1e6))+" Million"+(L%1e6!==0?" "+N(L%1e6):""):"Amount too large",P=Math.floor(g),O=Math.round((g-P)*100);let R=N(P);return O>0&&(R+=" and "+N(O)+" Cents"),R+" Only"},a=g=>{const v=parseFloat(g),A=g?i(v):"";e(N=>({...N,amount:g,amountInWords:A}))},o=()=>window.print(),u=t.amount?parseFloat(t.amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"",f=(()=>{if(!t.date)return Array(8).fill("");const g=t.date.split("-"),v=g[2],A=g[1],N=g[0].slice(2);return[...v.split(""),...A.split("")," "," ",...N.split("")]})();return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex justify-between items-center no-print",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Cheque Printing Terminal"}),x.jsxs("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px]",children:["Calibration: Y:",n.top,"mm X:",n.left,"mm"]})]}),x.jsx("div",{className:"flex gap-3",children:x.jsxs("button",{onClick:o,className:"bg-indigo-600 text-white px-10 py-3 rounded-2xl font-black text-[11px] uppercase tracking-[0.2em] shadow-2xl hover:bg-indigo-700 transition-all active:scale-95 flex items-center gap-2",children:[x.jsx("span",{children:""})," Execute Print"]})})]}),x.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 xl:grid-cols-12 gap-8 items-start no-print",children:[x.jsxs("div",{className:"xl:col-span-4 space-y-6",children:[x.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 space-y-6",children:[x.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-50 pb-4",children:"Transaction Details"}),x.jsxs("div",{className:"space-y-5",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Payee Name"}),x.jsx("input",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 outline-none focus:border-indigo-500 text-sm font-bold text-slate-900 transition-all uppercase",placeholder:"ARS TRADING",value:t.payee,onChange:g=>e({...t,payee:g.target.value.toUpperCase()})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Value (LKR)"}),x.jsx("input",{type:"number",className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 outline-none focus:border-indigo-500 font-black text-sm text-indigo-600 transition-all",value:t.amount,onChange:g=>a(g.target.value)})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Issue Date"}),x.jsx("input",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 outline-none focus:border-indigo-500 text-sm font-bold text-slate-600 transition-all",type:"date",value:t.date,onChange:g=>e({...t,date:g.target.value})})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Rupees In Words"}),x.jsx("textarea",{rows:2,className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 outline-none focus:border-indigo-500 text-xs font-bold text-slate-700 uppercase",value:t.amountInWords,onChange:g=>e({...t,amountInWords:g.target.value.toUpperCase()})})]})]})]}),x.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] shadow-xl text-white space-y-6",children:[x.jsx("h3",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-[0.3em] border-b border-white/5 pb-4",children:"Hardware Calibration"}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex justify-between text-[9px] font-black uppercase tracking-widest",children:[x.jsx("span",{className:"text-slate-400",children:"Vertical Offset (Y)"}),x.jsxs("span",{className:"text-indigo-400",children:[n.top," mm"]})]}),x.jsx("input",{type:"range",min:"-150",max:"150",value:n.top,onChange:g=>r({...n,top:parseInt(g.target.value)}),className:"w-full accent-indigo-500"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex justify-between text-[9px] font-black uppercase tracking-widest",children:[x.jsx("span",{className:"text-slate-400",children:"Horizontal Offset (X)"}),x.jsxs("span",{className:"text-indigo-400",children:[n.left," mm"]})]}),x.jsx("input",{type:"range",min:"-150",max:"150",value:n.left,onChange:g=>r({...n,left:parseInt(g.target.value)}),className:"w-full accent-indigo-500"})]})]})]})]}),x.jsxs("div",{className:"xl:col-span-8 flex flex-col items-center py-10 bg-slate-100 rounded-[3rem] border border-slate-200 shadow-inner relative overflow-hidden",children:[x.jsx("div",{className:"relative w-[800px] h-[360px] bg-white rounded-xl shadow-2xl border border-slate-200 transition-all duration-300",children:x.jsx("div",{className:"p-10 h-full w-full relative overflow-hidden",children:x.jsxs("div",{className:"absolute inset-0 transition-all duration-300 pointer-events-none",style:{transform:`translate(${n.left}px, ${n.top}px)`},children:[x.jsx("div",{className:"absolute top-10 right-14 flex gap-4 text-2xl font-medium text-slate-950 font-mono",children:f.map((g,v)=>x.jsx("span",{className:"w-8 text-center",children:g===" "?"":g},v))}),x.jsx("div",{className:"absolute top-[100px] left-[10px] text-2xl font-medium text-slate-950 uppercase tracking-tight",children:t.payee?`**${t.payee}**`:""}),x.jsx("div",{className:"absolute top-[148px] left-[8px] text-[18px] font-medium leading-[2.5] max-w-[500px] text-slate-950 uppercase tracking-tighter",children:t.amountInWords?`**${t.amountInWords}**`:""}),x.jsx("div",{className:"absolute top-[195px] right-6 text-2xl font-medium text-slate-950 text-right min-w-[220px]",children:t.amount?`**${u}**`:""})]})})}),x.jsx("p",{className:"mt-8 text-[9px] font-black text-slate-400 uppercase tracking-widest italic",children:"Simulation uses regular weight (non-bold) font"})]})]}),x.jsx("div",{className:"cheque-print-layout",children:x.jsxs("div",{className:"calibration-wrapper",style:{marginTop:`${n.top}mm`,marginLeft:`${n.left}mm`},children:[t.isAccountPayee&&x.jsx("div",{className:"crossing-line",children:"A/C PAYEE ONLY"}),x.jsx("div",{className:"date-line",children:f.map((g,v)=>x.jsx("span",{className:"date-char",children:g===" "?"":g},v))}),x.jsx("div",{className:"payee-line",children:t.payee?`**${t.payee}**`:""}),x.jsx("div",{className:"words-line",children:t.amountInWords?`**${t.amountInWords}**`:""}),x.jsx("div",{className:"numeric-line",children:t.amount?`**${u}**`:""})]})}),x.jsx("style",{children:`
        @media print {
          @page { size: landscape; margin: 0; }
          body > #root { visibility: hidden !important; height: 0 !important; overflow: hidden !important; }
          
          .cheque-print-layout {
            visibility: visible !important;
            display: block !important;
            position: absolute !important;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 210mm; height: 95mm;
            background: white !important;
            color: black !important;
            z-index: 9999999 !important;
            font-family: 'JetBrains Mono', monospace !important;
          }

          .calibration-wrapper { position: relative; width: 100%; height: 100%; }

          .crossing-line {
            position: absolute; top: 12mm; left: 18mm;
            border-top: 1.5pt solid black; border-bottom: 1.5pt solid black;
            padding: 4px 20px; transform: rotate(-15deg);
            font-size: 13pt; font-weight: 400; white-space: nowrap;
          }

          .date-line {
            position: absolute; top: 11.5mm; right: 8mm;
            display: flex !important; flex-direction: row !important;
            white-space: nowrap; gap: 0;
          }

          .date-char {
            width: 7.8mm; text-align: center;
            font-size: 24pt; font-weight: 400;
            display: inline-block !important;
          }

          .payee-line {
            position: absolute; top: 34mm; left: 8mm;
            font-size: 20pt; font-weight: 400; text-transform: uppercase;
            letter-spacing: 0.8pt;
          }

          .words-line {
            position: absolute; top: 48mm; left: 6mm; width: 160mm;
            font-size: 15pt; line-height: 2.1; font-weight: 400; text-transform: uppercase;
            letter-spacing: -0.2pt;
          }

          .numeric-line {
            position: absolute; top: 58mm; right: 8mm;
            font-size: 26pt; text-align: right; min-width: 65mm; font-weight: 400;
            letter-spacing: 1.5pt;
          }

          * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
        }

        .cheque-print-layout { display: none; }
      `})]})},bce=({products:t=[],categories:e=[]})=>{const[n,r]=le.useState({}),[i,a]=le.useState(""),[o,u]=le.useState("All"),[h,f]=le.useState({labelSize:"MEDIUM",columns:3,showPrice:!0,showSKU:!0,showName:!0,paperSize:"A4"}),g=le.useRef(null),v=le.useMemo(()=>t.filter(L=>{const U=(L.name||"").toLowerCase().includes(i.toLowerCase())||(L.sku||"").toLowerCase().includes(i.toLowerCase()),F=o==="All"||L.categoryId===o;return U&&F}),[t,i,o]),A=le.useMemo(()=>Object.values(n).reduce((L,U)=>L+U,0),[n]),N=(L,U)=>{r(F=>({...F,[L]:Math.max(0,U)}))},P=L=>{L(),g.current=window.setTimeout(()=>{g.current=window.setInterval(L,80)},400)},O=()=>{g.current&&(window.clearTimeout(g.current),window.clearInterval(g.current),g.current=null)},R=()=>{const L=t.filter(G=>(n[G.id]||0)>0);if(L.length===0)return;const U=window.open("","_blank");if(!U)return;const F={SMALL:{h:"30mm",f:"10px",bh:30},MEDIUM:{h:"45mm",f:"12px",bh:45},LARGE:{h:"60mm",f:"16px",bh:60}}[h.labelSize],q=h.paperSize==="ROLL"?"80mm":"210mm";let H=`
      <html>
      <head>
        <title>Barcode Print Manifest</title>
        <style>
          @page { size: ${h.paperSize==="ROLL"?"80mm auto":h.paperSize.toLowerCase()}; margin: 5mm; }
          body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background: white; }
          .grid {
            display: grid;
            grid-template-columns: repeat(${h.columns}, 1fr);
            gap: 2mm;
            width: ${q};
          }
          .label {
            border: 0.1mm solid #eee;
            height: ${F.h};
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2mm;
            box-sizing: border-box;
            overflow: hidden;
            page-break-inside: avoid;
          }
          .name { font-weight: 800; text-transform: uppercase; font-size: ${F.f}; margin-bottom: 1mm; max-width: 100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
          .barcode-svg { max-width: 90%; height: auto; margin-top: 1mm; }
          .price { font-weight: 900; font-size: calc(${F.f} + 2px); margin-top: 1.5mm; }
        </style>
        <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"><\/script>
      </head>
      <body>
        <div class="grid">
    `;L.forEach(G=>{const B=n[G.id];for(let z=0;z<B;z++)H+=`<div class="label">
          ${h.showName?`<div class="name">${G.name}</div>`:""}
          <svg class="barcode-svg" 
            jsbarcode-value="${G.sku}" 
            jsbarcode-format="CODE128"
            jsbarcode-height="${F.bh}"
            jsbarcode-fontSize="10"
            jsbarcode-displayValue="${h.showSKU}"
          ></svg>
          ${h.showPrice?`<div class="price">Rs. ${G.price.toLocaleString()}</div>`:""}
        </div>`}),H+=`
        </div>
        <script>
          window.onload = function() {
            JsBarcode(".barcode-svg").init();
            setTimeout(function() {
              window.print();
              window.close();
            }, 500);
          }
        <\/script>
      </body>
      </html>
    `,U.document.write(H),U.document.close()};return x.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Barcode Terminal"}),x.jsxs("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:["Ready for ",A," Output Units"]})]}),x.jsxs("button",{onClick:R,disabled:A===0,className:"bg-slate-900 text-white px-12 py-4 rounded-2xl font-black uppercase text-[11px] tracking-[0.2em] shadow-2xl hover:bg-black transition-all active:scale-95 disabled:opacity-20 flex items-center gap-3",children:[x.jsx("span",{children:""})," Execute Manifest"]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[x.jsxs("div",{className:"lg:col-span-4 bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm space-y-8",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("h3",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-[0.3em]",children:"Layout Engine"}),x.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Configure label dimensions and visibility"})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Label Dimensions"}),x.jsx("div",{className:"grid grid-cols-3 gap-2",children:["SMALL","MEDIUM","LARGE"].map(L=>x.jsx("button",{onClick:()=>f({...h,labelSize:L}),className:`py-2.5 rounded-xl text-[9px] font-black uppercase transition-all border ${h.labelSize===L?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-slate-50 border-slate-100 text-slate-400 hover:border-slate-300"}`,children:L},L))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Paper Standard"}),x.jsx("div",{className:"grid grid-cols-3 gap-2",children:["A4","LETTER","ROLL"].map(L=>x.jsx("button",{onClick:()=>f({...h,paperSize:L}),className:`py-2.5 rounded-xl text-[9px] font-black uppercase transition-all border ${h.paperSize===L?"bg-slate-900 border-slate-900 text-white shadow-lg":"bg-slate-50 border-slate-100 text-slate-400 hover:border-slate-300"}`,children:L},L))})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Cols per Row"}),x.jsx("input",{type:"number",min:"1",max:"10",value:h.columns,onChange:L=>f({...h,columns:parseInt(L.target.value)||1}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-50 border border-slate-200 font-black text-center text-indigo-600 outline-none focus:border-indigo-500"})]}),x.jsxs("div",{className:"flex flex-col justify-end gap-2",children:[x.jsxs("button",{onClick:()=>f({...h,showName:!h.showName}),className:`flex items-center gap-2 text-[9px] font-black uppercase tracking-widest ${h.showName?"text-emerald-600":"text-slate-300"}`,children:[x.jsx("span",{className:"text-sm",children:h.showName?"":""})," Name"]}),x.jsxs("button",{onClick:()=>f({...h,showPrice:!h.showPrice}),className:`flex items-center gap-2 text-[9px] font-black uppercase tracking-widest ${h.showPrice?"text-emerald-600":"text-slate-300"}`,children:[x.jsx("span",{className:"text-sm",children:h.showPrice?"":""})," Price"]}),x.jsxs("button",{onClick:()=>f({...h,showSKU:!h.showSKU}),className:`flex items-center gap-2 text-[9px] font-black uppercase tracking-widest ${h.showSKU?"text-emerald-600":"text-slate-300"}`,children:[x.jsx("span",{className:"text-sm",children:h.showSKU?"":""})," SKU"]})]})]})]})]}),x.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[x.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col md:flex-row gap-4",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",children:""}),x.jsx("input",{type:"text",placeholder:"Search inventory assets...",className:"w-full pl-14 pr-6 py-4 rounded-2xl border border-slate-200 outline-none bg-slate-50/50 font-bold text-sm focus:border-indigo-500 transition-all",value:i,onChange:L=>a(L.target.value)})]}),x.jsxs("select",{value:o,onChange:L=>u(L.target.value),className:"px-8 py-4 rounded-2xl border border-slate-200 bg-white text-[10px] font-black uppercase tracking-widest outline-none cursor-pointer focus:border-indigo-500",children:[x.jsx("option",{value:"All",children:"All Categories"}),e.map(L=>x.jsx("option",{value:L.id,children:L.name},L.id))]})]}),x.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[x.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase tracking-widest text-[9px]",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-8 py-5",children:"Product Details"}),x.jsx("th",{className:"px-8 py-5 text-center",children:"Print Quantity"}),x.jsx("th",{className:"px-8 py-5 text-right",children:"LKR Value"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-100 font-medium",children:[v.map(L=>x.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-all group",children:[x.jsxs("td",{className:"px-8 py-5",children:[x.jsx("p",{className:"font-black text-slate-900 uppercase text-[12px] tracking-tight",children:L.name}),x.jsx("p",{className:"text-[10px] text-indigo-500 font-mono font-black uppercase mt-0.5",children:L.sku})]}),x.jsx("td",{className:"px-8 py-5",children:x.jsxs("div",{className:"flex items-center justify-center gap-4",children:[x.jsx("button",{onMouseDown:()=>P(()=>N(L.id,(n[L.id]||0)-1)),onMouseUp:O,onMouseLeave:O,onTouchStart:U=>{U.preventDefault(),P(()=>N(L.id,(n[L.id]||0)-1))},onTouchEnd:O,className:"w-9 h-9 rounded-xl border border-slate-200 bg-white flex items-center justify-center font-black text-slate-500 hover:bg-rose-50 hover:text-rose-600 transition-all active:scale-90 shadow-sm",children:"-"}),x.jsx("span",{className:"w-10 text-center font-black text-slate-900 font-mono text-lg",children:n[L.id]||0}),x.jsx("button",{onMouseDown:()=>P(()=>N(L.id,(n[L.id]||0)+1)),onMouseUp:O,onMouseLeave:O,onTouchStart:U=>{U.preventDefault(),P(()=>N(L.id,(n[L.id]||0)+1))},onTouchEnd:O,className:"w-9 h-9 rounded-xl border border-slate-200 bg-white flex items-center justify-center font-black text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 transition-all active:scale-90 shadow-sm",children:"+"})]})}),x.jsx("td",{className:"px-8 py-5 text-right",children:x.jsx("p",{className:"font-black text-slate-900 font-mono",children:(Number(L.price)||0).toLocaleString()})})]},L.id)),v.length===0&&x.jsx("tr",{children:x.jsx("td",{colSpan:3,className:"px-8 py-20 text-center text-slate-300 font-black uppercase tracking-widest text-[10px] italic",children:"No inventory assets matched your search query."})})]})]})})})]})]})]})},wce=({transactions:t=[],products:e=[],customers:n=[],userProfile:r,accounts:i=[],daySessions:a=[],onUpdateTransaction:o,onDeleteTransaction:u,jumpTarget:h,clearJump:f})=>{const v=(()=>{const Ce=new Date;return Ce.getFullYear()+"-"+String(Ce.getMonth()+1).padStart(2,"0")+"-"+String(Ce.getDate()).padStart(2,"0")})(),[A,N]=le.useState(""),[P,O]=le.useState(v),[R,L]=le.useState(v),[U,F]=le.useState("ALL"),[q,H]=le.useState(!1),[G,B]=le.useState(null),[z,V]=le.useState([]),[ee,Q]=le.useState(0),[X,K]=le.useState(!1),[ge,re]=le.useState("");le.useEffect(()=>{if(h&&h.type==="SALE"){const Ce=t.find(et=>et.id===h.id);Ce&&(N(Ce.id),B(Ce),H(!0)),f==null||f()}},[h,t,f]),le.useEffect(()=>{G&&(V(G.items||[]),Q(G.amount))},[G]);const te=le.useMemo(()=>Array.isArray(t)?t.filter(Ce=>Ce&&(Ce.type==="SALE"||Ce.type==="CREDIT_PAYMENT"||Ce.type==="SALE_HISTORY_IMPORT")):[],[t]),se=le.useMemo(()=>te.filter(Ce=>{var $e,We;const et=A.toLowerCase(),Be=(Ce.id||"").toLowerCase(),ct=((($e=n.find(ye=>ye.id===Ce.customerId))==null?void 0:$e.name)||"Walk-in").toLowerCase(),rt=((We=Ce.items)==null?void 0:We.some(ye=>{const Ie=e.find(mt=>mt.id===ye.productId);return Ie==null?void 0:Ie.name.toLowerCase().includes(et)}))||!1,je=!A||Be.includes(et)||ct.includes(et)||rt,yt=typeof Ce.date=="string"?Ce.date.split("T")[0]:"",Le=h&&h.id===A||(!P||yt>=P)&&(!R||yt<=R),he=Ce.paymentMethod==="CREDIT";return je&&Le&&(U==="ALL"||U==="PAID"&&!he||U==="DUE"&&he)}).sort((Ce,et)=>et.date.localeCompare(Ce.date)),[te,A,P,R,U,e,n,h]),_e=Ce=>{var et;return Ce?((et=n.find(Be=>Be&&Be.id===Ce))==null?void 0:et.name)||"Credit Client":"Walk-in Customer"},ke=Ce=>{if(Ce.preventDefault(),!G)return;const et=new FormData(Ce.currentTarget),Be={...G,date:new Date(et.get("date")).toISOString(),amount:G.type==="SALE"?ee:Number(et.get("amount")),description:et.get("description").toUpperCase(),paymentMethod:et.get("paymentMethod"),accountId:et.get("accountId"),items:G.type==="SALE"?z:void 0};o(Be),H(!1),B(null)},Ke=Ce=>Ce.reduce((et,Be)=>et+Number(Be.quantity)*Number(Be.price)-(Number(Be.discount)||0),0),ce=(Ce,et,Be)=>{const ct=[...z],rt=parseFloat(Be)||0;ct[Ce]={...ct[Ce],[et]:rt},V(ct),Q(Ke(ct))},fe=Ce=>{const et=[...z,{productId:Ce.id,quantity:1,price:Ce.price,discount:0}];V(et),Q(Ke(et)),K(!1),re("")},Ae=Ce=>{const et=z.filter((Be,ct)=>ct!==Ce);V(et),Q(Ke(et))},He=Ce=>{var wt,Le;const et=window.open("","_blank");if(!et)return;if(Ce.type==="CREDIT_PAYMENT"){et.document.write(`
            <html>
                <body onload="window.print(); window.close();" style="font-family: 'JetBrains Mono', monospace; text-align: center; width: 72mm; padding: 4px; box-sizing: border-box; font-size: 9px;">
                    <h3 style="margin: 1px 0; text-transform: uppercase;">${r.name}</h3>
                    <p style="margin: 1px 0;">CREDIT PAYMENT RECEIPT</p>
                    <div style="border-top: 1px dashed #000; margin: 4px 0;"></div>
                    <p style="text-align: left; margin: 1px 0;">REF: ${Ce.id}</p>
                    <p style="text-align: left; margin: 1px 0;">DATE: ${new Date(Ce.date).toLocaleString()}</p>
                    <p style="text-align: left; margin: 1px 0; font-weight: 800;">CUS: ${_e(Ce.customerId)}</p>
                    <div style="border-top: 1px dashed #000; margin: 4px 0;"></div>
                    <h2 style="margin: 4px 0; font-size: 14px;">Rs. ${Number(Ce.amount).toLocaleString()}</h2>
                    <p style="margin: 1px 0; text-align: right; font-weight: 800;">BY: ${Ce.paymentMethod}</p>
                    <div style="border-top: 1px dashed #000; margin: 4px 0;"></div>
                    <p style="font-size: 8px; font-weight: 800; margin-top: 8px;">PRASAMA ERP SOLUTIONS</p>
                </body>
            </html>
        `),et.document.close();return}const Be=r.logo?`<div style="text-align: center; margin-bottom: 5px; width: 100%;">
           <img src="${r.logo}" style="max-height: 55px; max-width: 100%; filter: grayscale(100%);" />
         </div>`:"",ct=(wt=Ce.items)==null?void 0:wt.map(he=>{const ve=e.find(We=>We.id===he.productId),$e=he.quantity*he.price-(he.discount||0);return`
        <tr>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 30%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${(ve==null?void 0:ve.name)||"Item"}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 8%; text-align: center;">${he.quantity}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 20%; text-align: right;">${Number(he.price).toLocaleString()}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 20%; text-align: right;">-${(he.discount||0).toLocaleString()}</td>
          <td style="padding: 2px 0; font-size: 9px; font-weight: 800; width: 22%; text-align: right;">${$e.toLocaleString()}</td>
        </tr>
      `}).join(""),rt=new Date(Ce.date).toLocaleDateString(),je=new Date(Ce.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),yt=Number(Ce.amount)+Number(Ce.discount||0);et.document.write(`
      <html>
        <head>
          <title>RECEIPT - ${Ce.id}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap');
            @page { margin: 0; }
            body { 
                font-family: 'JetBrains Mono', monospace; 
                padding: 0; 
                margin: 0; 
                color: #000; 
                width: 72mm; 
                background: #fff; 
                line-height: 1.1; 
                font-size: 9px;
            }
            .receipt-content { padding: 4px; box-sizing: border-box; width: 72mm; }
            .center { text-align: center; }
            .hr { border-top: 1px dashed #000; margin: 4px 0; }
            .biz-name { font-size: 13px; font-weight: 800; text-transform: uppercase; margin: 1px 0; }
            .biz-sub { font-size: 8px; font-weight: 700; text-transform: uppercase; }
            .meta { font-size: 8px; margin: 4px 0; font-weight: 700; }
            table { width: 100%; border-collapse: collapse; table-layout: fixed; }
            th { border-bottom: 0.5px solid #000; padding-bottom: 2px; }
            .summary-row { display: flex; justify-content: space-between; font-weight: 800; margin: 1px 0; font-size: 9px; }
            .total-row { display: flex; justify-content: space-between; font-size: 14px; font-weight: 800; border-top: 1px solid #000; padding-top: 2px; margin-top: 2px; }
            .footer { text-align: center; font-size: 8px; font-weight: 800; margin-top: 10px; border-top: 0.5px dashed #000; padding-top: 4px; }
          </style>
        </head>
        <body onload="window.print(); window.close();">
          <div class="receipt-content">
            <div class="center">
              ${Be}
              <div class="biz-name">${r.name}</div>
              <div class="biz-sub">${r.branch}</div>
            </div>
            <div class="hr"></div>
            <div class="meta">
              REF: ${Ce.id}<br/>
              DATE: ${rt} | TIME: ${je}
            </div>
            <div class="hr"></div>
            <table>
              <thead>
                <tr>
                  <th style="text-align: left; width: 30%;">ITEM</th>
                  <th style="text-align: center; width: 8%;">QTY</th>
                  <th style="text-align: right; width: 20%;">RATE</th>
                  <th style="text-align: right; width: 20%;">DISC</th>
                  <th style="text-align: right; width: 22%;">AMT</th>
                </tr>
              </thead>
              <tbody>
                ${ct}
              </tbody>
            </table>
            <div class="hr"></div>
            <div class="summary-row">
              <span>GROSS TOTAL:</span>
              <span>${yt.toLocaleString()}</span>
            </div>
            ${(Ce.discount||0)>0?`
            <div class="summary-row">
              <span>DISCOUNT:</span>
              <span>-${(Le=Ce.discount)==null?void 0:Le.toLocaleString()}</span>
            </div>`:""}
            <div class="total-row">
              <span>NET TOTAL:</span>
              <span>${Ce.amount.toLocaleString()}</span>
            </div>
            <div class="hr"></div>
            <div style="font-size: 8px; text-align: right; font-weight: 800;">PAID BY: ${Ce.paymentMethod}</div>
            <div class="footer">
                THANK YOU - VISIT AGAIN<br/>
                PRASAMA ERP SOLUTIONS
            </div>
          </div>
        </body>
      </html>
    `),et.document.close()},ot=le.useMemo(()=>ge.trim()?e.filter(Ce=>Ce.name.toLowerCase().includes(ge.toLowerCase())||Ce.sku.toLowerCase().includes(ge.toLowerCase())).slice(0,5):[],[e,ge]),Ye=le.useMemo(()=>{const Ce=new Date().toISOString().split("T")[0],et=a.find(ye=>ye.date===Ce),Be=Number((et==null?void 0:et.openingBalance)||0),ct=te.filter(ye=>{const Ie=typeof ye.date=="string"?ye.date.split("T")[0]:"";return(!P||Ie>=P)&&(!R||Ie<=R)}),rt=ct.filter(ye=>ye.type==="SALE").reduce((ye,Ie)=>{var dt;const mt=((dt=Ie.items)==null?void 0:dt.reduce((Ee,nt)=>{const st=e.find(Tt=>Tt.id===nt.productId);return Ee+Number((st==null?void 0:st.cost)||0)*Number(nt.quantity)},0))||0;return ye+mt},0),je=ct.filter(ye=>ye.type==="SALE"&&ye.paymentMethod!=="CREDIT"||ye.type==="CREDIT_PAYMENT"||ye.type==="SALE_HISTORY_IMPORT").reduce((ye,Ie)=>ye+Number(Ie.amount||0),0),yt=je-rt,wt=je>0?yt/je*100:0,Le=rt>0?yt/rt*100:0,he=t.filter(ye=>ye.date.split("T")[0]===Ce),ve=he.filter(ye=>(ye.type==="SALE"||ye.type==="CREDIT_PAYMENT"||ye.type==="TRANSFER"&&ye.destinationAccountId==="cash")&&ye.paymentMethod==="CASH").reduce((ye,Ie)=>ye+Number(Ie.amount||0),0),$e=he.filter(ye=>(ye.type==="EXPENSE"||ye.type==="PURCHASE"||ye.type==="TRANSFER"&&ye.accountId==="cash")&&ye.paymentMethod==="CASH").reduce((ye,Ie)=>ye+Number(Ie.amount||0),0),We=Be+ve-$e;return{costOfRevenue:rt,salesRevenue:je,profit:yt,margin:wt,roi:Le,cashPosition:We}},[te,t,a,P,R,e]);return x.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[x.jsx("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Transaction Ledger"}),x.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:"Audit trail & history records"})]})}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[x.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm space-y-4",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Yield %"}),x.jsxs("p",{className:"text-2xl font-black text-emerald-600 font-mono tracking-tighter",children:["+",Ye.roi.toFixed(1),"%"]}),x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Return on Cost"})]}),x.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm space-y-4",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Profit"}),x.jsxs("p",{className:"text-2xl font-black text-emerald-600 font-mono tracking-tighter",children:["Rs. ",Math.round(Ye.profit).toLocaleString()]}),x.jsxs("p",{className:"text-[8px] font-black text-emerald-500 uppercase tracking-widest",children:["Margin: +",Ye.margin.toFixed(1),"%"]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm space-y-4",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Revenue"}),x.jsxs("p",{className:"text-2xl font-black text-indigo-600 font-mono tracking-tighter",children:["Rs. ",Math.round(Ye.salesRevenue).toLocaleString()]}),x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Total Sales"})]}),x.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm space-y-4",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Cash Position"}),x.jsxs("p",{className:`text-2xl font-black font-mono tracking-tighter ${Ye.cashPosition<0?"text-rose-600":"text-slate-900"}`,children:["Rs. ",Ye.cashPosition.toLocaleString()]}),x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"In-Drawer Float"})]}),x.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm space-y-4",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Realized Inflow"}),x.jsxs("p",{className:"text-2xl font-black text-emerald-600 font-mono tracking-tighter",children:["Rs. ",Math.round(Ye.salesRevenue).toLocaleString()]}),x.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:"Cash Collected"})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[x.jsxs("div",{className:"relative flex-1 w-full",children:[x.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",children:""}),x.jsx("input",{type:"text",placeholder:"Search Reference, Product, or Customer...",className:"w-full pl-14 pr-6 py-4 rounded-2xl border border-slate-200 outline-none bg-slate-50/50 font-bold text-sm focus:border-indigo-500 transition-all",value:A,onChange:Ce=>N(Ce.target.value)})]}),x.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[x.jsx("input",{type:"date",className:"px-6 py-4 rounded-2xl border border-slate-200 bg-white text-xs font-black outline-none",value:P,onChange:Ce=>O(Ce.target.value)}),x.jsx("input",{type:"date",className:"px-6 py-4 rounded-2xl border border-slate-200 bg-white text-xs font-black outline-none",value:R,onChange:Ce=>L(Ce.target.value)}),x.jsx("button",{onClick:()=>{N(""),O(v),L(v)},className:"px-4 py-4 rounded-2xl border border-slate-200 bg-slate-50 text-[10px] font-black uppercase hover:bg-slate-100 transition-all",children:" Reset"})]})]}),x.jsx("div",{className:"bg-white rounded-[3rem] shadow-sm border border-slate-100 overflow-hidden",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[x.jsx("thead",{className:"bg-slate-50 text-slate-400 uppercase tracking-widest text-[9px]",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-10 py-5",children:"DATE / REFERENCE"}),x.jsx("th",{className:"px-10 py-5",children:"ENTITY / MANIFEST"}),x.jsx("th",{className:"px-10 py-5 text-right",children:"VALUE (RS.)"}),x.jsx("th",{className:"px-10 py-5",children:"STATUS"}),x.jsx("th",{className:"px-10 py-5 text-center",children:"ACTION"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-100 font-medium",children:[se.map(Ce=>{var et;return x.jsxs("tr",{className:"hover:bg-indigo-50/20 transition-all group align-top",children:[x.jsxs("td",{className:"px-10 py-6",children:[x.jsx("p",{className:"font-black text-slate-900 uppercase text-[12px]",children:new Date(Ce.date).toLocaleDateString()}),x.jsx("p",{className:"text-[10px] text-indigo-500 font-mono font-black uppercase mt-1 tracking-tighter",children:Ce.id})]}),x.jsxs("td",{className:"px-10 py-6",children:[x.jsx("p",{className:"font-black text-slate-700 uppercase text-[11px] mb-3",children:_e(Ce.customerId)}),x.jsx("div",{className:"space-y-1.5 border-l-2 border-slate-100 pl-4",children:(et=Ce.items)==null?void 0:et.map((Be,ct)=>{const rt=e.find(je=>je.id===Be.productId);return x.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-black uppercase text-slate-400 leading-none",children:[x.jsx("span",{className:"w-4 h-4 rounded bg-slate-100 flex items-center justify-center text-[7px] text-slate-600 font-bold shrink-0",children:Be.quantity}),x.jsx("span",{className:`truncate max-w-[150px] ${A&&(rt!=null&&rt.name.toLowerCase().includes(A.toLowerCase()))?"text-indigo-600":""}`,children:(rt==null?void 0:rt.name)||"Asset"}),x.jsxs("span",{className:"ml-auto text-slate-300 font-mono text-[8px]",children:["@ ",Number(Be.price).toLocaleString()]})]},ct)})})]}),x.jsx("td",{className:"px-10 py-6 text-right font-black text-slate-900 font-mono text-[14px]",children:Number(Ce.amount||0).toLocaleString()}),x.jsx("td",{className:"px-10 py-6",children:x.jsxs("div",{className:"flex flex-col gap-1.5",children:[x.jsx("span",{className:`px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest self-start ${Ce.type==="SALE"?"bg-indigo-50 text-indigo-600":"bg-emerald-50 text-emerald-600"}`,children:Ce.type}),x.jsx("span",{className:`px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest self-start ${Ce.paymentMethod==="CREDIT"?"bg-rose-50 text-rose-500":"bg-slate-100 text-slate-500"}`,children:Ce.paymentMethod})]})}),x.jsx("td",{className:"px-10 py-6 text-center",children:x.jsxs("div",{className:"flex justify-center gap-2",children:[x.jsx("button",{onClick:()=>{B(Ce),H(!0)},className:"p-2.5 rounded-xl border border-slate-200 hover:bg-white hover:text-indigo-600 transition-all shadow-sm",title:"Edit",children:""}),x.jsx("button",{onClick:()=>He(Ce),className:"p-2.5 rounded-xl border border-slate-200 hover:bg-white hover:text-indigo-600 transition-all shadow-sm",title:"Print Receipt",children:""}),x.jsx("button",{onClick:()=>{confirm("Permanently delete this entry?")&&u(Ce.id)},className:"p-2.5 rounded-xl border border-slate-200 hover:bg-rose-50 text-rose-600 transition-all shadow-sm",title:"Delete",children:""})]})})]},Ce.id)}),se.length===0&&x.jsx("tr",{children:x.jsxs("td",{colSpan:5,className:"py-40 text-center opacity-30",children:[x.jsx("div",{className:"text-6xl mb-4",children:""}),x.jsx("p",{className:"text-xs font-black uppercase tracking-[0.4em]",children:"No matching transactions found"})]})})]})]})})}),q&&G&&x.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-md overflow-y-auto",children:x.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-4xl overflow-hidden animate-in zoom-in duration-300 my-10 flex flex-col border border-slate-100",children:[x.jsxs("div",{className:"p-10 flex justify-between items-start bg-[#f8fafc]/50",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tighter mb-1 uppercase",children:"Modify Transaction"}),x.jsxs("p",{className:"text-[11px] font-black text-indigo-500 uppercase tracking-widest",children:["Reference Node: ",G.id]})]}),x.jsx("button",{onClick:()=>{H(!1),B(null),K(!1)},className:"text-slate-300 hover:text-slate-900 text-5xl transition-colors leading-none",children:""})]}),x.jsxs("form",{onSubmit:ke,className:"p-10 space-y-8 flex-1 overflow-y-auto",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Entry Date"}),x.jsx("input",{name:"date",type:"date",required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-bold text-sm bg-white outline-none focus:border-indigo-500",defaultValue:G.date.split("T")[0]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Transaction Value (Rs.)"}),x.jsx("input",{name:"amount",type:"number",step:"0.01",required:G.type!=="SALE",readOnly:G.type==="SALE",className:`w-full px-6 py-4 rounded-2xl border border-slate-200 font-black font-mono text-lg text-indigo-600 outline-none focus:border-indigo-500 ${G.type==="SALE"?"bg-slate-50":"bg-white"}`,value:G.type==="SALE"?ee:void 0,defaultValue:G.type!=="SALE"?G.amount:void 0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Audit Memo / Description"}),x.jsx("input",{name:"description",required:!0,className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-bold uppercase text-sm bg-white outline-none focus:border-indigo-500",defaultValue:G.description})]}),G.type==="SALE"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center border-b border-slate-50 pb-2",children:[x.jsx("h4",{className:"text-[11px] font-black text-slate-900 uppercase tracking-widest",children:"Itemized Manifest"}),x.jsx("button",{type:"button",onClick:()=>K(!X),className:"text-[9px] font-black text-indigo-600 uppercase hover:underline",children:"+ Quick Add Asset"})]}),X&&x.jsxs("div",{className:"p-6 bg-slate-900 rounded-[2rem] border border-slate-800 space-y-4 animate-in slide-in-from-top-2",children:[x.jsx("input",{autoFocus:!0,className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-5 py-3 text-xs font-bold text-white outline-none focus:border-indigo-500",placeholder:"SEARCH CATALOG...",value:ge,onChange:Ce=>re(Ce.target.value)}),x.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:ot.map(Ce=>x.jsxs("button",{type:"button",onClick:()=>fe(Ce),className:"flex justify-between items-center p-3 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-700 transition-all text-left",children:[x.jsx("span",{className:"text-[10px] font-black text-white uppercase",children:Ce.name}),x.jsxs("span",{className:"text-[9px] font-black text-indigo-400",children:["Rs. ",Ce.price.toLocaleString()]})]},Ce.id))})]}),x.jsx("div",{className:"space-y-2",children:z.map((Ce,et)=>{const Be=e.find(ct=>ct.id===Ce.productId);return x.jsxs("div",{className:"flex gap-4 items-center p-4 bg-slate-50 rounded-2xl border border-slate-100 group transition-all hover:bg-white hover:border-indigo-100",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[11px] font-black text-slate-900 uppercase truncate leading-tight",children:(Be==null?void 0:Be.name)||"Asset"}),x.jsx("p",{className:"text-[9px] font-bold text-slate-400 font-mono font-bold mt-0.5 tracking-tight",children:(Be==null?void 0:Be.sku)||"ID-GEN"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-16",children:x.jsx("input",{type:"number",className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 font-black font-mono text-[10px] text-center bg-white",value:Ce.quantity,onChange:ct=>ce(et,"quantity",ct.target.value)})}),x.jsx("div",{className:"w-24",children:x.jsx("input",{type:"number",className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 font-black font-mono text-[10px] text-indigo-600 text-right bg-white",value:Ce.price,onChange:ct=>ce(et,"price",ct.target.value)})}),x.jsx("div",{className:"text-right min-w-[80px]",children:x.jsxs("p",{className:"text-[11px] font-black font-mono text-slate-900",children:["Rs. ",(Ce.quantity*Ce.price-(Ce.discount||0)).toLocaleString()]})}),x.jsx("button",{type:"button",onClick:()=>Ae(et),className:"p-2 text-rose-300 hover:text-rose-600 transition-colors",children:""})]})]},et)})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Settlement Pipeline"}),x.jsx("select",{name:"paymentMethod",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black uppercase text-xs bg-white outline-none cursor-pointer focus:border-indigo-500",defaultValue:G.paymentMethod,children:["CASH","BANK","CARD","CREDIT","CHEQUE"].map(Ce=>x.jsx("option",{value:Ce,children:Ce},Ce))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Asset Node (Account)"}),x.jsx("select",{name:"accountId",className:"w-full px-6 py-4 rounded-2xl border border-slate-200 font-black uppercase text-xs bg-white outline-none cursor-pointer focus:border-indigo-500",defaultValue:G.accountId,children:i.map(Ce=>x.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))})]})]}),x.jsx("div",{className:"pt-6",children:x.jsx("button",{type:"submit",className:"w-full bg-[#0f172a] text-white font-black py-5 rounded-2xl uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all active:scale-[0.98]",children:"Update Commercial Ledger"})})]})]})})]})},Ece=({products:t=[],customers:e=[],categories:n=[],userProfile:r,quotations:i=[],onUpsertQuotation:a,onDeleteQuotation:o})=>{const[u,h]=le.useState("LIST"),[f,g]=le.useState(null),[v,A]=le.useState(""),[N,P]=le.useState([]),[O,R]=le.useState(""),[L,U]=le.useState(""),[F,q]=le.useState(""),[H,G]=le.useState(14),B=le.useMemo(()=>v.trim()?t.filter(te=>te.name.toLowerCase().includes(v.toLowerCase())||te.sku.toLowerCase().includes(v.toLowerCase())).slice(0,10):t.slice(0,10),[t,v]),z=le.useMemo(()=>N.reduce((te,se)=>te+se.quantity*se.price-se.discount,0),[N]);le.useMemo(()=>N.reduce((te,se)=>te+se.discount,0),[N]);const V=te=>{const se=N.find(_e=>_e.productId===te.id);P(se?N.map(_e=>_e.productId===te.id?{..._e,quantity:_e.quantity+1}:_e):[...N,{productId:te.id,quantity:1,price:te.price,discount:0}])},ee=(te,se,_e)=>{P(N.map(ke=>ke.productId===te?{...ke,[se]:_e}:ke))},Q=te=>{P(N.filter(se=>se.productId!==te))},X=te=>{g(te.id),P(te.items),R(te.customerId||""),U(te.customerName&&!te.customerId?te.customerName:""),q(te.notes||"");const se=new Date(te.validUntil).getTime()-new Date(te.date).getTime();G(Math.ceil(se/(1e3*3600*24))),h("CREATE")},K=te=>{var ke;if(N.length===0)return alert("Please add items to the quotation.");const se=new Date;se.setDate(se.getDate()+H);const _e={id:f||`QT-${Date.now()}`,date:new Date().toISOString(),validUntil:se.toISOString(),customerId:O||void 0,customerName:O?(ke=e.find(Ke=>Ke.id===O))==null?void 0:ke.name:L,items:N,totalAmount:z,notes:F,status:te};a(_e),h("LIST"),ge()},ge=()=>{P([]),R(""),U(""),q(""),g(null),G(14)},re=te=>{const se=window.open("","_blank");if(!se)return;const _e=r.logo?`<div style="text-align: left; margin-bottom: 20px;">
           <img src="${r.logo}" style="max-height: 80px;" />
         </div>`:"",ke=te.items.map((fe,Ae)=>{const He=t.find(Ye=>Ye.id===fe.productId),ot=fe.quantity*fe.price-fe.discount;return`
        <tr>
          <td style="padding: 12px; border-bottom: 1px solid #eee;">${Ae+1}</td>
          <td style="padding: 12px; border-bottom: 1px solid #eee;">
            <div style="font-weight: 800; text-transform: uppercase;">${(He==null?void 0:He.name)||"Item"}</div>
            <div style="font-size: 10px; color: #666;">SKU: ${(He==null?void 0:He.sku)||"N/A"}</div>
          </td>
          <td style="padding: 12px; border-bottom: 1px solid #eee; text-align: right;">${fe.quantity}</td>
          <td style="padding: 12px; border-bottom: 1px solid #eee; text-align: right;">${Number(fe.price).toLocaleString()}</td>
          <td style="padding: 12px; border-bottom: 1px solid #eee; text-align: right;">${fe.discount>0?`-${fe.discount.toLocaleString()}`:"0.00"}</td>
          <td style="padding: 12px; border-bottom: 1px solid #eee; text-align: right; font-weight: 800;">${ot.toLocaleString()}</td>
        </tr>
      `}).join(""),Ke=te.items.reduce((fe,Ae)=>fe+Ae.quantity*Ae.price,0),ce=te.items.reduce((fe,Ae)=>fe+Ae.discount,0);se.document.write(`
      <html>
        <head>
          <title>QUOTATION - ${te.id}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
            body { font-family: 'Plus Jakarta Sans', sans-serif; padding: 40px; color: #1e293b; max-width: 800px; margin: 0 auto; line-height: 1.5; }
            .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; }
            .biz-details { text-align: right; }
            .title { font-size: 32px; font-weight: 800; color: #4f46e5; margin: 0; text-transform: uppercase; letter-spacing: -1px; }
            .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px; }
            .info-box h4 { margin: 0 0 10px 0; font-size: 10px; font-weight: 800; text-transform: uppercase; color: #94a3b8; letter-spacing: 1px; }
            .info-box p { margin: 0; font-weight: 600; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }
            th { text-align: left; padding: 12px; background: #f8fafc; font-size: 10px; font-weight: 800; text-transform: uppercase; color: #64748b; }
            .totals { margin-left: auto; width: 300px; }
            .total-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f1f5f9; font-weight: 700; }
            .grand-total { font-size: 20px; font-weight: 800; border-bottom: 0; color: #4f46e5; margin-top: 5px; padding-top: 15px; border-top: 2px solid #4f46e5; }
            .notes { margin-top: 40px; padding: 20px; background: #f8fafc; border-radius: 12px; font-size: 12px; }
            .footer { margin-top: 60px; text-align: center; font-size: 10px; color: #94a3b8; border-top: 1px solid #f1f5f9; padding-top: 20px; text-transform: uppercase; font-weight: 800; }
            @media print { .no-print { display: none; } }
          </style>
        </head>
        <body onload="window.print();">
          <div class="header">
            <div>
              ${_e}
              <h1 class="title">Quotation</h1>
              <p style="font-size: 14px; font-weight: 600; color: #64748b;">Ref: ${te.id}</p>
            </div>
            <div class="biz-details">
              <p style="font-weight: 800; margin: 0;">${r.name}</p>
              <p style="font-size: 12px; color: #64748b; margin: 4px 0;">${r.branch}</p>
              ${r.phone?`<p style="font-size: 12px; color: #64748b; margin: 4px 0; font-weight: 800;">Contact: ${r.phone}</p>`:""}
              <p style="font-size: 12px; color: #64748b; margin: 4px 0;">Date: ${new Date(te.date).toLocaleDateString()}</p>
              <p style="font-size: 12px; color: #ef4444; margin: 4px 0; font-weight: 800;">Valid Until: ${new Date(te.validUntil).toLocaleDateString()}</p>
            </div>
          </div>

          <div class="info-grid">
            <div class="info-box">
              <h4>Quotation Prepared For</h4>
              <p>${te.customerName||"Valued Customer"}</p>
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th style="width: 40px;">#</th>
                <th>Description</th>
                <th style="text-align: right;">Qty</th>
                <th style="text-align: right;">Unit Price</th>
                <th style="text-align: right;">Disc.</th>
                <th style="text-align: right;">Total</th>
              </tr>
            </thead>
            <tbody>
              ${ke}
            </tbody>
          </table>

          <div class="totals">
            <div class="total-row">
              <span>Gross Subtotal</span>
              <span>Rs. ${Ke.toLocaleString()}</span>
            </div>
            ${ce>0?`
            <div class="total-row" style="color: #ef4444;">
              <span>Total Discount</span>
              <span>- Rs. ${ce.toLocaleString()}</span>
            </div>`:""}
            <div class="total-row grand-total">
              <span>Amount Payable</span>
              <span>Rs. ${te.totalAmount.toLocaleString()}</span>
            </div>
          </div>

          ${te.notes?`<div class="notes"><h4>Special Notes:</h4><p>${te.notes}</p></div>`:""}

          <div class="footer">
            Thank you for considering our proposal. This is a computer generated document.
          </div>
        </body>
      </html>
    `),se.document.close()};return x.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[x.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Quotation Management"}),x.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:"Professional Client Proposals"})]}),x.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 shadow-inner",children:[x.jsx("button",{onClick:()=>{h("LIST"),ge()},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="LIST"?"bg-white text-indigo-600 shadow-sm border border-slate-100":"text-slate-400"}`,children:"Saved Quotes"}),x.jsx("button",{onClick:()=>{h("CREATE"),ge()},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="CREATE"&&!f?"bg-white text-indigo-600 shadow-sm border border-slate-100":"text-slate-400"}`,children:"+ Generate New"})]})]}),u==="LIST"?x.jsx("div",{className:"bg-white rounded-[3rem] shadow-sm border border-slate-100 overflow-hidden",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[x.jsx("thead",{className:"bg-slate-50 text-slate-400 uppercase tracking-widest text-[9px]",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-8 py-5",children:"Ref / Date"}),x.jsx("th",{className:"px-8 py-5",children:"Client"}),x.jsx("th",{className:"px-8 py-5 text-right",children:"Value"}),x.jsx("th",{className:"px-8 py-5",children:"Status / Validity"}),x.jsx("th",{className:"px-8 py-5 text-center",children:"Actions"})]})}),x.jsxs("tbody",{className:"divide-y divide-slate-100 font-medium",children:[i.map(te=>x.jsxs("tr",{className:"hover:bg-slate-50 transition-all",children:[x.jsxs("td",{className:"px-8 py-5",children:[x.jsx("p",{className:"font-black text-indigo-600",children:te.id}),x.jsx("p",{className:"text-[9px] text-slate-400",children:new Date(te.date).toLocaleDateString()})]}),x.jsx("td",{className:"px-8 py-5 uppercase font-bold text-slate-800",children:te.customerName||"N/A"}),x.jsxs("td",{className:"px-8 py-5 text-right font-black font-mono",children:["Rs. ",te.totalAmount.toLocaleString()]}),x.jsx("td",{className:"px-8 py-5",children:x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("span",{className:`px-3 py-1 rounded-lg text-[8px] font-black uppercase self-start ${te.status==="DRAFT"?"bg-amber-50 text-amber-600":"bg-indigo-50 text-indigo-600"}`,children:te.status||"FINALIZED"}),x.jsxs("span",{className:`px-3 py-1 rounded-lg text-[8px] font-black uppercase self-start ${new Date(te.validUntil)<new Date?"bg-rose-50 text-rose-500":"bg-emerald-50 text-emerald-500"}`,children:["Val: ",new Date(te.validUntil).toLocaleDateString()]})]})}),x.jsx("td",{className:"px-8 py-5 text-center",children:x.jsxs("div",{className:"flex justify-center gap-3",children:[x.jsx("button",{onClick:()=>X(te),className:"p-2 border border-slate-200 rounded-lg hover:bg-white transition-all shadow-sm",title:"Edit",children:""}),x.jsx("button",{onClick:()=>re(te),className:"p-2 border border-slate-200 rounded-lg hover:bg-white transition-all shadow-sm",title:"Print",children:""}),x.jsx("button",{onClick:()=>o(te.id),className:"p-2 border border-slate-200 rounded-lg hover:bg-rose-50 text-rose-300 hover:text-rose-600 transition-all",children:""})]})})]},te.id)),i.length===0&&x.jsx("tr",{children:x.jsx("td",{colSpan:5,className:"px-8 py-20 text-center text-slate-300 italic uppercase tracking-widest text-xs font-black",children:"No proposals found in vault"})})]})]})})}):x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-[75vh]",children:[x.jsxs("div",{className:"lg:col-span-5 bg-white p-8 rounded-[3rem] border border-slate-100 shadow-sm flex flex-col gap-6",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Asset Catalog"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",children:""}),x.jsx("input",{type:"text",placeholder:"Search Products...",className:"w-full pl-14 pr-6 py-4 rounded-2xl border border-slate-200 outline-none bg-slate-50/50 font-bold focus:border-indigo-500",value:v,onChange:te=>A(te.target.value)})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:B.map(te=>x.jsxs("div",{className:"p-4 rounded-2xl border border-slate-50 hover:border-indigo-100 hover:bg-indigo-50/30 cursor-pointer transition-all flex justify-between items-center group",onClick:()=>V(te),children:[x.jsxs("div",{className:"min-w-0 flex-1",children:[x.jsx("p",{className:"text-[11px] font-black uppercase text-slate-900 truncate",children:te.name}),x.jsxs("p",{className:"text-[9px] font-mono text-slate-400",children:[te.sku," | Rs. ",te.price.toLocaleString()]})]}),x.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-600 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity ml-2 shrink-0",children:"+"})]},te.id))})]}),x.jsxs("div",{className:"lg:col-span-7 bg-white p-10 rounded-[3rem] border border-slate-100 shadow-xl flex flex-col gap-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-tighter",children:["Drafting Manifest ",f&&x.jsxs("span",{className:"text-indigo-600 ml-2",children:["(Edit: ",f,")"]})]}),f&&x.jsx("button",{onClick:ge,className:"text-[9px] font-black text-rose-500 uppercase tracking-widest",children:"Discard Changes"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Linked Client Profile"}),x.jsxs("select",{value:O,onChange:te=>{R(te.target.value),te.target.value&&U("")},className:"w-full px-5 py-3 rounded-xl border border-slate-200 bg-white font-bold text-xs outline-none",children:[x.jsx("option",{value:"",children:"One-time Customer (Custom Name)"}),e.map(te=>x.jsx("option",{value:te.id,children:te.name},te.id))]})]}),!O&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Customer Entity Name"}),x.jsx("input",{value:L,onChange:te=>U(te.target.value.toUpperCase()),className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-bold uppercase text-xs",placeholder:"E.G. JOHN DOE"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Validity (Days)"}),x.jsx("input",{type:"number",value:H,onChange:te=>G(parseInt(te.target.value)||0),className:"w-full px-5 py-3 rounded-xl border border-slate-200 font-bold text-xs"})]})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto pr-4 space-y-3 custom-scrollbar",children:[N.map((te,se)=>{const _e=t.find(ke=>ke.id===te.productId);return x.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 flex items-center gap-4 group hover:bg-white transition-all",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[11px] font-black text-slate-800 uppercase truncate",children:(_e==null?void 0:_e.name)||"Asset"}),x.jsx("p",{className:"text-[9px] font-mono text-slate-400",children:_e==null?void 0:_e.sku})]}),x.jsx("div",{className:"w-16",children:x.jsx("input",{type:"number",value:te.quantity,onChange:ke=>ee(te.productId,"quantity",parseInt(ke.target.value)||0),className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 text-center font-black text-[10px]"})}),x.jsx("div",{className:"w-24",children:x.jsx("input",{type:"number",value:te.price,onChange:ke=>ee(te.productId,"price",parseFloat(ke.target.value)||0),className:"w-full px-2 py-1.5 rounded-lg border border-slate-200 text-right font-black text-indigo-600 text-[10px]"})}),x.jsx("div",{className:"w-20 text-right",children:x.jsxs("p",{className:"text-[10px] font-black font-mono",children:["Rs. ",(te.quantity*te.price).toLocaleString()]})}),x.jsx("button",{onClick:()=>Q(te.productId),className:"text-rose-300 hover:text-rose-600 transition-colors",children:""})]},se)}),N.length===0&&x.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-10 py-20",children:[x.jsx("div",{className:"text-8xl",children:""}),x.jsx("p",{className:"text-xs font-black uppercase tracking-[0.4em] mt-4 text-center px-10",children:"Select assets from the catalog to build proposal"})]})]}),x.jsxs("div",{className:"pt-6 border-t border-slate-100 flex flex-col md:flex-row items-end justify-between gap-6",children:[x.jsxs("div",{className:"space-y-4 flex-1 w-full",children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest block",children:"Operational Notes / Terms"}),x.jsx("textarea",{value:F,onChange:te=>q(te.target.value),rows:2,className:"w-full p-4 bg-slate-50 rounded-2xl border border-slate-100 outline-none text-[11px] font-medium",placeholder:"E.G. Payment terms: 50% Advance..."})]}),x.jsxs("div",{className:"text-right space-y-4 shrink-0",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Proposal Gross Value"}),x.jsxs("p",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:["Rs. ",z.toLocaleString()]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>K("DRAFT"),className:"px-6 py-4 rounded-2xl border-2 border-slate-200 font-black uppercase tracking-widest text-[9px] hover:bg-slate-50 transition-all text-slate-500",children:"Save as Draft"}),x.jsx("button",{onClick:()=>K("FINALIZED"),className:"bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black uppercase tracking-[0.15em] text-[10px] shadow-2xl hover:bg-indigo-700 transition-all active:scale-95",children:"Finalize Proposal"})]})]})]})]})]})]})},_ce=({userProfile:t,setUserProfile:e,onExport:n,onImport:r,syncStatus:i})=>{const a=le.useRef(null),o=le.useRef(null),u=g=>{g.preventDefault();const v=new FormData(g.currentTarget),A={...t,name:v.get("name"),branch:v.get("branch"),phone:v.get("phone"),loginUsername:v.get("loginUsername").toUpperCase(),loginPassword:v.get("loginPassword")};e(A),alert("Enterprise branding and security credentials synchronized with cloud ledger!")},h=()=>"bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]",f=()=>"Cloud Terminal Live";return x.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[x.jsxs("div",{className:"flex justify-between items-end",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"System Administration"}),x.jsx("p",{className:"text-slate-500 font-medium",children:"Enterprise branding and live cloud node configuration"})]}),x.jsxs("div",{className:"bg-white px-6 py-2 rounded-full border border-slate-100 shadow-sm flex items-center gap-3",children:[x.jsx("div",{className:`w-2 h-2 rounded-full ${h()} animate-pulse`}),x.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:f()})]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-sm space-y-8",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center text-2xl shadow-inner",children:""}),x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Corporate Identity"})]}),x.jsxs("form",{onSubmit:u,className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[x.jsxs("div",{className:"w-28 h-28 rounded-[2rem] bg-slate-50 border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden relative group shrink-0 shadow-inner",children:[t.logo?x.jsx("img",{src:t.logo,className:"w-full h-full object-contain p-2",alt:"Logo"}):x.jsx("span",{className:"text-4xl grayscale opacity-20",children:""}),x.jsxs("button",{type:"button",onClick:()=>{var g;return(g=a.current)==null?void 0:g.click()},className:"absolute inset-0 bg-indigo-600/90 text-white opacity-0 group-hover:opacity-100 flex flex-col items-center justify-center transition-all text-[9px] font-black uppercase tracking-widest gap-2",children:[x.jsx("span",{className:"text-xl",children:""}),"Update Logo"]}),x.jsx("input",{type:"file",ref:a,className:"hidden",accept:"image/*",onChange:g=>{var A;const v=(A=g.target.files)==null?void 0:A[0];if(v){const N=new FileReader;N.onload=P=>{var O;return e({...t,logo:(O=P.target)==null?void 0:O.result})},N.readAsDataURL(v)}}})]}),x.jsxs("div",{className:"flex-1 space-y-4 w-full",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Company Name"}),x.jsx("input",{name:"name",required:!0,className:"w-full px-5 py-3 rounded-2xl border border-slate-200 font-bold outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all uppercase",defaultValue:t.name})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Headquarters"}),x.jsx("input",{name:"branch",required:!0,className:"w-full px-5 py-3 rounded-2xl border border-slate-200 font-bold outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all uppercase",defaultValue:t.branch})]}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Contact Line"}),x.jsx("input",{name:"phone",className:"w-full px-5 py-3 rounded-2xl border border-slate-200 font-bold outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",defaultValue:t.phone||"",placeholder:"+94 ..."})]})]})]}),x.jsxs("div",{className:"pt-6 border-t border-slate-100 space-y-4",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("span",{className:"text-sm",children:""}),x.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-[0.2em]",children:"Security Credentials"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Admin ID"}),x.jsx("input",{name:"loginUsername",required:!0,className:"w-full px-5 py-3 rounded-2xl border border-slate-200 font-black outline-none focus:border-indigo-500 transition-all uppercase text-xs",defaultValue:t.loginUsername||"ADMIN"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Passphrase"}),x.jsx("input",{name:"loginPassword",type:"password",required:!0,className:"w-full px-5 py-3 rounded-2xl border border-slate-200 font-black outline-none focus:border-indigo-500 transition-all text-xs",defaultValue:t.loginPassword||"123"})]})]})]}),x.jsx("button",{type:"submit",className:"w-full bg-slate-950 text-white py-5 rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl hover:bg-black transition-all active:scale-95 shadow-slate-200",children:"Sync Global Modifications"})]})]}),x.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-sm space-y-8",children:[x.jsx("div",{className:"flex justify-between items-center",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center text-2xl shadow-inner",children:""}),x.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tighter",children:"Business Continuity"})]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-100 flex items-center gap-6 group hover:border-emerald-200 transition-all",children:[x.jsx("div",{className:"w-14 h-14 bg-emerald-100 text-emerald-600 rounded-2xl flex items-center justify-center text-3xl transition-transform group-hover:scale-110",children:""}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h4",{className:"font-black text-slate-900 uppercase text-xs",children:"Offline Snapshot"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Export a portable JSON ledger for disaster recovery."})]}),x.jsx("button",{onClick:n,className:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-emerald-700 active:scale-95 transition-all",children:"Download"})]}),x.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-100 flex items-center gap-6 group hover:border-indigo-200 transition-all",children:[x.jsx("div",{className:"w-14 h-14 bg-indigo-100 text-indigo-600 rounded-2xl flex items-center justify-center text-3xl transition-transform group-hover:scale-110",children:""}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h4",{className:"font-black text-slate-900 uppercase text-xs",children:"Restore Manifest"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Import and synchronize records from a backup file."})]}),x.jsx("button",{onClick:()=>{var g;return(g=o.current)==null?void 0:g.click()},className:"bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-indigo-700 active:scale-95 transition-all",children:"Restore"}),x.jsx("input",{type:"file",ref:o,onChange:r,accept:".json",className:"hidden"})]}),x.jsx("div",{className:"pt-8 border-t border-slate-100",children:x.jsxs("div",{className:"p-6 bg-rose-50 rounded-3xl border border-rose-100 flex items-center gap-6 group",children:[x.jsx("div",{className:"w-14 h-14 bg-rose-100 text-rose-600 rounded-2xl flex items-center justify-center text-3xl",children:""}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h4",{className:"font-black text-rose-900 uppercase text-xs",children:"Terminal Hard Reset"}),x.jsx("p",{className:"text-[10px] text-rose-400 font-medium italic",children:"Purge all local session cache and reconnect."})]}),x.jsx("button",{onClick:()=>{confirm("CRITICAL WARNING: This will clear your local terminal cache. Cloud data remains safe. Re-sync?")&&(localStorage.clear(),window.location.reload())},className:"bg-rose-600 text-white px-5 py-2.5 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-rose-700 active:scale-95 transition-all",children:"Reset"})]})})]})]})]})]})},Ace=({onLogin:t})=>{const[e,n]=le.useState({username:"",password:""}),[r,i]=le.useState(null),a=o=>{o.preventDefault(),i(null);const u=e.username.toLowerCase()==="admin";t({name:e.username.toUpperCase()||"AUTHORIZED USER",branch:"Local Node",loginUsername:e.username,isAdmin:u})};return x.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-[#0f172a] relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-600/20 blur-[120px] rounded-full"}),x.jsxs("div",{className:"w-full max-w-lg p-8 relative z-10",children:[x.jsxs("div",{className:"text-center mb-10",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-[0_0_40px_rgba(79,70,229,0.3)] mx-auto mb-6",children:x.jsx("span",{className:"font-black text-3xl italic",children:"P"})}),x.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter uppercase mb-2",children:"PRASAMA LOCAL"}),x.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-[0.2em]",children:"Secure Offline Enterprise Suite"})]}),x.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-[2.5rem] shadow-2xl",children:[x.jsxs("form",{onSubmit:a,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Username"}),x.jsx("input",{required:!0,className:"w-full bg-slate-900/50 border border-slate-800 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-indigo-500 transition-all uppercase",placeholder:"ADMIN",value:e.username,onChange:o=>n({...e,username:o.target.value})})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Password"}),x.jsx("input",{type:"password",required:!0,className:"w-full bg-slate-900/50 border border-slate-800 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-indigo-500 transition-all",placeholder:"",value:e.password,onChange:o=>n({...e,password:o.target.value})})]}),r&&x.jsx("p",{className:"text-rose-500 text-[10px] font-black uppercase text-center",children:r}),x.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-5 rounded-2xl font-black uppercase text-xs tracking-[0.3em] shadow-xl shadow-indigo-600/20 active:scale-[0.98] transition-all",children:"Unlock Terminal"})]}),x.jsx("div",{className:"mt-8 pt-8 border-t border-white/5 text-center",children:x.jsxs("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest flex items-center justify-center gap-2",children:[x.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"Local Database Ready"]})})]})]})]})};var Tce={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sce,Cce;function Ice(){return{geminiUrl:Sce,vertexUrl:Cce}}function Nce(t,e,n,r){var i,a;if(!(t!=null&&t.baseUrl)){const o=Ice();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(a=o.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rl{}function St(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function C(t,e,n){for(let a=0;a<e.length-1;a++){const o=e[a];if(o.endsWith("[]")){const u=o.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[u])){const h=t[u];if(Array.isArray(n))for(let f=0;f<h.length;f++){const g=h[f];C(g,e.slice(a+1),n[f])}else for(const f of h)C(f,e.slice(a+1),n)}return}else if(o.endsWith("[0]")){const u=o.slice(0,-3);u in t||(t[u]=[{}]);const h=t[u];C(h[0],e.slice(a+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function _(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const o=t[a];return Array.isArray(o)?o.map(u=>_(u,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Rce(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),o=new Set;let u=-1;for(let h=0;h<i.length;h++)if(i[h]==="*"){u=h;break}if(u!==-1&&a.length>u)for(let h=u;h<a.length;h++){const f=a[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&o.add(f)}nT(t,i,a,0,o)}}function nT(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const o=a.slice(0,-2),u=t;if(o in u&&Array.isArray(u[o]))for(const h of u[o])nT(h,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,u=Object.keys(o).filter(f=>!f.startsWith("_")&&!i.has(f)),h={};for(const f of u)h[f]=o[f];for(const[f,g]of Object.entries(h)){const v=[];for(const A of n.slice(r))A==="*"?v.push(f):v.push(A);C(o,v,g)}for(const f of u)delete o[f]}}else{const o=t;a in o&&nT(o[a],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d2(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mce(t){const e={},n=_(t,["operationName"]);n!=null&&C(e,["operationName"],n);const r=_(t,["resourceName"]);return r!=null&&C(e,["_url","resourceName"],r),e}function Dce(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],Pce(o)),e}function Oce(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response"]);return o!=null&&C(e,["response"],kce(o)),e}function Pce(t){const e={},n=_(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Lce(o))),C(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function kce(t){const e={},n=_(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Bce(o))),C(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Lce(t){const e={},n=_(t,["video"]);return n!=null&&C(e,["video"],zce(n)),e}function Bce(t){const e={},n=_(t,["_self"]);return n!=null&&C(e,["video"],Gce(n)),e}function jce(t){const e={},n=_(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function Uce(t){const e={},n=_(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function Vce(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response"]);return o!=null&&C(e,["response"],Fce(o)),e}function Fce(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["parent"]);r!=null&&C(e,["parent"],r);const i=_(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function sU(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response"]);return o!=null&&C(e,["response"],qce(o)),e}function qce(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["parent"]);r!=null&&C(e,["parent"],r);const i=_(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function zce(t){const e={},n=_(t,["uri"]);n!=null&&C(e,["uri"],n);const r=_(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],d2(r));const i=_(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function Gce(t){const e={},n=_(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=_(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],d2(r));const i=_(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jk;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jk||(Jk={}));var Zk;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zk||(Zk={}));var e6;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(e6||(e6={}));var ql;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ql||(ql={}));var t6;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(t6||(t6={}));var n6;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(n6||(n6={}));var r6;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(r6||(r6={}));var i6;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(i6||(i6={}));var a6;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(a6||(a6={}));var o6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(o6||(o6={}));var s6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(s6||(s6={}));var l6;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(l6||(l6={}));var c6;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(c6||(c6={}));var u6;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(u6||(u6={}));var d6;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(d6||(d6={}));var f6;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(f6||(f6={}));var h6;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(h6||(h6={}));var p6;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(p6||(p6={}));var m6;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(m6||(m6={}));var g6;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(g6||(g6={}));var y6;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(y6||(y6={}));var ey;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ey||(ey={}));var x6;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(x6||(x6={}));var v6;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(v6||(v6={}));var b6;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(b6||(b6={}));var rT;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rT||(rT={}));var w6;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(w6||(w6={}));var E6;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(E6||(E6={}));var _6;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(_6||(_6={}));var A6;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(A6||(A6={}));var T6;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(T6||(T6={}));var S6;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(S6||(S6={}));var C6;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(C6||(C6={}));var I6;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(I6||(I6={}));var N6;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(N6||(N6={}));var R6;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(R6||(R6={}));var M6;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(M6||(M6={}));var D6;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(D6||(D6={}));var O6;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(O6||(O6={}));var P6;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(P6||(P6={}));var k6;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(k6||(k6={}));var L6;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(L6||(L6={}));var B6;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(B6||(B6={}));var j6;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(j6||(j6={}));var U6;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(U6||(U6={}));var V6;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(V6||(V6={}));var F6;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(F6||(F6={}));var q6;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(q6||(q6={}));var z6;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(z6||(z6={}));var G6;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(G6||(G6={}));var H6;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(H6||(H6={}));var $6;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($6||($6={}));var Y6;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Y6||(Y6={}));var K6;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(K6||(K6={}));var hd;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(hd||(hd={}));class iT{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class vh{get text(){var e,n,r,i,a,o,u,h;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const v=[];for(const A of(h=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)!==null&&h!==void 0?h:[]){for(const[N,P]of Object.entries(A))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(P!==null||P!==void 0)&&v.push(N);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;g=!0,f+=A.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var e,n,r,i,a,o,u,h;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const v of(h=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)!==null&&h!==void 0?h:[]){for(const[A,N]of Object.entries(v))A!=="inlineData"&&(N!==null||N!==void 0)&&g.push(A);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,a,o,u,h;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,a,o,u,h,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(h=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,a,o,u,h,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(h=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.output}}class W6{}class X6{}class Hce{}class $ce{}class Yce{}class Kce{}class Q6{}class J6{}class Z6{}class Wce{}class ty{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ty;let i;const a=e;return n?i=Oce(a):i=Dce(a),Object.assign(r,i),r}}class e8{}class t8{}class n8{}class r8{}class Xce{}class Qce{}class Jce{}class f2{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new f2,a=Vce(e);return Object.assign(r,a),r}}class Zce{}class eue{}class tue{}class i8{}class nue{get text(){var e,n,r;let i="",a=!1;const o=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[h,f]of Object.entries(u))h!=="text"&&h!=="thought"&&f!==null&&o.push(h);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,i+=u.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,h]of Object.entries(o))u!=="inlineData"&&h!==null&&a.push(u);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class rue{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class h2{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new h2,a=sU(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function lU(t,e){const n=zn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function cU(t){return Array.isArray(t)?t.map(e=>ny(e)):[ny(t)]}function ny(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function uU(t){const e=ny(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dU(t){const e=ny(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function a8(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function fU(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>a8(e)):[a8(t)]}function aT(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function o8(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function s8(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ra(t){if(t==null)throw new Error("ContentUnion is required");return aT(t)?t:{role:"user",parts:fU(t)}}function p2(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ra(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ra(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ra(n)):[ra(e)]}function To(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(o8(t)||s8(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ra(t)]}const e=[],n=[],r=aT(t[0]);for(const i of t){const a=aT(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(o8(i)||s8(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:fU(n)}),e}function iue(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ql).includes(n[0].toUpperCase())?n[0].toUpperCase():ql.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ql).includes(r.toUpperCase())?r.toUpperCase():ql.TYPE_UNSPECIFIED})}}function wd(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&iue(t.type,e);for(const[o,u]of Object.entries(t))if(u!=null)if(o=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ql).includes(u.toUpperCase())?u.toUpperCase():ql.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=wd(u);else if(r.includes(o)){const h=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}h.push(wd(f))}e[o]=h}else if(i.includes(o)){const h={};for(const[f,g]of Object.entries(u))h[f]=wd(g);e[o]=h}else{if(o==="additionalProperties")continue;e[o]=u}return e}function m2(t){return wd(t)}function g2(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function y2(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function yf(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wd(e.response));return t}function xf(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function aue(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function il(t,e){if(typeof e!="string")throw new Error("name must be a string");return aue(t,e,"cachedContents")}function hU(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function lc(t){return d2(t)}function oue(t){return t!=null&&typeof t=="object"&&"name"in t}function sue(t){return t!=null&&typeof t=="object"&&"video"in t}function lue(t){return t!=null&&typeof t=="object"&&"uri"in t}function pU(t){var e;let n;if(oue(t)&&(n=t.name),!(lue(t)&&(n=t.uri,n===void 0))&&!(sue(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function mU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function gU(t){for(const e of["models","tunedModels","publisherModels"])if(cue(t,e))return t[e];return[]}function cue(t,e){return t!==null&&typeof t=="object"&&e in t}function uue(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function due(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const o=uue(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function yU(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function fue(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function xU(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const h=o.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function vf(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vU(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hue(t){const e={},n=_(t,["responsesFile"]);n!=null&&C(e,["fileName"],n);const r=_(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Yue(o))),C(e,["inlinedResponses"],a)}const i=_(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["inlinedEmbedContentResponses"],a)}return e}function pue(t){const e={},n=_(t,["predictionsFormat"]);n!=null&&C(e,["format"],n);const r=_(t,["gcsDestination","outputUriPrefix"]);r!=null&&C(e,["gcsUri"],r);const i=_(t,["bigqueryDestination","outputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function mue(t){const e={},n=_(t,["format"]);n!=null&&C(e,["predictionsFormat"],n);const r=_(t,["gcsUri"]);r!=null&&C(e,["gcsDestination","outputUriPrefix"],r);const i=_(t,["bigqueryUri"]);if(i!=null&&C(e,["bigqueryDestination","outputUri"],i),_(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(_(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(_(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bm(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata","displayName"]);r!=null&&C(e,["displayName"],r);const i=_(t,["metadata","state"]);i!=null&&C(e,["state"],vU(i));const a=_(t,["metadata","createTime"]);a!=null&&C(e,["createTime"],a);const o=_(t,["metadata","endTime"]);o!=null&&C(e,["endTime"],o);const u=_(t,["metadata","updateTime"]);u!=null&&C(e,["updateTime"],u);const h=_(t,["metadata","model"]);h!=null&&C(e,["model"],h);const f=_(t,["metadata","output"]);return f!=null&&C(e,["dest"],hue(xU(f))),e}function oT(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=_(t,["state"]);i!=null&&C(e,["state"],vU(i));const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["createTime"]);o!=null&&C(e,["createTime"],o);const u=_(t,["startTime"]);u!=null&&C(e,["startTime"],u);const h=_(t,["endTime"]);h!=null&&C(e,["endTime"],h);const f=_(t,["updateTime"]);f!=null&&C(e,["updateTime"],f);const g=_(t,["model"]);g!=null&&C(e,["model"],g);const v=_(t,["inputConfig"]);v!=null&&C(e,["src"],gue(v));const A=_(t,["outputConfig"]);A!=null&&C(e,["dest"],pue(xU(A)));const N=_(t,["completionStats"]);return N!=null&&C(e,["completionStats"],N),e}function gue(t){const e={},n=_(t,["instancesFormat"]);n!=null&&C(e,["format"],n);const r=_(t,["gcsSource","uris"]);r!=null&&C(e,["gcsUri"],r);const i=_(t,["bigquerySource","inputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function yue(t,e){const n={};if(_(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(_(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(_(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=_(e,["fileName"]);r!=null&&C(n,["fileName"],r);const i=_(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>$ue(t,o))),C(n,["requests","requests"],a)}return n}function xue(t){const e={},n=_(t,["format"]);n!=null&&C(e,["instancesFormat"],n);const r=_(t,["gcsUri"]);r!=null&&C(e,["gcsSource","uris"],r);const i=_(t,["bigqueryUri"]);if(i!=null&&C(e,["bigquerySource","inputUri"],i),_(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(_(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function vue(t){const e={},n=_(t,["data"]);if(n!=null&&C(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function bue(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],vf(t,r)),n}function wue(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],vf(t,r)),n}function Eue(t){const e={},n=_(t,["content"]);n!=null&&C(e,["content"],n);const r=_(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],_ue(r));const i=_(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const a=_(t,["finishReason"]);a!=null&&C(e,["finishReason"],a);const o=_(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const u=_(t,["groundingMetadata"]);u!=null&&C(e,["groundingMetadata"],u);const h=_(t,["index"]);h!=null&&C(e,["index"],h);const f=_(t,["logprobsResult"]);f!=null&&C(e,["logprobsResult"],f);const g=_(t,["safetyRatings"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(N=>N)),C(e,["safetyRatings"],A)}const v=_(t,["urlContextMetadata"]);return v!=null&&C(e,["urlContextMetadata"],v),e}function _ue(t){const e={},n=_(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function bU(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>ede(a))),C(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&C(e,["role"],r),e}function Aue(t,e){const n={},r=_(t,["displayName"]);if(e!==void 0&&r!=null&&C(e,["batch","displayName"],r),_(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Tue(t,e){const n={},r=_(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=_(t,["dest"]);return e!==void 0&&i!=null&&C(e,["outputConfig"],mue(fue(i))),n}function l8(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["src"]);i!=null&&C(n,["batch","inputConfig"],yue(t,yU(t,i)));const a=_(e,["config"]);return a!=null&&Aue(a,n),n}function Sue(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["model"],zn(t,r));const i=_(e,["src"]);i!=null&&C(n,["inputConfig"],xue(yU(t,i)));const a=_(e,["config"]);return a!=null&&Tue(a,n),n}function Cue(t,e){const n={},r=_(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["batch","displayName"],r),n}function Iue(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["src"]);i!=null&&C(n,["batch","inputConfig"],kue(t,i));const a=_(e,["config"]);return a!=null&&Cue(a,n),n}function Nue(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],vf(t,r)),n}function Rue(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],vf(t,r)),n}function Mue(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["name"]);r!=null&&C(e,["name"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);return a!=null&&C(e,["error"],a),e}function Due(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["name"]);r!=null&&C(e,["name"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);return a!=null&&C(e,["error"],a),e}function Oue(t,e){const n={},r=_(e,["contents"]);if(r!=null){let a=p2(t,r);Array.isArray(a)&&(a=a.map(o=>o)),C(n,["requests[]","request","content"],a)}const i=_(e,["config"]);return i!=null&&(C(n,["_self"],Pue(i,n)),Rce(n,{"requests[].*":"requests[].request.*"})),n}function Pue(t,e){const n={},r=_(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=_(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const a=_(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&C(e,["requests[]","outputDimensionality"],a),_(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kue(t,e){const n={},r=_(e,["fileName"]);r!=null&&C(n,["file_name"],r);const i=_(e,["inlinedRequests"]);return i!=null&&C(n,["requests"],Oue(t,i)),n}function Lue(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Bue(t){const e={},n=_(t,["id"]);n!=null&&C(e,["id"],n);const r=_(t,["args"]);r!=null&&C(e,["args"],r);const i=_(t,["name"]);if(i!=null&&C(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jue(t){const e={},n=_(t,["allowedFunctionNames"]);n!=null&&C(e,["allowedFunctionNames"],n);const r=_(t,["mode"]);if(r!=null&&C(e,["mode"],r),_(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Uue(t,e,n){const r={},i=_(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],bU(ra(i)));const a=_(e,["temperature"]);a!=null&&C(r,["temperature"],a);const o=_(e,["topP"]);o!=null&&C(r,["topP"],o);const u=_(e,["topK"]);u!=null&&C(r,["topK"],u);const h=_(e,["candidateCount"]);h!=null&&C(r,["candidateCount"],h);const f=_(e,["maxOutputTokens"]);f!=null&&C(r,["maxOutputTokens"],f);const g=_(e,["stopSequences"]);g!=null&&C(r,["stopSequences"],g);const v=_(e,["responseLogprobs"]);v!=null&&C(r,["responseLogprobs"],v);const A=_(e,["logprobs"]);A!=null&&C(r,["logprobs"],A);const N=_(e,["presencePenalty"]);N!=null&&C(r,["presencePenalty"],N);const P=_(e,["frequencyPenalty"]);P!=null&&C(r,["frequencyPenalty"],P);const O=_(e,["seed"]);O!=null&&C(r,["seed"],O);const R=_(e,["responseMimeType"]);R!=null&&C(r,["responseMimeType"],R);const L=_(e,["responseSchema"]);L!=null&&C(r,["responseSchema"],m2(L));const U=_(e,["responseJsonSchema"]);if(U!=null&&C(r,["responseJsonSchema"],U),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(_(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=_(e,["safetySettings"]);if(n!==void 0&&F!=null){let K=F;Array.isArray(K)&&(K=K.map(ge=>tde(ge))),C(n,["safetySettings"],K)}const q=_(e,["tools"]);if(n!==void 0&&q!=null){let K=xf(q);Array.isArray(K)&&(K=K.map(ge=>rde(yf(ge)))),C(n,["tools"],K)}const H=_(e,["toolConfig"]);if(n!==void 0&&H!=null&&C(n,["toolConfig"],nde(H)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=_(e,["cachedContent"]);n!==void 0&&G!=null&&C(n,["cachedContent"],il(t,G));const B=_(e,["responseModalities"]);B!=null&&C(r,["responseModalities"],B);const z=_(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const V=_(e,["speechConfig"]);if(V!=null&&C(r,["speechConfig"],g2(V)),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=_(e,["thinkingConfig"]);ee!=null&&C(r,["thinkingConfig"],ee);const Q=_(e,["imageConfig"]);Q!=null&&C(r,["imageConfig"],Hue(Q));const X=_(e,["enableEnhancedCivicAnswers"]);return X!=null&&C(r,["enableEnhancedCivicAnswers"],X),r}function Vue(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(f=>Eue(f))),C(e,["candidates"],h)}const i=_(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const a=_(t,["promptFeedback"]);a!=null&&C(e,["promptFeedback"],a);const o=_(t,["responseId"]);o!=null&&C(e,["responseId"],o);const u=_(t,["usageMetadata"]);return u!=null&&C(e,["usageMetadata"],u),e}function Fue(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],vf(t,r)),n}function que(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],vf(t,r)),n}function zue(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Gue(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Hue(t){const e={},n=_(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=_(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),_(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(_(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(_(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $ue(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["request","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let u=To(i);Array.isArray(u)&&(u=u.map(h=>bU(h))),C(n,["request","contents"],u)}const a=_(e,["metadata"]);a!=null&&C(n,["metadata"],a);const o=_(e,["config"]);return o!=null&&C(n,["request","generationConfig"],Uue(t,o,_(n,["request"],{}))),n}function Yue(t){const e={},n=_(t,["response"]);n!=null&&C(e,["response"],Vue(n));const r=_(t,["error"]);return r!=null&&C(e,["error"],r),e}function Kue(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);if(e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),_(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Wue(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);e!==void 0&&i!=null&&C(e,["_query","pageToken"],i);const a=_(t,["filter"]);return e!==void 0&&a!=null&&C(e,["_query","filter"],a),n}function Xue(t){const e={},n=_(t,["config"]);return n!=null&&Kue(n,e),e}function Que(t){const e={},n=_(t,["config"]);return n!=null&&Wue(n,e),e}function Jue(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Bm(o))),C(e,["batchJobs"],a)}return e}function Zue(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>oT(o))),C(e,["batchJobs"],a)}return e}function ede(t){const e={},n=_(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&C(e,["fileData"],Lue(a));const o=_(t,["functionCall"]);o!=null&&C(e,["functionCall"],Bue(o));const u=_(t,["functionResponse"]);u!=null&&C(e,["functionResponse"],u);const h=_(t,["inlineData"]);h!=null&&C(e,["inlineData"],vue(h));const f=_(t,["text"]);f!=null&&C(e,["text"],f);const g=_(t,["thought"]);g!=null&&C(e,["thought"],g);const v=_(t,["thoughtSignature"]);v!=null&&C(e,["thoughtSignature"],v);const A=_(t,["videoMetadata"]);return A!=null&&C(e,["videoMetadata"],A),e}function tde(t){const e={},n=_(t,["category"]);if(n!=null&&C(e,["category"],n),_(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=_(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function nde(t){const e={},n=_(t,["retrievalConfig"]);n!=null&&C(e,["retrievalConfig"],n);const r=_(t,["functionCallingConfig"]);return r!=null&&C(e,["functionCallingConfig"],jue(r)),e}function rde(t){const e={};if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=_(t,["computerUse"]);n!=null&&C(e,["computerUse"],n);const r=_(t,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=_(t,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(t,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["functionDeclarations"],g)}const o=_(t,["googleMaps"]);o!=null&&C(e,["googleMaps"],zue(o));const u=_(t,["googleSearch"]);u!=null&&C(e,["googleSearch"],Gue(u));const h=_(t,["googleSearchRetrieval"]);h!=null&&C(e,["googleSearchRetrieval"],h);const f=_(t,["urlContext"]);return f!=null&&C(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Js;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Js||(Js={}));class xu{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ide extends rl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xu(Js.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=l8(this.apiClient,e),r=n._url,i=St("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,h=u.requests,f=[];for(const g of h){const v=Object.assign({},g);if(v.systemInstruction){const A=v.systemInstruction;delete v.systemInstruction;const N=v.request;N.systemInstruction=A,v.request=N}f.push(v)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),o=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Sue(this.apiClient,e);return u=St("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>oT(g))}else{const f=l8(this.apiClient,e);return u=St("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>Bm(g))}}async createEmbeddingsInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Iue(this.apiClient,e);return a=St("{model}:asyncBatchEmbedContent",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>Bm(h))}}async get(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=que(this.apiClient,e);return u=St("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>oT(g))}else{const f=Fue(this.apiClient,e);return u=St("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>Bm(g))}}async cancel(e){var n,r,i,a;let o="",u={};if(this.apiClient.isVertexAI()){const h=wue(this.apiClient,e);o=St("batchPredictionJobs/{name}:cancel",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const h=bue(this.apiClient,e);o=St("batches/{name}:cancel",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Que(e);return u=St("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Zue(g),A=new i8;return Object.assign(A,v),A})}else{const f=Xue(e);return u=St("batches",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Jue(g),A=new i8;return Object.assign(A,v),A})}}async delete(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Rue(this.apiClient,e);return u=St("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>Due(g))}else{const f=Nue(this.apiClient,e);return u=St("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>Mue(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ade(t){const e={},n=_(t,["data"]);if(n!=null&&C(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function c8(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Ide(a))),C(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&C(e,["role"],r),e}function ode(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=_(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const a=_(t,["displayName"]);e!==void 0&&a!=null&&C(e,["displayName"],a);const o=_(t,["contents"]);if(e!==void 0&&o!=null){let g=To(o);Array.isArray(g)&&(g=g.map(v=>c8(v))),C(e,["contents"],g)}const u=_(t,["systemInstruction"]);e!==void 0&&u!=null&&C(e,["systemInstruction"],c8(ra(u)));const h=_(t,["tools"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>Rde(v))),C(e,["tools"],g)}const f=_(t,["toolConfig"]);if(e!==void 0&&f!=null&&C(e,["toolConfig"],Nde(f)),_(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function sde(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=_(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const a=_(t,["displayName"]);e!==void 0&&a!=null&&C(e,["displayName"],a);const o=_(t,["contents"]);if(e!==void 0&&o!=null){let v=To(o);Array.isArray(v)&&(v=v.map(A=>A)),C(e,["contents"],v)}const u=_(t,["systemInstruction"]);e!==void 0&&u!=null&&C(e,["systemInstruction"],ra(u));const h=_(t,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(A=>Mde(A))),C(e,["tools"],v)}const f=_(t,["toolConfig"]);e!==void 0&&f!=null&&C(e,["toolConfig"],f);const g=_(t,["kmsKeyName"]);return e!==void 0&&g!=null&&C(e,["encryption_spec","kmsKeyName"],g),n}function lde(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["model"],lU(t,r));const i=_(e,["config"]);return i!=null&&ode(i,n),n}function cde(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["model"],lU(t,r));const i=_(e,["config"]);return i!=null&&sde(i,n),n}function ude(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],il(t,r)),n}function dde(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],il(t,r)),n}function fde(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function hde(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function pde(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function mde(t){const e={},n=_(t,["id"]);n!=null&&C(e,["id"],n);const r=_(t,["args"]);r!=null&&C(e,["args"],r);const i=_(t,["name"]);if(i!=null&&C(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gde(t){const e={},n=_(t,["allowedFunctionNames"]);n!=null&&C(e,["allowedFunctionNames"],n);const r=_(t,["mode"]);if(r!=null&&C(e,["mode"],r),_(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yde(t){const e={},n=_(t,["description"]);n!=null&&C(e,["description"],n);const r=_(t,["name"]);r!=null&&C(e,["name"],r);const i=_(t,["parameters"]);i!=null&&C(e,["parameters"],i);const a=_(t,["parametersJsonSchema"]);a!=null&&C(e,["parametersJsonSchema"],a);const o=_(t,["response"]);o!=null&&C(e,["response"],o);const u=_(t,["responseJsonSchema"]);if(u!=null&&C(e,["responseJsonSchema"],u),_(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function xde(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],il(t,r)),n}function vde(t,e){const n={},r=_(e,["name"]);return r!=null&&C(n,["_url","name"],il(t,r)),n}function bde(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function wde(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Ede(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function _de(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Ade(t){const e={},n=_(t,["config"]);return n!=null&&Ede(n,e),e}function Tde(t){const e={},n=_(t,["config"]);return n!=null&&_de(n,e),e}function Sde(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["cachedContents"],a)}return e}function Cde(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["cachedContents"],a)}return e}function Ide(t){const e={},n=_(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&C(e,["fileData"],pde(a));const o=_(t,["functionCall"]);o!=null&&C(e,["functionCall"],mde(o));const u=_(t,["functionResponse"]);u!=null&&C(e,["functionResponse"],u);const h=_(t,["inlineData"]);h!=null&&C(e,["inlineData"],ade(h));const f=_(t,["text"]);f!=null&&C(e,["text"],f);const g=_(t,["thought"]);g!=null&&C(e,["thought"],g);const v=_(t,["thoughtSignature"]);v!=null&&C(e,["thoughtSignature"],v);const A=_(t,["videoMetadata"]);return A!=null&&C(e,["videoMetadata"],A),e}function Nde(t){const e={},n=_(t,["retrievalConfig"]);n!=null&&C(e,["retrievalConfig"],n);const r=_(t,["functionCallingConfig"]);return r!=null&&C(e,["functionCallingConfig"],gde(r)),e}function Rde(t){const e={};if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=_(t,["computerUse"]);n!=null&&C(e,["computerUse"],n);const r=_(t,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=_(t,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(t,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["functionDeclarations"],g)}const o=_(t,["googleMaps"]);o!=null&&C(e,["googleMaps"],bde(o));const u=_(t,["googleSearch"]);u!=null&&C(e,["googleSearch"],wde(u));const h=_(t,["googleSearchRetrieval"]);h!=null&&C(e,["googleSearchRetrieval"],h);const f=_(t,["urlContext"]);return f!=null&&C(e,["urlContext"],f),e}function Mde(t){const e={},n=_(t,["retrieval"]);n!=null&&C(e,["retrieval"],n);const r=_(t,["computerUse"]);if(r!=null&&C(e,["computerUse"],r),_(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=_(t,["codeExecution"]);i!=null&&C(e,["codeExecution"],i);const a=_(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const o=_(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(A=>yde(A))),C(e,["functionDeclarations"],v)}const u=_(t,["googleMaps"]);u!=null&&C(e,["googleMaps"],u);const h=_(t,["googleSearch"]);h!=null&&C(e,["googleSearch"],h);const f=_(t,["googleSearchRetrieval"]);f!=null&&C(e,["googleSearchRetrieval"],f);const g=_(t,["urlContext"]);return g!=null&&C(e,["urlContext"],g),e}function Dde(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=_(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function Ode(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=_(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function Pde(t,e){const n={},r=_(e,["name"]);r!=null&&C(n,["_url","name"],il(t,r));const i=_(e,["config"]);return i!=null&&Dde(i,n),n}function kde(t,e){const n={},r=_(e,["name"]);r!=null&&C(n,["_url","name"],il(t,r));const i=_(e,["config"]);return i!=null&&Ode(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lde extends rl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xu(Js.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=cde(this.apiClient,e);return u=St("cachedContents",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>g)}else{const f=lde(this.apiClient,e);return u=St("cachedContents",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async get(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=vde(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>g)}else{const f=xde(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=dde(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=hde(g),A=new n8;return Object.assign(A,v),A})}else{const f=ude(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=fde(g),A=new n8;return Object.assign(A,v),A})}}async update(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=kde(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>g)}else{const f=Pde(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async listInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Tde(e);return u=St("cachedContents",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Cde(g),A=new r8;return Object.assign(A,v),A})}else{const f=Ade(e);return u=St("cachedContents",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Sde(g),A=new r8;return Object.assign(A,v),A})}}}function ry(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function u8(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zt(t){return this instanceof Zt?(this.v=t,this):new Zt(t)}function zo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(N){return function(P){return Promise.resolve(P).then(N,v)}}function u(N,P){r[N]&&(i[N]=function(O){return new Promise(function(R,L){a.push([N,O,R,L])>1||h(N,O)})},P&&(i[N]=P(i[N])))}function h(N,P){try{f(r[N](P))}catch(O){A(a[0][3],O)}}function f(N){N.value instanceof Zt?Promise.resolve(N.value.v).then(g,v):A(a[0][2],N)}function g(N){h("next",N)}function v(N){h("throw",N)}function A(N,P){N(P),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Go(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof u8=="function"?u8(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(o){return new Promise(function(u,h){o=t[a](o),i(u,h,o.done,o.value)})}}function i(a,o,u,h){Promise.resolve(h).then(function(f){a({value:f,done:u})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bde(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:wU(n)}function wU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function jde(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function d8(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!wU(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class Ude{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Vde(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Vde{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),jde(a)}async sendMessage(e){var n;await this.sendPromise;const r=ra(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,u;const h=await i,f=(o=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,g=h.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let A=[];g!=null&&(A=(u=g.slice(v))!==null&&u!==void 0?u:[]);const N=f?[f]:[];this.recordHistory(r,N,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ra(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?d8(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return zo(this,arguments,function*(){var i,a,o,u,h,f;const g=[];try{for(var v=!0,A=Go(e),N;N=yield Zt(A.next()),i=N.done,!i;v=!0){u=N.value,v=!1;const P=u;if(Bde(P)){const O=(f=(h=P.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;O!==void 0&&g.push(O)}yield yield Zt(P)}}catch(P){a={error:P}}finally{try{!v&&!i&&(o=A.return)&&(yield Zt(o.call(A)))}finally{if(a)throw a.error}}this.recordHistory(n,g)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...d8(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e1 extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,e1.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fde(t){const e={},n=_(t,["file"]);return n!=null&&C(e,["file"],n),e}function qde(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function zde(t){const e={},n=_(t,["name"]);return n!=null&&C(e,["_url","file"],pU(n)),e}function Gde(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Hde(t){const e={},n=_(t,["name"]);return n!=null&&C(e,["_url","file"],pU(n)),e}function $de(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Yde(t){const e={},n=_(t,["config"]);return n!=null&&$de(n,e),e}function Kde(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wde extends rl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xu(Js.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Yde(e);return a=St("files",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const f=Kde(h),g=new Zce;return Object.assign(g,f),g})}}async createInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fde(e);return a=St("upload/v1beta/files",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=qde(h),g=new eue;return Object.assign(g,f),g})}}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Hde(e);return a=St("files/{file}",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zde(e);return a=St("files/{file}",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const f=Gde(h),g=new tue;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jm(t){const e={},n=_(t,["data"]);if(n!=null&&C(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Xde(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>ffe(a))),C(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&C(e,["role"],r),e}function Qde(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Jde(t){const e={},n=_(t,["id"]);n!=null&&C(e,["id"],n);const r=_(t,["args"]);r!=null&&C(e,["args"],r);const i=_(t,["name"]);if(i!=null&&C(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zde(t){const e={},n=_(t,["description"]);n!=null&&C(e,["description"],n);const r=_(t,["name"]);r!=null&&C(e,["name"],r);const i=_(t,["parameters"]);i!=null&&C(e,["parameters"],i);const a=_(t,["parametersJsonSchema"]);a!=null&&C(e,["parametersJsonSchema"],a);const o=_(t,["response"]);o!=null&&C(e,["response"],o);const u=_(t,["responseJsonSchema"]);if(u!=null&&C(e,["responseJsonSchema"],u),_(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function efe(t){const e={},n=_(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=_(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=_(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const a=_(t,["candidateCount"]);a!=null&&C(e,["candidateCount"],a);const o=_(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const u=_(t,["frequencyPenalty"]);u!=null&&C(e,["frequencyPenalty"],u);const h=_(t,["logprobs"]);h!=null&&C(e,["logprobs"],h);const f=_(t,["maxOutputTokens"]);f!=null&&C(e,["maxOutputTokens"],f);const g=_(t,["mediaResolution"]);g!=null&&C(e,["mediaResolution"],g);const v=_(t,["presencePenalty"]);v!=null&&C(e,["presencePenalty"],v);const A=_(t,["responseLogprobs"]);A!=null&&C(e,["responseLogprobs"],A);const N=_(t,["responseMimeType"]);N!=null&&C(e,["responseMimeType"],N);const P=_(t,["responseModalities"]);P!=null&&C(e,["responseModalities"],P);const O=_(t,["responseSchema"]);O!=null&&C(e,["responseSchema"],O);const R=_(t,["routingConfig"]);R!=null&&C(e,["routingConfig"],R);const L=_(t,["seed"]);L!=null&&C(e,["seed"],L);const U=_(t,["speechConfig"]);U!=null&&C(e,["speechConfig"],U);const F=_(t,["stopSequences"]);F!=null&&C(e,["stopSequences"],F);const q=_(t,["temperature"]);q!=null&&C(e,["temperature"],q);const H=_(t,["thinkingConfig"]);H!=null&&C(e,["thinkingConfig"],H);const G=_(t,["topK"]);G!=null&&C(e,["topK"],G);const B=_(t,["topP"]);if(B!=null&&C(e,["topP"],B),_(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tfe(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function nfe(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function rfe(t,e){const n={},r=_(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=_(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const a=_(t,["temperature"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","temperature"],a);const o=_(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const u=_(t,["topK"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","topK"],u);const h=_(t,["maxOutputTokens"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","maxOutputTokens"],h);const f=_(t,["mediaResolution"]);e!==void 0&&f!=null&&C(e,["setup","generationConfig","mediaResolution"],f);const g=_(t,["seed"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","seed"],g);const v=_(t,["speechConfig"]);e!==void 0&&v!=null&&C(e,["setup","generationConfig","speechConfig"],y2(v));const A=_(t,["thinkingConfig"]);e!==void 0&&A!=null&&C(e,["setup","generationConfig","thinkingConfig"],A);const N=_(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],N);const P=_(t,["systemInstruction"]);e!==void 0&&P!=null&&C(e,["setup","systemInstruction"],Xde(ra(P)));const O=_(t,["tools"]);if(e!==void 0&&O!=null){let G=xf(O);Array.isArray(G)&&(G=G.map(B=>pfe(yf(B)))),C(e,["setup","tools"],G)}const R=_(t,["sessionResumption"]);e!==void 0&&R!=null&&C(e,["setup","sessionResumption"],hfe(R));const L=_(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&C(e,["setup","inputAudioTranscription"],L);const U=_(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&C(e,["setup","outputAudioTranscription"],U);const F=_(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&C(e,["setup","realtimeInputConfig"],F);const q=_(t,["contextWindowCompression"]);e!==void 0&&q!=null&&C(e,["setup","contextWindowCompression"],q);const H=_(t,["proactivity"]);if(e!==void 0&&H!=null&&C(e,["setup","proactivity"],H),_(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ife(t,e){const n={},r=_(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],efe(r));const i=_(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const a=_(t,["temperature"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","temperature"],a);const o=_(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const u=_(t,["topK"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","topK"],u);const h=_(t,["maxOutputTokens"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","maxOutputTokens"],h);const f=_(t,["mediaResolution"]);e!==void 0&&f!=null&&C(e,["setup","generationConfig","mediaResolution"],f);const g=_(t,["seed"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","seed"],g);const v=_(t,["speechConfig"]);e!==void 0&&v!=null&&C(e,["setup","generationConfig","speechConfig"],y2(v));const A=_(t,["thinkingConfig"]);e!==void 0&&A!=null&&C(e,["setup","generationConfig","thinkingConfig"],A);const N=_(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],N);const P=_(t,["systemInstruction"]);e!==void 0&&P!=null&&C(e,["setup","systemInstruction"],ra(P));const O=_(t,["tools"]);if(e!==void 0&&O!=null){let B=xf(O);Array.isArray(B)&&(B=B.map(z=>mfe(yf(z)))),C(e,["setup","tools"],B)}const R=_(t,["sessionResumption"]);e!==void 0&&R!=null&&C(e,["setup","sessionResumption"],R);const L=_(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&C(e,["setup","inputAudioTranscription"],L);const U=_(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&C(e,["setup","outputAudioTranscription"],U);const F=_(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&C(e,["setup","realtimeInputConfig"],F);const q=_(t,["contextWindowCompression"]);e!==void 0&&q!=null&&C(e,["setup","contextWindowCompression"],q);const H=_(t,["proactivity"]);e!==void 0&&H!=null&&C(e,["setup","proactivity"],H);const G=_(t,["explicitVadSignal"]);return e!==void 0&&G!=null&&C(e,["setup","explicitVadSignal"],G),n}function afe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=_(e,["config"]);return i!=null&&C(n,["config"],rfe(i,n)),n}function ofe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=_(e,["config"]);return i!=null&&C(n,["config"],ife(i,n)),n}function sfe(t){const e={},n=_(t,["musicGenerationConfig"]);return n!=null&&C(e,["musicGenerationConfig"],n),e}function lfe(t){const e={},n=_(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["weightedPrompts"],r)}return e}function cfe(t){const e={},n=_(t,["media"]);if(n!=null){let f=cU(n);Array.isArray(f)&&(f=f.map(g=>jm(g))),C(e,["mediaChunks"],f)}const r=_(t,["audio"]);r!=null&&C(e,["audio"],jm(dU(r)));const i=_(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const a=_(t,["video"]);a!=null&&C(e,["video"],jm(uU(a)));const o=_(t,["text"]);o!=null&&C(e,["text"],o);const u=_(t,["activityStart"]);u!=null&&C(e,["activityStart"],u);const h=_(t,["activityEnd"]);return h!=null&&C(e,["activityEnd"],h),e}function ufe(t){const e={},n=_(t,["media"]);if(n!=null){let f=cU(n);Array.isArray(f)&&(f=f.map(g=>g)),C(e,["mediaChunks"],f)}const r=_(t,["audio"]);r!=null&&C(e,["audio"],dU(r));const i=_(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const a=_(t,["video"]);a!=null&&C(e,["video"],uU(a));const o=_(t,["text"]);o!=null&&C(e,["text"],o);const u=_(t,["activityStart"]);u!=null&&C(e,["activityStart"],u);const h=_(t,["activityEnd"]);return h!=null&&C(e,["activityEnd"],h),e}function dfe(t){const e={},n=_(t,["setupComplete"]);n!=null&&C(e,["setupComplete"],n);const r=_(t,["serverContent"]);r!=null&&C(e,["serverContent"],r);const i=_(t,["toolCall"]);i!=null&&C(e,["toolCall"],i);const a=_(t,["toolCallCancellation"]);a!=null&&C(e,["toolCallCancellation"],a);const o=_(t,["usageMetadata"]);o!=null&&C(e,["usageMetadata"],gfe(o));const u=_(t,["goAway"]);u!=null&&C(e,["goAway"],u);const h=_(t,["sessionResumptionUpdate"]);h!=null&&C(e,["sessionResumptionUpdate"],h);const f=_(t,["voiceActivityDetectionSignal"]);return f!=null&&C(e,["voiceActivityDetectionSignal"],f),e}function ffe(t){const e={},n=_(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&C(e,["fileData"],Qde(a));const o=_(t,["functionCall"]);o!=null&&C(e,["functionCall"],Jde(o));const u=_(t,["functionResponse"]);u!=null&&C(e,["functionResponse"],u);const h=_(t,["inlineData"]);h!=null&&C(e,["inlineData"],jm(h));const f=_(t,["text"]);f!=null&&C(e,["text"],f);const g=_(t,["thought"]);g!=null&&C(e,["thought"],g);const v=_(t,["thoughtSignature"]);v!=null&&C(e,["thoughtSignature"],v);const A=_(t,["videoMetadata"]);return A!=null&&C(e,["videoMetadata"],A),e}function hfe(t){const e={},n=_(t,["handle"]);if(n!=null&&C(e,["handle"],n),_(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pfe(t){const e={};if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=_(t,["computerUse"]);n!=null&&C(e,["computerUse"],n);const r=_(t,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=_(t,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(t,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["functionDeclarations"],g)}const o=_(t,["googleMaps"]);o!=null&&C(e,["googleMaps"],tfe(o));const u=_(t,["googleSearch"]);u!=null&&C(e,["googleSearch"],nfe(u));const h=_(t,["googleSearchRetrieval"]);h!=null&&C(e,["googleSearchRetrieval"],h);const f=_(t,["urlContext"]);return f!=null&&C(e,["urlContext"],f),e}function mfe(t){const e={},n=_(t,["retrieval"]);n!=null&&C(e,["retrieval"],n);const r=_(t,["computerUse"]);if(r!=null&&C(e,["computerUse"],r),_(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=_(t,["codeExecution"]);i!=null&&C(e,["codeExecution"],i);const a=_(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const o=_(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(A=>Zde(A))),C(e,["functionDeclarations"],v)}const u=_(t,["googleMaps"]);u!=null&&C(e,["googleMaps"],u);const h=_(t,["googleSearch"]);h!=null&&C(e,["googleSearch"],h);const f=_(t,["googleSearchRetrieval"]);f!=null&&C(e,["googleSearchRetrieval"],f);const g=_(t,["urlContext"]);return g!=null&&C(e,["urlContext"],g),e}function gfe(t){const e={},n=_(t,["promptTokenCount"]);n!=null&&C(e,["promptTokenCount"],n);const r=_(t,["cachedContentTokenCount"]);r!=null&&C(e,["cachedContentTokenCount"],r);const i=_(t,["candidatesTokenCount"]);i!=null&&C(e,["responseTokenCount"],i);const a=_(t,["toolUsePromptTokenCount"]);a!=null&&C(e,["toolUsePromptTokenCount"],a);const o=_(t,["thoughtsTokenCount"]);o!=null&&C(e,["thoughtsTokenCount"],o);const u=_(t,["totalTokenCount"]);u!=null&&C(e,["totalTokenCount"],u);const h=_(t,["promptTokensDetails"]);if(h!=null){let N=h;Array.isArray(N)&&(N=N.map(P=>P)),C(e,["promptTokensDetails"],N)}const f=_(t,["cacheTokensDetails"]);if(f!=null){let N=f;Array.isArray(N)&&(N=N.map(P=>P)),C(e,["cacheTokensDetails"],N)}const g=_(t,["candidatesTokensDetails"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(P=>P)),C(e,["responseTokensDetails"],N)}const v=_(t,["toolUsePromptTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(P=>P)),C(e,["toolUsePromptTokensDetails"],N)}const A=_(t,["trafficType"]);return A!=null&&C(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yfe(t){const e={},n=_(t,["data"]);if(n!=null&&C(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function xfe(t){const e={},n=_(t,["content"]);n!=null&&C(e,["content"],n);const r=_(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],vfe(r));const i=_(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const a=_(t,["finishReason"]);a!=null&&C(e,["finishReason"],a);const o=_(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const u=_(t,["groundingMetadata"]);u!=null&&C(e,["groundingMetadata"],u);const h=_(t,["index"]);h!=null&&C(e,["index"],h);const f=_(t,["logprobsResult"]);f!=null&&C(e,["logprobsResult"],f);const g=_(t,["safetyRatings"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(N=>N)),C(e,["safetyRatings"],A)}const v=_(t,["urlContextMetadata"]);return v!=null&&C(e,["urlContextMetadata"],v),e}function vfe(t){const e={},n=_(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function bfe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let a=To(i);Array.isArray(a)&&(a=a.map(o=>o)),C(n,["contents"],a)}return n}function wfe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),C(e,["tokensInfo"],i)}return e}function Efe(t){const e={},n=_(t,["values"]);n!=null&&C(e,["values"],n);const r=_(t,["statistics"]);return r!=null&&C(e,["statistics"],_fe(r)),e}function _fe(t){const e={},n=_(t,["truncated"]);n!=null&&C(e,["truncated"],n);const r=_(t,["token_count"]);return r!=null&&C(e,["tokenCount"],r),e}function t1(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Dhe(a))),C(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&C(e,["role"],r),e}function Afe(t){const e={},n=_(t,["controlType"]);n!=null&&C(e,["controlType"],n);const r=_(t,["enableControlImageComputation"]);return r!=null&&C(e,["computeControl"],r),e}function Tfe(t){const e={};if(_(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(_(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(_(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Sfe(t,e){const n={},r=_(t,["systemInstruction"]);e!==void 0&&r!=null&&C(e,["systemInstruction"],ra(r));const i=_(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>TU(u))),C(e,["tools"],o)}const a=_(t,["generationConfig"]);return e!==void 0&&a!=null&&C(e,["generationConfig"],yhe(a)),n}function Cfe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let o=To(i);Array.isArray(o)&&(o=o.map(u=>t1(u))),C(n,["contents"],o)}const a=_(e,["config"]);return a!=null&&Tfe(a),n}function Ife(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let o=To(i);Array.isArray(o)&&(o=o.map(u=>u)),C(n,["contents"],o)}const a=_(e,["config"]);return a!=null&&Sfe(a,n),n}function Nfe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["totalTokens"]);r!=null&&C(e,["totalTokens"],r);const i=_(t,["cachedContentTokenCount"]);return i!=null&&C(e,["cachedContentTokenCount"],i),e}function Rfe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["totalTokens"]);return r!=null&&C(e,["totalTokens"],r),e}function Mfe(t,e){const n={},r=_(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function Dfe(t,e){const n={},r=_(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function Ofe(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Pfe(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function kfe(t,e){const n={},r=_(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=_(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const a=_(t,["numberOfImages"]);e!==void 0&&a!=null&&C(e,["parameters","sampleCount"],a);const o=_(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const u=_(t,["guidanceScale"]);e!==void 0&&u!=null&&C(e,["parameters","guidanceScale"],u);const h=_(t,["seed"]);e!==void 0&&h!=null&&C(e,["parameters","seed"],h);const f=_(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&C(e,["parameters","safetySetting"],f);const g=_(t,["personGeneration"]);e!==void 0&&g!=null&&C(e,["parameters","personGeneration"],g);const v=_(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&C(e,["parameters","includeSafetyAttributes"],v);const A=_(t,["includeRaiReason"]);e!==void 0&&A!=null&&C(e,["parameters","includeRaiReason"],A);const N=_(t,["language"]);e!==void 0&&N!=null&&C(e,["parameters","language"],N);const P=_(t,["outputMimeType"]);e!==void 0&&P!=null&&C(e,["parameters","outputOptions","mimeType"],P);const O=_(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&C(e,["parameters","outputOptions","compressionQuality"],O);const R=_(t,["addWatermark"]);e!==void 0&&R!=null&&C(e,["parameters","addWatermark"],R);const L=_(t,["labels"]);e!==void 0&&L!=null&&C(e,["labels"],L);const U=_(t,["editMode"]);e!==void 0&&U!=null&&C(e,["parameters","editMode"],U);const F=_(t,["baseSteps"]);return e!==void 0&&F!=null&&C(e,["parameters","editConfig","baseSteps"],F),n}function Lfe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const a=_(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>jhe(h))),C(n,["instances[0]","referenceImages"],u)}const o=_(e,["config"]);return o!=null&&kfe(o,n),n}function Bfe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>n1(a))),C(e,["generatedImages"],i)}return e}function jfe(t,e){const n={},r=_(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=_(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const a=_(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&C(e,["requests[]","outputDimensionality"],a),_(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ufe(t,e){const n={},r=_(t,["taskType"]);e!==void 0&&r!=null&&C(e,["instances[]","task_type"],r);const i=_(t,["title"]);e!==void 0&&i!=null&&C(e,["instances[]","title"],i);const a=_(t,["outputDimensionality"]);e!==void 0&&a!=null&&C(e,["parameters","outputDimensionality"],a);const o=_(t,["mimeType"]);e!==void 0&&o!=null&&C(e,["instances[]","mimeType"],o);const u=_(t,["autoTruncate"]);return e!==void 0&&u!=null&&C(e,["parameters","autoTruncate"],u),n}function Vfe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let u=p2(t,i);Array.isArray(u)&&(u=u.map(h=>h)),C(n,["requests[]","content"],u)}const a=_(e,["config"]);a!=null&&jfe(a,n);const o=_(e,["model"]);return o!==void 0&&C(n,["requests[]","model"],zn(t,o)),n}function Ffe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let o=p2(t,i);Array.isArray(o)&&(o=o.map(u=>u)),C(n,["instances[]","content"],o)}const a=_(e,["config"]);return a!=null&&Ufe(a,n),n}function qfe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["embeddings"],a)}const i=_(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function zfe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Efe(o))),C(e,["embeddings"],a)}const i=_(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function Gfe(t){const e={},n=_(t,["endpoint"]);n!=null&&C(e,["name"],n);const r=_(t,["deployedModelId"]);return r!=null&&C(e,["deployedModelId"],r),e}function Hfe(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function $fe(t){const e={},n=_(t,["id"]);n!=null&&C(e,["id"],n);const r=_(t,["args"]);r!=null&&C(e,["args"],r);const i=_(t,["name"]);if(i!=null&&C(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yfe(t){const e={},n=_(t,["allowedFunctionNames"]);n!=null&&C(e,["allowedFunctionNames"],n);const r=_(t,["mode"]);if(r!=null&&C(e,["mode"],r),_(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Kfe(t){const e={},n=_(t,["description"]);n!=null&&C(e,["description"],n);const r=_(t,["name"]);r!=null&&C(e,["name"],r);const i=_(t,["parameters"]);i!=null&&C(e,["parameters"],i);const a=_(t,["parametersJsonSchema"]);a!=null&&C(e,["parametersJsonSchema"],a);const o=_(t,["response"]);o!=null&&C(e,["response"],o);const u=_(t,["responseJsonSchema"]);if(u!=null&&C(e,["responseJsonSchema"],u),_(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Wfe(t,e,n){const r={},i=_(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],t1(ra(i)));const a=_(e,["temperature"]);a!=null&&C(r,["temperature"],a);const o=_(e,["topP"]);o!=null&&C(r,["topP"],o);const u=_(e,["topK"]);u!=null&&C(r,["topK"],u);const h=_(e,["candidateCount"]);h!=null&&C(r,["candidateCount"],h);const f=_(e,["maxOutputTokens"]);f!=null&&C(r,["maxOutputTokens"],f);const g=_(e,["stopSequences"]);g!=null&&C(r,["stopSequences"],g);const v=_(e,["responseLogprobs"]);v!=null&&C(r,["responseLogprobs"],v);const A=_(e,["logprobs"]);A!=null&&C(r,["logprobs"],A);const N=_(e,["presencePenalty"]);N!=null&&C(r,["presencePenalty"],N);const P=_(e,["frequencyPenalty"]);P!=null&&C(r,["frequencyPenalty"],P);const O=_(e,["seed"]);O!=null&&C(r,["seed"],O);const R=_(e,["responseMimeType"]);R!=null&&C(r,["responseMimeType"],R);const L=_(e,["responseSchema"]);L!=null&&C(r,["responseSchema"],m2(L));const U=_(e,["responseJsonSchema"]);if(U!=null&&C(r,["responseJsonSchema"],U),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(_(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=_(e,["safetySettings"]);if(n!==void 0&&F!=null){let K=F;Array.isArray(K)&&(K=K.map(ge=>Uhe(ge))),C(n,["safetySettings"],K)}const q=_(e,["tools"]);if(n!==void 0&&q!=null){let K=xf(q);Array.isArray(K)&&(K=K.map(ge=>$he(yf(ge)))),C(n,["tools"],K)}const H=_(e,["toolConfig"]);if(n!==void 0&&H!=null&&C(n,["toolConfig"],Hhe(H)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=_(e,["cachedContent"]);n!==void 0&&G!=null&&C(n,["cachedContent"],il(t,G));const B=_(e,["responseModalities"]);B!=null&&C(r,["responseModalities"],B);const z=_(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const V=_(e,["speechConfig"]);if(V!=null&&C(r,["speechConfig"],g2(V)),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=_(e,["thinkingConfig"]);ee!=null&&C(r,["thinkingConfig"],ee);const Q=_(e,["imageConfig"]);Q!=null&&C(r,["imageConfig"],Ehe(Q));const X=_(e,["enableEnhancedCivicAnswers"]);return X!=null&&C(r,["enableEnhancedCivicAnswers"],X),r}function Xfe(t,e,n){const r={},i=_(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],ra(i));const a=_(e,["temperature"]);a!=null&&C(r,["temperature"],a);const o=_(e,["topP"]);o!=null&&C(r,["topP"],o);const u=_(e,["topK"]);u!=null&&C(r,["topK"],u);const h=_(e,["candidateCount"]);h!=null&&C(r,["candidateCount"],h);const f=_(e,["maxOutputTokens"]);f!=null&&C(r,["maxOutputTokens"],f);const g=_(e,["stopSequences"]);g!=null&&C(r,["stopSequences"],g);const v=_(e,["responseLogprobs"]);v!=null&&C(r,["responseLogprobs"],v);const A=_(e,["logprobs"]);A!=null&&C(r,["logprobs"],A);const N=_(e,["presencePenalty"]);N!=null&&C(r,["presencePenalty"],N);const P=_(e,["frequencyPenalty"]);P!=null&&C(r,["frequencyPenalty"],P);const O=_(e,["seed"]);O!=null&&C(r,["seed"],O);const R=_(e,["responseMimeType"]);R!=null&&C(r,["responseMimeType"],R);const L=_(e,["responseSchema"]);L!=null&&C(r,["responseSchema"],m2(L));const U=_(e,["responseJsonSchema"]);U!=null&&C(r,["responseJsonSchema"],U);const F=_(e,["routingConfig"]);F!=null&&C(r,["routingConfig"],F);const q=_(e,["modelSelectionConfig"]);q!=null&&C(r,["modelConfig"],q);const H=_(e,["safetySettings"]);if(n!==void 0&&H!=null){let te=H;Array.isArray(te)&&(te=te.map(se=>se)),C(n,["safetySettings"],te)}const G=_(e,["tools"]);if(n!==void 0&&G!=null){let te=xf(G);Array.isArray(te)&&(te=te.map(se=>TU(yf(se)))),C(n,["tools"],te)}const B=_(e,["toolConfig"]);n!==void 0&&B!=null&&C(n,["toolConfig"],B);const z=_(e,["labels"]);n!==void 0&&z!=null&&C(n,["labels"],z);const V=_(e,["cachedContent"]);n!==void 0&&V!=null&&C(n,["cachedContent"],il(t,V));const ee=_(e,["responseModalities"]);ee!=null&&C(r,["responseModalities"],ee);const Q=_(e,["mediaResolution"]);Q!=null&&C(r,["mediaResolution"],Q);const X=_(e,["speechConfig"]);X!=null&&C(r,["speechConfig"],g2(X));const K=_(e,["audioTimestamp"]);K!=null&&C(r,["audioTimestamp"],K);const ge=_(e,["thinkingConfig"]);ge!=null&&C(r,["thinkingConfig"],ge);const re=_(e,["imageConfig"]);if(re!=null&&C(r,["imageConfig"],_he(re)),_(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function f8(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let o=To(i);Array.isArray(o)&&(o=o.map(u=>t1(u))),C(n,["contents"],o)}const a=_(e,["config"]);return a!=null&&C(n,["generationConfig"],Wfe(t,a,n)),n}function h8(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["contents"]);if(i!=null){let o=To(i);Array.isArray(o)&&(o=o.map(u=>u)),C(n,["contents"],o)}const a=_(e,["config"]);return a!=null&&C(n,["generationConfig"],Xfe(t,a,n)),n}function p8(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(f=>xfe(f))),C(e,["candidates"],h)}const i=_(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const a=_(t,["promptFeedback"]);a!=null&&C(e,["promptFeedback"],a);const o=_(t,["responseId"]);o!=null&&C(e,["responseId"],o);const u=_(t,["usageMetadata"]);return u!=null&&C(e,["usageMetadata"],u),e}function m8(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>g)),C(e,["candidates"],f)}const i=_(t,["createTime"]);i!=null&&C(e,["createTime"],i);const a=_(t,["modelVersion"]);a!=null&&C(e,["modelVersion"],a);const o=_(t,["promptFeedback"]);o!=null&&C(e,["promptFeedback"],o);const u=_(t,["responseId"]);u!=null&&C(e,["responseId"],u);const h=_(t,["usageMetadata"]);return h!=null&&C(e,["usageMetadata"],h),e}function Qfe(t,e){const n={};if(_(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=_(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=_(t,["aspectRatio"]);e!==void 0&&i!=null&&C(e,["parameters","aspectRatio"],i);const a=_(t,["guidanceScale"]);if(e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a),_(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=_(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&C(e,["parameters","safetySetting"],o);const u=_(t,["personGeneration"]);e!==void 0&&u!=null&&C(e,["parameters","personGeneration"],u);const h=_(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const f=_(t,["includeRaiReason"]);e!==void 0&&f!=null&&C(e,["parameters","includeRaiReason"],f);const g=_(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const v=_(t,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const A=_(t,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&C(e,["parameters","outputOptions","compressionQuality"],A),_(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(_(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=_(t,["imageSize"]);if(e!==void 0&&N!=null&&C(e,["parameters","sampleImageSize"],N),_(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Jfe(t,e){const n={},r=_(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=_(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const a=_(t,["numberOfImages"]);e!==void 0&&a!=null&&C(e,["parameters","sampleCount"],a);const o=_(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const u=_(t,["guidanceScale"]);e!==void 0&&u!=null&&C(e,["parameters","guidanceScale"],u);const h=_(t,["seed"]);e!==void 0&&h!=null&&C(e,["parameters","seed"],h);const f=_(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&C(e,["parameters","safetySetting"],f);const g=_(t,["personGeneration"]);e!==void 0&&g!=null&&C(e,["parameters","personGeneration"],g);const v=_(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&C(e,["parameters","includeSafetyAttributes"],v);const A=_(t,["includeRaiReason"]);e!==void 0&&A!=null&&C(e,["parameters","includeRaiReason"],A);const N=_(t,["language"]);e!==void 0&&N!=null&&C(e,["parameters","language"],N);const P=_(t,["outputMimeType"]);e!==void 0&&P!=null&&C(e,["parameters","outputOptions","mimeType"],P);const O=_(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&C(e,["parameters","outputOptions","compressionQuality"],O);const R=_(t,["addWatermark"]);e!==void 0&&R!=null&&C(e,["parameters","addWatermark"],R);const L=_(t,["labels"]);e!==void 0&&L!=null&&C(e,["labels"],L);const U=_(t,["imageSize"]);e!==void 0&&U!=null&&C(e,["parameters","sampleImageSize"],U);const F=_(t,["enhancePrompt"]);return e!==void 0&&F!=null&&C(e,["parameters","enhancePrompt"],F),n}function Zfe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const a=_(e,["config"]);return a!=null&&Qfe(a,n),n}function ehe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const a=_(e,["config"]);return a!=null&&Jfe(a,n),n}function the(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>hhe(o))),C(e,["generatedImages"],a)}const i=_(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],_U(i)),e}function nhe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>n1(o))),C(e,["generatedImages"],a)}const i=_(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],AU(i)),e}function rhe(t,e){const n={},r=_(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r),_(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=_(t,["durationSeconds"]);if(e!==void 0&&i!=null&&C(e,["parameters","durationSeconds"],i),_(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=_(t,["aspectRatio"]);e!==void 0&&a!=null&&C(e,["parameters","aspectRatio"],a);const o=_(t,["resolution"]);e!==void 0&&o!=null&&C(e,["parameters","resolution"],o);const u=_(t,["personGeneration"]);if(e!==void 0&&u!=null&&C(e,["parameters","personGeneration"],u),_(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=_(t,["negativePrompt"]);e!==void 0&&h!=null&&C(e,["parameters","negativePrompt"],h);const f=_(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&C(e,["parameters","enhancePrompt"],f),_(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=_(t,["lastFrame"]);e!==void 0&&g!=null&&C(e,["instances[0]","lastFrame"],r1(g));const v=_(t,["referenceImages"]);if(e!==void 0&&v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>ape(N))),C(e,["instances[0]","referenceImages"],A)}if(_(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(_(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ihe(t,e){const n={},r=_(t,["numberOfVideos"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=_(t,["outputGcsUri"]);e!==void 0&&i!=null&&C(e,["parameters","storageUri"],i);const a=_(t,["fps"]);e!==void 0&&a!=null&&C(e,["parameters","fps"],a);const o=_(t,["durationSeconds"]);e!==void 0&&o!=null&&C(e,["parameters","durationSeconds"],o);const u=_(t,["seed"]);e!==void 0&&u!=null&&C(e,["parameters","seed"],u);const h=_(t,["aspectRatio"]);e!==void 0&&h!=null&&C(e,["parameters","aspectRatio"],h);const f=_(t,["resolution"]);e!==void 0&&f!=null&&C(e,["parameters","resolution"],f);const g=_(t,["personGeneration"]);e!==void 0&&g!=null&&C(e,["parameters","personGeneration"],g);const v=_(t,["pubsubTopic"]);e!==void 0&&v!=null&&C(e,["parameters","pubsubTopic"],v);const A=_(t,["negativePrompt"]);e!==void 0&&A!=null&&C(e,["parameters","negativePrompt"],A);const N=_(t,["enhancePrompt"]);e!==void 0&&N!=null&&C(e,["parameters","enhancePrompt"],N);const P=_(t,["generateAudio"]);e!==void 0&&P!=null&&C(e,["parameters","generateAudio"],P);const O=_(t,["lastFrame"]);e!==void 0&&O!=null&&C(e,["instances[0]","lastFrame"],Yo(O));const R=_(t,["referenceImages"]);if(e!==void 0&&R!=null){let F=R;Array.isArray(F)&&(F=F.map(q=>ope(q))),C(e,["instances[0]","referenceImages"],F)}const L=_(t,["mask"]);e!==void 0&&L!=null&&C(e,["instances[0]","mask"],ipe(L));const U=_(t,["compressionQuality"]);return e!==void 0&&U!=null&&C(e,["parameters","compressionQuality"],U),n}function ahe(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],che(o)),e}function ohe(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response"]);return o!=null&&C(e,["response"],uhe(o)),e}function she(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const a=_(e,["image"]);a!=null&&C(n,["instances[0]","image"],r1(a));const o=_(e,["video"]);o!=null&&C(n,["instances[0]","video"],SU(o));const u=_(e,["source"]);u!=null&&dhe(u,n);const h=_(e,["config"]);return h!=null&&rhe(h,n),n}function lhe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const a=_(e,["image"]);a!=null&&C(n,["instances[0]","image"],Yo(a));const o=_(e,["video"]);o!=null&&C(n,["instances[0]","video"],CU(o));const u=_(e,["source"]);u!=null&&fhe(u,n);const h=_(e,["config"]);return h!=null&&ihe(h,n),n}function che(t){const e={},n=_(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>mhe(o))),C(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function uhe(t){const e={},n=_(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>ghe(o))),C(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function dhe(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=_(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],r1(i));const a=_(t,["video"]);return e!==void 0&&a!=null&&C(e,["instances[0]","video"],SU(a)),n}function fhe(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=_(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],Yo(i));const a=_(t,["video"]);return e!==void 0&&a!=null&&C(e,["instances[0]","video"],CU(a)),n}function hhe(t){const e={},n=_(t,["_self"]);n!=null&&C(e,["image"],Ahe(n));const r=_(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=_(t,["_self"]);return i!=null&&C(e,["safetyAttributes"],_U(i)),e}function n1(t){const e={},n=_(t,["_self"]);n!=null&&C(e,["image"],EU(n));const r=_(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=_(t,["_self"]);i!=null&&C(e,["safetyAttributes"],AU(i));const a=_(t,["prompt"]);return a!=null&&C(e,["enhancedPrompt"],a),e}function phe(t){const e={},n=_(t,["_self"]);n!=null&&C(e,["mask"],EU(n));const r=_(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),C(e,["labels"],i)}return e}function mhe(t){const e={},n=_(t,["video"]);return n!=null&&C(e,["video"],npe(n)),e}function ghe(t){const e={},n=_(t,["_self"]);return n!=null&&C(e,["video"],rpe(n)),e}function yhe(t){const e={},n=_(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=_(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=_(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const a=_(t,["candidateCount"]);a!=null&&C(e,["candidateCount"],a);const o=_(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const u=_(t,["frequencyPenalty"]);u!=null&&C(e,["frequencyPenalty"],u);const h=_(t,["logprobs"]);h!=null&&C(e,["logprobs"],h);const f=_(t,["maxOutputTokens"]);f!=null&&C(e,["maxOutputTokens"],f);const g=_(t,["mediaResolution"]);g!=null&&C(e,["mediaResolution"],g);const v=_(t,["presencePenalty"]);v!=null&&C(e,["presencePenalty"],v);const A=_(t,["responseLogprobs"]);A!=null&&C(e,["responseLogprobs"],A);const N=_(t,["responseMimeType"]);N!=null&&C(e,["responseMimeType"],N);const P=_(t,["responseModalities"]);P!=null&&C(e,["responseModalities"],P);const O=_(t,["responseSchema"]);O!=null&&C(e,["responseSchema"],O);const R=_(t,["routingConfig"]);R!=null&&C(e,["routingConfig"],R);const L=_(t,["seed"]);L!=null&&C(e,["seed"],L);const U=_(t,["speechConfig"]);U!=null&&C(e,["speechConfig"],U);const F=_(t,["stopSequences"]);F!=null&&C(e,["stopSequences"],F);const q=_(t,["temperature"]);q!=null&&C(e,["temperature"],q);const H=_(t,["thinkingConfig"]);H!=null&&C(e,["thinkingConfig"],H);const G=_(t,["topK"]);G!=null&&C(e,["topK"],G);const B=_(t,["topP"]);if(B!=null&&C(e,["topP"],B),_(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xhe(t,e){const n={},r=_(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function vhe(t,e){const n={},r=_(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function bhe(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function whe(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Ehe(t){const e={},n=_(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=_(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),_(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(_(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(_(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _he(t){const e={},n=_(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=_(t,["imageSize"]);r!=null&&C(e,["imageSize"],r);const i=_(t,["personGeneration"]);i!=null&&C(e,["personGeneration"],i);const a=_(t,["outputMimeType"]);a!=null&&C(e,["imageOutputOptions","mimeType"],a);const o=_(t,["outputCompressionQuality"]);return o!=null&&C(e,["imageOutputOptions","compressionQuality"],o),e}function Ahe(t){const e={},n=_(t,["bytesBase64Encoded"]);n!=null&&C(e,["imageBytes"],lc(n));const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function EU(t){const e={},n=_(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=_(t,["bytesBase64Encoded"]);r!=null&&C(e,["imageBytes"],lc(r));const i=_(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function r1(t){const e={};if(_(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=_(t,["imageBytes"]);n!=null&&C(e,["bytesBase64Encoded"],lc(n));const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Yo(t){const e={},n=_(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=_(t,["imageBytes"]);r!=null&&C(e,["bytesBase64Encoded"],lc(r));const i=_(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function The(t,e,n){const r={},i=_(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const a=_(e,["pageToken"]);n!==void 0&&a!=null&&C(n,["_query","pageToken"],a);const o=_(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const u=_(e,["queryBase"]);return n!==void 0&&u!=null&&C(n,["_url","models_url"],mU(t,u)),r}function She(t,e,n){const r={},i=_(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const a=_(e,["pageToken"]);n!==void 0&&a!=null&&C(n,["_query","pageToken"],a);const o=_(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const u=_(e,["queryBase"]);return n!==void 0&&u!=null&&C(n,["_url","models_url"],mU(t,u)),r}function Che(t,e){const n={},r=_(e,["config"]);return r!=null&&The(t,r,n),n}function Ihe(t,e){const n={},r=_(e,["config"]);return r!=null&&She(t,r,n),n}function Nhe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["_self"]);if(i!=null){let a=gU(i);Array.isArray(a)&&(a=a.map(o=>sT(o))),C(e,["models"],a)}return e}function Rhe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["_self"]);if(i!=null){let a=gU(i);Array.isArray(a)&&(a=a.map(o=>lT(o))),C(e,["models"],a)}return e}function Mhe(t){const e={},n=_(t,["maskMode"]);n!=null&&C(e,["maskMode"],n);const r=_(t,["segmentationClasses"]);r!=null&&C(e,["maskClasses"],r);const i=_(t,["maskDilation"]);return i!=null&&C(e,["dilation"],i),e}function sT(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=_(t,["description"]);i!=null&&C(e,["description"],i);const a=_(t,["version"]);a!=null&&C(e,["version"],a);const o=_(t,["_self"]);o!=null&&C(e,["tunedModelInfo"],Yhe(o));const u=_(t,["inputTokenLimit"]);u!=null&&C(e,["inputTokenLimit"],u);const h=_(t,["outputTokenLimit"]);h!=null&&C(e,["outputTokenLimit"],h);const f=_(t,["supportedGenerationMethods"]);f!=null&&C(e,["supportedActions"],f);const g=_(t,["temperature"]);g!=null&&C(e,["temperature"],g);const v=_(t,["maxTemperature"]);v!=null&&C(e,["maxTemperature"],v);const A=_(t,["topP"]);A!=null&&C(e,["topP"],A);const N=_(t,["topK"]);N!=null&&C(e,["topK"],N);const P=_(t,["thinking"]);return P!=null&&C(e,["thinking"],P),e}function lT(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=_(t,["description"]);i!=null&&C(e,["description"],i);const a=_(t,["versionId"]);a!=null&&C(e,["version"],a);const o=_(t,["deployedModels"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(A=>Gfe(A))),C(e,["endpoints"],v)}const u=_(t,["labels"]);u!=null&&C(e,["labels"],u);const h=_(t,["_self"]);h!=null&&C(e,["tunedModelInfo"],Khe(h));const f=_(t,["defaultCheckpointId"]);f!=null&&C(e,["defaultCheckpointId"],f);const g=_(t,["checkpoints"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(A=>A)),C(e,["checkpoints"],v)}return e}function Dhe(t){const e={},n=_(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&C(e,["fileData"],Hfe(a));const o=_(t,["functionCall"]);o!=null&&C(e,["functionCall"],$fe(o));const u=_(t,["functionResponse"]);u!=null&&C(e,["functionResponse"],u);const h=_(t,["inlineData"]);h!=null&&C(e,["inlineData"],yfe(h));const f=_(t,["text"]);f!=null&&C(e,["text"],f);const g=_(t,["thought"]);g!=null&&C(e,["thought"],g);const v=_(t,["thoughtSignature"]);v!=null&&C(e,["thoughtSignature"],v);const A=_(t,["videoMetadata"]);return A!=null&&C(e,["videoMetadata"],A),e}function Ohe(t){const e={},n=_(t,["productImage"]);return n!=null&&C(e,["image"],Yo(n)),e}function Phe(t,e){const n={},r=_(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=_(t,["baseSteps"]);e!==void 0&&i!=null&&C(e,["parameters","baseSteps"],i);const a=_(t,["outputGcsUri"]);e!==void 0&&a!=null&&C(e,["parameters","storageUri"],a);const o=_(t,["seed"]);e!==void 0&&o!=null&&C(e,["parameters","seed"],o);const u=_(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&C(e,["parameters","safetySetting"],u);const h=_(t,["personGeneration"]);e!==void 0&&h!=null&&C(e,["parameters","personGeneration"],h);const f=_(t,["addWatermark"]);e!==void 0&&f!=null&&C(e,["parameters","addWatermark"],f);const g=_(t,["outputMimeType"]);e!==void 0&&g!=null&&C(e,["parameters","outputOptions","mimeType"],g);const v=_(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","compressionQuality"],v);const A=_(t,["enhancePrompt"]);e!==void 0&&A!=null&&C(e,["parameters","enhancePrompt"],A);const N=_(t,["labels"]);return e!==void 0&&N!=null&&C(e,["labels"],N),n}function khe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["source"]);i!=null&&Bhe(i,n);const a=_(e,["config"]);return a!=null&&Phe(a,n),n}function Lhe(t){const e={},n=_(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>n1(i))),C(e,["generatedImages"],r)}return e}function Bhe(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=_(t,["personImage"]);e!==void 0&&i!=null&&C(e,["instances[0]","personImage","image"],Yo(i));const a=_(t,["productImages"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>Ohe(u))),C(e,["instances[0]","productImages"],o)}return n}function jhe(t){const e={},n=_(t,["referenceImage"]);n!=null&&C(e,["referenceImage"],Yo(n));const r=_(t,["referenceId"]);r!=null&&C(e,["referenceId"],r);const i=_(t,["referenceType"]);i!=null&&C(e,["referenceType"],i);const a=_(t,["maskImageConfig"]);a!=null&&C(e,["maskImageConfig"],Mhe(a));const o=_(t,["controlImageConfig"]);o!=null&&C(e,["controlImageConfig"],Afe(o));const u=_(t,["styleImageConfig"]);u!=null&&C(e,["styleImageConfig"],u);const h=_(t,["subjectImageConfig"]);return h!=null&&C(e,["subjectImageConfig"],h),e}function _U(t){const e={},n=_(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=_(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=_(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function AU(t){const e={},n=_(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=_(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=_(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function Uhe(t){const e={},n=_(t,["category"]);if(n!=null&&C(e,["category"],n),_(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=_(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function Vhe(t){const e={},n=_(t,["image"]);return n!=null&&C(e,["image"],Yo(n)),e}function Fhe(t,e){const n={},r=_(t,["mode"]);e!==void 0&&r!=null&&C(e,["parameters","mode"],r);const i=_(t,["maxPredictions"]);e!==void 0&&i!=null&&C(e,["parameters","maxPredictions"],i);const a=_(t,["confidenceThreshold"]);e!==void 0&&a!=null&&C(e,["parameters","confidenceThreshold"],a);const o=_(t,["maskDilation"]);e!==void 0&&o!=null&&C(e,["parameters","maskDilation"],o);const u=_(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&C(e,["parameters","binaryColorThreshold"],u);const h=_(t,["labels"]);return e!==void 0&&h!=null&&C(e,["labels"],h),n}function qhe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["source"]);i!=null&&Ghe(i,n);const a=_(e,["config"]);return a!=null&&Fhe(a,n),n}function zhe(t){const e={},n=_(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>phe(i))),C(e,["generatedMasks"],r)}return e}function Ghe(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=_(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],Yo(i));const a=_(t,["scribbleImage"]);return e!==void 0&&a!=null&&C(e,["instances[0]","scribble"],Vhe(a)),n}function Hhe(t){const e={},n=_(t,["retrievalConfig"]);n!=null&&C(e,["retrievalConfig"],n);const r=_(t,["functionCallingConfig"]);return r!=null&&C(e,["functionCallingConfig"],Yfe(r)),e}function $he(t){const e={};if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=_(t,["computerUse"]);n!=null&&C(e,["computerUse"],n);const r=_(t,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=_(t,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(t,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["functionDeclarations"],g)}const o=_(t,["googleMaps"]);o!=null&&C(e,["googleMaps"],bhe(o));const u=_(t,["googleSearch"]);u!=null&&C(e,["googleSearch"],whe(u));const h=_(t,["googleSearchRetrieval"]);h!=null&&C(e,["googleSearchRetrieval"],h);const f=_(t,["urlContext"]);return f!=null&&C(e,["urlContext"],f),e}function TU(t){const e={},n=_(t,["retrieval"]);n!=null&&C(e,["retrieval"],n);const r=_(t,["computerUse"]);if(r!=null&&C(e,["computerUse"],r),_(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=_(t,["codeExecution"]);i!=null&&C(e,["codeExecution"],i);const a=_(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const o=_(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(A=>Kfe(A))),C(e,["functionDeclarations"],v)}const u=_(t,["googleMaps"]);u!=null&&C(e,["googleMaps"],u);const h=_(t,["googleSearch"]);h!=null&&C(e,["googleSearch"],h);const f=_(t,["googleSearchRetrieval"]);f!=null&&C(e,["googleSearchRetrieval"],f);const g=_(t,["urlContext"]);return g!=null&&C(e,["urlContext"],g),e}function Yhe(t){const e={},n=_(t,["baseModel"]);n!=null&&C(e,["baseModel"],n);const r=_(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=_(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function Khe(t){const e={},n=_(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(e,["baseModel"],n);const r=_(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=_(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function Whe(t,e){const n={},r=_(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=_(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const a=_(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&C(e,["defaultCheckpointId"],a),n}function Xhe(t,e){const n={},r=_(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=_(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const a=_(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&C(e,["defaultCheckpointId"],a),n}function Qhe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","name"],zn(t,r));const i=_(e,["config"]);return i!=null&&Whe(i,n),n}function Jhe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["config"]);return i!=null&&Xhe(i,n),n}function Zhe(t,e){const n={},r=_(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=_(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&C(e,["parameters","safetySetting"],i);const a=_(t,["personGeneration"]);e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a);const o=_(t,["includeRaiReason"]);e!==void 0&&o!=null&&C(e,["parameters","includeRaiReason"],o);const u=_(t,["outputMimeType"]);e!==void 0&&u!=null&&C(e,["parameters","outputOptions","mimeType"],u);const h=_(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","compressionQuality"],h);const f=_(t,["enhanceInputImage"]);e!==void 0&&f!=null&&C(e,["parameters","upscaleConfig","enhanceInputImage"],f);const g=_(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&C(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const v=_(t,["labels"]);e!==void 0&&v!=null&&C(e,["labels"],v);const A=_(t,["numberOfImages"]);e!==void 0&&A!=null&&C(e,["parameters","sampleCount"],A);const N=_(t,["mode"]);return e!==void 0&&N!=null&&C(e,["parameters","mode"],N),n}function epe(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=_(e,["image"]);i!=null&&C(n,["instances[0]","image"],Yo(i));const a=_(e,["upscaleFactor"]);a!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],a);const o=_(e,["config"]);return o!=null&&Zhe(o,n),n}function tpe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>n1(a))),C(e,["generatedImages"],i)}return e}function npe(t){const e={},n=_(t,["uri"]);n!=null&&C(e,["uri"],n);const r=_(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],lc(r));const i=_(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function rpe(t){const e={},n=_(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=_(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],lc(r));const i=_(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function ipe(t){const e={},n=_(t,["image"]);n!=null&&C(e,["_self"],Yo(n));const r=_(t,["maskMode"]);return r!=null&&C(e,["maskMode"],r),e}function ape(t){const e={},n=_(t,["image"]);n!=null&&C(e,["image"],r1(n));const r=_(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function ope(t){const e={},n=_(t,["image"]);n!=null&&C(e,["image"],Yo(n));const r=_(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function SU(t){const e={},n=_(t,["uri"]);n!=null&&C(e,["uri"],n);const r=_(t,["videoBytes"]);r!=null&&C(e,["encodedVideo"],lc(r));const i=_(t,["mimeType"]);return i!=null&&C(e,["encoding"],i),e}function CU(t){const e={},n=_(t,["uri"]);n!=null&&C(e,["gcsUri"],n);const r=_(t,["videoBytes"]);r!=null&&C(e,["bytesBase64Encoded"],lc(r));const i=_(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function spe(t,e){const n={},r=_(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["displayName"],r),n}function lpe(t){const e={},n=_(t,["config"]);return n!=null&&spe(n,e),e}function cpe(t,e){const n={},r=_(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function upe(t){const e={},n=_(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=_(t,["config"]);return r!=null&&cpe(r,e),e}function dpe(t){const e={},n=_(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function fpe(t,e){const n={},r=_(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["customMetadata"],a)}const i=_(t,["chunkingConfig"]);return e!==void 0&&i!=null&&C(e,["chunkingConfig"],i),n}function hpe(t){const e={},n=_(t,["name"]);n!=null&&C(e,["name"],n);const r=_(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=_(t,["done"]);i!=null&&C(e,["done"],i);const a=_(t,["error"]);a!=null&&C(e,["error"],a);const o=_(t,["response"]);return o!=null&&C(e,["response"],mpe(o)),e}function ppe(t){const e={},n=_(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=_(t,["fileName"]);r!=null&&C(e,["fileName"],r);const i=_(t,["config"]);return i!=null&&fpe(i,e),e}function mpe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["parent"]);r!=null&&C(e,["parent"],r);const i=_(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function gpe(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function ype(t){const e={},n=_(t,["config"]);return n!=null&&gpe(n,e),e}function xpe(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["fileSearchStores"],a)}return e}function IU(t,e){const n={},r=_(t,["mimeType"]);e!==void 0&&r!=null&&C(e,["mimeType"],r);const i=_(t,["displayName"]);e!==void 0&&i!=null&&C(e,["displayName"],i);const a=_(t,["customMetadata"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),C(e,["customMetadata"],u)}const o=_(t,["chunkingConfig"]);return e!==void 0&&o!=null&&C(e,["chunkingConfig"],o),n}function vpe(t){const e={},n=_(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=_(t,["config"]);return r!=null&&IU(r,e),e}function bpe(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wpe="Content-Type",Epe="X-Server-Timeout",_pe="User-Agent",cT="x-goog-api-client",Ape="1.35.0",Tpe=`google-genai-sdk/${Ape}`,Spe="v1beta1",Cpe="v1beta";class Ipe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Spe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Cpe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,u]of Object.entries(e.queryParams))i.searchParams.append(o,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,o=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>a.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=o}return n&&n.extraBody!==null&&Npe(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await g8(i),new iT(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await g8(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return zo(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const u="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:g}=yield Zt(i.read());if(f){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=a.decode(g,{stream:!0});try{const P=JSON.parse(v);if("error"in P){const O=JSON.parse(JSON.stringify(P.error)),R=O.status,L=O.code,U=`got status: ${R}. ${JSON.stringify(P)}`;if(L>=400&&L<600)throw new e1({message:U,status:L})}}catch(P){if(P.name==="ApiError")throw P}o+=v;let A=-1,N=0;for(;;){A=-1,N=0;for(const R of h){const L=o.indexOf(R);L!==-1&&(A===-1||L<A)&&(A=L,N=R.length)}if(A===-1)break;const P=o.substring(0,A);o=o.substring(A+N);const O=P.trim();if(O.startsWith(u)){const R=O.substring(u.length).trim();try{const L=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Zt(new iT(L))}catch(L){throw new Error(`exception parsing stream chunk ${R}. ${L}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Tpe+" "+this.clientOptions.userAgentExtra;return e[_pe]=n,e[cT]=n,e[wpe]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(Epe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,o=await a.stat(e);i.sizeBytes=String(o.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const h={file:i},f=this.getFileName(e),g=St("upload/v1beta/files",h._url),v=await this.fetchUploadUrl(g,i.sizeBytes,i.mimeType,f,h,n==null?void 0:n.httpOptions);return a.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,r){var i;const a=this.clientOptions.uploader,o=await a.stat(n),u=String(o.size),h=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),v={};r!=null&&IU(r,v);const A=await this.fetchUploadUrl(f,u,h,g,v,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,A,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,a,o){var u;let h={};o?h=o:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const f=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function g8(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new e1({message:i,status:n}):new Error(i)}}function Npe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,o){const u=Object.assign({},a);for(const h in o)if(Object.prototype.hasOwnProperty.call(o,h)){const f=o[h],g=u[h];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?u[h]=r(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),u[h]=f)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rpe="mcp_used/unknown";let Mpe=!1;function NU(t){for(const e of t)if(Dpe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Mpe}function RU(t){var e;const n=(e=t[cT])!==null&&e!==void 0?e:"";t[cT]=(n+` ${Rpe}`).trimStart()}function Dpe(t){return t!==null&&typeof t=="object"&&t instanceof x2}function Ope(t){return zo(this,arguments,function*(n,r=100){let i,a=0;for(;a<r;){const o=yield Zt(n.listTools({cursor:i}));for(const u of o.tools)yield yield Zt(u),a++;if(!o.nextCursor)break;i=o.nextCursor}})}class x2{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new x2(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},o=[];for(const g of this.mcpClients)try{for(var u=!0,h=(n=void 0,Go(Ope(g))),f;f=await h.next(),e=f.done,!e;u=!0){i=f.value,u=!1;const v=i;o.push(v);const A=v.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=g}}catch(v){n={error:v}}finally{try{!u&&!e&&(r=h.return)&&await r.call(h)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),due(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ppe(t,e,n){const r=new rue;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class kpe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=jpe(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),h=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const g=new Promise(F=>{f=F}),v=e.callbacks,A=function(){f({})},N=this.apiClient,P={onopen:A,onmessage:F=>{Ppe(N,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(F){}},O=this.webSocketFactory.create(h,Bpe(o),P);O.connect(),await g;const U={setup:{model:zn(this.apiClient,e.model)}};return O.send(JSON.stringify(U)),new Lpe(O,this.apiClient)}}class Lpe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=lfe(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=sfe(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(hd.PLAY)}pause(){this.sendPlaybackControl(hd.PAUSE)}stop(){this.sendPlaybackControl(hd.STOP)}resetContext(){this.sendPlaybackControl(hd.RESET_CONTEXT)}close(){this.conn.close()}}function Bpe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function jpe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Upe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Vpe(t,e,n){const r=new nue;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const o=dfe(a);Object.assign(r,o)}else Object.assign(r,a);e(r)}class Fpe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new kpe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,o,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&NU(e.config.tools)&&RU(v);const A=Hpe(v);if(this.apiClient.isVertexAI())g=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,g);else{const V=this.apiClient.getApiKey();let ee="BidiGenerateContent",Q="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ee="BidiGenerateContentConstrained",Q="access_token"),g=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${ee}?${Q}=${V}`}let N=()=>{};const P=new Promise(V=>{N=V}),O=e.callbacks,R=function(){var V;(V=O==null?void 0:O.onopen)===null||V===void 0||V.call(O),N({})},L=this.apiClient,U={onopen:R,onmessage:V=>{Vpe(L,O.onmessage,V)},onerror:(n=O==null?void 0:O.onerror)!==null&&n!==void 0?n:function(V){},onclose:(r=O==null?void 0:O.onclose)!==null&&r!==void 0?r:function(V){}},F=this.webSocketFactory.create(g,Gpe(A),U);F.connect(),await P;let q=zn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const V=this.apiClient.getProject(),ee=this.apiClient.getLocation();q=`projects/${V}/locations/${ee}/`+q}let H={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ey.AUDIO]}:e.config.responseModalities=[ey.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(u=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&u!==void 0?u:[],B=[];for(const V of G)if(this.isCallableTool(V)){const ee=V;B.push(await ee.tool())}else B.push(V);B.length>0&&(e.config.tools=B);const z={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=ofe(this.apiClient,z):H=afe(this.apiClient,z),delete H.config,F.send(JSON.stringify(H)),new zpe(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const qpe={turnComplete:!0};class zpe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=To(n.turns),e.isVertexAI()||(r=r.map(i=>t1(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Upe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},qpe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ufe(e)}:n={realtimeInput:cfe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Gpe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Hpe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y8=10;function x8(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ed(o)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ed(t){return"callTool"in t&&typeof t.callTool=="function"}function $pe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ed(i)))!==null&&r!==void 0?r:!1}function v8(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Ed(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function b8(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ype extends rl{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,o,u;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$pe(n)||x8(n.config))return await this.generateContentInternal(h);const f=v8(n);if(f.length>0){const O=f.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let g,v;const A=To(h.contents),N=(a=(i=(r=h.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:y8;let P=0;for(;P<N&&(g=await this.generateContentInternal(h),!(!g.functionCalls||g.functionCalls.length===0));){const O=g.candidates[0].content,R=[];for(const L of(u=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&u!==void 0?u:[])if(Ed(L)){const F=await L.callTool(g.functionCalls);R.push(...F)}P++,v={role:"user",parts:R},h.contents=To(h.contents),h.contents.push(O),h.contents.push(v),b8(h.config)&&(A.push(O),A.push(v))}return b8(h.config)&&(g.automaticFunctionCallingHistory=A),g},this.generateContentStream=async n=>{var r,i,a,o,u;if(this.maybeMoveToResponseJsonSchem(n),x8(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const h=v8(n);if(h.length>0){const v=h.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(a=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,g=(u=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const o=[];if(r!=null&&r.generatedImages)for(const h of r.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((i=h==null?void 0:h.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:o.push(h);let u;return a?u={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new xu(Js.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,o,u,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((h=(u=n.source)===null||u===void 0?void 0:u.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const o=await Promise.all(a.map(async h=>Ed(h)?await h.tool():h)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(u.config.tools=o,e.config&&e.config.tools&&NU(e.config.tools)){const h=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),RU(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ed(o)){const u=o,h=await u.tool();for(const f of(i=h.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,u)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:y8;let o=!1,u=0;const h=await this.initAfcToolsMap(e);return(function(f,g,v){return zo(this,arguments,function*(){for(var A,N,P,O,R,L;u<a;){o&&(u++,o=!1);const H=yield Zt(f.processParamsMaybeAddMcpUsage(v)),G=yield Zt(f.generateContentStreamInternal(H)),B=[],z=[];try{for(var U=!0,F=(N=void 0,Go(G)),q;q=yield Zt(F.next()),A=q.done,!A;U=!0){O=q.value,U=!1;const V=O;if(yield yield Zt(V),V.candidates&&(!((R=V.candidates[0])===null||R===void 0)&&R.content)){z.push(V.candidates[0].content);for(const ee of(L=V.candidates[0].content.parts)!==null&&L!==void 0?L:[])if(u<a&&ee.functionCall){if(!ee.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(ee.functionCall.name)){const Q=yield Zt(g.get(ee.functionCall.name).callTool([ee.functionCall]));B.push(...Q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${ee.functionCall.name}`)}}}}catch(V){N={error:V}}finally{try{!U&&!A&&(P=F.return)&&(yield Zt(P.call(F)))}finally{if(N)throw N.error}}if(B.length>0){o=!0;const V=new vh;V.candidates=[{content:{role:"user",parts:B}}],yield yield Zt(V);const ee=[];ee.push(...z),ee.push({role:"user",parts:B});const Q=To(v.contents).concat(ee);v.contents=Q}else break}})})(this,h,e)}async generateContentInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=h8(this.apiClient,e);return u=St("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=m8(g),A=new vh;return Object.assign(A,v),A})}else{const f=f8(this.apiClient,e);return u=St("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=p8(g),A=new vh;return Object.assign(A,v),A})}}async generateContentStreamInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=h8(this.apiClient,e);return u=St("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.requestStream({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(v){return zo(this,arguments,function*(){var A,N,P,O;try{for(var R=!0,L=Go(v),U;U=yield Zt(L.next()),A=U.done,!A;R=!0){O=U.value,R=!1;const F=O,q=m8(yield Zt(F.json()));q.sdkHttpResponse={headers:F.headers};const H=new vh;Object.assign(H,q),yield yield Zt(H)}}catch(F){N={error:F}}finally{try{!R&&!A&&(P=L.return)&&(yield Zt(P.call(L)))}finally{if(N)throw N.error}}})})}else{const f=f8(this.apiClient,e);return u=St("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.requestStream({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(v){return zo(this,arguments,function*(){var A,N,P,O;try{for(var R=!0,L=Go(v),U;U=yield Zt(L.next()),A=U.done,!A;R=!0){O=U.value,R=!1;const F=O,q=p8(yield Zt(F.json()));q.sdkHttpResponse={headers:F.headers};const H=new vh;Object.assign(H,q),yield yield Zt(H)}}catch(F){N={error:F}}finally{try{!R&&!A&&(P=L.return)&&(yield Zt(P.call(L)))}finally{if(N)throw N.error}}})})}}async embedContent(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Ffe(this.apiClient,e);return u=St("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=zfe(g),A=new W6;return Object.assign(A,v),A})}else{const f=Vfe(this.apiClient,e);return u=St("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=qfe(g),A=new W6;return Object.assign(A,v),A})}}async generateImagesInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=ehe(this.apiClient,e);return u=St("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=nhe(g),A=new X6;return Object.assign(A,v),A})}else{const f=Zfe(this.apiClient,e);return u=St("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=the(g),A=new X6;return Object.assign(A,v),A})}}async editImageInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=Lfe(this.apiClient,e);return a=St("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const f=Bfe(h),g=new Hce;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=epe(this.apiClient,e);return a=St("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const f=tpe(h),g=new $ce;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=khe(this.apiClient,e);return a=St("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=Lhe(h),g=new Yce;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=qhe(this.apiClient,e);return a=St("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=zhe(h),g=new Kce;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=vhe(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>lT(g))}else{const f=xhe(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>sT(g))}}async listInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Ihe(this.apiClient,e);return u=St("{models_url}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Rhe(g),A=new Q6;return Object.assign(A,v),A})}else{const f=Che(this.apiClient,e);return u=St("{models_url}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Nhe(g),A=new Q6;return Object.assign(A,v),A})}}async update(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Jhe(this.apiClient,e);return u=St("{model}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>lT(g))}else{const f=Qhe(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>sT(g))}}async delete(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Dfe(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Pfe(g),A=new J6;return Object.assign(A,v),A})}else{const f=Mfe(this.apiClient,e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Ofe(g),A=new J6;return Object.assign(A,v),A})}}async countTokens(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Ife(this.apiClient,e);return u=St("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Rfe(g),A=new Z6;return Object.assign(A,v),A})}else{const f=Cfe(this.apiClient,e);return u=St("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=Nfe(g),A=new Z6;return Object.assign(A,v),A})}}async computeTokens(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=bfe(this.apiClient,e);return a=St("{model}:computeTokens",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const f=wfe(h),g=new Wce;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=lhe(this.apiClient,e);return u=St("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>{const v=ohe(g),A=new ty;return Object.assign(A,v),A})}else{const f=she(this.apiClient,e);return u=St("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o.then(g=>{const v=ahe(g),A=new ty;return Object.assign(A,v),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kpe extends rl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=Uce(e);return u=St("{operationName}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o}else{const f=jce(e);return u=St("{operationName}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=Mce(e);return a=St("{resourceName}:fetchPredictOperation",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wpe(t){const e={},n=_(t,["data"]);if(n!=null&&C(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Xpe(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a0e(a))),C(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&C(e,["role"],r),e}function Qpe(t,e,n){const r={},i=_(e,["expireTime"]);n!==void 0&&i!=null&&C(n,["expireTime"],i);const a=_(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&C(n,["newSessionExpireTime"],a);const o=_(e,["uses"]);n!==void 0&&o!=null&&C(n,["uses"],o);const u=_(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&C(n,["bidiGenerateContentSetup"],i0e(t,u));const h=_(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&C(n,["fieldMask"],h),r}function Jpe(t,e){const n={},r=_(e,["config"]);return r!=null&&C(n,["config"],Qpe(t,r,n)),n}function Zpe(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function e0e(t){const e={},n=_(t,["id"]);n!=null&&C(e,["id"],n);const r=_(t,["args"]);r!=null&&C(e,["args"],r);const i=_(t,["name"]);if(i!=null&&C(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t0e(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function n0e(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function r0e(t,e){const n={},r=_(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=_(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const a=_(t,["temperature"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","temperature"],a);const o=_(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const u=_(t,["topK"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","topK"],u);const h=_(t,["maxOutputTokens"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","maxOutputTokens"],h);const f=_(t,["mediaResolution"]);e!==void 0&&f!=null&&C(e,["setup","generationConfig","mediaResolution"],f);const g=_(t,["seed"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","seed"],g);const v=_(t,["speechConfig"]);e!==void 0&&v!=null&&C(e,["setup","generationConfig","speechConfig"],y2(v));const A=_(t,["thinkingConfig"]);e!==void 0&&A!=null&&C(e,["setup","generationConfig","thinkingConfig"],A);const N=_(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],N);const P=_(t,["systemInstruction"]);e!==void 0&&P!=null&&C(e,["setup","systemInstruction"],Xpe(ra(P)));const O=_(t,["tools"]);if(e!==void 0&&O!=null){let G=xf(O);Array.isArray(G)&&(G=G.map(B=>s0e(yf(B)))),C(e,["setup","tools"],G)}const R=_(t,["sessionResumption"]);e!==void 0&&R!=null&&C(e,["setup","sessionResumption"],o0e(R));const L=_(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&C(e,["setup","inputAudioTranscription"],L);const U=_(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&C(e,["setup","outputAudioTranscription"],U);const F=_(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&C(e,["setup","realtimeInputConfig"],F);const q=_(t,["contextWindowCompression"]);e!==void 0&&q!=null&&C(e,["setup","contextWindowCompression"],q);const H=_(t,["proactivity"]);if(e!==void 0&&H!=null&&C(e,["setup","proactivity"],H),_(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function i0e(t,e){const n={},r=_(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=_(e,["config"]);return i!=null&&C(n,["config"],r0e(i,n)),n}function a0e(t){const e={},n=_(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&C(e,["fileData"],Zpe(a));const o=_(t,["functionCall"]);o!=null&&C(e,["functionCall"],e0e(o));const u=_(t,["functionResponse"]);u!=null&&C(e,["functionResponse"],u);const h=_(t,["inlineData"]);h!=null&&C(e,["inlineData"],Wpe(h));const f=_(t,["text"]);f!=null&&C(e,["text"],f);const g=_(t,["thought"]);g!=null&&C(e,["thought"],g);const v=_(t,["thoughtSignature"]);v!=null&&C(e,["thoughtSignature"],v);const A=_(t,["videoMetadata"]);return A!=null&&C(e,["videoMetadata"],A),e}function o0e(t){const e={},n=_(t,["handle"]);if(n!=null&&C(e,["handle"],n),_(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function s0e(t){const e={};if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=_(t,["computerUse"]);n!=null&&C(e,["computerUse"],n);const r=_(t,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=_(t,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(t,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["functionDeclarations"],g)}const o=_(t,["googleMaps"]);o!=null&&C(e,["googleMaps"],t0e(o));const u=_(t,["googleSearch"]);u!=null&&C(e,["googleSearch"],n0e(u));const h=_(t,["googleSearchRetrieval"]);h!=null&&C(e,["googleSearchRetrieval"],h);const f=_(t,["urlContext"]);return f!=null&&C(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l0e(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function c0e(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=l0e(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(f=>o.includes(f)?`generationConfig.${f}`:f));const h=[];a&&h.push(a),u.length>0&&h.push(...u),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class u0e extends rl{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Jpe(this.apiClient,e);a=St("auth_tokens",u._url),o=u._query,delete u.config,delete u._url,delete u._query;const h=c0e(u,e.config);return i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d0e(t,e){const n={},r=_(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function f0e(t){const e={},n=_(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=_(t,["config"]);return r!=null&&d0e(r,e),e}function h0e(t){const e={},n=_(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function p0e(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function m0e(t){const e={},n=_(t,["parent"]);n!=null&&C(e,["_url","parent"],n);const r=_(t,["config"]);return r!=null&&p0e(r,e),e}function g0e(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=_(t,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),C(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y0e extends rl{constructor(e){super(),this.apiClient=e,this.list=async n=>new xu(Js.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=h0e(e);return a=St("{name}",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=f0e(e);i=St("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=m0e(e);return a=St("{parent}/documents",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=g0e(h),g=new Xce;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x0e extends rl{constructor(e,n=new y0e(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new xu(Js.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lpe(e);return a=St("fileSearchStores",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dpe(e);return a=St("{name}",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=upe(e);i=St("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ype(e);return a=St("fileSearchStores",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=xpe(h),g=new Qce;return Object.assign(g,f),g})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vpe(e);return a=St("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=bpe(h),g=new Jce;return Object.assign(g,f),g})}}async importFile(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ppe(e);return a=St("{file_search_store_name}:importFile",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const f=hpe(h),g=new f2;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let MU=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return MU=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const v0e=()=>MU();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uT(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const dT=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Co extends Error{}class ga extends Co{constructor(e,n,r,i){super(`${ga.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new i1({message:r,cause:dT(n)});const a=n;return e===400?new OU(e,a,r,i):e===401?new PU(e,a,r,i):e===403?new kU(e,a,r,i):e===404?new LU(e,a,r,i):e===409?new BU(e,a,r,i):e===422?new jU(e,a,r,i):e===429?new UU(e,a,r,i):e>=500?new VU(e,a,r,i):new ga(e,a,r,i)}}class fT extends ga{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class i1 extends ga{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class DU extends i1{constructor({message:e}={}){super({message:e??"Request timed out."})}}class OU extends ga{}class PU extends ga{}class kU extends ga{}class LU extends ga{}class BU extends ga{}class jU extends ga{}class UU extends ga{}class VU extends ga{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const b0e=/^[a-z][a-z0-9+.-]*:/i,w0e=t=>b0e.test(t);let hT=t=>(hT=Array.isArray,hT(t));const E0e=hT;let _0e=E0e;const w8=_0e;function A0e(t){if(!t)return!0;for(const e in t)return!1;return!0}function T0e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const S0e=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Co(`${t} must be an integer`);if(e<0)throw new Co(`${t} must be a positive integer`);return e},C0e=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I0e=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ld="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N0e(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const R0e=()=>{var t,e,n,r,i;const a=N0e();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":_8(Deno.build.os),"X-Stainless-Arch":E8(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":_8((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":E8((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=M0e();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function M0e(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const E8=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",_8=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _m;const D0e=()=>_m??(_m=R0e());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O0e(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function FU(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function P0e(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return FU({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function qU(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function k0e(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L0e=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zU=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function c_(t,e,n){return zU(),new File(t,e??"unknown_file",n)}function B0e(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const j0e=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GU=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",U0e=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&GU(t),V0e=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function F0e(t,e,n){if(zU(),t=await t,U0e(t))return t instanceof File?t:c_([await t.arrayBuffer()],t.name);if(V0e(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),c_(await pT(i),e,n)}const r=await pT(t);if(e||(e=B0e(t)),!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return c_(r,e,n)}async function pT(t){var e,n,r,i,a;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(GU(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(j0e(t))try{for(var u=!0,h=Go(t),f;f=await h.next(),e=f.done,!e;u=!0){i=f.value,u=!1;const g=i;o.push(...await pT(g))}}catch(g){n={error:g}}finally{try{!u&&!e&&(r=h.return)&&await r.call(h)}finally{if(n)throw n.error}}else{const g=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${q0e(t)}`)}return o}function q0e(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HU{constructor(e){this._client=e}}HU._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $U(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const A8=Object.freeze(Object.create(null)),z0e=(t=$U)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],o=n.reduce((g,v,A)=>{var N,P,O;/[?#]/.test(v)&&(i=!0);const R=r[A];let L=(i?encodeURIComponent:t)(""+R);return A!==r.length&&(R==null||typeof R=="object"&&R.toString===((O=Object.getPrototypeOf((P=Object.getPrototypeOf((N=R.hasOwnProperty)!==null&&N!==void 0?N:A8))!==null&&P!==void 0?P:A8))===null||O===void 0?void 0:O.toString))&&(L=R+"",a.push({start:g.length+v.length,length:L.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),g+v+(A===r.length?"":L)},""),u=o.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(u))!==null;)a.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(a.sort((g,v)=>g.start-v.start),a.length>0){let g=0;const v=a.reduce((A,N)=>{const P=" ".repeat(N.start-g),O="^".repeat(N.length);return g=N.start+N.length,A+P+O},"");throw new Co(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${o}
${v}`)}return o}),Am=z0e($U);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YU extends HU{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,a=ry(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Co("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Co("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Am`/${i}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Am`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Am`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const a=n??{},{api_version:o=this._client.apiVersion}=a,u=ry(a,["api_version"]);return this._client.get(Am`/${o}/interactions/${e}`,Object.assign(Object.assign({query:u},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}YU._key=Object.freeze(["interactions"]);class KU extends YU{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G0e(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Tm;function v2(t){let e;return(Tm??(e=new globalThis.TextEncoder,Tm=e.encode.bind(e)))(t)}let Sm;function T8(t){let e;return(Sm??(e=new globalThis.TextDecoder,Sm=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a1{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?v2(e):e;this.buffer=G0e([this.buffer,n]);const r=[];let i;for(;(i=H0e(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(T8(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=T8(this.buffer.subarray(0,a));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}a1.NEWLINE_CHARS=new Set([`
`,"\r"]);a1.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function H0e(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function $0e(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iy={off:0,error:200,warn:300,info:400,debug:500},S8=(t,e,n)=>{if(t){if(T0e(iy,t))return t;da(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(iy))}`)}};function Rh(){}function Cm(t,e,n){return!e||iy[t]>iy[n]?Rh:e[t].bind(e)}const Y0e={error:Rh,warn:Rh,info:Rh,debug:Rh};let C8=new WeakMap;function da(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Y0e;const i=C8.get(n);if(i&&i[0]===r)return i[1];const a={error:Cm("error",n,r),warn:Cm("warn",n,r),info:Cm("info",n,r),debug:Cm("debug",n,r)};return C8.set(n,[r,a]),a}const Lc=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pd{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const a=r?da(r):console;function o(){return zo(this,arguments,function*(){var h,f,g,v;if(i)throw new Co("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let A=!1;try{try{for(var N=!0,P=Go(K0e(e,n)),O;O=yield Zt(P.next()),h=O.done,!h;N=!0){v=O.value,N=!1;const R=v;if(!A)if(R.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield Zt(JSON.parse(R.data))}catch(L){throw a.error("Could not parse message into JSON:",R.data),a.error("From chunk:",R.raw),L}}}catch(R){f={error:R}}finally{try{!N&&!h&&(g=P.return)&&(yield Zt(g.call(P)))}finally{if(f)throw f.error}}A=!0}catch(R){if(uT(R))return yield Zt(void 0);throw R}finally{A||n.abort()}})}return new pd(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function a(){return zo(this,arguments,function*(){var h,f,g,v;const A=new a1,N=qU(e);try{for(var P=!0,O=Go(N),R;R=yield Zt(O.next()),h=R.done,!h;P=!0){v=R.value,P=!1;const L=v;for(const U of A.decode(L))yield yield Zt(U)}}catch(L){f={error:L}}finally{try{!P&&!h&&(g=O.return)&&(yield Zt(g.call(O)))}finally{if(f)throw f.error}}for(const L of A.flush())yield yield Zt(L)})}function o(){return zo(this,arguments,function*(){var h,f,g,v;if(i)throw new Co("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let A=!1;try{try{for(var N=!0,P=Go(a()),O;O=yield Zt(P.next()),h=O.done,!h;N=!0){v=O.value,N=!1;const R=v;A||R&&(yield yield Zt(JSON.parse(R)))}}catch(R){f={error:R}}finally{try{!N&&!h&&(g=P.return)&&(yield Zt(g.call(P)))}finally{if(f)throw f.error}}A=!0}catch(R){if(uT(R))return yield Zt(void 0);throw R}finally{A||n.abort()}})}return new pd(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=r.next();e.push(o),n.push(o)}return a.shift()}});return[new pd(()=>i(e),this.controller,this.client),new pd(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return FU({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const o=v2(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function K0e(t,e){return zo(this,arguments,function*(){var r,i,a,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Co("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Co("Attempted to iterate over a response with no body");const u=new X0e,h=new a1,f=qU(t.body);try{for(var g=!0,v=Go(W0e(f)),A;A=yield Zt(v.next()),r=A.done,!r;g=!0){o=A.value,g=!1;const N=o;for(const P of h.decode(N)){const O=u.decode(P);O&&(yield yield Zt(O))}}}catch(N){i={error:N}}finally{try{!g&&!r&&(a=v.return)&&(yield Zt(a.call(v)))}finally{if(i)throw i.error}}for(const N of h.flush()){const P=u.decode(N);P&&(yield yield Zt(P))}})}function W0e(t){return zo(this,arguments,function*(){var n,r,i,a;let o=new Uint8Array;try{for(var u=!0,h=Go(t),f;f=yield Zt(h.next()),n=f.done,!n;u=!0){a=f.value,u=!1;const g=a;if(g==null)continue;const v=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?v2(g):g;let A=new Uint8Array(o.length+v.length);A.set(o),A.set(v,o.length),o=A;let N;for(;(N=$0e(o))!==-1;)yield yield Zt(o.slice(0,N)),o=o.slice(N)}}catch(g){r={error:g}}finally{try{!u&&!n&&(i=h.return)&&(yield Zt(i.call(h)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Zt(o))})}class X0e{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Q0e(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Q0e(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function J0e(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,o=await(async()=>{var u;if(e.options.stream)return da(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):pd.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),f=(u=h==null?void 0:h.split(";")[0])===null||u===void 0?void 0:u.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await n.json():await n.text()})();return da(t).debug(`[${r}] response parsed`,Lc({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b2 extends Promise{constructor(e,n,r=J0e){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new b2(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WU=Symbol("brand.privateNullableHeaders");function*Z0e(t){if(!t)return;if(WU in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():w8(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=w8(r[1])?r[1]:[r[1]];let o=!1;for(const u of a)u!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,u])}}const bh=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,o]of Z0e(r)){const u=a.toLowerCase();i.has(u)||(e.delete(a),i.add(u)),o===null?(e.delete(a),n.add(u)):(e.append(a,o),n.delete(u))}}return{[WU]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u_=t=>{var e,n,r,i,a,o;if(typeof globalThis.process<"u")return(r=(n=(e=Tce)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var XU;class o1{constructor(e){var n,r,i,a,o,u,h,{baseURL:f=u_("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(n=u_("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:v="v1beta"}=e,A=ry(e,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:g,apiVersion:v},A),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(r=N.timeout)!==null&&r!==void 0?r:o1.DEFAULT_TIMEOUT,this.logger=(i=N.logger)!==null&&i!==void 0?i:console;const P="warn";this.logLevel=P,this.logLevel=(o=(a=S8(N.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:S8(u_("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:P,this.fetchOptions=N.fetchOptions,this.maxRetries=(u=N.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(h=N.fetch)!==null&&h!==void 0?h:O0e(),this.encoder=L0e,this._options=N,this.apiKey=g,this.apiVersion=v,this.clientAdapter=N.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=bh([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return bh([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return bh([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Co(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ld}`}defaultIdempotencyKey(){return`stainless-node-retry-${v0e()}`}makeStatusError(e,n,r,i){return ga.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=w0e(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return A0e(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new b2(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,a,o;const u=await e,h=(i=u.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=h),await this.prepareOptions(u);const{req:f,url:g,timeout:v}=await this.buildRequest(u,{retryCount:h-n});await this.prepareRequest(f,{url:g,options:u});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=r===void 0?"":`, retryOf: ${r}`,P=Date.now();if(da(this).debug(`[${A}] sending request`,Lc({retryOfRequestLogID:r,method:u.method,url:g,options:u,headers:f.headers})),!((a=u.signal)===null||a===void 0)&&a.aborted)throw new fT;const O=new AbortController,R=await this.fetchWithTimeout(g,f,v,O).catch(dT),L=Date.now();if(R instanceof globalThis.Error){const F=`retrying, ${n} attempts remaining`;if(!((o=u.signal)===null||o===void 0)&&o.aborted)throw new fT;const q=uT(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(n)return da(this).info(`[${A}] connection ${q?"timed out":"failed"} - ${F}`),da(this).debug(`[${A}] connection ${q?"timed out":"failed"} (${F})`,Lc({retryOfRequestLogID:r,url:g,durationMs:L-P,message:R.message})),this.retryRequest(u,n,r??A);throw da(this).info(`[${A}] connection ${q?"timed out":"failed"} - error; no more retries left`),da(this).debug(`[${A}] connection ${q?"timed out":"failed"} (error; no more retries left)`,Lc({retryOfRequestLogID:r,url:g,durationMs:L-P,message:R.message})),q?new DU:new i1({cause:R})}const U=`[${A}${N}] ${f.method} ${g} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${L-P}ms`;if(!R.ok){const F=await this.shouldRetry(R);if(n&&F){const V=`retrying, ${n} attempts remaining`;return await k0e(R.body),da(this).info(`${U} - ${V}`),da(this).debug(`[${A}] response error (${V})`,Lc({retryOfRequestLogID:r,url:R.url,status:R.status,headers:R.headers,durationMs:L-P})),this.retryRequest(u,n,r??A,R.headers)}const q=F?"error; no more retries left":"error; not retryable";da(this).info(`${U} - ${q}`);const H=await R.text().catch(V=>dT(V).message),G=C0e(H),B=G?void 0:H;throw da(this).debug(`[${A}] response error (${q})`,Lc({retryOfRequestLogID:r,url:R.url,status:R.status,headers:R.headers,message:B,durationMs:Date.now()-P})),this.makeStatusError(R.status,G,B,R.headers)}return da(this).info(U),da(this).debug(`[${A}] response start`,Lc({retryOfRequestLogID:r,url:R.url,status:R.status,headers:R.headers,durationMs:L-P})),{response:R,options:u,controller:O,requestLogID:A,retryOfRequestLogID:r,startTime:P}}async fetchWithTimeout(e,n,r,i){const a=n||{},{signal:o,method:u}=a,h=ry(a,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const f=setTimeout(()=>i.abort(),r),g=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:i.signal},g?{duplex:"half"}:{}),{method:"GET"}),h);u&&(v.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var a;let o;const u=i==null?void 0:i.get("retry-after-ms");if(u){const f=parseFloat(u);Number.isNaN(f)||(o=f)}const h=i==null?void 0:i.get("retry-after");if(h&&!o){const f=parseFloat(h);Number.isNaN(f)?o=Date.parse(h)-Date.now():o=f*1e3}if(!(o&&0<=o&&o<60*1e3)){const f=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,f)}return await I0e(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,o=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return o*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,a;const o=Object.assign({},e),{method:u,path:h,query:f,defaultBaseURL:g}=o,v=this.buildURL(h,f,g);"timeout"in o&&S0e("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:A,body:N}=this.buildBody({options:o}),P=await this.buildHeaders({options:e,method:u,bodyHeaders:A,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:P},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=o.fetchOptions)!==null&&a!==void 0?a:{}),url:v,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let u=bh([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),D0e()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=bh([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:P0e(e)}:this.encoder({body:e,headers:r})}}o1.DEFAULT_TIMEOUT=6e4;class Mi extends o1{constructor(){super(...arguments),this.interactions=new KU(this)}}XU=Mi;Mi.GeminiNextGenAPIClient=XU;Mi.GeminiNextGenAPIClientError=Co;Mi.APIError=ga;Mi.APIConnectionError=i1;Mi.APIConnectionTimeoutError=DU;Mi.APIUserAbortError=fT;Mi.NotFoundError=LU;Mi.ConflictError=BU;Mi.RateLimitError=UU;Mi.BadRequestError=OU;Mi.AuthenticationError=PU;Mi.InternalServerError=VU;Mi.PermissionDeniedError=kU;Mi.UnprocessableEntityError=jU;Mi.toFile=F0e;Mi.Interactions=KU;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eme(t,e){const n={},r=_(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function tme(t,e){const n={},r=_(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function nme(t,e){const n={},r=_(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function rme(t,e){const n={},r=_(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function ime(t,e,n){const r={};if(_(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=_(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&C(e,["displayName"],i),_(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=_(t,["epochCount"]);e!==void 0&&a!=null&&C(e,["tuningTask","hyperparameters","epochCount"],a);const o=_(t,["learningRateMultiplier"]);if(o!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),_(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(_(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(_(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=_(t,["batchSize"]);e!==void 0&&u!=null&&C(e,["tuningTask","hyperparameters","batchSize"],u);const h=_(t,["learningRate"]);if(e!==void 0&&h!=null&&C(e,["tuningTask","hyperparameters","learningRate"],h),_(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(_(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function ame(t,e,n){const r={};let i=_(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const N=_(t,["validationDataset"]);e!==void 0&&N!=null&&C(e,["supervisedTuningSpec"],I8(N))}else if(i==="PREFERENCE_TUNING"){const N=_(t,["validationDataset"]);e!==void 0&&N!=null&&C(e,["preferenceOptimizationSpec"],I8(N))}const a=_(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&C(e,["tunedModelDisplayName"],a);const o=_(t,["description"]);e!==void 0&&o!=null&&C(e,["description"],o);let u=_(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const N=_(t,["epochCount"]);e!==void 0&&N!=null&&C(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(u==="PREFERENCE_TUNING"){const N=_(t,["epochCount"]);e!==void 0&&N!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let h=_(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const N=_(t,["learningRateMultiplier"]);e!==void 0&&N!=null&&C(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(h==="PREFERENCE_TUNING"){const N=_(t,["learningRateMultiplier"]);e!==void 0&&N!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let f=_(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const N=_(t,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&C(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(f==="PREFERENCE_TUNING"){const N=_(t,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&C(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let g=_(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const N=_(t,["adapterSize"]);e!==void 0&&N!=null&&C(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(g==="PREFERENCE_TUNING"){const N=_(t,["adapterSize"]);e!==void 0&&N!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(_(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(_(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=_(t,["labels"]);e!==void 0&&v!=null&&C(e,["labels"],v);const A=_(t,["beta"]);return e!==void 0&&A!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),r}function ome(t,e){const n={},r=_(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=_(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const a=_(t,["trainingDataset"]);a!=null&&yme(a);const o=_(t,["config"]);return o!=null&&ime(o,n),n}function sme(t,e){const n={},r=_(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=_(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const a=_(t,["trainingDataset"]);a!=null&&xme(a,n,e);const o=_(t,["config"]);return o!=null&&ame(o,n,e),n}function lme(t,e){const n={},r=_(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function cme(t,e){const n={},r=_(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function ume(t,e,n){const r={},i=_(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const a=_(t,["pageToken"]);e!==void 0&&a!=null&&C(e,["_query","pageToken"],a);const o=_(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function dme(t,e,n){const r={},i=_(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const a=_(t,["pageToken"]);e!==void 0&&a!=null&&C(e,["_query","pageToken"],a);const o=_(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function fme(t,e){const n={},r=_(t,["config"]);return r!=null&&ume(r,n),n}function hme(t,e){const n={},r=_(t,["config"]);return r!=null&&dme(r,n),n}function pme(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=_(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const a=_(t,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>QU(u))),C(n,["tuningJobs"],o)}return n}function mme(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=_(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const a=_(t,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>mT(u))),C(n,["tuningJobs"],o)}return n}function gme(t,e){const n={},r=_(t,["name"]);r!=null&&C(n,["model"],r);const i=_(t,["name"]);return i!=null&&C(n,["endpoint"],i),n}function yme(t,e){const n={};if(_(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(_(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=_(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),C(n,["examples","examples"],i)}return n}function xme(t,e,n){const r={};let i=_(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=_(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=_(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let a=_(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=_(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=_(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(_(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function QU(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=_(t,["name"]);i!=null&&C(n,["name"],i);const a=_(t,["state"]);a!=null&&C(n,["state"],hU(a));const o=_(t,["createTime"]);o!=null&&C(n,["createTime"],o);const u=_(t,["tuningTask","startTime"]);u!=null&&C(n,["startTime"],u);const h=_(t,["tuningTask","completeTime"]);h!=null&&C(n,["endTime"],h);const f=_(t,["updateTime"]);f!=null&&C(n,["updateTime"],f);const g=_(t,["description"]);g!=null&&C(n,["description"],g);const v=_(t,["baseModel"]);v!=null&&C(n,["baseModel"],v);const A=_(t,["_self"]);return A!=null&&C(n,["tunedModel"],gme(A)),n}function mT(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=_(t,["name"]);i!=null&&C(n,["name"],i);const a=_(t,["state"]);a!=null&&C(n,["state"],hU(a));const o=_(t,["createTime"]);o!=null&&C(n,["createTime"],o);const u=_(t,["startTime"]);u!=null&&C(n,["startTime"],u);const h=_(t,["endTime"]);h!=null&&C(n,["endTime"],h);const f=_(t,["updateTime"]);f!=null&&C(n,["updateTime"],f);const g=_(t,["error"]);g!=null&&C(n,["error"],g);const v=_(t,["description"]);v!=null&&C(n,["description"],v);const A=_(t,["baseModel"]);A!=null&&C(n,["baseModel"],A);const N=_(t,["tunedModel"]);N!=null&&C(n,["tunedModel"],N);const P=_(t,["preTunedModel"]);P!=null&&C(n,["preTunedModel"],P);const O=_(t,["supervisedTuningSpec"]);O!=null&&C(n,["supervisedTuningSpec"],O);const R=_(t,["preferenceOptimizationSpec"]);R!=null&&C(n,["preferenceOptimizationSpec"],R);const L=_(t,["tuningDataStats"]);L!=null&&C(n,["tuningDataStats"],L);const U=_(t,["encryptionSpec"]);U!=null&&C(n,["encryptionSpec"],U);const F=_(t,["partnerModelTuningSpec"]);F!=null&&C(n,["partnerModelTuningSpec"],F);const q=_(t,["customBaseModel"]);q!=null&&C(n,["customBaseModel"],q);const H=_(t,["experiment"]);H!=null&&C(n,["experiment"],H);const G=_(t,["labels"]);G!=null&&C(n,["labels"],G);const B=_(t,["outputUri"]);B!=null&&C(n,["outputUri"],B);const z=_(t,["pipelineJob"]);z!=null&&C(n,["pipelineJob"],z);const V=_(t,["serviceAccount"]);V!=null&&C(n,["serviceAccount"],V);const ee=_(t,["tunedModelDisplayName"]);ee!=null&&C(n,["tunedModelDisplayName"],ee);const Q=_(t,["veoTuningSpec"]);return Q!=null&&C(n,["veoTuningSpec"],Q),n}function vme(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=_(t,["name"]);i!=null&&C(n,["name"],i);const a=_(t,["metadata"]);a!=null&&C(n,["metadata"],a);const o=_(t,["done"]);o!=null&&C(n,["done"],o);const u=_(t,["error"]);return u!=null&&C(n,["error"],u),n}function I8(t,e){const n={},r=_(t,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const i=_(t,["vertexDatasetResource"]);return i!=null&&C(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bme extends rl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xu(Js.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:rT.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=cme(e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>mT(g))}else{const f=lme(e);return u=St("{name}",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>QU(g))}}async listInternal(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=hme(e);return u=St("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=mme(g),A=new e8;return Object.assign(A,v),A})}else{const f=fme(e);return u=St("tunedModels",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=pme(g),A=new e8;return Object.assign(A,v),A})}}async cancel(e){var n,r,i,a;let o,u="",h={};if(this.apiClient.isVertexAI()){const f=tme(e);return u=St("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=rme(g),A=new t8;return Object.assign(A,v),A})}else{const f=eme(e);return u=St("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:g.headers},A})),o.then(g=>{const v=nme(g),A=new t8;return Object.assign(A,v),A})}}async tuneInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=sme(e,e);return a=St("tuningJobs",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>mT(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ome(e);return a=St("tunedModels",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>vme(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wme{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Eme=1024*1024*8,_me=3,Ame=1e3,Tme=2,ay="x-goog-upload-status";async function Sme(t,e,n){var r;const i=await JU(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ay])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Cme(t,e,n){var r;const i=await JU(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ay])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=sU(a),u=new h2;return Object.assign(u,o),u}async function JU(t,e,n){var r,i;let a=0,o=0,u=new iT(new Response),h="upload";for(a=t.size;o<a;){const f=Math.min(Eme,a-o),g=t.slice(o,o+f);o+f>=a&&(h+=", finalize");let v=0,A=Ame;for(;v<_me&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(o),"Content-Length":String(f)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[ay]));)v++,await Nme(A),A=A*Tme;if(o+=f,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[ay])!=="active")break;if(a<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Ime(t){return{size:t.size,type:t.type}}function Nme(t){return new Promise(e=>setTimeout(e,t))}class Rme{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Sme(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Cme(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ime(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mme{create(e,n,r){return new Dme(e,n,r)}}class Dme{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N8="x-goog-api-key";class Ome{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(N8)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(N8,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pme="gl-node/";class kme{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Mi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Nce(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new Ome(this.apiKey);this.apiClient=new Ipe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Pme+"web",uploader:new Rme,downloader:new wme}),this.models=new Ype(this.apiClient),this.live=new Fpe(this.apiClient,i,new Mme),this.batches=new ide(this.apiClient),this.chats=new Ude(this.models,this.apiClient),this.caches=new Lde(this.apiClient),this.files=new Wde(this.apiClient),this.operations=new Kpe(this.apiClient),this.authTokens=new u0e(this.apiClient),this.tunings=new bme(this.apiClient),this.fileSearchStores=new x0e(this.apiClient)}}const Lme=({transactions:t,products:e,vendors:n,accounts:r,userProfile:i})=>{const[a,o]=le.useState([{role:"model",text:`Greetings. I am your Strategic AI Advisor for ${i.name}. I have analyzed your current ledger and inventory. How can I assist with your business intelligence today?`}]),[u,h]=le.useState(""),[f,g]=le.useState(!1),v=le.useRef(null);le.useEffect(()=>{var N;(N=v.current)==null||N.scrollIntoView({behavior:"smooth"})},[a]);const A=async()=>{if(!u.trim()||f)return;const N={role:"user",text:u};o(O=>[...O,N]);const P=u;h(""),g(!0);try{const O=new kme({apiKey:"PLACEHOLDER_API_KEY"}),R={company:i.name,branch:i.branch,liquidity:r.map(F=>({name:F.name,balance:F.balance})),inventoryStatus:e.map(F=>({name:F.name,stock:F.stock,threshold:F.lowStockThreshold})),recentPerformance:t.slice(0,10).map(F=>({type:F.type,amount:F.amount,date:F.date})),vendorDebt:n.map(F=>({name:F.name,balance:F.totalBalance}))},L=await O.models.generateContentStream({model:"gemini-3-pro-preview",contents:P,config:{systemInstruction:`You are a senior business intelligence consultant for ${i.name}. Provide professional, data-driven strategic advice based on this context: ${JSON.stringify(R)}. Be concise and actionable.`}});let U="";o(F=>[...F,{role:"model",text:""}]);for await(const F of L){const q=F.text||"";U+=q,o(H=>{const G=[...H];return G[G.length-1].text=U,G})}}catch(O){console.error("Gemini SDK Error:",O),o(R=>[...R,{role:"model",text:"I apologize, but I encountered an error accessing the intelligence core. Please check your connectivity or try again later."}])}finally{g(!1)}};return x.jsx("div",{className:"flex flex-col h-[calc(100vh-8rem)] animate-in fade-in duration-700",children:x.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] flex-1 flex flex-col shadow-2xl border border-slate-800 overflow-hidden relative",children:[x.jsxs("div",{className:"px-10 py-6 border-b border-slate-800 flex justify-between items-center bg-slate-900/80 backdrop-blur-md z-10",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center text-xl shadow-lg shadow-indigo-600/20",children:""}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-white font-black uppercase text-sm tracking-tighter",children:"Strategic Intelligence Terminal"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),x.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Gemini 3 Pro Core Active"})]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Authorized Branch"}),x.jsx("p",{className:"text-[10px] font-bold text-indigo-400",children:i.branch})]})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-8 custom-scrollbar relative",children:[x.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-indigo-600/5 blur-[120px] rounded-full pointer-events-none"}),a.map((N,P)=>x.jsx("div",{className:`flex ${N.role==="user"?"justify-end":"justify-start"} animate-in slide-in-from-bottom-2 duration-300`,children:x.jsx("div",{className:`max-w-[80%] px-8 py-6 rounded-[2rem] text-sm leading-relaxed ${N.role==="user"?"bg-indigo-600 text-white font-semibold rounded-tr-lg shadow-xl shadow-indigo-600/10":"bg-slate-800/50 text-slate-200 border border-slate-700/50 rounded-tl-lg backdrop-blur-sm shadow-sm"}`,children:N.text||(f&&P===a.length-1?x.jsxs("div",{className:"flex gap-1 py-1",children:[x.jsx("div",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce"}),x.jsx("div",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce [animation-delay:-.3s]"}),x.jsx("div",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce [animation-delay:-.5s]"})]}):"")})},P)),x.jsx("div",{ref:v})]}),x.jsxs("div",{className:"p-8 bg-slate-900 border-t border-slate-800",children:[x.jsxs("div",{className:"max-w-4xl mx-auto flex gap-4",children:[x.jsx("input",{type:"text",className:"flex-1 bg-slate-800 border border-slate-700 rounded-2xl px-8 py-4 text-white font-bold text-sm outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-600",placeholder:"Ask about inventory trends, cash flow analysis, or vendor optimization...",value:u,onChange:N=>h(N.target.value),onKeyDown:N=>N.key==="Enter"&&A()}),x.jsx("button",{onClick:A,disabled:f||!u.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-10 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-indigo-600/20 active:scale-95 transition-all disabled:opacity-20",children:"Consult AI"})]}),x.jsx("p",{className:"text-center text-[9px] font-bold text-slate-600 uppercase tracking-widest mt-4",children:"AI may display inaccuracies; verify critical business decisions with ledger audits."})]})]})})},Bme=({transactions:t,accounts:e,customers:n,vendors:r,products:i})=>{const[a,o]=le.useState("BALANCE_SHEET"),[u,h]=le.useState(""),[f,g]=le.useState(""),v=()=>{const R=new Date;return R.getFullYear()+"-"+String(R.getMonth()+1).padStart(2,"0")+"-"+String(R.getDate()).padStart(2,"0")},A=()=>{const R=new Date;return R.getFullYear()+"-"+String(R.getMonth()+1).padStart(2,"0")+"-01"};we.useEffect(()=>{u||h(A()),f||g(v())},[]);const N=le.useMemo(()=>t.filter(R=>{const L=R.date.split("T")[0];return(!u||L>=u)&&(!f||L<=f)}),[t,u,f]),P=le.useMemo(()=>{const R=e.reduce((B,z)=>B+Number(z.balance||0),0),L=n.reduce((B,z)=>B+Number(z.totalCredit||0),0),U=i.reduce((B,z)=>B+Number(z.stock||0)*Number(z.cost||0),0),F=R+L+U,q=r.reduce((B,z)=>B+Number(z.totalBalance||0),0),H=q,G=F-H;return{assets:{cashAndBank:R,accountsReceivable:L,inventory:U,total:F},liabilities:{accountsPayable:q,total:H},equity:{total:G}}},[e,n,r,i]),O=le.useMemo(()=>{const R=V=>{var Q;if(V.costBasis!==void 0)return V.costBasis;let ee=0;return(Q=V.items)==null||Q.forEach(X=>{const K=i.find(ge=>ge.id===X.productId);K&&(ee+=Number(K.cost||0)*Number(X.quantity))}),ee},L=N.filter(V=>V.type==="SALE"||V.type==="SALE_HISTORY_IMPORT").reduce((V,ee)=>V+Number(ee.amount||0),0);let U=0;N.forEach(V=>{V.type==="SALE"&&(U+=R(V))});const F=L-U,q=L>0?F/L*100:0,H=N.filter(V=>V.type==="EXPENSE").reduce((V,ee)=>V+Number(ee.amount||0),0),G=F-H,B=G,z=L>0?B/L*100:0;return{revenue:L,cogs:U,grossProfit:F,grossMargin:q,expenses:H,operatingIncome:G,netIncome:B,netMargin:z}},[N,i]);return x.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-20",children:[x.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"Financial Reports"}),x.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:"Comprehensive accounting statements"})]})}),x.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 p-8 shadow-sm",children:x.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-end",children:[x.jsxs("div",{className:"flex gap-3 flex-1",children:[x.jsx("button",{onClick:()=>o("BALANCE_SHEET"),className:`flex-1 py-4 px-6 rounded-2xl font-black text-sm uppercase tracking-wider transition-all ${a==="BALANCE_SHEET"?"bg-indigo-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:" Balance Sheet"}),x.jsx("button",{onClick:()=>o("INCOME_STATEMENT"),className:`flex-1 py-4 px-6 rounded-2xl font-black text-sm uppercase tracking-wider transition-all ${a==="INCOME_STATEMENT"?"bg-indigo-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:" Income Statement"})]}),a==="INCOME_STATEMENT"&&x.jsxs("div",{className:"flex gap-4 items-end",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"From Date"}),x.jsx("input",{type:"date",value:u,onChange:R=>h(R.target.value),className:"px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none font-mono text-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"To Date"}),x.jsx("input",{type:"date",value:f,onChange:R=>g(R.target.value),className:"px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none font-mono text-sm"})]})]})]})}),a==="BALANCE_SHEET"&&x.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-10 shadow-sm",children:[x.jsxs("div",{className:"text-center mb-10",children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tight",children:"Balance Sheet"}),x.jsxs("p",{className:"text-slate-400 font-bold text-sm mt-2",children:["As of ",v()]})]}),x.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"border-b-2 border-slate-900 pb-3",children:x.jsx("h4",{className:"text-lg font-black text-slate-900 uppercase tracking-wide",children:"Assets"})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Cash & Bank Accounts"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",P.assets.cashAndBank.toLocaleString()]})]}),x.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Accounts Receivable"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",P.assets.accountsReceivable.toLocaleString()]})]}),x.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Inventory (at cost)"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",P.assets.inventory.toLocaleString()]})]})]}),x.jsxs("div",{className:"flex justify-between items-center pt-4 border-t-2 border-slate-900",children:[x.jsx("span",{className:"text-base font-black text-slate-900 uppercase",children:"Total Assets"}),x.jsxs("span",{className:"text-lg font-black font-mono text-indigo-600",children:["Rs. ",P.assets.total.toLocaleString()]})]})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"border-b-2 border-slate-900 pb-3",children:x.jsx("h4",{className:"text-lg font-black text-slate-900 uppercase tracking-wide",children:"Liabilities"})}),x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Accounts Payable"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",P.liabilities.accountsPayable.toLocaleString()]})]})}),x.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-200",children:[x.jsx("span",{className:"text-sm font-black text-slate-700 uppercase",children:"Total Liabilities"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",P.liabilities.total.toLocaleString()]})]}),x.jsx("div",{className:"border-b-2 border-slate-900 pb-3 mt-8",children:x.jsx("h4",{className:"text-lg font-black text-slate-900 uppercase tracking-wide",children:"Equity"})}),x.jsxs("div",{className:"flex justify-between items-center py-2",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Owner's Equity"}),x.jsxs("span",{className:"text-sm font-black font-mono text-slate-900",children:["Rs. ",P.equity.total.toLocaleString()]})]}),x.jsxs("div",{className:"flex justify-between items-center pt-4 border-t-2 border-slate-900",children:[x.jsx("span",{className:"text-base font-black text-slate-900 uppercase",children:"Total Liabilities & Equity"}),x.jsxs("span",{className:"text-lg font-black font-mono text-indigo-600",children:["Rs. ",(P.liabilities.total+P.equity.total).toLocaleString()]})]})]})]}),x.jsx("div",{className:"mt-10 p-6 bg-slate-50 rounded-2xl border border-slate-200",children:x.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm font-black text-slate-600",children:[x.jsxs("span",{children:["Assets: Rs. ",P.assets.total.toLocaleString()]}),x.jsx("span",{className:"text-slate-300",children:"="}),x.jsxs("span",{children:["Liabilities: Rs. ",P.liabilities.total.toLocaleString()]}),x.jsx("span",{className:"text-slate-300",children:"+"}),x.jsxs("span",{children:["Equity: Rs. ",P.equity.total.toLocaleString()]}),Math.abs(P.assets.total-(P.liabilities.total+P.equity.total))<.01?x.jsx("span",{className:"ml-4 text-emerald-600",children:" Balanced"}):x.jsx("span",{className:"ml-4 text-rose-600",children:" Unbalanced"})]})})]}),a==="INCOME_STATEMENT"&&x.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-10 shadow-sm",children:[x.jsxs("div",{className:"text-center mb-10",children:[x.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tight",children:"Comprehensive Income Statement"}),x.jsxs("p",{className:"text-slate-400 font-bold text-sm mt-2",children:["For the period: ",u||"Start"," to ",f||"End"]})]}),x.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{className:"flex justify-between items-center py-3 border-b-2 border-slate-900",children:[x.jsx("span",{className:"text-base font-black text-slate-900 uppercase",children:"Revenue (Sales)"}),x.jsxs("span",{className:"text-lg font-black font-mono text-slate-900",children:["Rs. ",O.revenue.toLocaleString()]})]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center py-2",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600 pl-4",children:"Less: Cost of Goods Sold"}),x.jsxs("span",{className:"text-sm font-black font-mono text-rose-600",children:["(Rs. ",O.cogs.toLocaleString(),")"]})]}),x.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-slate-200",children:[x.jsx("span",{className:"text-base font-black text-slate-900 uppercase",children:"Gross Profit"}),x.jsxs("div",{className:"text-right",children:[x.jsxs("span",{className:"text-lg font-black font-mono text-emerald-600",children:["Rs. ",O.grossProfit.toLocaleString()]}),x.jsxs("p",{className:"text-xs font-bold text-slate-400 mt-1",children:[O.grossMargin.toFixed(1),"% margin"]})]})]})]}),x.jsxs("div",{className:"space-y-4 pt-4",children:[x.jsxs("div",{className:"flex justify-between items-center py-2",children:[x.jsx("span",{className:"text-sm font-bold text-slate-600 pl-4",children:"Less: Operating Expenses"}),x.jsxs("span",{className:"text-sm font-black font-mono text-rose-600",children:["(Rs. ",O.expenses.toLocaleString(),")"]})]}),x.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-slate-200",children:[x.jsx("span",{className:"text-base font-black text-slate-900 uppercase",children:"Operating Income"}),x.jsxs("span",{className:"text-lg font-black font-mono text-slate-900",children:["Rs. ",O.operatingIncome.toLocaleString()]})]})]}),x.jsxs("div",{className:"flex justify-between items-center py-4 border-t-2 border-slate-900 bg-indigo-50 -mx-6 px-6 rounded-2xl",children:[x.jsx("span",{className:"text-lg font-black text-slate-900 uppercase",children:"Net Income"}),x.jsxs("div",{className:"text-right",children:[x.jsxs("span",{className:"text-2xl font-black font-mono text-indigo-600",children:["Rs. ",O.netIncome.toLocaleString()]}),x.jsxs("p",{className:"text-xs font-bold text-slate-500 mt-1",children:[O.netMargin.toFixed(1),"% net margin"]})]})]})]})]})]})},jme=()=>{const[t,e]=le.useState(!0),[n,r]=le.useState(!1),[i,a]=le.useState(""),[o,u]=le.useState("LOGIN"),[h,f]=le.useState(null),[g,v]=le.useState([]),[A,N]=le.useState([]),[P,O]=le.useState([]),[R,L]=le.useState([]),[U,F]=le.useState([]),[q,H]=le.useState([]),[G,B]=le.useState([]),[z,V]=le.useState([]),[ee,Q]=le.useState({name:"PRASAMA ERP",branch:"Bookshop",allBranches:["Bookshop","Shop 2"],phone:"",isAdmin:!1}),[X,K]=le.useState([]),[ge,re]=le.useState([]),te=()=>{const he=new Date;return he.getFullYear()+"-"+String(he.getMonth()+1).padStart(2,"0")+"-"+String(he.getDate()).padStart(2,"0")},se=()=>{const he=new Date,ve=he.getFullYear()+"-"+String(he.getMonth()+1).padStart(2,"0")+"-"+String(he.getDate()).padStart(2,"0"),$e=String(he.getHours()).padStart(2,"0")+":"+String(he.getMinutes()).padStart(2,"0")+":"+String(he.getSeconds()).padStart(2,"0");return`${ve}T${$e}`},_e=he=>JSON.parse(JSON.stringify(he,(ve,$e)=>$e===void 0?null:$e)),[ke,Ke]=le.useState({cart:[],discount:0,discountPercent:0,globalDiscountType:"AMT",paymentMethod:"CASH",accountId:"cash",search:"",categoryId:"All",chequeNumber:"",chequeDate:te(),isAdvance:!1,advanceAmount:0});le.useEffect(()=>{const he=localStorage.getItem("prasama_local_auth");he?(Q(JSON.parse(he)),u("DASHBOARD")):u("LOGIN"),e(!1)},[]),le.useEffect(()=>{if(o==="LOGIN"||t)return;const he=[ns(It.products,ve=>v(ve)),ns(It.categories,ve=>N(ve)),ns(It.transactions,ve=>O(ve)),ns(It.accounts,ve=>L(ve)),ns(It.vendors,ve=>H(ve)),ns(It.customers,ve=>B(ve)),ns(It.recurringExpenses,ve=>K(ve)),ns(It.daySessions,ve=>re(ve)),ns(It.purchaseOrders,ve=>F(ve)),ns(It.quotations,ve=>V(ve)),kH(It.profile,"main",ve=>Q($e=>({...$e,...ve})))];return()=>he.forEach(ve=>ve())},[o,t]);const ce=()=>{localStorage.removeItem("prasama_local_auth"),u("LOGIN")},fe=he=>{const ve={...he,allBranches:["Main Branch"],branch:"Main Branch"};localStorage.setItem("prasama_local_auth",JSON.stringify(ve)),Q(ve),u("DASHBOARD")},Ae=async he=>{try{const ve=ee.branch;if(he.items)for(const mt of he.items){const dt=g.find(Ee=>Ee.id===mt.productId);if(dt){const Ee={...dt.branchStocks||{}},nt=Ee[ve]!==void 0?Ee[ve]:dt.stock,st=Math.max(0,Number(nt)-Number(mt.quantity));Ee[ve]=st,await nn(It.products,dt.id,{...dt,branchStocks:Ee,stock:Object.values(Ee).reduce((Tt,Ct)=>Tt+Ct,0)})}}const $e=he.paymentMethod==="CREDIT"?Number(he.amount):Number(he.balanceDue)||0;if($e>0&&he.customerId){const mt=G.find(dt=>dt.id===he.customerId);mt&&await nn(It.customers,mt.id,{...mt,totalCredit:(Number(mt.totalCredit)||0)+$e})}let We=(he.items||[]).reduce((mt,dt)=>{const Ee=g.find(nt=>nt.id===dt.productId);return mt+Number((Ee==null?void 0:Ee.cost)||0)*Number(dt.quantity)},0);const ye=_e({...he,type:"SALE",date:he.date||se(),branchId:ve,costBasis:We,updatedAt:new Date().toISOString(),customerId:he.customerId||null,vendorId:he.vendorId||null,accountId:he.accountId||null});await nn(It.transactions,he.id,ye);const Ie=Number(he.paidAmount)||(he.paymentMethod!=="CREDIT"?Number(he.amount):0);if(Ie>0){const mt=R.find(dt=>dt.id===ye.accountId);mt&&await nn(It.accounts,mt.id,{...mt,balance:Number(mt.balance)+Ie})}}catch(ve){console.error("TRANSACTION_FAILED:",ve),alert(`A critical error occurred while saving the sale: ${ve instanceof Error?ve.message:String(ve)}`)}},He=async he=>{const ve=P.find($e=>$e.id===he.id);if(ve){if(ve.customerId){const $e=G.find(We=>We.id===ve.customerId);if($e){let We=ve.paymentMethod==="CREDIT"?Number(ve.amount):Number(ve.balanceDue)||0,ye=he.paymentMethod==="CREDIT"?Number(he.amount):Number(he.balanceDue)||0;ve.type==="CREDIT_PAYMENT"&&(We=-Number(ve.amount),ye=-Number(he.amount));const Ie=ye-We;await nn(It.customers,$e.id,{...$e,totalCredit:(Number($e.totalCredit)||0)+Ie})}}if(ve.vendorId){const $e=q.find(We=>We.id===ve.vendorId);if($e){let We=0;ve.type==="PURCHASE"?We=(Number(he.amount)||0)-(Number(ve.amount)||0):ve.type==="CREDIT_PAYMENT"&&(We=(Number(ve.amount)||0)-(Number(he.amount)||0)),await nn(It.vendors,$e.id,{...$e,totalBalance:(Number($e.totalBalance)||0)+We})}}if(ve.accountId){const $e=R.find(We=>We.id===ve.accountId);if($e){const We=["PURCHASE","EXPENSE","CREDIT_PAYMENT"].includes(ve.type);let ye=0;if(We)ye=(Number(ve.amount)||0)-(Number(he.amount)||0);else{const Ie=Number(ve.paidAmount)||(ve.paymentMethod!=="CREDIT"?Number(ve.amount):0);ye=(Number(he.paidAmount)||(he.paymentMethod!=="CREDIT"?Number(he.amount):0))-Ie}await nn(It.accounts,$e.id,{...$e,balance:Number($e.balance)+ye})}}if(ve.type==="SALE"&&ve.items&&he.items){const $e=ee.branch,We=new Map;for(const ye of ve.items){const Ie=We.get(ye.productId)||0;We.set(ye.productId,Ie+Number(ye.quantity))}for(const ye of he.items){const Ie=We.get(ye.productId)||0;We.set(ye.productId,Ie-Number(ye.quantity))}for(const[ye,Ie]of We.entries())if(Ie!==0){const mt=g.find(dt=>dt.id===ye);if(mt){const dt={...mt.branchStocks||{}},Ee=dt[$e]!==void 0?dt[$e]:mt.stock;dt[$e]=Math.max(0,Number(Ee)+Ie),await nn(It.products,mt.id,{...mt,branchStocks:dt,stock:Object.values(dt).reduce((nt,st)=>nt+st,0)})}}}await nn(It.transactions,he.id,_e(he))}},ot=async he=>{const ve=P.find($e=>$e.id===he);if(ve){if(ve.customerId){const $e=G.find(We=>We.id===ve.customerId);if($e){let We=ve.paymentMethod==="CREDIT"?Number(ve.amount):Number(ve.balanceDue)||0;ve.type==="CREDIT_PAYMENT"&&(We=-Number(ve.amount)),await nn(It.customers,$e.id,{...$e,totalCredit:Math.max(0,(Number($e.totalCredit)||0)-We)})}}if(ve.vendorId){const $e=q.find(We=>We.id===ve.vendorId);if($e){let We=0;ve.type==="PURCHASE"?We=-Number(ve.amount):ve.type==="CREDIT_PAYMENT"&&(We=Number(ve.amount)),await nn(It.vendors,$e.id,{...$e,totalBalance:(Number($e.totalBalance)||0)+We})}}if(ve.accountId){const $e=R.find(We=>We.id===ve.accountId);if($e){const We=["PURCHASE","EXPENSE","CREDIT_PAYMENT"].includes(ve.type),ye=Number(ve.paidAmount)||(ve.paymentMethod!=="CREDIT"?Number(ve.amount):0),Ie=We?Number(ve.amount):-ye;await nn(It.accounts,$e.id,{...$e,balance:Number($e.balance)+Ie})}}if(ve.type==="SALE"&&ve.items){const $e=ee.branch;for(const We of ve.items){const ye=g.find(Ie=>Ie.id===We.productId);if(ye){const Ie={...ye.branchStocks||{}},mt=Ie[$e]!==void 0?Ie[$e]:ye.stock;Ie[$e]=Number(mt)+Number(We.quantity),await nn(It.products,ye.id,{...ye,branchStocks:Ie,stock:Object.values(Ie).reduce((dt,Ee)=>dt+Ee,0)})}}}await ch(It.transactions,he)}},Ye=async he=>{try{const ve=`CP-${Date.now()}`,$e=_e({...he,id:ve,date:se(),branchId:ee.branch,updatedAt:new Date().toISOString()});if(await nn(It.transactions,ve,$e),he.customerId){const Ie=G.find(mt=>mt.id===he.customerId);if(Ie){const mt=Number(Ie.totalCredit)||0,dt=Number(he.amount)||0,Ee=Math.max(0,mt-dt);await nn(It.customers,Ie.id,{...Ie,totalCredit:Ee})}}const We=he.accountId||(he.paymentMethod==="CASH"?"cash":void 0),ye=R.find(Ie=>Ie.id===We||he.paymentMethod==="CASH"&&Ie.id==="cash");if(ye){const Ie=Number(ye.balance)||0,mt=Number(he.amount)||0;await nn(It.accounts,ye.id,{...ye,balance:Ie+mt})}if(he.parentTxId){const Ie=P.find(mt=>mt.id===he.parentTxId);if(Ie){const mt=Number(he.amount)||0,dt=_e({...Ie,paidAmount:(Number(Ie.paidAmount)||0)+mt,balanceDue:Math.max(0,(Number(Ie.balanceDue)||0)-mt),updatedAt:new Date().toISOString()});await nn(It.transactions,Ie.id,dt)}}}catch(ve){console.error("REPAYMENT FAILURE:",ve),alert(`SYSTEM ERROR: Unable to process repayment. ${ve.message}`)}},Ce=async he=>{const ve=U.find(mt=>mt.id===he);if(!ve||ve.status!=="PENDING")return;const $e={...ve,status:"RECEIVED",receivedDate:new Date().toISOString()};await nn(It.purchaseOrders,ve.id,$e);const We=ee.branch;for(const mt of ve.items){const dt=g.find(Ee=>Ee.id===mt.productId);if(dt){const Ee={...dt.branchStocks||{}},nt=Ee[We]!==void 0?Ee[We]:dt.stock;Ee[We]=Number(nt)+Number(mt.quantity),await nn(It.products,dt.id,{...dt,branchStocks:Ee,stock:Object.values(Ee).reduce((st,Tt)=>st+Tt,0),cost:Number(mt.cost)})}}const ye=`PU-${Date.now()}`,Ie=_e({id:ye,date:se(),type:"PURCHASE",amount:ve.totalAmount,paymentMethod:ve.paymentMethod,accountId:ve.accountId,vendorId:ve.vendorId,branchId:We,description:`Stock Received against PO: ${ve.id}`,chequeNumber:ve.chequeNumber,chequeDate:ve.chequeDate,updatedAt:new Date().toISOString()});if(await nn(It.transactions,ye,Ie),ve.paymentMethod==="CREDIT"){const mt=q.find(dt=>dt.id===ve.vendorId);mt&&await nn(It.vendors,mt.id,{...mt,totalBalance:(Number(mt.totalBalance)||0)+ve.totalAmount})}else{const mt=R.find(dt=>dt.id===ve.accountId);mt&&await nn(It.accounts,mt.id,{...mt,balance:Number(mt.balance)-ve.totalAmount})}},et=async he=>{await ko(It.products,he)},Be=()=>{const he={products:g,categories:A,transactions:P,accounts:R,vendors:q,customers:G,purchaseOrders:U,quotations:z,recurringExpenses:X,daySessions:ge,userProfile:ee,version:"16.0_STABLE",timestamp:new Date().toISOString()},ve=new Blob([JSON.stringify(he,null,2)],{type:"application/json"}),$e=URL.createObjectURL(ve),We=document.createElement("a");We.href=$e,We.download=`PRASAMA_BACKUP_GLOBAL_${te()}.json`,We.click()},ct=async he=>{var We;const ve=(We=he.target.files)==null?void 0:We[0];if(!ve)return;const $e=new FileReader;$e.onload=async ye=>{var Ie;try{const mt=(Ie=ye.target)==null?void 0:Ie.result,dt=JSON.parse(mt);r(!0),a("Synchronizing Global Core..."),dt.products&&await ko(It.products,dt.products),dt.categories&&await ko(It.categories,dt.categories),dt.transactions&&await ko(It.transactions,dt.transactions),dt.accounts&&await ko(It.accounts,dt.accounts),dt.vendors&&await ko(It.vendors,dt.vendors),dt.customers&&await ko(It.customers,dt.customers),dt.purchaseOrders&&await ko(It.purchaseOrders,dt.purchaseOrders),dt.quotations&&await ko(It.quotations,dt.quotations),dt.recurringExpenses&&await ko(It.recurringExpenses,dt.recurringExpenses),dt.daySessions&&await ko(It.daySessions,dt.daySessions),dt.userProfile&&await nn(It.profile,"main",dt.userProfile),a("Recovery Complete."),setTimeout(()=>{r(!1),window.location.reload()},800)}catch(mt){alert(`IMPORT FAILED: ${mt.message}`),r(!1)}},$e.readAsText(ve)},rt=(he,ve)=>{f({type:he,id:ve}),he==="PO"||he==="VENDOR"?u("PURCHASES"):he==="CUSTOMER"?u("CUSTOMERS"):he==="SALE"&&u("SALES_HISTORY")},je=ee.branch,yt=ge.filter(he=>he.branchId===je),wt=yt.find(he=>he.date===te()),Le=g.map(he=>({...he,stock:he.stock}));return t||n?x.jsx("div",{className:"min-h-screen bg-[#0f172a] flex items-center justify-center p-6",children:x.jsxs("div",{className:"text-center space-y-4",children:[x.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),x.jsx("p",{className:"text-white font-black text-xs uppercase tracking-[0.5em]",children:i||"Initializing..."})]})}):o==="LOGIN"?x.jsx(Ace,{onLogin:fe,onSignUp:fe,userProfile:ee}):(ge.find(he=>he.date===te()&&(he.branchId===je||!he.branchId)),x.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50 selection:bg-indigo-100 selection:text-indigo-700",children:[x.jsx(LH,{currentView:o,setView:u,userProfile:ee,onEditProfile:()=>u("SETTINGS"),onLogout:ce,onSwitchBranch:he=>{const ve={...ee,branch:he};Q(ve),nn(It.profile,"main",ve)}}),x.jsx("main",{className:"flex-1 overflow-y-auto bg-[#fcfcfc]",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 md:px-10 md:py-12",children:[o==="DASHBOARD"&&x.jsx(Ile,{transactions:P,products:Le,categories:A,accounts:R,vendors:q,customers:G,daySessions:yt,purchaseOrders:U,onNavigate:u,onUpdateProduct:he=>nn(It.products,he.id,he),onJumpTo:rt}),o==="POS"&&x.jsx(pce,{accounts:R,products:Le,customers:G,transactions:P,categories:A,userProfile:ee,onUpsertCustomer:he=>nn(It.customers,he.id,he),onUpdateProduct:he=>nn(It.products,he.id,he),onCompleteSale:Ae,posSession:ke,setPosSession:Ke,onQuickOpenDay:he=>nn(It.daySessions,te()+je,{date:te(),openingBalance:he,status:"OPEN",branchId:je,id:te()+je}),onGoToFinance:()=>u("FINANCE"),activeSession:wt}),o==="QUOTATIONS"&&x.jsx(Ece,{products:Le,customers:G,categories:A,userProfile:ee,quotations:z,onUpsertQuotation:he=>nn(It.quotations,he.id,he),onDeleteQuotation:he=>ch(It.quotations,he)}),o==="SALES_HISTORY"&&x.jsx(wce,{jumpTarget:h,clearJump:()=>f(null),transactions:P,products:g,customers:G,userProfile:ee,accounts:R,daySessions:ge,onUpdateTransaction:He,onDeleteTransaction:ot}),o==="INVENTORY"&&x.jsx(mce,{products:Le,categories:A,vendors:q,userProfile:ee,onAddCategory:he=>{const ve={id:`cat-${Date.now()}`,name:he.toUpperCase()};return nn(It.categories,ve.id,ve),ve},onUpsertCategory:he=>nn(It.categories,he.id,he),onDeleteCategory:he=>ch(It.categories,he),onUpsertVendor:he=>nn(It.vendors,he.id,he),onUpsertProduct:he=>nn(It.products,he.id,he),onBulkUpsertProducts:et,onDeleteProduct:he=>ch(It.products,he)}),o==="FINANCE"&&x.jsx(yce,{accounts:R,transactions:P,daySessions:yt,products:Le,vendors:q,recurringExpenses:X,userProfile:ee,onOpenDay:he=>nn(It.daySessions,te()+je,{date:te(),openingBalance:he,status:"OPEN",branchId:je,id:te()+je}),onCloseDay:he=>nn(It.daySessions,te()+je,{actualClosing:he,status:"CLOSED",branchId:je,id:te()+je}),onAddExpense:he=>nn(It.transactions,`EX-${Date.now()}`,_e({...he,date:te()+"T12:00:00",branchId:je,updatedAt:new Date().toISOString()})),onAddTransfer:he=>nn(It.transactions,`TR-${Date.now()}`,_e({...he,date:te()+"T12:00:00",branchId:je,updatedAt:new Date().toISOString()})),onUpdateTransaction:He,onDeleteTransaction:ot,onAddRecurring:he=>nn(It.recurringExpenses,he.id,he),onDeleteRecurring:he=>ch(It.recurringExpenses,he),onUpsertAccount:he=>nn(It.accounts,he.id,he)}),o==="CUSTOMERS"&&x.jsx(xce,{jumpTarget:h,clearJump:()=>f(null),customers:G,transactions:P,accounts:R,products:g,onUpsertCustomer:he=>nn(It.customers,he.id,he),onReceivePayment:Ye,onUpdateTransaction:He,onDeleteTransaction:ot}),o==="AI_ADVISOR"&&x.jsx(Lme,{transactions:P,products:g,vendors:q,accounts:R,userProfile:ee}),o==="SETTINGS"&&x.jsx(_ce,{userProfile:ee,setUserProfile:he=>nn(It.profile,"main",he),onExport:Be,onImport:ct,syncStatus:"OFFLINE"}),o==="BARCODE_PRINT"&&x.jsx(bce,{products:Le,categories:A}),o==="CHEQUE_PRINT"&&x.jsx(vce,{}),o==="PURCHASES"&&x.jsx(gce,{jumpTarget:h,clearJump:()=>f(null),products:Le,purchaseOrders:U,vendors:q,accounts:R,transactions:P,userProfile:ee,categories:A,onUpsertPO:he=>nn(It.purchaseOrders,he.id,he),onReceivePO:Ce,onUpsertVendor:he=>nn(It.vendors,he.id,he),onUpdateTransaction:He,onDeleteTransaction:ot}),o==="ACCOUNTING"&&x.jsx(Bme,{transactions:P,accounts:R,customers:G,vendors:q,products:g})]})})]}))},ZU=document.getElementById("root");if(!ZU)throw new Error("Root element not found");const Ume=CV.createRoot(ZU);Ume.render(x.jsx(we.StrictMode,{children:x.jsx(jme,{})}));
//# sourceMappingURL=index-DAWO_q3G.js.map
